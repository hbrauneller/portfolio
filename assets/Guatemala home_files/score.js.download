!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r(r.s=112)}([function(e,t){e.exports=function(e,t){return{_dialog:e,_sources:e+"Src",_selected:e+"Sel",_folderContent:e+"FC",_content:e+"Content",_folderList:e+"FL",_albumList:e+"AL",_folder:e+"Folder",_album:e+"Album",_itemGrid:e+"Grid",_navBar:e+"NB",_sort:e+"Sort",_navBarSelect:e+"NBSel",_selectionCount:e+"SelCount",_noSelect:e+"NoSel",_singleSelect:e+"SS",_detail:e+"Detail",_root:e+"Root",_root2:e+"Root2",_xfer:e+"Xfer",_import:e+"Import",_stalled:e+"Stall",_wide:e+"Wide",_narrow:e+"Narrow",_medium:e+"Medium",_touch:e+"Touch",_tile:e+"Tile",_stack:e+"Stack",_stackWithoutCount:e+"StackWithoutCount",_mobileDefaultAlbum:e+"MobileDefaultAlbum",_header:e+"Hdr",_anonymous:e+"Anon",_signin:e+"SI",_signup:e+"SU",_requiresSignin:e+"RS",_pause:e+"Pause",_paused:e+"Paused",_resume:e+"Resume",_sfly:e+"SFLY",_fb:e+"FB",_instagram:e+"IG",_sites:e+"SS",_myComputer:e+"MC",_thisLife:e+"TL",_flickr:e+"FL",_mobiledevice:e+"MD",_2x:e+"2x",_snapSrc:e+"SnapSrc",_snapSrcMenu:e+"SnapSrcMenu",_info:e+"Info",_infoBox:e+"InfoBox",_navBarSelectAllNone:e+"NBSAN",_done:e+"Done",_ok:e+"Ok",_busy:"shrBusy",_empty:"shrEmpty",_open:"shrOpen",_overlay:"shrOverlay",_disabled:"shrDisabled",_error:"shrError",_shrSelected:"shrSelected",_progress:"shrProgress",_progressBar:"shrPB",_move:"dragHandle",_shrResizeH:"shrRH",_shrResizeW:"shrRW",_nonMigrated:e+"NonMigrated",_new:e+"New",_noBB:e+"NoBB",_newPP:e+"newPP",_bin:e+"Bin",_zoom:e+"Zoom",_search:e+"Search",_navbar:e+"NavBar",_sidebar:e+"Sidebar",_inSidebar:e+"InSidebar",_bgToast:t+"BgToast",_bgDetails:t+"BgDetails",_search_wgt:e+"Wgt_search",_arrow:"shrArrow",_arrowS:"shrArrowS",_sidebarOpen:e+"SidebarOpen",_sharesites:e+"InShareSites",_hideLifetouch:t+"HideLifetouch",_end:null}}},function(module,__webpack_exports__,__webpack_require__){"use strict";var eb,Xa,Ya,Za,_a,ab,Lc;Object.extend(Date.prototype,{isToday:function(){return new Date,this>=Date._todayStart&&this<Date._tomorrowStart},toString1:function(){var e,t=new Date;return e=this.getFullYear()!=t.getFullYear()?"uD":"uDNY",this.toDateTimeString(e)},toString2:function(){var e=this;return e.isToday()?e.toDateTimeString("ut"):0==e.getTime()?"":e.toString1()+", "+e.toDateTimeString("ut")},toSeconds:function(){return Math.round(this.getTime()/1e3)},toAbsDateTimeString:function(){return this.dateFormat(Date.absDateTimeFmt)},toDateTimeString:function(e){return e=Date._resolveUserDateTimeFormat(e),this.dateFormat(e)},toCompactTimeString:function(){var e="1"==Date._getUserTimeType()?"g:ia":"G:ia";return this.dateFormat(e)},toAge:function(){var e=this,t=0,r="";return e>=Date._tomorrowStart||(e>=Date._todayStart?(t=2,r=Date.formatAge(e)+" ago"):e>=Date._yesterdayStart?(t=1,r="Yesterday at "+e.toDateTimeString("ut")):e>=Date._fourDaysAgoStart?(t=1,r=e.toDateTimeString("l")+" at "+e.toDateTimeString("ut")):e>=Date._yearStart?r=e.toDateTimeString("uDNY")+" at "+e.toDateTimeString("ut"):e.getTime()<=0||(r=e.toDateTimeString("uD"))),{kind:t,text:r}},toAgeString:function(){return this.toAge().text},roundToNextHalfHour:function(){var e=this.getHours(),t=this.getMinutes();return 0<t&&t<=30?t=30:(t=0,e++),this.setHours(e,t,0,0),this},addDays:function(e){return this.setDate(this.getDate()+e),this},addMonths:function(e){return this.setMonth(this.getMonth()+e),this},addYears:function(e){return this.setFullYear(this.getFullYear()+e),this},addTime:function(e,t,r){var n=Date;return new Date(this.getTime()+(e||0)*n._msPerHour+(t||0)*n._msPerMinute+(r||0)*n._msPerSecond)},addMinutes:function(e){return this.setMinutes(this.getMinutes()+e),this},addHours:function(e){return this.setHours(this.getHours()+e),this},between:function(e,t){return e<this&&this<t}}),Shr.TimeSpan=function(e){var t=e.getTime(),r=e.getTime(),n=Math.floor(t/6048e5);t-=6048e5*n;var o=Math.floor(t/864e5);t-=864e5*o;var i=Math.floor(t/36e5);t-=36e5*i;var s=Math.floor(t/6e4);t-=6e4*s;var a=Math.floor(t/1e3);t-=1e3*a,this.getDate=function(){return e},this.getWeeks=function(){return n},this.getDays=function(){return o},this.getHours=function(){return i},this.getMinutes=function(){return s},this.getSeconds=function(){return a},this.getTotalDays=function(){return this.getTotalHours()/24},this.getTotalHours=function(){return r/36e5},this.getTotalMinutes=function(){return r/6e4},this.getTotalSeconds=function(){return r/1e3},this.getTotalMilliseconds=function(){return r},this.greaterThan=function(e){return 1==this.compare(e)},this.compare=function(e){var t=r-e.getTotalMilliseconds();return 0<t?1:t<0?-1:0}},Object.extend(Shr.TimeSpan,{FromDate:function(e){return new Shr.TimeSpan(e)},FromDays:function(e){var t=new Date;return t.setTime(24*e*60*60*1e3),new Shr.TimeSpan(t)}}),Xa=Date,Ya=Shr.EventHandler,Za=Shr.TimerPool,Shr.StringEx,_a=Shr.L,ab=Shr.TimeSpan,Object.extend(Xa,{U:{},absDateTimeFmt:"Ymd\\THis",dayChanged:new Ya,_msPerSecond:1e3,_msPerMinute:6e4,_msPerHour:36e5,_msPerDay:864e5,init:function(e){Xa.U=e;var t=new Date;Xa._onDayChanged(t),Za.m1.add(Xa._onTimer)},minDate:(eb=new Date(0),eb.setHours(0,0,0,0),eb),_onDayChanged:function(e){Xa._currentDay=e.getDate(),Xa._currentMonth=e.getMonth(),Xa._currentYear=e.getFullYear();var t=new Date(e);t.setHours(0,0,0,0);var r=t.getTime();Xa._todayStart=new Date(t),Xa._tomorrowStart=new Date(r+Xa._msPerDay),Xa._yesterdayStart=new Date(r-Xa._msPerDay),Xa._fourDaysAgoStart=new Date(r-4*Xa._msPerDay),t.setMonth(0,1),Xa._yearStart=t,Xa.dayChanged.raise(e)},_onTimer:function(e){e>=Xa._tomorrowStart&&Xa._onDayChanged(e)},fromSeconds:function(e){return e&&0!=e?new Date(1e3*e):null},getUTC:function(e){var t=e;return t=new Date,new Date,new Date(Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCSeconds(),t.getUTCMilliseconds()))},subtract:function(e,t){var r=new Date;return r.setTime(Math.abs(e.getTime()-t.getTime())),new ab(r)},fromAbsDateTimeString:function(e){return _a.isString(e)?Xa.parseDate(e,Xa.absDateTimeFmt):null},fromDateTimeString:function(e,t){return t=Xa._resolveUserDateTimeFormat(t),Xa.parseDate(e,t)},fromRFC3339:function(e,t){var r,n,o,i=1,s=e.split("T"),a=s[0].split("-"),l=s[1].split(":"),c=l[l.length-1];"Z"==c.charAt(c.length-1)?(r=0,l[l.length-1]=c.substr(0,c.length-2)):(i=-1!=c[c.length-1].indexOf("+")?(n="+",1):(n="-",-1),o=c.split(n),l[l.length-1],o[0],r=60*(r=60*(o=o[1].split(":"))[0]+o[1])*1e3);var d=new Date;return t?d.setTime(new Date(a[0],a[1]-1,a[2],l[0],l[1],l[2])+r*i):d.setTime(Date.UTC(a[0],a[1]-1,a[2],l[0],l[1],l[2])+r*i),d},formatAge:function(e,t,r){r=r||!1,t=t||new Date;var n=e.getTime();if(n<=0)return"";var o=t.getTime()-n;r&&(o*=-1);var i=Math.round(o/6e4);if(i<=0)return"0 minutes";if(1==i)return"1 minute";if(i<60)return i+" minutes";var s=Math.round(i/60);if(1==s)return"1 hour";if(s<24)return s+" hours";var a=Math.round(s/24);return 1==a?"1 day":a<365?a+" days":Math.round(a/365).toCount("year")},formatDuration:function(e){var t="0:00";if(e){e=parseInt(e);var r=Math.floor(e/3600),n=Math.floor(e%3600/60),o=e%3600%60;t=0<r?r+":":(0<n?n:"0")+":",t+=10<=o?o:0<o?"0"+o:"00"}return t},_resolveUserDateTimeFormat:function(e){var t=Xa._getUserDateType(),r=Xa._getUserTimeType();switch(e){case"ud":return Xa._datePatterns[t]._shortPattern;case"uDM":return Xa._datePatterns[t]._mediumPattern;case"uDMd":return Xa._datePatterns[t]._mediumFullPattern;case"uD":return Xa._datePatterns[t]._longPattern;case"uDNY":return Xa._datePatterns[t]._monthDayPattern;case"uDF":return Xa._datePatterns[t]._fullPattern;case"uDFNY":return Xa._datePatterns[t]._fullNoYrPattern;case"ut":return Xa._timePatterns[r]._shortPattern;case"uT":return Xa._timePatterns[r]._longPattern;case"uf":return Xa._resolveUserDateTimeFormat("uD")+" "+Xa._resolveUserDateTimeFormat("ut");case"uFM":return Xa._resolveUserDateTimeFormat("uDM")+" "+Xa._resolveUserDateTimeFormat("ut");case"uF":return Xa._resolveUserDateTimeFormat("uD")+" "+Xa._resolveUserDateTimeFormat("uT");case"ug":return Xa._resolveUserDateTimeFormat("ud")+" "+Xa._resolveUserDateTimeFormat("ut");case"uG":return Xa._resolveUserDateTimeFormat("ud")+" "+Xa._resolveUserDateTimeFormat("uT");default:return e}},_getUserTimeType:function(){var e="1";return!Xa.U.timeFormat||"1"!=Xa.U.timeFormat&&"2"!=Xa.U.timeFormat||(e=Xa.U.timeFormat),e},_getUserDateType:function(){var e="m";return!Xa.U.dateFormat||"d"!=Xa.U.dateFormat&&"m"!=Xa.U.dateFormat&&"y"!=Xa.U.dateFormat||(e=Xa.U.dateFormat),e},_timePatterns:{1:{_shortPattern:"g:ia",_longPattern:"g:i:s a"},2:{_shortPattern:"H:i",_longPattern:"H:i:s"}},_datePatterns:{m:{_shortPattern:"n/j/Y",_mediumPattern:"M j, Y",_mediumFullPattern:"M j, Y (D)",_longPattern:"F j, Y",_monthDayPattern:"F j",_fullPattern:"l, F j, Y",_fullNoYrPattern:"l, F j"},d:{_shortPattern:"d/m/Y",_mediumPattern:"j M, Y",_mediumFullPattern:"j M, Y (D)",_longPattern:"j F, Y",_monthDayPattern:"j F",_fullPattern:"l, j F, Y",_fullNoYrPattern:"l, F j"},y:{_shortPattern:"Y.m.d",_mediumPattern:"M j, Y",_mediumFullPattern:"M j, Y (D)",_longPattern:"F j, Y",_monthDayPattern:"j F",_fullPattern:"l, j F, Y",_fullNoYrPattern:"l, F j"}}}),function(){var t=Date,L=Shr.L,StringEx=Shr.StringEx;Object.extend(t,{parseFunctions:{count:0},parseRegexes:[],formatFunctions:{count:0},createNewFormat:function createNewFormat(format){t.formatFunctions.count++;var funcName="format"+t.formatFunctions.count;t.formatFunctions[format]=funcName;for(var code="Date.prototype."+funcName+" = function(){return ",special=!1,ch="",i=0;i<format.length;++i)ch=format.charAt(i),special||"\\"!=ch?special?(special=!1,code+="'"+StringEx.escape(ch)+"' + "):code+=t.getFormatCode(ch):special=!0;eval(code.substring(0,code.length-3)+";}")},getFormatCode:function(e){switch(e){case"d":return"StringEx.leftPad(this.getDate(), 2, '0') + ";case"D":return"Date.dayNames[this.getDay()].substring(0, 3) + ";case"j":return"this.getDate() + ";case"l":return"Date.dayNames[this.getDay()] + ";case"S":return"this.getSuffix() + ";case"w":return"this.getDay() + ";case"z":return"this.getDayNumberOfYear() + ";case"W":return"this.getWeekOfYear() + ";case"F":return"Date.monthNames[this.getMonth()] + ";case"m":return"StringEx.leftPad(this.getMonth() + 1, 2, '0') + ";case"M":return"Date.monthNames[this.getMonth()].substring(0, 3) + ";case"n":return"(this.getMonth() + 1) + ";case"t":return"this.getDaysInMonth() + ";case"L":return"(this.isLeapYear() ? 1 : 0) + ";case"Y":return"this.getFullYear() + ";case"y":return"('' + this.getFullYear()).substring(2, 4) + ";case"a":return"(this.getHours() < 12 ? 'am' : 'pm') + ";case"A":return"(this.getHours() < 12 ? 'AM' : 'PM') + ";case"g":return"((this.getHours() %12) ? this.getHours() % 12 : 12) + ";case"G":return"this.getHours() + ";case"h":return"StringEx.leftPad((this.getHours() %12) ? this.getHours() % 12 : 12, 2, '0') + ";case"H":return"StringEx.leftPad(this.getHours(), 2, '0') + ";case"i":return"StringEx.leftPad(this.getMinutes(), 2, '0') + ";case"s":return"StringEx.leftPad(this.getSeconds(), 2, '0') + ";case"O":return"this.getGMTOffset() + ";case"T":return"this.getTimezone() + ";case"Z":return"(this.getTimezoneOffset() * -60) + ";default:return"'"+StringEx.escape(e)+"' + "}},parseDate:function(e,r){null==t.parseFunctions[r]&&t.createParser(r);var n=t.parseFunctions[r];return t[n](e)},createParser:function createParser(format){t.parseFunctions.count++;var funcName="parse"+t.parseFunctions.count,regexNum=t.parseRegexes.length,currentGroup=1;t.parseFunctions[format]=funcName;for(var code="Date."+funcName+" = function(input){\nvar y = -1, m = -1, d = -1, h = -1, i = -1, s = -1;\nvar d = new Date();\ny = d.getFullYear();\nm = d.getMonth();\nd = d.getDate();\nvar results = input.match(Date.parseRegexes["+regexNum+"]);\nif (results && results.length > 0) {",regex="",special=!1,ch="",i=0;i<format.length;++i)if(ch=format.charAt(i),special||"\\"!=ch)if(special)special=!1,regex+=StringEx.escape(ch);else{var obj=t.formatCodeToRegex(ch,currentGroup);currentGroup+=obj.g,regex+=obj.s,obj.g&&obj.c&&(code+=obj.c)}else special=!0;code+="if (m >= 0 && m <= 11 && d >= 1 && d <= 31) {if (y > 0 && m >= 0 && d > 0 && h >= 0 && i >= 0 && s >= 0)\n{return new Date(y, m, d, h, i, s);}\nelse if (y > 0 && m >= 0 && d > 0 && h >= 0 && i >= 0)\n{return new Date(y, m, d, h, i);}\nelse if (y > 0 && m >= 0 && d > 0 && h >= 0)\n{return new Date(y, m, d, h);}\nelse if (y > 0 && m >= 0 && d > 0)\n{return new Date(y, m, d);}\nelse if (y > 0 && m >= 0)\n{return new Date(y, m);}\nelse if (y > 0)\n{return new Date(y);}\n} } return null;};",Date.parseRegexes[regexNum]=new RegExp("^"+regex+"$"),eval(code)},formatCodeToRegex:function(e,t){switch(e){case"D":return{g:0,c:null,s:"(?:Sun|Mon|Tue|Wed|Thu|Fri|Sat)"};case"j":case"d":return{g:1,c:"d = parseInt(results["+t+"], 10);\n",s:"(\\d{1,2})"};case"l":return{g:0,c:null,s:"(?:"+Date.dayNames.join("|")+")"};case"S":return{g:0,c:null,s:"(?:st|nd|rd|th)"};case"w":return{g:0,c:null,s:"\\d"};case"z":return{g:0,c:null,s:"(?:\\d{1,3})"};case"W":return{g:0,c:null,s:"(?:\\d{2})"};case"F":return{g:1,c:"m = parseInt(Date.monthNumbers[results["+t+"].substring(0, 3)], 10);\n",s:"("+Date.monthNames.join("|")+")"};case"M":return{g:1,c:"m = parseInt(Date.monthNumbers[results["+t+"]], 10);\n",s:"(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)"};case"n":case"m":return{g:1,c:"m = parseInt(results["+t+"], 10) - 1;\n",s:"(\\d{1,2})"};case"t":return{g:0,c:null,s:"\\d{1,2}"};case"L":return{g:0,c:null,s:"(?:1|0)"};case"Y":return{g:1,c:"y = parseInt(results["+t+"], 10);\n",s:"(\\d{4})"};case"y":return{g:1,c:"var ty = parseInt(results["+t+"], 10);\ny = ty > Date.y2kYear ? 1900 + ty : 2000 + ty;\n",s:"(\\d{1,2})"};case"a":return{g:1,c:"if (results["+t+"] == 'am') {\nif (h == 12) { h = 0; }\n} else { if (h < 12) { h += 12; }}",s:"(am|pm)"};case"A":return{g:1,c:"if (results["+t+"] == 'AM') {\nif (h == 12) { h = 0; }\n} else { if (h < 12) { h += 12; }}",s:"(AM|PM)"};case"g":case"G":case"h":case"H":return{g:1,c:"h = parseInt(results["+t+"], 10);\n",s:"(\\d{1,2})"};case"i":return{g:1,c:"i = parseInt(results["+t+"], 10);\n",s:"(\\d{2})"};case"s":return{g:1,c:"s = parseInt(results["+t+"], 10);\n",s:"(\\d{2})"};case"O":return{g:0,c:null,s:"[+-]\\d{4}"};case"T":return{g:0,c:null,s:"[A-Z]{3}"};case"Z":return{g:0,c:null,s:"[+-]\\d{1,5}"};default:return{g:0,c:null,s:StringEx.escape(e)}}},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],tinyDayNames:["SU","MO","TU","WE","TH","FR","SA"],y2kYear:49,monthNumbers:{Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11},formatStartEndDate:function(e,t,r,n,o,i){if(!e.start||!e.end)return"";t=!L.isUndefined(t)&&t,r=!L.isUndefined(r)&&r;var s,a=Date.fromAbsDateTimeString(e.start),l=Date.fromAbsDateTimeString(e.end),c=e.section,d=e.nodeType;s="sheet"!=d&&"game"!=d?"<br/>":" ",i=i||"ut",o=o||"uDM";var h=a.getDate()==l.getDate(),u=e.isAllDay,p=a.toDateTimeString(o),m=t||h?" to ":s+"to ";u||(p+=s+a.toDateTimeString(i));var g=c&&"ListNarrow"==c.lid,f="";if(n&&e.arrivalTime&&!u){var _=Date.fromAbsDateTimeString(e.start);_=new Date(_).addMinutes(-e.arrivalTime),f="<br/><span class='cal-arrival-time'>(Arrive: ${0})</span>".substitute([g?_.toCompactTimeString():_.toDateTimeString(i)])}if(r||u&&h)return p+f;var S=h?"":l.toDateTimeString(o);return S+=u||h||"sheet"==d?" ":", ",u||(S+=l.toDateTimeString(i)),p+m+S+f}})}(),Lc=Shr.StringEx,Object.extend(Date.prototype,{dateFormat:function(e){return null==Date.formatFunctions[e]&&Date.createNewFormat(e),this[Date.formatFunctions[e]]()},getTimezone:function(){return this.toString().replace(/^.*? ([A-Z]{3}) [0-9]{4}.*$/,"$1").replace(/^.*?\(([A-Z])[a-z]+ ([A-Z])[a-z]+ ([A-Z])[a-z]+\)$/,"$1$2$3")},getGMTOffset:function(){return(0<this.getTimezoneOffset()?"-":"+")+Lc.leftPad(Math.floor(this.getTimezoneOffset()/60),2,"0")+Lc.leftPad(this.getTimezoneOffset()%60,2,"0")},getDayNumberOfYear:function(){var e=0;Date.daysInMonth[1]=this.isLeapYear()?29:28;for(var t=0;t<this.getMonth();++t)e+=Date.daysInMonth[t];return e+this.getDate()-1},getWeekOfYear:function(){var e=this.getDayNumberOfYear()+(4-this.getDay()),t=7-new Date(this.getFullYear(),0,1).getDay()+4;return Lc.leftPad((e-t)/7+1,2,"0")},isLeapYear:function(){var e=this.getFullYear();return 0==(3&e)&&(e%100||e%400==0&&e)},getFirstDayOfMonth:function(){var e=(this.getDay()-(this.getDate()-1))%7;return e<0?e+7:e},getLastDayOfMonth:function(){var e=(this.getDay()+(Date.daysInMonth[this.getMonth()]-this.getDate()))%7;return e<0?e+7:e},getDaysInMonth:function(){return Date.daysInMonth[1]=this.isLeapYear()?29:28,Date.daysInMonth[this.getMonth()]},getSuffix:function(){switch(this.getDate()){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}}}),Date.now||(Date.now=function(){return(new Date).getTime()}),__webpack_exports__.a=Date},function(e,t,r){"use strict";var n=r(6);function o(){}var i=null,s={};function a(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("Promise constructor's argument is not a function");this._h=0,this._i=0,this._j=null,this._k=null,e!==o&&p(e,this)}function l(e,t){for(;3===e._i;)e=e._j;if(a._l&&a._l(e),0===e._i)return 0===e._h?(e._h=1,void(e._k=t)):1===e._h?(e._h=2,void(e._k=[e._k,t])):void e._k.push(t);var r,o;r=e,o=t,n(function(){var e=1===r._i?o.onFulfilled:o.onRejected;if(null!==e){var t=function(e,t){try{return e(t)}catch(e){return i=e,s}}(e,r._j);t===s?d(o.promise,i):c(o.promise,t)}else 1===r._i?c(o.promise,r._j):d(o.promise,r._j)})}function c(e,t){if(t===e)return d(e,new TypeError("A promise cannot be resolved with itself."));if(t&&("object"==typeof t||"function"==typeof t)){var r=function(e){try{return e.then}catch(e){return i=e,s}}(t);if(r===s)return d(e,i);if(r===e.then&&t instanceof a)return e._i=3,e._j=t,void h(e);if("function"==typeof r)return void p(r.bind(t),e)}e._i=1,e._j=t,h(e)}function d(e,t){e._i=2,e._j=t,a._m&&a._m(e,t),h(e)}function h(e){if(1===e._h&&(l(e,e._k),e._k=null),2===e._h){for(var t=0;t<e._k.length;t++)l(e,e._k[t]);e._k=null}}function u(e,t,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=r}function p(e,t){var r=!1,n=function(e,t,r){try{e(t,r)}catch(e){return i=e,s}}(e,function(e){r||(r=!0,c(t,e))},function(e){r||(r=!0,d(t,e))});r||n!==s||(r=!0,d(t,i))}(e.exports=a)._l=null,a._m=null,a._n=o,a.prototype.then=function(e,t){if(this.constructor!==a)return n=e,i=t,new(r=this).constructor(function(e,t){var s=new a(o);s.then(e,t),l(r,new u(n,i,s))});var r,n,i,s=new a(o);return l(this,new u(e,t,s)),s}},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){"use strict";e.exports=r(72)},function(e,t,r){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var n=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(e){n[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var r,s,a=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),l=1;l<arguments.length;l++){for(var c in r=Object(arguments[l]))o.call(r,c)&&(a[c]=r[c]);if(n){s=n(r);for(var d=0;d<s.length;d++)i.call(r,s[d])&&(a[s[d]]=r[s[d]])}}return a}},function(e,t,r){"use strict";(function(t){function r(e){o.length||n(),o[o.length]=e}e.exports=r;var n,o=[],i=0;function s(){for(;i<o.length;){var e=i;if(i+=1,o[e].call(),1024<i){for(var t=0,r=o.length-i;t<r;t++)o[t]=o[t+i];o.length-=i,i=0}}o.length=0,i=0}var a,l,c,d=void 0!==t?t:self,h=d.MutationObserver||d.WebKitMutationObserver;function u(e){return function(){var t=setTimeout(n,0),r=setInterval(n,50);function n(){clearTimeout(t),clearInterval(r),e()}}}n="function"==typeof h?(a=1,l=new h(s),c=document.createTextNode(""),l.observe(c,{characterData:!0}),function(){a=-a,c.data=a}):u(s),r.requestFlush=n,r.makeRequestCallFromTimer=u}).call(this,r(3))},function(e,t){var r=Shr.Dialogs.UniversalPicker;e.exports=function(){return function(){var e=window.Element;if(!(document.documentElement.dataset||Object.getOwnPropertyDescriptor(e.prototype,"dataset")&&Object.getOwnPropertyDescriptor(e.prototype,"dataset").get)){var t={enumerable:!0,get:function(){"use strict";var e,t,r,n,o,i,s=this.attributes,a=s.length,l=function(e){return e.charAt(1).toUpperCase()},c=function(){return this},d=function(e,t){return void 0!==t?this.setAttribute(e,t):this.removeAttribute(e)};try{({}).__defineGetter__("test",function(){}),t={}}catch(e){t=document.createElement("div")}for(e=0;e<a;e++)if((i=s[e])&&i.name&&/^data-\w[\w\-]*$/.test(i.name)){r=i.value,o=(n=i.name).substr(5).replace(/-./g,l);try{Object.defineProperty(t,o,{enumerable:this.enumerable,get:c.bind(r||""),set:d.bind(this,n)})}catch(e){t[o]=r}}return t}};try{Object.defineProperty(e.prototype,"dataset",t)}catch(r){t.enumerable=!1,Object.defineProperty(e.prototype,"dataset",t)}}}(),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),r=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var n=arguments[1],o=0;o<r;){var i=t[o];if(e.call(n,i,o,t))return i;o++}}}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),r=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var n=arguments[1],o=0;o<r;){var i=t[o];if(e.call(n,i,o,t))return o;o++}return-1}}),{_formatElapsedTime:function(e,t){return 100*Math.round((t||Date.now())-e)/100/1e3+" sec"},localStorage:{getItem:function(){var e=null;try{e=window.localStorage.getItem.apply(window.localStorage,arguments)}catch(e){}return e},setItem:function(){var e=void 0;try{e=window.localStorage.setItem.apply(window.localStorage,arguments)}catch(e){}return e},removeItem:function(){var e=void 0;try{e=window.localStorage.removeItem.apply(window.localStorage,arguments)}catch(e){}return e}},_toScriptUrlList:function(e){var t=[];return Shr.L.forEach(e,function(e){var n,o=Object.get(e)||e;"string"==typeof o&&(n=r._utilities.localStorage.getItem(e)||"",t.push(n||o))}),t},_getResolution:function(e,t,r,n){var o,i=t,s=r||t,a=e&&(e.aspectRatio||e.width&&e.height&&e.width/e.height)||1,l=1<a;return Shr.L.forEach({"x-small":100,small:315,medium:720,large:1600,"x-large":2048},function(e,t){var r=i<=(l?e*a:e),c=s<=(1<a?e:e/a);return(n?r&&c:r||c)&&(o=t),!o}),o||"x-large"}}}},function(e,t){var r={};r.hexTable=new Array(256);for(var n=0;n<256;++n)r.hexTable[n]="%"+((n<16?"0":"")+n.toString(16)).toUpperCase();t.arrayToObject=function(e){for(var t=Object.create(null),r=0,n=e.length;r<n;++r)void 0!==e[r]&&(t[r]=e[r]);return t},t.merge=function(e,r){if(!r)return e;if("object"!=typeof r)return Array.isArray(e)?e.push(r):"object"==typeof e?e[r]=!0:e=[e,r],e;if("object"!=typeof e)return[e].concat(r);Array.isArray(e)&&!Array.isArray(r)&&(e=t.arrayToObject(e));for(var n=Object.keys(r),o=0,i=n.length;o<i;++o){var s=n[o],a=r[s];e[s]?e[s]=t.merge(e[s],a):e[s]=a}return e},t.decode=function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}},t.encode=function(e){if(0===e.length)return e;"string"!=typeof e&&(e=""+e);for(var t="",n=0,o=e.length;n<o;++n){var i=e.charCodeAt(n);45===i||46===i||95===i||126===i||48<=i&&i<=57||65<=i&&i<=90||97<=i&&i<=122?t+=e[n]:i<128?t+=r.hexTable[i]:i<2048?t+=r.hexTable[192|i>>6]+r.hexTable[128|63&i]:i<55296||57344<=i?t+=r.hexTable[224|i>>12]+r.hexTable[128|i>>6&63]+r.hexTable[128|63&i]:(++n,i=65536+((1023&i)<<10|1023&e.charCodeAt(n)),t+=r.hexTable[240|i>>18]+r.hexTable[128|i>>12&63]+r.hexTable[128|i>>6&63]+r.hexTable[128|63&i])}return t},t.compact=function(e,r){if("object"!=typeof e||null===e)return e;var n=(r=r||[]).indexOf(e);if(-1!==n)return r[n];if(r.push(e),Array.isArray(e)){for(var o=[],i=0,s=e.length;i<s;++i)void 0!==e[i]&&o.push(e[i]);return o}var a=Object.keys(e);for(i=0,s=a.length;i<s;++i){var l=a[i];e[l]=t.compact(e[l],r)}return e},t.isRegExp=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},t.isBuffer=function(e){return null!=e&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}},function(e,t,r){"use strict";r.r(t),r(10),r(20),r(21),r(22),r(23),r(24),r(25),r(26),r(30),r(7),r(49),r(50),r(51),r(52),r(53),r(54),r(55),r(56),r(57),r(58),r(59),r(60),r(61),r(62),r(63),r(64),r(65),r(66),r(67),r(68),r(69),r(70),r(71),r(81),r(82),r(83),r(84),r(85),r(86),r(87),r(88),r(89),r(90),r(91),r(92),r(93),r(94),r(95),r(96),r(97),r(98),r(99),r(100),r(101),r(102),r(103),r(104),r(105),r(106),r(107),r(108),r(109),r(110)},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}try{window.trUPP=window.trUPP||{},window.trUPP.Promise=r(11),Shr.ScriptManager.throwIfOverridden&&Shr.ScriptManager.throwIfOverridden("Shr.Dialogs.UniversalPicker"),Shr.Dialogs.UniversalPicker=function(){!function(){var e,t=window.navigator.userAgent;try{Shr.B.isSafari=-1!=t.indexOf("Safari")&&-1==t.indexOf("Chrome"),Shr.B.isIE=!!t.match(/Trident/g)||!!t.match(/MSIE/g),Shr.B.isIE?(e=t.match(/MSIE\s([\d]+)/)||t.match(/rv:([\d]+)/),Shr.B.ieVersion=e&&e[1]?e[1]:""):Shr.B.ieVersion=""}catch(e){Console.write("Exception fixing Shr.B: "+e.message)}}(),Shr.Score&&(window.trUPP=window.trUPP||{},window.trUPP.version=Shr.Score.trUPP&&Shr.Score.trUPP.version),Shr.U&&(Shr.U.getIdToken=function(){return new window.trUPP.Promise(function(e,t){window.$sflyAuth?(Shr.U.useNewAuth=!0,window.$sflyAuth.getIdToken().then(function(t){e(t.jwtToken)}).catch(function(t){e(void 0)})):(Shr.U.useNewAuth=!1,Shr.U.oauthToken?e(Shr.U.oauthToken):e(void 0))})});var e,t,o,i,s,a,l,c,d,h,u,p,m,g,f,_={id:"UniversalPicker",version:function(){var e=0;try{e=(Shr.Dialogs.UniversalPicker||"").split("/").pop().replace(/\.js$/,"")}catch(e){}return e}(),superfly:!0},S="shrUP",b={_keyframes:{_selectionCount:S+"KFSelCount"},_end:null},y=r(0)(S,"trUPP"),P=r(7)();return Shr.DURL,Object.extend(_,{_newKpiMetrics:!0,_logsmithKPIMetricProps:{},_populateKPIMetricProps:function(e){for(var t in e)_._logsmithKPIMetricProps[t]=e[t]}}),_._utilities=P,_.L10N={},_._L10N={sources:"Get Photos",photo:"photo",all:"All",selected:"Selected Photos",done:"Add",ok:"Ok",cancel:"Cancel",back:"Back",retry:"Try again",pending:"Loading...",emptyFolder:"This folder is empty.",emptyAlbum:"This album is empty.",emptySelection:"Nothing selected",authRequired:"You must be signed in to access these pictures.",detailTitle:"${0} of ${1}",album:"album",folder:"folder",context:{upload:{done:"Upload"}},root2:{title:"Get Photos",option1:{button:"Upload",text:"Add from your ${0}",device:"device",computer:"computer"},option2:{button:"Sign in",text:"Connect to your services"}},onboarding:{tl_migrated:"ThisLife is now Shutterfly Photos",tl_migrated_tagline:"All your folders and albums in one place.",got_it:"GOT IT!"},sortBy:"Sort by",sortChoices:{titleAtoZ:"Title (A-Z)",titleZtoA:"Title (Z-A)"},feedback:{text:"Send us your feedback",url:"https://shutterfly.allegiancetech.com/cgi-bin/qwebcorporate.dll?idx=UJJ3FE&UID=${0}&Reported_URL=upp.shutterfly.com"},select:{label:"Select:",all:"All",none:"None"},importing:{title:"Importing photos",text:"Your ${0} ${1} being imported...",itemName:"photo",verb:{singular:"is",plural:"are"},pause:"Pause",resume:"Resume",cancel:"Cancel",error:{title:"Problems Importing Photos",text:"Sorry, we were unable to import ${0}&nbsp;of&nbsp;${1} photos.",retry:"Retry",skip:"Skip these photos"},tooltip:{generic:"Error uploading/importing this photo. status=${0} errorCode=${1}.",cancelled:"Upload cancelled.",417:{1019:"Photo is corrupted."},400:{1023:"Photo not fully uploaded. Please make sure your storage device (camera, SD card, etc.) is connected and you have internet connection.",1027:"Photo filetype not supported.  Please make sure your photo is a JPEG in the RGB color space.",1028:"Photo is missing. Please make sure your storage device (camera, SD card, etc.) is connected and you have internet connection.",1029:"Photo not fully uploaded. Please make sure your storage device (camera, SD card, etc.) is connected and you have internet connection."},0:"No server response.  Please make sure you have internet connection.","-300":"Error reading your file. Please make sure your storage device (camera, SD card, etc.) is connected and you have internet connection.","-100":"Upload timeout. Please make sure your storage device (camera, SD card, etc.) is connected and you have internet connection.","-101":"Upload timeout. Please make sure your storage device (camera, SD card, etc.) is connected and you have internet connection.","-102":"Upload timeout. Please make sure your storage device (camera, SD card, etc.) is connected and you have internet connection."}},retrying:{text:"Retrying ${0}...",itemName:"photo",verb:{singular:"is",plural:"are"},error:{text:"Sorry, we were unable to import ${0} of ${1} photos."}},xfer:{title:"Adding photos",text:"Copying photos ${0} of ${1} to Shutterfly",error:{title:"Error Adding Photos",sorry:"We're sorry",text:"We were only able to copy ${0} of your ${1} selected photos.  You can either retry adding all your photos, or go to your project with the ${0} available photos.",textNoPics:"We were unable to transfer your selected photos. Please go back to your project and try again.",textNoRetry:"We were only able to copy ${0} of your ${1} selected photos.",goToProject:"Go to project",retry:"Try again"},stalled:{heading:"Copying photos is taking longer than expected.",itemName:"photo",text:"You can continue trying to transfer all of them, or, go to your project with the ${0} already added.",retry:"Keep waiting",giveUp:"Go to project"}},error:{sorry:"We're sorry",text:"We were unable to get ${0}."},cannotAdd:{title:"Can't add more photos.",text:{mobile:"To make more room, go to the desktop version of our website and remove some photos from your project.",desktop:"To make more room, remove some previously selected photos from your project."}},tooMany:{title:"Select fewer photos",itemName:"more photo",text:"A maximum of ${0} photos can be uploaded at a time."},noSink:{text:"Sorry; you currently can't select photos from ${0}.",title:"Can't select this photo"},upload:{myAlbums:"My Albums",mobileUploads:"Mobile Uploads",albumName:"Y-m-d"},typeError:{title:"Unsupported File Type",text:"We were unable to select the following files because they are not supported by Shutterfly.${0}"},sizeError:{title:"Files Too Large",text:"We were unable to select the following files because they are too large; Shutterfly only allows files up to 10MB.${0}"},cancelConfirm:{title:"Cancel Import",text:"Are you sure you want to cancel? None of your selected photos will be added to your project.",ok:"Ok",cancel:"Cancel"},navigateWarning:{text:"Photo imports are still in progress.  If you reload or leave this page, then some photos will not be imported."},title:"Get Photos",signin:{signin:"Sign in",signup:"Sign up",header:"<strong tabindex='200'>Sign in</strong> to Shutterfly to get photos from all sources.",signinTitle:"Sign in to Shutterfly",signinButton:"Sign in",signinForgotPW:"Forgot password?",signinError:"Unable to sign in to Shutterfly.  Please try again.",signinSwitch:"Don't have an account?",signupTitle:"Sign up for Shutterfly",signupButton:"Sign up",signupSwitch:"Already a member?",signupEmailMe:"Send me special offers and info.",signupError:"Unable to sign in to Shutterfly.  Please try again.",Email:"Email",confirmEmail:"Confirm Email",Password:"Password",firstName:"First name",lastName:"Last name",signupPassword:"Password (6-10 characters - no spaces)",confirmPassword:"Confirm password",siContext:"Sign in to connect with other services"},fb:{connecting:"Connecting to Facebook..."},flickr:{connecting:"Connecting to Flickr..."},widgets:{newpp_bin:{},newpp_navbar:{},newpp_sidebar:{},newpp_zoom:{},newpp_content:{}},iOS8Bug:"Due to a bug in Safari on iOS 8.0, we cannot upload pictures from your device.<br/><br/>Please upgrade to the latest version of iOS and try again.",_end:null},Object.extend(_,{context:{},tla:S,mobileFirst:!0,newDlg:!0,newDlgButtons:!0,whiteBackground:!0,newDlgTitle:!0,colspan:6,trUPPDlgEnabled:function(){return window.trUPP&&window.trUPP.Feature&&window.trUPP.Feature.Dialog},getTitle:function(e){return _._formatDialogTitle(e).localize({L10N:_.L10N,context:e||_.context})},bgMask:"#464646",isOpen:!1,_isLoaded:!1,onLoad:function(e,t){var r,n,o=document.getElementById(_._dlgId);if(_.isOpen=!0,_.View.start(),_.newBgUpload&&window.trUPP.bgHelper.init(_._getUppExt(),t.bgActions||{}),_._root.init(t),_._root.getContents(),new _.View.Event("open"),function(){var r;try{(r=e.querySelector("#dlg-${0}-target".substitute([t.did])))&&(r.style.display="none")}catch(r){}}(),function(){try{Shr.Dom.centerInWindow("dlg-${0}-frame".substitute([t.did]))}catch(e){}}(),Shr.ClassToggle.toggle(o,y._hideLifetouch,!0),!_._isLoaded){_._isLoaded=!0,Shr.Event.addEventListener(window,"unload",function(e){_._unloading=!0,_._logsmithSave(),_._saveStats()});try{r=_._utilities.localStorage.getItem(_._uppStatsItemName),n=_._utilities.localStorage.getItem(_._logsmithSavedMetricsItemName),r=r&&window.JSON.parse(r),n=n&&window.JSON.parse(n),r&&r.length&&Shr.L.forEach(r,function(e){_._logStats(e,n)}),n&&n.metrics&&n.metrics.length&&(n.metrics.push(_._logsmithMetric(_._logsmithMetricName("onLoad"),n.metrics.length,"count")),_._SflyAjax.sendAjaxRequest({url:_._logsmithUrl,method:"POST",args:window.JSON.stringify(n),contentType:"application/json"},function(){}))}catch(r){window&&window.trUPP&&window.trUPP.Timing&&window.trUPP.Timing.recordInfo("upp_exception",{ex_message:r.message,ex_stack:r.stack})}finally{_._utilities.localStorage.removeItem(_._logsmithSavedMetricsItemName),_._utilities.localStorage.removeItem(_._uppStatsItemName)}"prod"!=Shr.AS.getEnv()&&_._startOptimizely()}!Shr.B.isTouch&&e&&(!Shr.B.isIE||9<=Shr.B.ieVersion)?Shr.L.forEach(["n","nw","w","sw","s","se","e","ne"],function(t){Shr.Dom.create("div",e,{className:"dragHandle",dragtype:"Resize",sizetype:t})}):Shr.Dom.create("div",e,{className:"dragHandle",dragtype:"Resize",sizetype:"se"}),function(){try{var e=document.body.querySelector("#dlg-"+_.context.did+"-formbody");e&&e.removeAttribute("onkeydown")}catch(e){}}()},noCloseBox:!0,renderContent:function(e,t){if(_.isOpen)t.renderError=!0;else{if(Shr.Score)_._signin=_.trUPPDlgEnabled()?window.trUPP&&window.trUPP.SignIn:_._signin_old,_._signup=_.trUPPDlgEnabled()?window.trUPP&&window.trUPP.SignUp:null;else{if(!window.trUPP||!window.trUPP.version)return _._SflyAjax.sendAjaxRequest({url:["https:/",Shr.AS.www,"trupp","version-uuid.txt"].join("/")},function(e){window.trUPP=window.trUPP||{},window.trUPP.version=e.responseText,delete t.renderError,_._renderUPPStyle(),window.trUPP.Dialog.show("UniversalPicker",t)}),void(t.renderError=!0);if(!window.trUPP.Dialog.isOpen()&&!t.trUPP)return t.trUPP=!0,t.renderError=!0,void window.setTimeout(function(){delete t.renderError,window.trUPP.Dialog.show("UniversalPicker",t)},100)}_._reopened?_._reinit(t):_._init(t),_.context.bypass||window.trUPP.Log.logDialogDisplay(),_.context.renderError||e(_._formatContent(_.context).localize(_))}},refresh:function(e,t){Shr.Dom.get(_._dlgId),new _.View.Event("refresh",e,t),_.isOpen&&_._folder},done:function(){_._skipContextDoneFolder=!0,_._onDone(),delete _._skipContextDoneFolder},back:function(){var e=_._segment==y._sources,t=_._stack[_._stack.length-1]||{};"device"==_._deviceVsMyComputer&&_._root.folders[0]==t.folder&&_._stack.pop(),_._showAllOrSelected(e,!0)},cancel:function(e,t){if(e)try{e.forEach(function(e){e instanceof _.Item&&_._cancelItemUploadImport(e)})}catch(e){}else _._import._cancel()},_cancelItemUploadImport:function(e){try{e&&e.sink&&e.sink.cancelItem&&e.sink.cancelItem(e),e&&_.deselectItem(e)}catch(e){}},close:function(e){_.isOpen&&(Shr.Score?Shr.Dialog.close(_.context.did,e):window.trUPP.Dialog.close(_.context.did,e))},getStatus:function(){return Shr.Array.map(_._selections,function(e){return _._import._results(e)})},getItemInfo:function(e,t){Shr.U.getIdToken().then(function(r){var n=_._sources.thisLife||_._sources.sfly;Shr.U.migrated&&n&&n.api?(e=Shr.Array.map(e,function(e){return e.toString().replace(/^Image:/,"")}),n.api("getMomentSet",[r,e,null,!0],function(e){200<=e.status&&e.status<300&&e.responseObj&&e.responseObj.result&&e.responseObj.result.success?t(!0,e.responseObj.result.payload):(_.Error.log(null,n.getLastAPI(),e),t(!1,[]))})):t(!1,[])}).catch(function(e){window.trUPP.Timing.recordSessionEvents({event:"getIdToken",err:e,session_method:"UniversalPicker getItemInfo"})})},reopen:function(e,t){_.isOpen||(_._reopened=!0,_._showStatus=!!e&&(t||_._selections.map(function(e,t){return t})),window.trUPP.Dialog.show("UniversalPicker",_.context||{}))},updateContext:function(e,t){void 0===e&&(e={}),t&&delete _.context.destination,Object.extend(_.context,e)},checkFilePicker:function(e){var t=document.getElementsByName("upp_filepicker")[0];window.setTimeout(function(){t&&!t.files.length&&_._onDone()}.bind(_),250),document.body.onfocus=null},filePickerCb:function(e,t){_._folder._onChange(e,t)},clearSelections:function(){_._selections=[]},deselectItem:function(e){Array.isArray(e)||(e=[e]),e.forEach(function(e){e instanceof _.Item?Shr.L.forEach(_._selections,function(t){var r=Shr.Array.indexOf(t,e);return-1!=r&&Shr.Array.remove(t,e),-1==r}):Shr.L.forEach(_._selections,function(t){var r=Shr.Array.indexOfByProperty(t,"mPath",e.mPath);return-1!=r&&Shr.Array.remove(t,t[r]),-1==r})})},renderStyle:function(e){Shr.Score&&e(_._formatStyle())},onClose:function(e){return e.renderError||(_.isOpen&&(_.isOpen=!1,_._cancel()),_._selection&&(_._selection._closed=!0),_._dispatchEvent(_.EventType.done,_._import._results(_._selection)),Shr.Dom.setProperty(_._getLastViewport(),"content",_._viewportContent||""),document.body.style.height="",_._previousBodyHeight&&(document.body.style.height=_._previousBodyHeight,delete _._previousBodyHeight),!e.errorRate&&!_._utilities.localStorage.getItem("Shr.Dialogs.UniversalPicker.errorRate")||e.backgroundImport||Shr.L.forEach(_._errorHooks,function(e,t){var r=Object.get(t,e._base);r&&r._previous&&(e._base[t]=r._previous)}),Shr.L.tryToCall(_._folder&&_._folder.onblur&&_._folder.onblur.bind(_._folder)),Shr.L.forEach(_._root.folders,function(e){Shr.L.tryToCall(e.onClose.bind(e),_.context)}),delete _._root.folders,delete _._stack,_._stack=[],window.onpageshow=_._onpageshow,delete _._onpageshow,_._reopened=!1,_.__snapSrcOnClick&&(Shr.Event.removeEventListener(document.body,"click",_.__snapSrcOnClick),Shr.B.isTouch&&Shr.Event.removeEventListener(document.getElementById(_._dlgId),"click",_.__snapSrcOnClick),delete _.__snapSrcOnClick),Object.extend(document.body,_._bodyProps),delete _._bodyProps),!0},EventType:{start:"start",done:"done",itemUpdate:"itemUpdate"},_getVideoStats:function(e){for(var t,r,n=0;n<e.length;n++){var o=e[n];if(!Shr.L.isNullOrUndefined(t)&&!Shr.L.isNullOrUndefined(r))break;o&&o._item&&o._item._selItem&&o._item._selItem.isVideo()?t=!0:r=!1}return{containsVideos:t=!Shr.L.isNullOrUndefined(t)&&t,onlyVideos:r=!!Shr.L.isNullOrUndefined(r)||r}},_dispatchEvent:function(e,t,r){try{var n,o,i,s=!!_._selections.length,a=(e==_.EventType.itemUpdate?_._selections[r]:s&&_._selections[t.index])||(s?_._selections[_._selection.index]:_._selection)||_._selection,l=_._import._results(a),c=0==l.xfer.length&&a._cancelled,d="Shr.Dialogs.UniversalPicker",h={type:e,detail:t},u=e==_.EventType.itemUpdate||(e==_.EventType.start?!a._started:e==_.EventType.done&&(c||!a._done&&a._closed&&(l.state==_.Sink.state.done||l.state==_.Sink.state.error||l.state==_.Sink.state.cancel))),p=0;if(e!=_.EventType.itemUpdate&&e!=_.EventType.done||l._started||_._dispatchEvent(_.EventType.start,l),(_.context.backgroundImport||_.newBgUpload)&&u&&(e!=_.EventType.done||!l._done)){try{n=new window.CustomEvent(d,{canBubble:!1,cancelable:!1,detail:h})}catch(e){(n=document.createEvent("CustomEvent")).initCustomEvent(d,!1,!1,h)}_.newBgUpload?window.trUPP.bgHelper&&window.trUPP.bgHelper.handleEvent(n):window.dispatchEvent(n),e==_.EventType.start&&(_._selection._stats=_._calculateStats())}if(e!=_.EventType.start||a._started){if(e==_.EventType.itemUpdate){if(t.state!=_.Sink.state.xfer||t.startTime){if((t.state==_.Sink.state.done||t.state==_.Sink.state.error)&&(t.timeTaken=t.startTime?Date.now()-t.startTime:0,a&&!a._failed&&t.state==_.Sink.state.error&&t.source.dataSourceType==_.Source.DataSourceType.upload&&417!=t._item._selItem._status&&(_._logsmith(_._logsmithMetricName(["uploadSession","failed"].join(".")),t._item._selItem._status),_._logsmithKPISummary(["session","failed"].join("."),t._item._selItem._status),a._failed=!0),t.source.dataSourceType==_.Source.DataSourceType.upload)){var m=null!==t._item._selItem.isVideo();if(t.state==_.Sink.state.error){_._logsmithKPISummary("photo."+t._item._selItem._status+"_"+t._item._selItem._errorCode,t.timeTaken);var g={error_code:t._item._selItem._status+"_"+t._item._selItem._errorCode,upload_status:"failed",guid:_._getSelectionGuid(a),transactionId:t._xid,path:_._logsmithUPPVer.split("_").pop(),anonymous:1==t.type,full_path:window.location.href,isVideo:m};t._item._selItem._api&&(g.api=t._item._selItem._api),window.trUPP.Timing.recordTime("upload_photo",t.timeTaken,g)}else{_._logsmithKPISummary(["photo","success","size_bytes"].join("."),t.size),_._logsmithKPISummary(["photo","success","time_ms"].join("."),t.timeTaken),_._logsmithKPISummary(["photo","success","kbps"].join("."),t.size/t.timeTaken);var f={upload_status:"success",upload_size:t.size,guid:_._getSelectionGuid(a),transactionId:t._xid,anonymous:1==t.type,path:_._logsmithUPPVer.split("_").pop(),full_path:window.location.href,isVideo:m};window.trUPP.Timing.recordTime("upload_photo",t.timeTaken,f)}}}else t.startTime=Date.now();(c||l.state==_.Sink.state.done||l.state==_.Sink.state.error||l.state==_.Sink.state.cancel)&&_._dispatchEvent(_.EventType.done,l)}else if(e==_.EventType.done&&!a._done&&u&&(a._done=!0,o=_._calculateStats(a),_._logStats(o),a._isUploadSource)){Shr.L.forEach(l.done,function(e){e.source.dataSourceType==_.Source.DataSourceType.upload&&p++}),_._logsmith(_._logsmithMetricName(["uploadSession","end"].join(".")),p),_._logsmithKPISummary(["session","end"].join("."),p),_._logsmithKPISummary(["session",p<3?"single":"multiple","size_bytes"].join("."),o.upload.totalBytes),_._logsmithKPISummary(["session",p<3?"single":"multiple","time_ms"].join("."),o.upload.totalTime),_._logsmithKPISummary(["session",p<3?"single":"multiple","kbps"].join("."),o.upload.totalBytes/o.upload.totalTime),!a._failed&&a._cancelled&&_._logsmithKPISummary(["session","cancel"].join("."),p),b={total_bytes:o.upload.totalBytes,failed_photo_count:o.upload.failedCount,uploaded_photo_count:p,source:"local",path:_._logsmithUPPVer.split("_").pop(),guid:_._getSelectionGuid(a),full_path:window.location.href,containsVideos:a.videoStats.containsVideos,onlyVideos:a.videoStats.onlyVideos,anonymous:!Shr.U.id,useNewAuth:!!Shr.U.useNewAuth};var S="success";a._failed&&(S="failed"),(a._cancelled||l.state==_.Sink.state.cancel)&&(S="cancelled"),b.upload_status=S,window.trUPP.Timing.recordTime("upload_session_end",o.upload.totalTime,b)}}else{if(Shr.L.forEach(a,function(e){e.source.dataSourceType==_.Source.DataSourceType.upload&&p++}),p){_._logsmith(_._logsmithMetricName(["uploadSession","start"].join(".")),p),_._logsmithKPISummary(["session","start"].join("."),p),i=_._getVideoStats(a),a.videoStats=i;var b={source:"local",upload_count:p,path:_._logsmithUPPVer.split("_").pop(),guid:_._getSelectionGuid(a),full_path:window.location.href,containsVideos:a.videoStats.containsVideos,onlyVideos:a.videoStats.onlyVideos,anonymous:!Shr.U.id,useNewAuth:!!Shr.U.useNewAuth};window.trUPP.Timing.recordInfo("upload_session_start",b),a._isUploadSource=!0}a._started=!0}}catch(e){window&&window.trUPP&&window.trUPP.Timing&&window.trUPP.Timing.recordInfo("upp_exception",{ex_message:e.message,ex_stack:e.stack}),Console.write("_dispatchEvent threw: "+e.message)}},_init:function(e){_._selections=[],_.Html5Item=_._Html5ItemV2,delete _._showStatus,_._reinit(e),_.L10N=Object.merge({},_._L10N),_.context.renderError||(_.width=_.context.width||_._defaultWidth,_.context.thumbnailSize&&(_._gridThumbnailSize.wide=_.context.thumbnailSize),_._sinks=[],Shr.L.forEach(e.sinks,function(e,t){_._sinks.push(new _.Sink(Object.extend({id:e.id||t},Shr.Array.findByProperty(_._defaultSinks,"id",e.id||t),e)))}),Shr.L.forEach(_._defaultSinks,function(e){-1==Shr.Array.indexOfByProperty(_._sinks,"id",e.id)&&_._sinks.push(new _.Sink(e))}),function(){try{("uniup_mediaFetch"in e?e.uniup_mediaFetch:_.uniup_mediaFetch)&&Object.merge(Shr.Array.findByProperty(_._sinks,"id","mediaFetch"),_._uniup_mediaFetch)}catch(e){window&&window.trUPP&&window.trUPP.Timing&&window.trUPP.Timing.recordInfo("upp_exception",{ex_message:e.message,ex_stack:e.stack}),_._logsmith(_._logsmithMetricName(["mediaFetch","uniupInstall","error"].join(".")),Date.now()-_._openedTime)}}(),Shr.L.forEach(_._sinks,function(e){e.init.call(e,_.context)}),_.sinks=_._sinks,"api"==(_.context.umsServer||_.umsServerDefault)?(delete _.umsServer,_.ums=(_.context.umsAPI||_.umsAPI).substitute(window)):(_.umsServer="app",_.ums=(_.context.umsWWW||_.umsWWW).substitute(window)),Shr.B.isMonitor||document.location.search.match(/noAnalytics/i)||window.trUPP.Log.loadLog(),"nonProductCreation"in _.context&&(_.productCreation=!_.context.nonProductCreation))},_defaultMaxSelectionCount:1e3,_reinit:function(e){var t,r,n,o,i;if(_.context=e||{},_.context.maxCount=_.context.maxCount||_._defaultMaxSelectionCount,delete _._addClickTracked,Shr.B.isTouch&&((n=_._getLastViewport())?(_._viewportContent=n.content,Shr.Dom.setProperty(n,"content","width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no")):(n=document.createElement("meta"),o=document.getElementsByTagName("head")[0],Shr.Dom.setProperty(n,"name","viewport"),Shr.Dom.setProperty(n,"content","width=device-width,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no"),o.appendChild(n),_._viewportContent="width=980, minimum-scale=0.25, maximum-scale=5.0, user-scalable=yes"),document.height<=window.outerHeight&&(_._previousBodyHeight=document.body.style.height,document.body.style.height=window.outerHeight+50+"px"),window.scrollTo(0,1)),_._prevSelection={},_._prevCount=0,Shr.L.forEach(_._selections,function(e){Shr.L.forEach(e,function(e){(_._prevSelection[e._path]=_._prevSelection[e._path]||[]).push(e._item.id.toString()),_._prevCount++})}),_._autoUploads=[],Shr.L.forEach(_.context.selection,function(e,t){e instanceof window.File?(_._autoUploads.push(e),delete _.context.selection[t]):e&&e.id&&((_._prevSelection[e.path]=_._prevSelection[e.path]||[]).push(e.id.toString()),_._prevCount++)}),delete _.context.renderError,!_.context.singleSelect&&!_.context.noSelect&&(t=parseInt(_.context.currentCount)||0,r=parseInt(_.context.maxCount)||Number.MAX_VALUE,t+(_.context.skipSelections?0:_._prevCount)>=r&&!_._showStatus))return _.context.renderError=!0,void window.setTimeout(function(){_.Source.alert((Shr.B.isTouch?"${cannotAdd.text.mobile}":"${cannotAdd.text.desktop}").localize(_),"${cannotAdd.title}".localize(_))},100);_._segment=y._sources,_._previousZoom=!1,_._zoomState={},_._stack=[{folder:_._folder=_._root,skip:!0}],_._selection=[],_._path=[],_.context.path&&_.context.path!=_._sources.myComputer.id&&window.setTimeout(function(){_._path=(_.context.path||"").split("/").reverse(),window.trUPP.Timing.setEventFlag("loadFolder",!0),_._root.onclick()},100),_.context.filepicker&&(!_.context.path||_.context.path&&_.context.path==_._sources.myComputer.id)&&function e(){if("myComputer"!==_._folder.id)return window.setTimeout(e,250)}(),_._errors=[],_._apiCounts={userMedia:0,mediaFetch:0,shareSites:0,fb:0,instagram:0,thisLife:0},(i=_.context.errorRate||_._utilities.localStorage.getItem("Shr.Dialogs.UniversalPicker.errorRate"))&&Shr.L.forEach(_._errorHooks,function(e,t){var r=Object.get(t,e._base);r&&!r._previous&&(e._base[t]=Object.extend(function(){var t=arguments;100*Math.random()<i?window.setTimeout(function(){Shr.L.tryToApply(e._override,t)},parseInt(3e3*Math.random())):arguments.callee._previous.apply(e._base,t)},{_previous:e._base[t]}))}),_._onpageshow=window.onpageshow,window.onpageshow=function(){},_._bodyProps={onkeyup:document.body.onkeyup,onkeypress:document.body.onkeypress,onkeydown:document.body.onkeydown},document.body.onkeyup=_._onKeyUp,document.body.onkeydown=_._onKeyDown,function(){var e=Shr.Score?window.location.href.split(/[#?]/)[0]:[window.location.protocol,"/",Shr.AS.site].join("/");try{e.split("/").pop().match(/[0-9a-f]*-[0-9a-f]*-[0-9a-f]*-[0-9a-f]/)&&(e=e.split("/").slice(0,-1).join("/"))}catch(e){}finally{_.Error.log(void 0,e,{status:1})}}(),_._redirectToRoot2=!0,_._signedInOnRoot2=!1,Shr.L.forEach(_._sinks,function(e){e.reinit&&e.reinit.call(e,_.context)})},_refreshSession:function(){var e=document.getElementById("upp-refresh"),t=new Date;if(!e&&(!this._lastSessionPoll||5e3<t-this._lastSessionPoll)){(e=document.createElement("iframe")).id="upp-refresh",e.name="upp-refresh",e.style="position:absolute;top:0;left:0;width:1px;height:1px;z-index:0;",e.src="about:blank",Shr.Event.addEventListener(window,"message",this._onRefreshMessage,!1),document.body.appendChild(e);var r=["https:/",Shr.AS.www,"nonVisualSignin","start.sfly"].join("/");r+="?version=2&outputFormat=postMessage&subdomain="+window.location.origin.replace(".shutterfly.com",""),e.src=r,this._lastSessionPoll=new Date}},_onRefreshMessage:function(e){var t=document.getElementById("upp-refresh");if(t&&e&&t.contentWindow==e.source){var r;try{r=window.JSON.parse(e.data)}catch(e){}r&&1===r.returnCode&&(Shr.U.oauthToken=r.oauthToken,Shr.U.oauthV2AccessToken=r.oauthV2AccessToken,Shr.U.id=Shr.U.uid=Shr.U.un=Shr.U.userId=Shr.U.userName=r.uid)}Shr.Event.removeEventListener(window,"message",this._onRefreshMessage,!1),t&&document.body.removeChild(t)},_apiCounts:{},_getSelectionGuid:function(e){if(e)return e.guid||(e.guid=window.trUPP.util.generateGuid()),e.guid},_calculateStats:function(e){var t=e||_._selection,r=t._stats||{userId:Shr.U.id||0,reopened:_._reopened||!1,pictureCount:Shr.Array.getLength(t),failedCount:0,product:void 0!==_.context.product?_.context.product||(_.context.noSelect?"":"Prints4x6"):"",category:_.context.category||(_.context.noSelect?"":"Prints"),logData1:_.context.logData1||"",logData2:_.context.logData2||"",dsApiCount:0,apiErrors:[],mediaFetch:{apiCount:_._apiCounts.mediaFetch||0,picturesCount:0,failedCount:0,dataSources:[],apiErrors:[],timeTaken:0},upload:{dataSource:"upload",picturesCount:0,failedCount:0,totalTime:0,totalBytes:0}},n=-1,o=function(e){var t={api:e._api,errors:[]};return Shr.L.forEach(e._errors,function(e,r){t.errors.push({statusCode:r,count:e})}),t};return t._stats?(r.failedCount=r.mediaFetch.picturesCount=r.mediaFetch.failedCount=r.mediaFetch.timeTaken=r.upload.picturesCount=r.upload.failedCount=r.upload.totalBytes=r.upload.totalTime=0,r.mediaFetch.dataSources=[r.upload]):r.mediaFetch.dataSources.push(r.upload),Shr.L.forEach(t,function(e){var t,o=e.source.dataSourceType==_.Source.DataSourceType.upload,i=e.source[o?"dataSourceType":"id"];"sfly"!=e._source&&((t=Shr.Array.findByProperty(r.mediaFetch.dataSources,"dataSource",i))||(t={dataSource:i,picturesCount:0,failedCount:0,totalTime:0},r.mediaFetch.dataSources.push(t)),t.picturesCount++,o?(t.totalBytes+=e.size||0,e.startTime&&e.timeTaken&&(-1==n?(n=e.startTime,t.totalTime=e.timeTaken):(e.startTime<n&&(t.totalTime+=n-e.startTime),e.startTime+e.timeTaken>n+t.totalTime&&(t.totalTime=e.startTime+e.timeTaken-n)))):(r.mediaFetch.picturesCount++,r.mediaFetch.timeTaken=Math.max(r.mediaFetch.timeTaken,e.timeTaken||0),t.totalTime=r.mediaFetch.timeTaken)),e.state==_.Sink.state.error&&(r.failedCount++,t&&(t.failedCount++,o||r.mediaFetch.failedCount++))}),Shr.L.forEach(_._apiCounts,function(e,t){"mediaFetch"!=t&&"upload"!=t&&(r.dsApiCount+=e)}),_._apiCounts={},Shr.L.forEach(_._errors,function(e){r.apiErrors.push(o(e))}),Shr.L.forEach(_._errors,function(e){/media-fetch/.test(e._api)&&r.mediaFetch.apiErrors.push(o(e))}),_._errors=[],r},_logStats:function(e,t){try{r={method:"POST",url:["https:","/",Shr.AS.cmd2||Shr.AS.cmd,["commands","picker","log"].join("/")].join("/"),args:{data:window.JSON.stringify(e)}},_._SflyAjax.sendAjaxRequest(r,function(){})}catch(e){}var r,n,o,i,s;try{n=function(e,t){return _._logsmithMetricName(["source",e,t].join("."))},o=function(e,r,o){t?(t.metrics.push(_._logsmithMetric(n(e,"nPics"),r||0,"count")),t.metrics.push(_._logsmithMetric(n(e,"nFailed"),o||0,"count")),e==_.Source.DataSourceType.sfly&&t.metrics.push(_._logsmithMetric(n([e,_.vt?"VT":"nonVT"].join("."),"nPics"),r||0,"count"))):(_._logsmith(n(e,"nPics"),r||0,"count"),_._logsmith(n(e,"nFailed"),o||0,"count"))},i=e.pictureCount||0,s=e.failedCount||0,o("total",i,s),Shr.L.forEach(e.mediaFetch.dataSources,function(e){i-=e.picturesCount||0,s-=e.failedCount||0,e.picturesCount&&(o(e.dataSource,e.picturesCount,e.failedCount),e.totalTime&&(e.totalBytes?t?t.metrics.push(_._logsmithMetric(n(e.dataSource,"kbps"),e.totalBytes/e.totalTime)):_._logsmith(n(e.dataSource,"kbps"),e.totalBytes/e.totalTime):t?t.metrics.push(_._logsmithMetric(n(e.dataSource,"totalTime"),e.totalTime)):_._logsmith(n(e.dataSource,"totalTime"),e.totalTime),e.picturesCount>e.failedCount&&(t?t.metrics.push(_._logsmithMetric(n(e.dataSource,"avgtime"),e.totalTime/1e3/(e.picturesCount-e.failedCount))):_._logsmith(n(e.dataSource,"avgtime"),e.totalTime/1e3/(e.picturesCount-e.failedCount)))))}),i&&o(_.Source.DataSourceType.sfly,i,s)}catch(e){}t||_._logsmithSend()},_uppStatsItemName:"Shr.Dialogs.UniversalPicker.stats",_saveStats:function(){var e=[];Shr.L.forEach(_._selections,function(t){t._done||e.push(_._calculateStats(t))}),e.length&&_._utilities.localStorage.setItem(_._uppStatsItemName,window.JSON.stringify(e))},_logsmithMetrics:[],_logsmithDelay:5,_logsmithTimeout:void 0,_logsmithUrl:"https://${0}.shutterfly.com/env/${1}/metrics".substitute(["prod"==Shr.AS.getEnv()?"l":"logsmith.stage",Shr.AS.getEnv()]),_logsmithUPPVer:function(){var e,t=navigator.userAgent||"",r=t.toLowerCase(),n=/android/.test(r),o=/ipad|iphone|ipod/.test(r),i=/windows/.test(r),s=/macintosh/.test(r),a=n?"4":o?"3":i?"1":s?"2":"5",l=/iphone/.test(r),c=n&&/mobile/.test(r),d=l||c,h=/ipad/.test(r),u=n&&!/mobile/.test(r),p=h||u,m=d?"1":p?"2":"3",g=/Firefox\/\d+/.test(t),f=/Chrome\/\d+/.test(t),S=/Safari\/\d+/.test(t),b=!(g||f||S)&&(t.match(/MSIE\s([\d]+)/)||t.match(/rv:([\d]+)/)),y=b&&b[1]?b[1]:"",P=/IEMobile/.test(t),v=window.location.pathname.replace(/^\//,"").split("/").shift()||"home",w=!Shr.Score;"photos"===location.hostname.split(".").shift()&&(v="photos");var x={pb:"b",mmb:"m",creationpath:"c","cards-stationery":"c",selectprints:"p",gc:"y",home:"h",sites:"s",upp:"t",photos:"w",calendar:"l",tinyprints:"n"}[w?"sites":v]||"o",U=g?"f":f?"c":S?"s":b?["i",y].join(""):P?"m":"o";return _._newKpiMetrics&&(e={pb:"photobooks",mmb:"makemybook",creationpath:"cns",selectprints:"prints",gc:"calendars",picturepicker:"myphotos",home:"magicshop",sites:"sharesites",upp:"testapps"},_._populateKPIMetricProps({app:e[w?"sites":v]||"other",device:d?"phone":p?"tablet":"desktop",browser:g?"firefox":f?"chrome":S?"safari":b?["ie",y].join(""):P?"iemobile":"other",os:n?"android":o?"ios":i?"windows":s?"mac":"other"})),[m,U,a,x].join("_")}(),_logsmithAttrs:function(){return{env:Shr.AS.getEnv(),appName:"UPP",ua:_._logsmithUPPVer,userId:Shr.U.id||0,appVer:(Shr.Score||{version:0}).version,UPP_migrated:!!Shr.U.migrated,UPP_category:_.context&&_.context.category||"",UPP_product:_.context&&_.context.product||"",UPP_logData1:_.context&&_.context.logData1||"",UPP_logData2:_.context&&_.context.logData2||"",UPP_client:function(){var e=Shr.Score?window.location.href.split(/[#?]/)[0]:"site:"+Shr.AS.site;try{e.split("/").pop().match(/[0-9a-f]*-[0-9a-f]*-[0-9a-f]*-[0-9a-f]/)&&(e=e.split("/").slice(0,-1).join("/"))}catch(e){}return e.split("/").pop()}()}},_logsmithSend:function(){try{if(window.clearTimeout(_._logsmithTimeout),_._logsmithTimeout=void 0,!_._logsmithMetrics.length)return;if(_._unloading)return;var e={attributes:_._logsmithAttrs(),metrics:_._logsmithMetrics};_._logsmithMetrics=[],_._SflyAjax.sendAjaxRequest({url:_._logsmithUrl,method:"POST",args:window.JSON.stringify(e),contentType:"application/json"},function(){})}catch(e){window&&window.trUPP&&window.trUPP.Timing&&window.trUPP.Timing.recordInfo("upp_exception",{ex_message:e.message,ex_stack:e.stack})}},_logsmithSavedMetricsItemName:"Shr.Dialogs.UniversalPicker.metrics",_logsmithSave:function(){var e=0,t={attributes:_._logsmithAttrs()};Shr.L.forEach(_._selections,function(t){var r=_._import._results(t);Shr.L.forEach(r.xfer,function(t){t.source.dataSourceType==_.Source.DataSourceType.upload&&e++})}),e&&_._logsmith(_._logsmithMetricName("unload"),e,"count"),t.metrics=_._logsmithMetrics,_._utilities.localStorage.setItem(_._logsmithSavedMetricsItemName,window.JSON.stringify(t))},_logsmithMetricName:function(e){return e=e.join?e.join("."):e,["newPP",[_._logsmithUPPVer,Shr.U.id?Shr.U.migrated?"2":"1":"3"].join("_"),e].join(".")},_logsmithKPISummaryMetricNames:function(e){var t=[];return e=e.join?e.join("."):e,["summary","device","browser","os","app"].forEach(function(r){"summary"!=r&&(r=[r,_._logsmithKPIMetricProps[r]].join(".")),t.push(["UPP","2",Shr.U.id?"auth":"anon",r,e].join("."))}),t},_logsmithUploadMetricName:function(e){return["uploaders",_._logsmithMetricName(e)].join(".")},_logsmithAPIStatusMetricName:function(e,t,r,n){var o="${0}_${2}${1}".substitute([e,t,r?"-":""]);return n&&(o=[o,n].join("_")),o},_logsmithMetric:function(e,t,r,n){return{name:e,value:t||0,type:r||"gauge",attributes:n,timestamp:window.Date.now()}},_logsmith:function(e,t,r,n){try{var o=_._logsmithMetric(e,t,r,n);window.JSON.parse(_._utilities.localStorage.getItem("Shr.Dialogs.UniversalPicker._metrics")),window.clearTimeout(_._logsmithTimeout),_._logsmithTimeout=void 0,10==_._logsmithMetrics.push(o)?_._logsmithTimeout=window.setTimeout(_._logsmithSend.bind(_),0):_._logsmithTimeout=window.setTimeout(_._logsmithSend.bind(_),1e3*_._logsmithDelay)}catch(e){window&&window.trUPP&&window.trUPP.Timing&&window.trUPP.Timing.recordInfo("upp_exception",{ex_message:e.message,ex_stack:e.stack})}},_logsmithKPISummary:function(e,t){try{_._newKpiMetrics&&_._logsmithKPISummaryMetricNames(e).forEach(function(e){_._logsmith(e,t)})}catch(e){}},_getPath:function(){var e=[];return Shr.L.forEach(_._stack,function(t){e.push(t.folder.id)}),e.shift(),e.join("/")},_topOfStack:function(){var e=_._stack[_._stack.length-1]||{};return e.folder!=_._folder&&(e=_._folder==_._selected?_._folder:{focus:0}),e},_hasContent:function(){return Shr.Array.getLength(_._folder.items)||Shr.Array.getLength(_._folder.folders)||Shr.Array.getLength(_._folder.albums)},_optimizelyFeatureFlags:{},_startOptimizely:function(){var e=new _.Optimizely;e.setUser(Shr.U.userId)&&e.getUserFeatures().then(function(e){Shr.L.forEach(e,function(e){"upp_"===e.substr(0,4)&&(e=(e=e.slice(4)).replace(/_([a-z])/g,function(e){return e[1].toUpperCase()}),_._optimizelyFeatureFlags[e]=!0)})})},_end:null}),Object.defineProperty(_,"className",{get:function(){return _.trUPPDlgEnabled()||!Shr.Score?"":S+"Dlg"}}),_._popupMustBeOpenedFromIFrame=Shr.B.isIE,_._getUppExt=function(){return{classNames:{sources:y._sources,open:y._open,navbar:y._navbar,zoom:y._zoom2,sidebar:y._sidebar,inSidebar:y._inSidebar,bin:y._bin,empty:y._empty,overlay:y._overlay,disabled:y._disabled,root:y._root,busy:y._busy,folderContent:y._folderContent,content:y._content,header:y._header,sort:y._sort,snapSrc:y._snapSrc,snapSrcMenu:y._snapSrcMenu,infoBox:y._infoBox,info:y._info,selected:y._shrSelected,search_wgt:y._search_wgt,arrow:y._arrow,arrowS:y._arrowS,sidebarOpen:y._sidebarOpen,anonymous:y._anonymous,nonMigrated:y._nonMigrated,noBB:y._noBB,bgToast:y._bgToast,bgDetails:y._bgDetails},root:_._root,root2:_._root2,formatItems:_._formatItems,formatSortWidget:_._formatSortWidget,onSelect:_._onSelect,canSelectAll:_._canSelectAll,onBack:_._onBack,onDone:_._onDone,allSelected:_._allSelected,showAllOrSelected:_._showAllOrSelected,zoomOut:function(e){_._onZoom(e,0,!1)},dispatchEvent:_._dispatchEvent.bind(_),Error:{formatMessage:function(){return _.Error._formatMessage.apply(_.Error,arguments)},retry:function(){return _.Error._retry.apply(_.Error,arguments)}},topOfStack:_._topOfStack,get styleProperties(){return _._styleProperties},get feedback(){return Shr.SegmentedControl._formatFeedback},get isZoomed(){return _.Grid._isZoomed},get dlg(){return _.View._dlg},get dsListMarkup(){return _._dsListMarkup()},get path(){return _._path},get folder(){return _._folder},get wideLayout(){return _._wideLayout},get prevCount(){return _._prevCount},get stack(){return _._stack},set stack(e){_._stack=e},get sources(){return _._root.folders},get myPhotos(){return Shr.Array.findByProperty(_._root.folders,"id","sfly")},get gridThumbnailSize(){return _._gridThumbnailSize()},get zoomedFolder(){return _._zoomedFolder},get zoomedIndex(){return _._zoomedIndex},get selection(){return _._selection},get verifyAndSelectItem(){return _._verifyAndSelectItem}}},_._dsListMarkup=function(){var e=[];return"device"===_._deviceVsMyComputer&&delete _._sources.mobiledevice,Shr.L.forEach(_._sources,function(t,r){_._isHidden(t)||e.push(Shr.Html.formatTag("li",{className:[y._sources,r].join("_")}))}),Shr.L.forEach(_.context.sources,function(t,r){r in _._sources||_._isHidden(t)||e.push(Shr.Html.formatTag("li",{className:[y._sources,r].join("_")}))}),Shr.Html.formatTag("ol",{},e.join(""))},_._procservTemplate="//${0}/procserv?f=0&g=2.2&cb=16777215&b=1&bw=0.2&sc=0&si=${1}&cr=0.0%2c0.0%2c1.0%2c1.0&px=${2}&py=${3}&r=${4}&pa=0.5&sa=0&p=1&po=0&dsbg=221&ph=65535&rx=${2}&ry=${3}&ps=23",_._mediaRenderTemplate="${4}//${0}/ng/services/mediarender/THISLIFE/${1}/media/${2}/${3}/enhance",_._defaultSinks=[],_._deviceVsMyComputer=window.FileReader&&Shr.B.isTouch?"device":"myComputer",_.fId="_folder",_._redirectToRoot2=!0,_.isDisabled=function(e){var t=(Shr.AS.disabledDS||"").split(" ").join("").split(",");return-1!=Shr.Array.indexOf(t,e)},_._isHidden=function(e){var t,r=void 0!==_.context.hide&&_.context.hide,n=_.context.sources||{};return t=Shr.U&&Shr.U.id||_.context.onSignin?(t=_.context.hide||e.hide)||(_.context.noSelect?"sfly"!=e.id&&"sites"!=e.id:r):_.context.hide||e.hide||e.dataSourceType!=_.Source.DataSourceType.upload,n[e.id]&&null!=n[e.id].hide&&(t=n[e.id].hide),t||_.isDisabled(e)},Object.extend(_,{_SflyAjax:{sendAjaxRequest:function(e,t,r){return _._countApiCall(r||"userMedia"),_.context&&_.context.useApiServerProxy&&(e.useApiServerProxy=!0),Shr.SflyAjax.sendAjaxRequest.apply(Shr.SflyAjax,arguments)}},_C:{beginExec:function(){return _._countApiCall("shareSites"),Shr.C.beginExec.apply(Shr.C,arguments)}},_FB:{_invokeRealAPIMethod:function(e,t){return _._countApiCall("fb"),Shr.FB!==window.FB&&(Shr.FB=window.FB),Shr.FB[e].apply(Shr.FB,t)},api:function(e){return this._invokeRealAPIMethod("api",arguments)},ui:function(){return this._invokeRealAPIMethod("ui",arguments)},getAuthResponse:function(){return this._invokeRealAPIMethod("getAuthResponse",arguments)},login:function(){return this._invokeRealAPIMethod("login",arguments)},logout:function(){return this._invokeRealAPIMethod("logout",arguments)}},_ScriptManager:{getJsonP:function(e,t,r){return _._countApiCall(r||"instagram"),Shr.ScriptManager.getJsonP.apply(Shr.ScriptManager,arguments)}},_countApiCall:function(e){var t=_._getApiCallCount(e);_._apiCounts[e||"other"]=t+1},_getApiCallCount:function(e){return _._apiCounts[e||"other"]||0},_popupContext:function(){var e={newDlgButtons:!0,newDlgTitle:!0,whiteBackground:!0,noBgImages:!0,_evtName:"keyup",onLoadComplete:function(e){this._top=Shr.Dom.get("dlg-${did}-form".substitute(e)),window.setTimeout(function(){var t;this._top&&((t=this._top&&this._top.getElementsByTagName("button")[0])&&Shr.Dom.tryFocus(t),this._top.removeAttribute("onkeydown"),this._top.firstChild.removeAttribute("onkeydown"),this._top.onkeydown=function(e){return!1},this._top.onkeyup=function(t){return 27!=t.keyCode&&13!=t.keyCode||(Shr.Event.stop(t),Shr.Dialog.close(e.did,Shr.Dialog.reason.close),!1)})}.bind(this),0)}};return Shr.B.isTouch&&!_._wideLayout&&(e.width=300),e},detectUploadTimeouts:!_.isDisabled("uploadTimeout"),_timeout:(e=window.JSON.parse(_._utilities.localStorage.getItem("Shr.Dialogs.UniversalPicker.timeout")||window.JSON.stringify({})),t={uploadInit:{t:25e3,s:-100},uploadProgress:{t:2e4,s:-101},uploadProcessing:{t:3e4,s:-102},mediaFetchProcessing:{t:6e4,s:-103},mediaFetchProgress:{t:45e3,s:-104}},_._defaultTimeout=t,Shr.L.forEach(["uploadInit","uploadProgress","uploadProcessing","mediaFetchProcessing","mediaFetchProgress"],function(r){t[r].t=e[r]||t[r].t}),t),_getTimeoutInterval:function(e){return _.context.timeout&&_.context.timeout[e]||_._timeout[e].t},_getTimeoutStatus:function(e){return _._timeout[e].s}}),_.API={SflyAjax:_._SflyAjax,C:_._C,FB:_._FB,ScriptManager:_._ScriptManager},_.Log={metric:function(e,t,r,n,o){r&&(e=_._logsmithAPIStatusMetricName(e,r)),_._logsmith(_._logsmithMetricName(e),t,n,o)},logMigrationStatus:function(){window.setTimeout(_.Error.log.bind(_.Error,null,Shr.U.id?Shr.U.migrated?"migrated":"nonmigrated":"prospec",{status:2}),0)}},Object.extend(_,{_defaultWidth:"90%",_wideLayout:!1,_formatContent:function(e){var t=new Shr.StringBuilder,r=[y._dialog,y._overlay,_._segment];return e.singleSelect?(r.push(y._singleSelect),_.newPP||e.singleSelectToggleSelection||r.push(y._noSelect)):e.noSelect&&r.push(y._noSelect),Shr.WindowEx.hasWidth(481)&&Shr.WindowEx.hasHeight(481)?(_._wideLayout=!0,r.push(y._wide)):(_._wideLayout=!1,r.push(y._narrow)),Shr.B.isTouch&&r.push(y._touch),Shr.U.id||r.push(y._anonymous),Shr.U.migrated||r.push(y._nonMigrated),_._2x&&r.push(y._2x),Shr.Score||r.push(y._sharesites),_._dlgId=Shr.Dom.getUniqueId(),t.write(Shr.Html.formatTag("div",{className:r,id:_._dlgId},Shr.Html.formatTag("section",{className:y._sidebar})+Shr.Html.formatTag("section",{className:[y._search,y._disabled]})+Shr.Html.formatTag("section",{className:[y._navbar,"dragHandle"]})+Shr.Html.formatTag("section",{className:[y._content,_._wideLayout?void 0:y._overlay]})+Shr.Html.formatTag("section",{className:y._bin})+Shr.Html.formatTag("section",{className:[y._zoom,y._disabled]}))),t.toString()},_enterKeyDown:!1,_onKeyUp:function(e){if(_._newZoomView)return!0;var t,r,n,o=Shr.Dom.getChildByClass(document.body,_.Grid._className._grid),i=_._getZoomState(o),s=void 0!==i,a=document.activeElement,l=document.getElementById(_._dlgId),c=!1,d=0,h=9==e.keyCode?e.shiftKey?-1:1:37==e.keyCode?-1:1,u=[],p=_._topOfStack(),m=_._hasContent(),g=function(e){o.childNodes[i];var t=p.focus||0;0==e?(_._onZoom(o,t,!0),_._zoomIn(o,t)):o._opts._updateInfo._zoomMode=e<0?_.Grid._zoomMode._zoomPrevious:_.Grid._zoomMode._zoomNext};if(n=Shr.Score?Shr.Dialog:window.trUPP.Dialog,_.context!==n.context)return 27==e.keyCode?(n.close(n.context.isInline?_.context.did:n.context.did,n.reason.close),Shr.Event.stop(e),!1):!(13==e.keyCode&&!n.context.isInline&&_._enterKeyDown&&(_._enterKeyDown=!1,n.close(n.context.isInline?_.context.did:n.context.did,n.reason.close),Shr.Event.stop(e),1));if(9==e.keyCode&&(e.ctrlKey||e.altKey))return!0;if(9==e.keyCode||37==e.keyCode||39==e.keyCode)0==(r=Shr.Array.filter(l.querySelectorAll("[tabindex]"),function(e){var t=e.offsetParent&&"hidden"!=Shr.Dom.getComputedStyle(e,"visibility"),r=t&&(!m||0<e.tabIndex||0==u.length);return t&&(r&&(e._index=d,d++),m&&0==e.tabIndex&&u.push(e)),r}).sort(function(e,t){return e.tabIndex<t.tabIndex?-1:e.tabIndex>t.tabIndex?1:e._index<t._index?-1:1})).length||(Shr.L.forEach(r,function(e,t){e._prev=t-1,e._next=t+1}),r[r[0]._prev=r.length-1]._next=0),-1==(d=-1!=Shr.Array.indexOf(u,a)?0:Shr.Array.indexOf(r,a))?0==r.length||(s?9==e.keyCode?t=r[1==h?0:r[r.length-1]]:g(h):9==e.keyCode?t=u.length?r[0]:r[1==h?0:r.length-1]:u.length&&(t=r[0],p.focus=1==h?0:u.length-1)):9!=e.keyCode?s?g(h):0==a.tabIndex&&(t=r[0],d=(d=(p.focus||0)+h)<0?u.length-1:d%u.length,t=u[d],p.focus=d):t=r[r[d][1==h?"_next":"_prev"]],m&&t&&0==t.tabIndex&&(t=u[p.focus||0]),t&&window.setTimeout(t.focus.bind(t),0),c=!0;else if(27==e.keyCode)window.setTimeout(_.cancel.bind(_),0),c=!0;else if(s&&!_.View._newPPZoomView&&32==e.keyCode)_.Grid._selectItem(o,i),c=!0;else if(13==e.keyCode&&_._enterKeyDown){if(!s&&document.activeElement&&o&&document.activeElement.tagName==(_._newGrid?"LI":"IMG"))g(0);else if(Shr.U.useNewAuth&&!Shr.U.id&&"INPUT"===document.activeElement.tagName){var f=document.querySelectorAll("[tabIndex]"),S=Array.prototype.slice.call(f,0);S.reverse();for(var b=0;b<S.length;b++){var y=S[b];if(0<y.classList.value.indexOf("uig-primary-button")){y.click();break}}}else document.activeElement.click();c=!0}else!document.activeElement||0!=document.activeElement.tabIndex||32!=e.keyCode||_._folder.type!=_.Folder.Type.album&&_._folder.type!=_.Folder.Type.selected?e.keyCode=="A".charCodeAt(0)&&e.ctrlKey&&Shr.Array.getLength(_._folder&&_._folder.items)&&(_._canSelectAll(_._folder)&&(_._allSelected(_._folder)?_._onSelectNone(document.activeElement):_._onSelectAll(document.activeElement)),c=!0):(Shr.Dom.hasClass(document.activeElement,_.Grid._className._disabled)||_.Grid._selectItem(o,p.focus||0),c=!0);return _._enterKeyDown=!1,c&&Shr.Event.stop(e),!m&&32==e.keyCode},_onKeyDown:function(e){var t=Shr.Dom.getChildByClass(document.body,_.Grid._className._grid),r=(_._getZoomState(t),!1),n=Shr.Score?Shr.Dialog:window.trUPP.Dialog;try{_._enterKeyDown=!1,(_.context===n.context||n.context.isInline&&n.context.container==_._signin._container)&&(9==e.keyCode?r=n.context===_.context:13==e.keyCode?(r=!0,_._enterKeyDown=!0):document.activeElement&&"INPUT"==document.activeElement.tagName||32!=e.keyCode||_._folder.type!=_.Folder.Type.album?e.keyCode=="A".charCodeAt(0)&&e.ctrlKey&&Shr.Array.getLength(_._folder&&_._folder.items)&&(r=!0):r=!0),r&&Shr.Event.stop(e)}catch(e){}return!r},_formatDialogTitle:function(e){return"${title}"},_formatBottomBar:function(e){return Shr.SegmentedControl.format({segments:[{text:"${all}",className:y._sources,selected:!0,atts:{onclick:_._onSegmentClick,"data-test-key":"shrUP-allPhotos"}},{text:"${selected}"+_._formatSelectionCount(),className:y._selected,atts:{onclick:_._onSegmentClick}}]},{})},_onSegmentClick:function(e){return Shr.Dom.hasClass(e.parentNode,y._shrSelected)||_._showAllOrSelected(e.parentNode===e.parentNode.parentNode.firstChild),!1},_showAllOrSelected:function(e,t){var r,n,o,i=e?0:1,s=document.getElementById(_._dlgId);if(Shr.L.tryToCall(_._folder.onblur&&_._folder.onblur.bind(_._folder)),e)_._folder=_._stack[_._stack.length-1].folder;else{_._folder=_._selected=new _.Folder(void 0,{id:"_selected",type:_.Folder.Type.selected,title:"${selected}".localize(_),_items:[],items:[],getSortChoices:function(){return{}}}),Shr.L.forEach(_._selection,function(e){_._selected._items.push(e),_._selected.items.push(Object.extend({},e._item))});try{o=(r=s.querySelector("."+y._folderContent)).scrollTop,n=r.querySelector("."+y._itemGrid+" OL"),_._setScrollTop(n,o||0)}catch(e){}}return _.refresh(_._folder),_._setSrcClassName(!1),e?(void 0===_._currentSrc&&(_._currentSrc=_._folder.id),s.classList.remove(y._selected)):s.classList.add(y._selected),_._setSrcClassName(e),t||window.trUPP.Log.logOmnitureClick(["allPhotos","selectedPhotos"][i]),!1},_formatSelectionCount:function(){var e=[y._selectionCount],t=Shr.Array.getLength(_._selection);return t||e.push("shrEmpty"),Shr.Html.formatTag("span",{className:e.join(" ")},t)},_onDoneClick:void 0,_snapSrc:!0,_allSelected:function(e){var t=!!Shr.Array.getLength(e&&e.items);return Shr.L.forEach(t&&_._folder.items,function(e){return t=!!e.selected||!!e.disabled}),t},_formatSnapSrcMenu:function(){var e=[Shr.Arrow.format({dir:"n",w:14,h:9}),Shr.Arrow.format({dir:"n",w:12,h:8})];return Shr.L.forEach(_._root.folders,function(t){var r=[y._sources+"_"+t.id];t.requiresSignin&&r.push(y._requiresSignin),e.push(Shr.Html.formatTag("span",{className:r}))}),Shr.Html.formatTag("div",{className:y._snapSrcMenu,onclick:function(e,t,r,n){var o=((n.srcElement&&n.srcElement.className||"").split(" ")[0].match(/_(.*)$/)||[void 0,void 0])[1];return o&&_._snapToSrc(o),!1}},e.join(""))},_showSnapSrcMenu:function(e){var t,r,n,o=document.getElementById(_._dlgId),i=_._dlgId&&Shr.Dom.getChildByClass(o,y._snapSrcMenu),s=Shr.ClassToggle.toggle(i,y._open,e),a={};return s&&(t=Shr.Dom.getChildByClass(o,y._snapSrc),r=Shr.Dom.getPageBounds(t),n=o.getBoundingClientRect(),a.left=Math.round(r.x+r.width/2-i.clientWidth/2-n.left+(Shr.B.isTouch?1:2)),a.top=Shr.B.isTouch?40:Math.round(r.y+r.height/2-n.top+20),Shr.Dom.setStyle(i,{left:a.left-document.body.scrollLeft+"px",top:a.top-document.body.scrollTop+"px"}),Shr.B.isTouch&&!_.__snapSrcOnClick&&(Shr.Event.addEventListener(document.body,"click",_.__snapSrcOnClick=function(e){var t=document.getElementById(_._dlgId),r=_._dlgId&&Shr.Dom.getChildByClass(t,y._snapSrcMenu),n=Shr.Dom.getChildByClass(t,y._snapSrc);_._snapSrcMenuOpen&&e.srcElement!=n&&e.srcElement!=r&&e.srcElement.parentNode!=r&&(delete _._snapSrcMenuOpen,_._showSnapSrcMenu(!1))}),Shr.B.isTouch&&Shr.Event.addEventListener(o,"click",_.__snapSrcOnClick)),i.focus()),s},_snapToSrc:function(e){var t,r,n=Shr.Array.findByProperty(_._root.folders,"id",e);if(n){if(_._stack.splice(1,_._stack.length-1),_._setSrcClassName(!1),delete _._currentSrc,delete _._snapSrcMenuOpen,(r=(t=document.getElementById(_._dlgId))&&Shr.Dom.getChildByClass(t,y._snapSrcMenu))&&Shr.Dom.setStyle(r,"left","-10000px"),"device"==_._deviceVsMyComputer&&"device"==n.id)return void _.refresh(_._folder=_._root);_._snappedSrc=!0,n.onclick(),_._currentSrc=n.id,_._setSrcClassName(!0),delete _._snappedSrc}},_onBack:function(e){var t=_._folder==_._selected,r=_._getZoomState(e);if(t||void 0!==r)_._zoomOut(e),_._onZoom(e,0,!1);else{if(1<_._stack.length)for(;_._stack.pop(),1<_._stack.length&&_._stack[_._stack.length-1].skip;);Shr.L.tryToCall(_._folder.onblur&&_._folder.onblur.bind(_._folder)),_._folder=_._stack[_._stack.length-1].folder,new _.View.Event("back",_._stack[_._stack.length-1],_._folder),_.refresh(_._folder)}return!1},_skipContextDoneFolder:void 0,_addClickTracked:void 0,_onDone:function(e){var t=!0,r=Shr.Dom.getParentByClass(e,y._dialog),n=parseInt(_.context.currentCount)||0,o=parseInt(_.context.maxCount)||Number.MAX_VALUE;return!r&&(r=Shr.Dom.getChildByClass(document.body,y._dialog)),!_.context.singleSelect&&_._selection.length>o-n&&(_.Source._selectFewerItems(o,n),t=!1),_.context.path=_._getPath(),t&&Shr.Array.getLength(_._selection)&&(_.useSearch&&new _.View.Event("hideSearch"),Shr.L.forEach([y._sources,y._selected],function(e){Shr.ClassToggle.toggle(r,e,!1)}),_._setSrcClassName(!1),delete _._currentSrc,Shr.L.tryToCall(_._folder.onblur&&_._folder.onblur.bind(_._folder)),!_._skipContextDoneFolder&&_.context.done?(_.context.done.type=_.context.done.type||_.Folder.Type.done,_.refresh(_._folder=_.context.done)):(_._logsmith(_._logsmithMetricName("opentime"),Date.now()-_._openedTime),_._import.init(_.context),_.refresh(_._folder=_._import)),t=!1),t&&_._cancel(),!1},_cancel:function(){Shr.L.tryToCall(_.context.onCancel,_.context,Shr.Dialog.reason.cancel),_._addClickTracked||(_._logsmith(_._logsmithMetricName("opentime"),Date.now()-_._openedTime),window.trUPP.Log.logOmnitureClick("cancel"),_._addClickTracked=!0),_.isOpen&&(_.isOpen=!1,new _.View.Event("close"),Shr.Score?Shr.Dialog.close(_.context.did,Shr.Dialog.reason.cancel):window.trUPP.Dialog.close(_.context.did,window.trUPP.Dialog.reason.cancel))},_getLastViewport:function(){for(var e=document.getElementsByTagName("meta"),t=e.length-1;0<=t;t--)if("viewport"==e[t].name)return e[t];return null},_formatFolders:function(e){var t=new Shr.StringBuilder;return Shr.L.forEach(e.folders,function(e,r){t.write(_._formatFolder(e,r))}),t.toString()},_albumStacks:[[{x:-2,y:-1,r:5},{x:-1,y:-4,r:-4}],[{x:2,y:1,r:-4},{x:-6,y:-4,r:4}],[{x:2,y:1,r:-6},{x:1,y:4,r:-3}],[{x:3,y:-5,r:-3},{x:-3,y:0,r:-6}],[{x:-6,y:1,r:-6},{x:-1,y:-1,r:4}],[{x:1,y:2,r:3},{x:-3,y:-5,r:-5}],[{x:-3,y:-3,r:4},{x:-5,y:2,r:-6}],[{x:3,y:2,r:-5},{x:0,y:-6,r:-3}],[{x:-4,y:-1,r:-2},{x:0,y:-3,r:5}],[{x:-1,y:-4,r:4},{x:3,y:1,r:-6}],[{x:-3,y:-5,r:2},{x:2,y:-5,r:-5}]],_2x:1.5<window.devicePixelRatio,_wideLayoutAlbumCover:(a=window.devicePixelRatio||1,{w:150,h:150,_physical:{w:150*a,h:150*a}}),_formatFolder:function(e,t){return(e.formatCover||_.Folder.prototype.formatCover).apply(e)},_refreshFolderOrAlbum:function(e,t){var r=e&&e.parent==_._folder&&_._content&&_._content.childNodes[t];Shr.Dom.replaceNode(r,_._formatFolder(e,t))},_refreshItem:function(e,t){},_onFolderClick:function(e,t,r){Shr.Event.stop(r),t&&t.onclick?Shr.L.tryToCall(t.onclick.bind(t),e):t&&Shr.L.tryToCall(_.Folder.prototype.onclick.bind(t),e)},_initialChunkSize:10,_formatAlbums:function(e){var t,r=new Shr.StringBuilder;return Shr.L.forEach(e.albums,function(n,o){return o==_._initialChunkSize?(t=Shr.Dom.getUniqueId(),r.write(Shr.Html.formatTag("li",{id:t,className:y._busy})),Shr.Dom.onContentReady(t,_._loadRemainingAlbums,{folder:e,index:_._initialChunkSize,id:t},_)):r.write(_._formatFolder(n,o)),o<_._initialChunkSize}),r.toString()},_albumInsertionInterval:10,_albumInsertionCount:10,_loadRemainingAlbums:function(e,t){var r,n,o=e.folder,i=e.handle,s=Shr.Dom.get(e.id),a=!1;if(s&&_._folder==o)if(_._content=s.parentNode,i){for(n=document.createElement("DIV"),r=Math.min(o.albums.length,e.index+_._albumInsertionCount);e.index<r;e.index++)n.innerHTML=_._formatFolder(o.albums[e.index],e.index),Shr.Dom.insertBefore(s,n.firstChild);e.index>=o.albums.length&&(a=!0)}else i=e.handle=window.setInterval(function(){_._loadRemainingAlbums(e,t)},_._albumInsertionInterval);else i&&(a=!0);a&&(window.clearInterval(i),e.handle=null,Shr.Dom.removeNode(s))},_checkIfItemSelected:function(e,t,r){var n=!1;return Shr.L.forEach(r,function(t,o){return t._item===e&&(n=!0,r.splice(o,1)),!n}),!n&&e.autoSelect&&(n=_._onSelect(!0,t)),n},_verifyAndSelectItem:function(e,t,r){var n,o,i=_._getPath();e.selected&&(o=r||[].concat(_._selection),e.selected=_._checkIfItemSelected(e,t,o)),e.selected||(n=(n=-1!=Shr.Array.indexOf(_._prevSelection[i],e.id.toString()))||-1!=Shr.Array.indexOf(_._prevSelection[i.split("/")[0]],e.id.toString()),e.selected=n,e.disabled=e.disabled||n)},_formatItems:function(e){var t={items:("getGridItems"in e?e.getGridItems():e.items)||[],onSelect:_._onSelect,onZoom:_._onZoom,onLoad:_._onGridLoaded.bind(_,e),noSelect:_.context.noSelect||e.noSelect,noZoom:e.noZoom||Shr.B.isIE&&Shr.B.ieVersion<9,size:_._gridThumbnailSize(),singleSelect:_.context.singleSelect},r=[].concat(_._selection);return Shr.L.forEach(e!==_._selected&&e.items,function(e,t){_._verifyAndSelectItem(e,t,r)}),_._wideLayout&&(t.noCrop=!0),e.noZoom&&(t.noZoom=!0),_.Grid.format(t,{})},_gridThumbnailSize:Object.extend(function(){return _._gridThumbnailSize[_._wideLayout?"wide":"normal"]},{wide:157,normal:98}),_formatAuthConnect:function(e,t){var r=t?Shr.Dom.getUniqueId():void 0,n=Shr.Button.format("${authButton}",{id:r,className:"sflyButton-tertiary"+(_.disableSourceInstagram?" disabled":""),onclick:e,tabindex:"0"}),o=Shr.Html.formatTag("div",{},_.disableSourceInstagram?"${disabledPrompt}":"${authTitle}"),i=Shr.Html.formatTag("div",{className:"shrUPConnect"},o+n);return t&&Shr.Dom.onContentReady(r,t),i},_errors:[],Error:Object.extend({log:function(e,t,r,n){var o=t.replace(/\?.*$/,""),i=void 0===r.status?"199":r.status,s=Shr.Array.findByProperty(_._errors,"_api",o);s||_._errors.push(s={_api:o,_errors:{}}),s._errors[i]=s._errors[i]?s._errors[i]+1:1,e&&n&&(e.error=n),_.Error._lastError={_url:t,_response:r,_msg:n}}},{_handler:function(e,t){return Shr.ClassToggle.toggle(e,y._open)&&!e.value&&(e.value=_.Error._formatLastErrorValue()),Shr.Event.stop(t),!1},_formatLastErrorValue:function(){return(_.Error._lstError&&["url: "+_.Error._lastError._url,"response: "+window.JSON.stringify(_.Error._lastError._response),"message: "+_.Error._lastError._msg]||[]).join("\n")},_formatLastError:function(e){return Shr.Html.formatTag("textarea",{className:[y._error,e?y._open:""],spellcheck:"false",readonly:!0,ondblclick:Shr.B.isTouch?void 0:e?void 0:_.Error._handler,oncontextmenu:Shr.B.isTouch?e?void 0:_.Error._handler:void 0},e?_.Error._formatLastErrorValue():void 0)},_formatMessage:function(e,t,r){return Shr.Html.formatTag("div",{className:y._error},Shr.Html.formatTag("div",{},e.localize(_))+Shr.Html.formatTag("div",{},t)+(r?Shr.Button.format("${retry}",{className:"sflyButton-tertiary",onclick:Shr.EB.on("click",r),tabindex:"0"}):"")+_.Error._formatLastError())},_retry:function(e){delete e.error,_.refresh(e)}}),_onSelect:function(e,t){var r,o,i,s=(i=[],-1==t||(Array.isArray(t)?i=t:"object"===n(t)?i.push(Shr.Array.indexOf(_._folder.items,t._item)):i.push(t)),i),a=_._getPath(),l=parseInt(_.context.currentCount)||0,c=parseInt(_.context.maxCount)||Number.MAX_VALUE,d=Shr.Array.getLength(_._selection),h=_._folder==_._selected,u=h?"":_._getDataSourceId(_._folder),p=[],m=!0,g=_._newGrid&&Shr.Dom.getChildByClass(document.body,_.Grid._className._grid),f=!0;if(Shr.L.forEach(-1==t&&_._folder&&_._folder.items,function(t,r){!t.disabled&&(t.selected&&!e||!t.selected&&e)&&s.push(r)}),Shr.L.forEach(-1!=t&&_._folder&&_._folder.items&&s,function(e){return-1==e||_._folder.items[e].autoSelect||(f=!1),f}),_.context.singleSelect);else{if(_.context.noSelect)return!1;if(e&&d+l+s.length+(_.context.skipSelections?0:_._prevCount)>c)return _.Source.alert("${tooMany.text}".localize(_,[new Number(c).toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")]),"${tooMany.title}".localize(_)),!1}return Shr.L.forEach(s,function(n){var i,s,l=-1!=n?_._folder.items[n]:t._item;if(l){if(l.selected=e,-1!=n)try{s=g&&g._opts&&g._opts._list[n],l.onSelect&&l.onSelect(e,s)}catch(s){}if(o=new _.Item({_index:n,_item:l,_path:a,_parent:_._folder,_source:u}),e)if(h)(o=_._selected._items[n])._item.selected=!0,r=0,Shr.L.forEach(_._selected.items,function(e,t){return n!=t&&(e.selected&&r++,!0)}),r>=_._selection.length?_._selection.push(o):Shr.Array.insert(_._selection,r,o),Shr.L.tryToCall(o.sink.onItemSelected.bind(o.sink),o._update,o._parent);else{if(Object.extend(o,{source:_._getDataSource(u),id:l.id||Shr.Dom.getUniqueId(),title:l.title||"",getThumbnailUrl:l.getThumbnailUrl.bind(l),selected:!0,autoSelect:l.autoSelect,location:l.location,mPath:l.mPath,size:l.size,data:l.data,date:l.date,width:l.width,height:l.height,aspectRatio:l.aspectRatio,orientation:l.orientation,rotation:l.rotation,type:l.type,parentId:_._folder&&_._folder.id,parentTitle:_._folder&&_._folder.title,batchIndex:_._selections.length,state:_.Sink.state.wait}),Object.extend(o,{_update:_._import._updateItem.bind(_._import,o)}),Shr.L.forEach(_._sinks,function(e){return e.onItemSelected.call(e,o,o._update,o._parent)&&(i=e),!i}),!i)return _.Source.alert("${noSink.text}".localize(_,[_._getDataSource(u).title]),"${noSink.title}".localize(_)),m=!1;o.sink=i,_._selection.push(o),_.context.singleSelect&&(_.context.singleSelectToggleSelection?1<_._selection.length&&(-1!=(r=Shr.Array.indexOf(_._folder.items,_._selection[0]._item))?_._onSelect(!1,r):(delete _._selection[0]._item.selected,_._selection.shift())):_.done())}else-1!=(r=Shr.Array.indexOfByProperty(_._selection,"_item",h?_._selected._items[n]._item:l))&&(_._selection[r]._item.selected=!1,o=Shr.Array.removeAt(_._selection,r),_._zoomState[y._selected]=void 0,o&&o.sink&&o.sink.onItemDeselected(o));return p.push(o),!0}}),m&&s.length&&(Shr.Dom.replaceNode(Shr.Dom.getChildByClass(document.body,y._selectionCount),_._formatSelectionCount()),(0==d||d==s.length&&!e)&&0==d&&_._logSelectionTime&&(_._logSelectionTime=Date.now()-_._openedTime,_._logsmith(_._logsmithMetricName("selectiontime"),_._logSelectionTime),(_._folder.useVerticalTimeline||!_.vt&&_._folder.parent&&_._folder.parent.parent&&_._folder.parent.parent.useVerticalTimeline)&&_._logsmith(_._logsmithMetricName([_.vt?"VT":"nonVT","selectiontime"].join(".")),_._logSelectionTime),delete _._logSelectionTime),_._newGrid&&_.Grid._selectionChanged(g,s),new _.View.Event("selectionChange",p,e,_._selection,-1==t)),m},_canSelectAll:function(e){return!_.context.noSelect&&!_.context.noSelectAll&&!_.context.singleSelect&&!e.noSelect&&Shr.Array.getLength(e.items)&&!e.noSelectAll},_formatSelectAllNone:function(e){var t="";return _._canSelectAll(e)&&(t=Shr.Html.formatTag("div",{className:y._navBarSelect},Shr.Html.formatTag("span",{},"${select.label}")+Shr.Html.a("","${select.all}",{onclick:_._onSelectAll,"data-test-key":"shrUP-selectAll"})+Shr.Style.pipe+Shr.Html.a("","${select.none}",{onclick:_._onSelectNone}))),t},_onSelectAll:function(){return _._onSelect(!0,-1),!1},_onSelectNone:function(){return _._onSelect(!1,-1),!1},_clearSelection:function(){[].concat(_._selection).forEach(function(e){_._onSelect(!1,e)})},_segment:y._sources,_zoomState:(s={},s[y._sources]=s[y._selected]=void 0,s),_getZoomState:function(e){var t=Shr.Dom.getParentByClass(e,y._selected)?y._selected:y._sources;return t&&_._zoomState[t]},_setZoomState:function(e,t){var r=Shr.Dom.getParentByClass(e,y._selected)?y._selected:y._sources;_._zoomState[r]=t},_previousZoom:!1,_previousHeight:void 0,_onZoom:function(e,t,r,n){var o,i,s=Shr.Dom.getParentByClass(e,y._dialog);r&&!n&&_._setScrollTop(s,Shr.Dom.getProperty(Shr.Dom.getChildByClass(s,y._folderContent),"scrollTop")),_._setZoomState(e,r?t:void 0),Shr.B.isTouch||!!r==!!_._previousZoom||(_._previousZoom=r,(o=document.querySelector("."+y._folderContent)).style.height=r?(_._previousHeight=i=o.clientHeight,i+document.querySelector("."+y._navbar).offsetHeight+"px"):_._previousHeight+"px"),Shr.ClassToggle.toggle(s,y._detail,r),r||(window.setTimeout(Shr.Dom.setProperty.bind(Shr.Dom,Shr.Dom.getChildByClass(s,y._folderContent),"scrollTop",_._getScrollTop(s)),0),s.querySelectorAll('[tabindex="0"]')[_._topOfStack().focus||0].focus())},_zoomOut:function(e){var t=Shr.Dom.getParentByClass(e,y._dialog),r=Shr.Dom.getChildByClass(t,y._itemGrid);r&&r.firstChild&&r.firstChild._opts&&Object.extend(r.firstChild._opts._updateInfo,{_zoomMode:_.Grid._zoomMode._zoomOut}),Shr.ClassToggle.toggle(t,y._detail,!1),_._setZoomState(e,void 0)},_zoomIn:function(e,t){var r=Shr.Dom.getParentByClass(e,y._dialog),n=Shr.Dom.getChildByClass(r,y._itemGrid);window.setTimeout(function(){n.firstChild._opts._updateInfo._zoomIndex=t,n.firstChild._opts._updateInfo._zoomMode=_.Grid._zoomMode._zoomIn},250)},_getHeight:function(e){var t=0;return(e=Shr.Dom.get(e))&&(t=e.clientHeight,t+=parseInt(Shr.Dom.getComputedStyle(e,"borderTopWidth")),t+=parseInt(Shr.Dom.getComputedStyle(e,"borderBottomWidth"))),t},_alignBottom:function(e,t){var r;0!=(r=t.y+t.height-((t=Shr.Dom.getPageBounds(e)).y+t.height))&&Shr.Dom.setStyle(e,{height:parseInt(Shr.Dom.getComputedStyle(e,"height"))+r+"px"})},_setSrcClassName:function(e){var t=_._currentSrc&&document.getElementById(_._dlgId);if(_._sources.sfly.id===_._currentSrc&&!e){var r=Shr.Array.findByProperty(_._root.folders,"id","sfly");r&&r.onblur()}t&&Shr.ClassToggle.toggle(t,y._sources+"_"+_._currentSrc,e)},_onGridLoaded:function(e,t){var r=_._getZoomState(t),n=_._getScrollTop(t);void 0===r&&n&&e.type!==_.Folder.Type.selected&&(window.setTimeout(function(){Shr.Dom.setProperty(Shr.Dom.getParentByClass(t,y._folderContent),"scrollTop",n)},500),_._setScrollTop(t,0)),e.onGridLoaded&&Shr.L.tryToCall(e.onGridLoaded.bind(e),t),_._content=t.parentNode.parentNode,window.setTimeout(function(){t.childNodes[_._topOfStack().focus||0].focus()},100)},_scrollTop:(i={},i[y._sources]=i[y._selected]=void 0,i),_getScrollTop:function(e){var t=Shr.Dom.getParentByClass(e,y._selected)?y._selected:y._sources;return t&&_._scrollTop[t]},_setScrollTop:function(e,t){var r=Shr.Dom.getParentByClass(e,y._selected)?y._selected:y._sources;_._scrollTop[r]=t},_uploadsFolderKey:(o=window.navigator.userAgent,(o=o.toLowerCase()).match(/ios/)&&o.match(/iPhone/)||o.match(/android/)&&o.match(/mobile/),"${upload.myAlbums}"),_defaultFolderName:function(){return _._uploadsFolderKey.localize(_)},_defaultAlbumName:function(){return(new Date).dateFormat("${upload.albumName}".localize(_))},_selection:void 0,_selected:void 0,_selections:[],_getDataSource:function(e){return Shr.Array.findByProperty(_._root&&_._root.folders,"id",e)},_getDataSourceId:function(e){for(var t=e;t&&t.parent!=_._root;)t=t.parent;return t&&t.id||_._stack[1<_._stack.length?1:0].folder.id},_errorStatusCodes:function(){var e,t=[];for(e=400;e<=418;e++)t.push(e);for(e=500;e<=505;e++)t.push(e);return t}(),_randomErrorStatus:function(){return _._errorStatusCodes[parseInt(Math.random()*_._errorStatusCodes.length)]},_errorHooks:{sendAjaxRequest:{_base:_._SflyAjax,_override:function(e,t,r){_._countApiCall(r||"userMedia"),t.call(window,{status:_._randomErrorStatus()})}},beginExec:{_base:_._C,_override:function(e,t,r,n,o){_._countApiCall("shareSites"),r.call(window,{error:{type:_._randomErrorStatus()}})}},api:{_base:_._FB,_override:function(e){var t,r;Shr.L.forEach(arguments,function(e){return"function"==typeof e&&(t=e),!t}),_._countApiCall("fb"),"/"==e?(r=[],Shr.L.forEach(arguments[2].batch,function(e){r.push({body:window.JSON.stringify({})})}),r[Math.floor(Math.random()*r.length)].body=window.JSON.stringify({error:{code:_._randomErrorStatus()}}),Shr.L.tryToCall(t,r)):Shr.L.tryToCall(t,{error:{code:_._randomErrorStatus()}})}},getJsonP:{_base:_._ScriptManager,_override:function(e,t,r){_._countApiCall(r||"instagram"),Shr.L.tryToCall(t&&t.cb,{meta:{code:_._randomErrorStatus()}})}}},_popupPosition:function(e,t){var r=Shr.Dom.getPageBounds(Shr.Dom.getChildByClass(document,y._dialog)),n=e||450,o=t||350,i=null!=window.screenLeft?window.screenLeft:window.screen.left,s=null!=window.screenTop?window.screenTop:window.screen.top,a=window.screenTop+r.y+r.height/2-o/2,l=window.screenLeft+r.x+r.width/2-n/2;return Shr.B.isIE||(l=window.screen.width/2-n/2+i,a=window.screen.height/2-o/2+s),{top:a,left:l}},_setUploadImportErrorTooltip:function(e,t,r){var n;try{e&&Shr.L.forEach(_._selections,function(t){return!(n=t.find(function(t){return t._item===e}))}),n&&(n.state==_.Sink.state.cancel?n.tooltip="${importing.tooltip.cancelled}".localize(_):n.tooltip=("${importing.tooltip."+[t,r].join(".")+"}").substitute([t,r]).localize(_),n.tooltip||(n.tooltip=("${importing.tooltip."+t+"}").substitute([t]).localize(_),n.tooltip||(n.tooltip="${importing.tooltip.generic}".localize(_).substitute([t||"?",r||"?"]))))}catch(t){}},_formatStyle:function(){var e=window.trUPP&&window.trUPP.util||Shr,t=function(e){var t;return void 0===e&&(e=!1),t=e?window.innerHeight:Math.round(.9*window.innerHeight),Math.max(200,t)},r=Object.merge({},Shr.Style.parameters,{_newPPNavBarHeight:"",_newPPBinHeight:"",dlg:{initialHeight:t()+"px"},newPPDlg:{initialHeight:t()+"px"},newPPDlgNarrow:{initialHeight:t(!0)+"px"},grid:{size:_._gridThumbnailSize.wide+"px"},tile:{width:"200px",padding:"10px",margin:"5px"},padding:"55px",colors:{fb:"#4267B2",content:"#58595b",borderLight:"#f0efed",borderDark:"#A5A09D",contentBorder:"#a9a9a9",contentBg:"#fff",progressBar:"#ebe8e3",2014:{content:"#595959",navBarBg:"#efefef",darkBorder:"#a9a9a9",lightBorder:"#e2e2e2",scSelected:Shr.Style.parameters.colors.sfly,scBorder:"#7e7e7e",detail:"#3d3d3d",myComputer:"#369"},2015:{scBorder:"#4b525c",scSelectedContent:"#fff",scContent:"#4b525c",scSelectedBGColor:"#4b525c",scBGColor:"#fff"},2016:{content:"#58595b",hover:"#F05323",lightBG:"#FFF",shadow:"rgba(75, 81, 92, 0.4)",border:"#d8d8d8"},gradient:{selectionCount:{dark:"#cb3f16",light:Shr.Style.parameters.colors.sfly},progressBar:{start:Shr.Style.parameters.colors.sfly,stop:"#d54a20"}}},selectionCount:{fontSize:"13px",bgColor:"#f25e1c",padding:{v:"0px",h:"5px"},animation:Shr.Style.formatAnimation(b._keyframes._selectionCount,"0.25s 2 alternate ease-in-out"),to:{paddingDelta:"3px",fontSizeDelta:"2px",borderRadius:"10px"}},sprites:{url:e.IURL("universalpicker/img_sprite.png"),url2x:e.IURL("universalpicker/img_sprite@2x.png"),desktop:e.IURL("universalpicker/desktopicons.png"),desktop2x:e.IURL("universalpicker/desktopicons@2x.png"),tiles:e.IURL("universalpicker/tilesprite.png"),tiles2x:e.IURL("universalpicker/tilesprite@2x.png"),iconSprite:e.IURL("universalpicker/iconsprite.png"),iconSprite2x:e.IURL("universalpicker/iconsprite@2x.png"),mdotIconsprite:e.IURL("universalpicker/mdot-iconsprite.png"),mdotIconsprite2x:e.IURL("universalpicker/mdot-iconsprite@2x.png"),signinIcons:e.IURL("universalpicker/signin_icons.png"),signinIcons2x:e.IURL("universalpicker/signin_icons@2x.png")},backgrounds:{spinner:{onWhite:e.IURL("universalpicker/smooth_spinner.gif"),onWhite2x:e.IURL("universalpicker/smooth_spinner@2x.gif")},upload:e.IURL("universalpicker/imgMyComputerUpload.png"),upload2x:e.IURL("universalpicker/imgMyComputerUpload@2x.png"),album:Shr.Style.formatBackground({url:e.IURL("universalpicker/imgAlbum.png")}),error:"background-image: url(${0})".substitute([e.IURL("icon_alert_bg.gif",!0)]),onboarding:e.IURL("universalpicker/shutterfly-photos-animation.gif"),onboarding2x:e.IURL("universalpicker/shutterfly-photos-animation@2x.gif"),newRibbon:e.IURL("universalpicker/new-ribbon.png"),newRibbon2x:e.IURL("universalpicker/new-ribbon@2x.png"),clouds:e.IURL("universalpicker/clouds.png"),clouds2x:e.IURL("universalpicker/clouds@2x.png")},fonts:{navBarTitle:Shr.Style.parameters.fonts.avenir65Medium,content:Shr.Style.parameters.fonts.avenir55Roman,albumName:Shr.Style.parameters.fonts.avenir55Roman,xfer:Shr.Style.parameters.fonts.avenir85Heavy}}),n={selectionCount:{gradient:Shr.Style.formatLinearGradient(r.colors.gradient.selectionCount.light,r.colors.gradient.selectionCount.dark),to:{fontSize:Shr.Style.add(r.selectionCount.fontSize,r.selectionCount.to.fontSizeDelta),padding:{v:Shr.Style.add(r.selectionCount.padding.v,r.selectionCount.to.paddingDelta),h:Shr.Style.add(r.selectionCount.padding.h,r.selectionCount.to.paddingDelta)}}},tile:{left:Shr.Style.add(r.tile.width,Shr.Style.multiply(Shr.Style.add(r.tile.padding,r.tile.margin),2))},gradients:{progressBar:Shr.Style.formatLinearGradient(r.colors.gradient.progressBar.start,r.colors.gradient.progressBar.stop)},backgrounds:{tiles:Shr.Style.formatBackground({url:r.sprites.tiles,url2x:r.sprites.tiles2x,width:"500px"}),signinIcons:Shr.Style.formatBackground({url:r.sprites.signinIcons,url2x:r.sprites.signinIcons,width:"228px"})}},o=function(e){return Shr.B.isTouch?e:""},i=[".shrUP {font-family: 'Avenir LT', Verdana, Arial, sans-serif !important;}",".newDlg .dlg-tabstart {display:none;}",".shrUP {color: ${colors.content}; font-family: Helvetica, sans-serif; -webkit-text-size-adjust: none; -webkit-tap-highlight-color:rgba(0,0,0,0);}",".shrUP .shrSC {position: absolute; left: 0; bottom: 0;}",".shrUP.shrUPNarrow .shrSC TABLE {position: relative; top: 2px;}",".shrUP .shrSC TD:last-child {position: relative;}",".shrUPSelCount {padding: 1px 6px; margin-left: 10px; font-size: ${selectionCount.fontSize}; font-weight: normal; border-radius: 10px; color: #fff; text-shadow: none; background-color: ${selectionCount.bgColor};}",".shrUPSelCount.shrEmpty {display: none;}",".shrUP .shrNB {border-bottom: 1px solid ${colors.borderDark};}",".shrUPSel .shrNB .shrBB, .shrUPXferTop .shrNB .sflyButton, .shrUPXferTop .shrSC {visibility: hidden;}",".shrUPDetail .shrNB .shrBB {visibility: visible;}",".shrUPRoot .shrBB {visibility: hidden;}",".shrUPFC {list-style-type: none; padding-left: 0;}",".shrUPFC {height: auto; margin: 45px 0; overflow-y: auto;}",".shrUPFC {-webkit-overflow-scrolling: touch;}",".shrUPFC > LI {position: relative; height: ${minTouchSize}; line-height: ${minTouchSize}; padding-left: 52px; padding-right: 30px; font-size: 20px; color: #333; font-weight: bold;  border-bottom: #ccc solid 1px; cursor: pointer; }",".shrUPFC > LI {text-overflow: ellipsis; white-space: nowrap; overflow: hidden;}",".shrUPFC > LI:after {content: ' '; display: inline-block; position: absolute; top: 14px; right: 0px; bottom: auto; width: 21px; height: 19px;}",o(".shrUPFC > LI:after {${0}}".substitute([Shr.Style.formatBackground({file:r.sprites.url,file2x:r.sprites.url2x,x:"0px",y:"-430px",width:"34px"})])),".shrUPFC > LI.shrUPGrid {box-shadow: 0px 5px 7px #D8D8D8 inset; white-space: normal; height: auto; width: auto; border-bottom: none; padding: 0;}",".shrUPFC > LI.shrUPGrid:after {content: none;}",".shrUPFC > LI.shrUPGrid:first-child {box-shadow: none;}",".shrUPDetail .shrUPFC > LI.shrUPGrid {position: absolute !important; top: 0; right: 0; left: 0; bottom: 0;}",".signinLabel {font-size: 14px; text-align: center; vertical-align: middle; padding-top: 100px; padding-bottom: 100px;}",".signinButton {position: relative; left: 45%;}",".shrUPFC > LI.shrUPFolder:before {content: ' '; display: inline-block; position: absolute; top: 2px; left: 0px; width: 40px; height: 40px;}",o(".shrUPFC > LI.shrUPFolder:before {${0}}".substitute([Shr.Style.formatBackground({file:r.sprites.mdotIconsprite,file2x:r.sprites.mdotIconsprite2x,x:"0",y:"-90px",width:"44px"})])),o(".shrUPFC > LI.shrUPAlbum.shrUPMobileDefaultAlbum IMG {${0}}".substitute([Shr.Style.formatBackground({file:r.sprites.mdotIconsprite,file2x:r.sprites.mdotIconsprite2x,x:"0",y:"0",width:"44px"})])),".shrUPXfer .shrNB > DIV, .shrUPXfer .shrSC {display: none;}",".shrUPFC > .shrEmpty:not(.shrUPFolder), .shrUPFC > .shrBusy:not(.shrUPFolder) {text-align: center; font-weight: bold; color: #333; background: none;}",".shrUPFC > .shrEmpty:not(.shrUPFolder), .shrUPFC > .shrBusy:not(.shrUPFolder) {position: relative; display: block; top: 50%; padding-top: 75px; margin-top: -55px;}",".shrUPFC > .shrEmpty:before {width: 55px; height: 55px; ${0}}".substitute([Shr.Style.formatBackground({file:"universalpicker/imgNoPhotos.png",x:"0px",y:"0px",width:"55px"})]),".shrUPFC > .shrBusy:before  {width: 40px; height: 40px; ${0}}".substitute([Shr.Style.formatBackground({file:r.backgrounds.spinner.onWhite,file2x:r.backgrounds.spinner.onWhite2x,width:"40px"})]),".shrUP.shrUPNoSel .shrUPFC {margin-bottom: 0;}",".shrUP.shrUPNoSel .shrSC {display: none;}",".shrUPFC > .shrError {padding: 0 20px 20px;}",".shrUPFC > .shrError > div {padding: 30px 0; font-size: 14px;}",".shrUPFC > .shrError > div:first-child {line-height: 25px; border-bottom: 1px solid ${colors.borderDark}; padding-left: 40px; font-size: 16px;}",".shrUPFC > .shrError > div:first-child {${backgrounds.error}; background-position: left center; background-repeat: no-repeat;}",".shrUPFC > .shrError > .sflyButton + .sflyButton {margin-left: 10px;}",".shrUPConnect {text-align: center; position: relative; width: 100%; top: 25%;}",o(".shrUPConnect {position: absolute;}"),".shrUPConnect DIV {font-size: 14px; margin-bottom:25px;}",".shrUPConnect DIV:before {content: ' '; display: block; margin: 25px 0; height: 80px; ${0}}".substitute([Shr.Style.formatBackground({file:"universalpicker/imgMyComputerUpload.png",file2x:"universalpicker/imgMyComputerUpload@2x.png",x:"center",y:"center",width:"120px"})]),".shrUPFC > LI.shrUPSFLY:before, .shrUPFC > LI.shrUPFB:before, .shrUPFC > LI.shrUPIG:before, .shrUPFC > LI.shrUPUPL:before, .shrUPFC > LI.shrUPFL:before, .shrUPFC > LI.shrUPSP:before  {top: 0; left: 10px;}",o(".shrUPFC > LI.shrUPSFLY:before {top: 5px; ${0};}".substitute([Shr.Style.formatBackground({file:r.sprites.url,file2x:r.sprites.url2x,x:"0",y:"-716px",width:"34px"})])),o(".shrUPNonMigrated .shrUPFC > LI.shrUPSFLY:before {background-position: 0 0;}"),o(".shrUPFC > LI.shrUPSS:before {left: 5px; ${0};}".substitute([Shr.Style.formatBackground({file:r.sprites.url,file2x:r.sprites.url2x,x:"5px",y:"-533px",width:"34px"})])),o(".shrUPFC > LI.shrUPTL:before {left: 5px; ${0};}".substitute([Shr.Style.formatBackground({file:r.sprites.url,file2x:r.sprites.url2x,x:"5px",y:"-485px",width:"34px"})])),o(".shrUPFC > LI.shrUPGoog:before {left: 5px; ${0};}".substitute([Shr.Style.formatBackground({file:r.sprites.url,file2x:r.sprites.url2x,x:"5px",y:"-217px",width:"34px"})])),o(".shrUPFC > LI.shrUPFB:before {${0};}".substitute([Shr.Style.formatBackground({file:r.sprites.url,file2x:r.sprites.url2x,x:"0",y:"-129px",width:"34px"})])),o(".shrUPFC > LI.shrUPIG:before {${0};}".substitute([Shr.Style.formatBackground({file:r.sprites.url,file2x:r.sprites.url2x,x:"0",y:"-86px",width:"34px"})])),o(".shrUPFC > LI.shrUPFL:before {${0};}".substitute([Shr.Style.formatBackground({file:r.sprites.url,file2x:r.sprites.url2x,x:"0",y:"-172px",width:"34px"})])),o(".shrUPFC > LI.shrUPSP:before {${0};}".substitute([Shr.Style.formatBackground({file:r.sprites.url,file2x:r.sprites.url2x,x:"0",y:"-665px",width:"34px"})])),".shrUPFC > LI.shrUPUPL:before {${0}}".substitute([Shr.Style.formatBackground({file:"universalpicker/photoGallery.png",file2x:"universalpicker/photoGallery@2x.png",x:"0px",y:"center",width:"34px"})]),".shrUPFC > LI.shrUPUPL:before {background-size: 40px; top: 2px; left: 7px;}",".shrUPFC > LI.shrUPUPL.shrBusy:before {${0}}".substitute([Shr.Style.formatBackground({file:r.backgrounds.spinner.onWhite,file2x:r.backgrounds.spinner.onWhite2x,x:"0px",y:"center",width:"34px"})]),".shrUPFC > LI.shrUPUPL.shrBusy:before {margin-left: 0; background-position: center center !important;}",".shrUPFC > LI.shrUPUPL.shrBusy {padding-bottom: 0; background-image: none;}",".shrUPWide .shrUPFC {padding: 5px;}",".shrUPWide .shrUPFC > LI:not(.shrUPGrid) {display: inline-block; margin: 5px 5px; text-align: center; font-size: 16px;}",".shrUPWide .shrUPFC > LI:not(.shrUPTile):before, .shrUPWide .shrUPFC > LI:after {display: none;}",".shrUPWide .shrUPRoot + .shrUPHdr + .shrUPFC:not(.shrMCFC) {text-align: center;}",".shrUPWide .shrUPFC > LI.shrUPTile {width: ${tile.width}; line-height: normal; padding: ${tile.width} ${tile.padding} ${tile.padding};}",".shrUPWide .shrUPFC > LI.shrUPTile:nth-child(2n+3) {clear: left;}",".shrUPWide .shrUPFC > LI.shrUPTile:before {width: 100%; height: 180px; top: 0; left: 3px; background-size: 184px auto;}",o(".shrUPWide .shrUPFC > LI.shrUPTile:before {${0}}".substitute([Shr.Style.formatBackground({file:r.sprites.url,file2x:r.sprites.url2x,x:"40px",y:"-1675px",width:"184px"})])),".shrUPWide .shrUPFC > LI.shrUPUPL:before {background-image: url(${0}); background-position: center center; height: 184px;}".substitute([e.IURL("universalpicker/photoGalleryTile.png",!0)]),".shrUPWide .shrUPFC > LI.shrUPUpWait:before {background-image: url(${0}); background-position: center center; background-size: auto;}".substitute([e.IURL("universalpicker/imgSpinner.gif")]),".shrUPWide .shrUPFC > LI {height: auto; padding: 0; overflow: visible; font-weight: normal; border-style: none;}",".shrUPWide .shrUPFC > LI:not(.shrUPGrid):not(.shrUPTile) {width: 165px;}",".shrUPWide .shrUPFC > LI DIV:last-child {white-space: nowrap; text-overflow: ellipsis; overflow: hidden;}",".shrUPWide .shrUPFC > LI:not(.shrUPGrid) {z-index: 1;}",".shrUPFC > LI .shrUPStack {position: relative; display: inline-block; vertical-align: middle; margin: 10px 10px 5px; height: auto;}",".shrUPFC > LI .shrUPStack IMG {position: static; display: block; width: auto; min-width: 100px; min-height: 100px; max-width: ${0}px; height: auto; max-height: ${1}px;}".substitute([_._wideLayoutAlbumCover.w,_._wideLayoutAlbumCover.h]),".shrUPFC > LI .shrUPStack IMG {border: 1px solid ${colors.2014.darkBorder}}",".shrUPFC > LI.shrUPAlbum .shrUPStack:before {content: ''; width: 152px; height: 12px; display: block; ${0};}".substitute([Shr.Style.formatBackground({file:r.sprites.iconSprite,file2x:r.sprites.iconSprite2x,x:"0",y:"-12px",width:"152px"})]),".shrUPFC > LI.shrUPFolder .shrUPStack:before {content: ''; width: 152px; height: 12px; display: block; ${0};}".substitute([Shr.Style.formatBackground({file:r.sprites.iconSprite,file2x:r.sprites.iconSprite2x,x:"0",y:"-924px",width:"152px"})]),".shrUPFC > LI .shrUPStack:after {color: #f4f4f4; background-color: rgba(0,0,0,0.5); padding: 0 1em; font-size: 12px; line-height: 1.5em; position: absolute; bottom: 10px; right: 10px; text-align: center; border-radius: 1em; text-shadow: 1px 1px 0 rgba(0,0,0,0.3); box-shadow: 2px 2px 5px rgba(128, 128, 128, 0.5);}",".shrUPFC > LI.shrUPAlbum .shrUPStack[data-itemCount]:after {content: attr(data-itemCount);}",".shrUPFC > LI.shrUPAlbum .shrUPStack.shrUPStackWithoutCount:after {content: none !important}",".shrUPFC > LI.shrUPFolder .shrUPStack[data-childCount]:after {content: attr(data-childCount); font-size: 16px;}",".shrUPFC > LI.shrUPFolder .shrUPStack.shrUPStackWithoutCount:after {content: none !important}",".shrUPFC > LI.shrUPFolder .shrUPStack[data-childCount]:after {content: none;}",".shrUPnewPP .shrUPNavBar {display: block; margin-left: 200px; height: 47px; line-height: 47px; border-bottom: 1px solid ${colors.2016.border}; background-color: ${colors.2016.lightBG}; font-size: 14px; box-shadow: 0px 0px 3px 0px ${colors.2016.shadow}; position: relative;}",".shrUPnewPP.shrUPNarrow .shrUPNavBar {margin-left: 0; height: 44px; line-height: 44px;}",".shrUPnewPP .shrUPSearch {display: block; margin-left: 200px; z-index:200; top:0px; min-height: 47px; max-height: calc(100% - 150px); border-bottom: 1px solid ${colors.2016.border}; background-color: ${colors.2016.lightBG}; position: absolute; width: calc(100% - 200px);}",".shrUPNarrow .shrUPSearch {margin-left: 0px; width: 100%; max-height: 100%;}",".shrUPSearch.shrDisabled {display: none;}",".shrUPnewPP .shrUPSidebar {display: block; position: absolute; top: 0; bottom: 150px; left: 0; right: auto; width: 200px;}",".shrUPnewPP .shrUPSidebar, .shrUPnewPP .shrUPSidebar > OL {box-shadow: inset -2px 0px 3px -3px rgba(75, 81, 92, 0.4) !important;}",".shrUPnewPP .shrUPFC.shrMCFC {box-shadow:  none;}",".shrUPnewPP .shrUPBin {display: block; position: absolute; left: 0; right: 0; bottom: 0; height: 150px; z-index: 1;}",".shrUPnewPP.shrUPWide .shrUPBin {min-width: 500px;}",".shrUPnewPP.shrUPNarrow .shrUPBin {height: 40px;}",".shrUPnewPP.shrUPTouch:not(.shrUPWide) .shrUPSidebar.shrUPRoot, ",".shrUPnewPP.shrUPTouch.shrUPImport:not(.shrUPWide) .shrUPSidebar, ",".shrUPnewPP.shrUPTouch.shrUPDone:not(.shrUPWide) .shrUPSidebar, ",".shrUPnewPP.shrUPTouch.shrUPOk:not(.shrUPWide) .shrUPSidebar {","display: none;","}",".shrUPNBSel {float: right;}",".shrUPNBSel A {text-decoration: none;}",".shrUPNBSel A:hover {text-decoration: underline;}",".shrUPNBSel, .shrUPNBSel * {line-height: 26px;}",".shrUPNBSel > *:first-child {margin-right: 10px;}",".shrUPNBSel .shrPipe {margin: 0 10px;}",".shrUPNB .shrArrow {margin-left: 5px; border-color: ${colors.content};}",".shrUPNB .shrNBTitle > SPAN:first-child {position: relative;}",".shrUPNB SELECT {position: absolute; right: -5px; font-size: 13px; ${0};}".substitute([Shr.Style.formatOpacity(0)]),".shrUPFC:focus, .shrUP:focus {outline: none;}",".shrUPDlg:not(.shrMobile) {border-radius: 4px !important; overflow: hidden !important;min-width: 500px;}",".shrUPDlg:not(.shrMobile) .shrUPFC > LI {font-weight: normal;}",".shrUPDlg:not(.shrMobile) .dlg-bodyborder {margin: 0 0 4px 3px; padding: 0; border: none;}",".shrUPDlg:not(.shrMobile) .shrUP {margin: 3px 20px 0;}",".shrUPDlg:not(.shrMobile) .shrUP, .shrUPDlg:not(.shrMobile) .shrUPFC {position: static;}",".shrUPDlg:not(.shrMobile) .shrUPFC {margin-top: 0;}",".shrUPDlg:not(.shrMobile) .shrUPDetail .shrUPFC {position: relative;}",".shrUPDlg:not(.shrMobile) .shrUPFC, .shrUPDlg:not(.shrMobile) .shrUPHdr {${0};}".substitute([Shr.Style.formatBoxSizing("border-box")]),".shrUPDlg:not(.shrMobile) .shrUPRoot + .shrUPHdr + .shrUPFC:not(.shrMCFC) {text-align: center;}",".shrUPDlg:not(.shrMobile) .shrUPFC > LI.shrUPTile {float: none; left: auto;}",".shrUPDlg .shrUPWide .shrUPContent {margin-left: 200px; ${0};}".substitute([Shr.B.isSafari?"padding-bottom: 150px":"margin-bottom: 150px"]),".shrUPDlg .shrUPContent .shrUPFC {margin-left: 0;}",".shrUPDlg .shrUPFC {margin-left: 0; border: 1px solid ${colors.contentBorder}; padding: 10px;}",".shrUPDlg .shrUPWide.shrUPAnon .shrUPRoot + .shrUPContent {margin-left: 0;}",".shrUPDlg .shrUPWide .shrNB {height: 30px; line-height: 30px;}",".shrUPDlg .shrUPWide .shrNB .sflyButton, .shrUPDlg .shrUPWide .shrNB .sflyButton SPAN {height: 30px; line-height: 30px;}",".shrUPDlg .shrUPWide .shrNB .sflyButton-tertiary, .shrUPDlg .shrUPWide .shrNB .sflyButton-quaternary, .shrUPDlg .shrUPWide .shrNB .sflyButton-tertiary SPAN, .shrUPDlg .shrUPWide .shrNB .sflyButton-quaternary SPAN {height: 28px; line-height: 28px;}",".shrUPDlg .shrUPWide .shrNBTitle {font-weight: normal !important; color: inherit;}",".shrUPDlg:not(.shrMobile) .shrUPNB {background: #fff; border: none;}",".shrUPDlg .shrSC {bottom: -2px; background: transparent; padding: 0; border: none;}",".shrUPDlg:not(.shrMobile) .dlgTitle {display: none;}",".shrUPDlg:not(.shrMobile) .shrUPFC {min-height: 200px;}",".shrUPDlg:not(.shrMobile) .shrUPTile {white-space: normal; vertical-align: top;}",".shrUPDlg:not(.shrMobile) .shrUPFC {background-image: none; background-color: ${colors.contentBg};}",".shrUPWide .shrUPFC > .shrBusy:before {${0}}".substitute([Shr.Style.formatBackground({url:r.backgrounds.spinner.onWhite,url2x:r.backgrounds.spinner.onWhite2x,width:"40px"})]),".shrUPWide .shrUPFC > LI.shrUPUPL.shrBusy:before {${0}}".substitute([Shr.Style.formatBackground({url:r.backgrounds.spinner.onWhite,url2x:r.backgrounds.spinner.onWhite2x,x:"0px",y:"center",width:"34px"})]),".shrUPWide .shrUPImport .shrUPFC .shrBusy {background: transparent url(${0}) no-repeat center center;}".substitute([r.backgrounds.spinner.onWhite]),".shrUPWide .shrUPSI #signInWaitWheel {${0};}".substitute([Shr.Style.formatBackground({url:r.backgrounds.spinner.onWhite,url2x:r.backgrounds.spinner.onWhite2x,width:"40px"})]),".shrUPWide .shrUPSI .wait-wheel {${0};}".substitute([Shr.Style.formatBackground({url:r.backgrounds.spinner.onWhite,url2x:r.backgrounds.spinner.onWhite2x,width:"40px",important:!0})]),".shrUPDlg.shrMobile .shrUP.shrUPWide .shrUPNB.shrUPRoot + .shrUPHdr + .shrUPFC:not(.shrMCFC) {padding-left: 100px; padding-right: 100px;}",".shrUPDlg .shrNB > DIV {max-width: 25%;}",".shrUPDlg .shrBB {max-width: 100%;}",".shrUPDlg .shrBB SPAN {display: inline-block; max-width: 100%; overflow: hidden; text-overflow: ellipsis;}",".shrUPDlg .shrBB SPAN {line-height: inherit;}",".shrUPDlg .shrBB {padding-left: 15px !important;}",".shrUPDlg .shrBB:before {content: none;}",".shrUPDlg .shrBB:after {content: '\\2039'; display: inline-block; position: absolute; left: 0; top: -3px; font-size: 175%;}",".shrUPDlg .shrBB:after {content: ''; display: inline-block; position: absolute; left: 0; top: 9px; width: 7px; height: 10px;}",".shrUPDlg .shrBB:after {background-image: url(${sprites.desktop}); background-position: -200px -200px;}",".shrUPDlg:not(.shrMobile) .shrUPFC > .shrEmpty:not(.shrUPFolder), .shrUPDlg:not(.shrMobile) .shrUPFC > .shrBusy:not(.shrUPFolder) {margin-top: -65px;}",".shrUPWide.shrUPSel .shrUPFC > .shrEmpty {font-family: ${fonts.avenir65Medium}; font-size: 36px; color: #181512 !important;}",".shrUPHdr {position: relative; padding: 6px 15px; overflow: auto; background-color: #f2f2f2; border: 1px solid ${colors.contentBorder}; border-bottom-color: #ccc;}",".shrUPDetail .shrUPHdr {display: none;}",".shrUPHdr.shrEmpty {display: none;}",".shrUPHdr:not(.shrEmpty) + .shrUPFC {border-top-style: none;}",".shrUPImport .shrUPHdr, .shrUPImport .shrUPnewPPHdr, .shrUPImport .shrBusy, .shrUPSel .shrEmpty {font-family: ${fonts.xfer}; font-size: 20px;font-weight: normal; color: #474134 !important;}",".shrUPImport .shrUPHdr DIV, .shrUPImport .shrUPnewPPHdr DIV, .shrUPImport .shrBusy DIV {font-family: ${fonts.xfer}; font-size: 20px;}",".shrUPImport .shrUPNBSel {display: none;}",".shrUPImport .shrUPG > LI > DIV {box-shadow: none !important;}",".shrUPImport .shrUPG > LI > DIV:before, .shrUPImport .shrUPG > LI > DIV:after {content: none !important;}",".shrUPImport .shrSC {display: block; visibility: hidden;}",".shrUPImport .shrUPFC {min-height: 200px;}",".shrUPImport .shrUPFC .shrBusy {padding: 0; bottom: auto;}",".shrUPImport .shrUPFC .shrBusy {background: transparent url(${0}) no-repeat center center;}".substitute([r.backgrounds.spinner.onWhite]),".shrUPImport .shrUPFC .shrBusy {${0};}".substitute([Shr.Style.formatBackground({url:r.backgrounds.spinner.onWhite,url2x:r.backgrounds.spinner.onWhite2x,width:"40px",x:"center",y:"center"})]),".shrUPImport .shrUPFC .shrBusy:before {content: none;}",".shrUPImport .shrUPFC .shrBusy > .sflyButton {display; block; width: auto;}",".shrMobile .shrUPImport .shrUPFC .shrBusy > .sflyButton {margin-bottom: -10px;}",".shrUPImport .shrUPFC .shrBusy:not(.shrProgress) > .shrPB {visibility: hidden;}",".shrUPImport .shrUPFC .shrBusy > DIV:first-child {font-weight: normal;}",".shrUPImport .shrUPFC .shrBusy > .shrPB {position: relative; margin: 25px 20%; overflow: hidden; height: 18px; border-radius: 3px; background-color: ${colors.progressBar};}",".shrUPImport .shrUPFC .shrBusy > .shrPB {${progressBar.border};}",".shrUPImport .shrUPFC .shrBusy > .shrPB {box-shadow: 0 0 6px 0 #555 inset;}",".shrPB > .shrOverlay {${gradients.progressBar}; border-radius: inherit; margin: 2px 0 1px 1px; max-width: 99.6%;}",".shrUPImport .shrUPFC .shrBusy.shrProgress {background: none;}",".shrUPImport .shrUPHdr {padding-top: 75px; background-color: ${colors.contentBg}; border: none;}",".shrUPImport .shrUPHdr:before {content: ''; position: absolute; top: 25px; left: 50%; margin-left: -25.5px; width: 51px; height: 51px; background-image: url(${sprites.desktop}); background-position: 0 -200px; background-repeat: no-repeat;}",".shrUPnewPP.shrUPImport.shrError .shrUPnewPPHdr:before {content: ''; margin: auto; display: block; width: 51px; height: 51px; background-image: url(${sprites.desktop}); background-position: 0 -200px; background-repeat: no-repeat;}",".shrUPImport .shrUPHdr .shrError, .shrUPImport .shrUPnewPPHdr .shrError {text-align: center;}",".shrUPImport .shrUPHdr .shrError > DIV:first-child, .shrUPImport .shrUPnewPPHdr .shrError > DIV:first-child {margin-bottom: 10px;}",".shrUPImport .sflyButton + .sflyButton {margin-left: 10px;}",".shrMobile .shrUPImport.shrError .shrUPHdr, .shrMobile .shrUPImport.shrError .shrUPnewPPHdr {height: 155px;}",".shrMobile .shrUPImport.shrError .shrUPFC {margin-top: 210px;}",".shrMobile.shrUPWide .shrUPImport.shrError .shrUPFC {margin-top: 200px;}",".shrUP.shrUPImport:not(.shrUPWide) .shrUPFC .shrBusy DIV, .shrUP.shrUPImport:not(.shrUPWide) .shrHdr DIV, .shrUP.shrUPImport:not(.shrUPWide) .shrUPHdr DIV, .shrUP.shrUPImport:not(.shrUPWide) .shrUPnewPPHdr DIV {font-size: 16px; font-weight: normal;}",".shrUP.shrUPImport:not(.shrUPWide) .shrUPHdr, .shrUP.shrUPImport:not(.shrUPWide) .shrUPnewPPHdr {background-color: #fff; line-height: normal;}",".shrUP:not(.shrUPWide) .shrUPFC .shrEmpty {line-height: normal; font-size: 16px; font-weight: normal;}",".shrUPAnon .shrSC {display: none;}",".shrUPAnon .shrUPRoot + .shrUPHdr {cursor: pointer; text-align: center;}",".shrUPAnon .shrUPRoot + .shrUPHdr STRONG {font-weight: bold; font-family: ${fonts.avenir85Heavy}; color: ${colors.sfly};}",".shrUP * {${0};}".substitute([Shr.Style.formatBoxSizing("content-box")]),".shrUPFC > LI > DIV:last-child {line-height: ${minTouchSize};}",".shrUPPPhone .shrMobile {width: 320px; height: 480px; box-shadow: 5px 5px black;}",".shrUPPTablet .shrMobile {width: 1024px; height: 768px; box-shadow: 5px 5px black;}",".shrUPSI .dlg-inline {width: auto !important; min-width: 400px; font-family: ${fonts.avenir35Light} !important;}",".shrUPSI INPUT {padding: 2px;}",".shrUPSI .dlg-content, .shrUPSI .signup-form, .shrUPSI .signup-form .dlg-content {background: none !important;}",".shrUPSI .dlgTitle {display: block !important; text-align: center; font-size: 30px; margin: 30px 0; color: ${colors.sfly};}",".shrUPSI .dlgTitle {font-family: ${fonts.avenir35Light};}",".shrUPSI TABLE.input-grid {margin: 0 auto;}",".shrUPSI TABLE.input-grid TBODY > TR > TD:first-child LABEL {margin-right: 5px;}",".shrUPSI .siRememberMe {text-align: left;}",".shrUPSI .signin-forgot-password {display: none;}","#signInButtons .sflyButton {display: inline-block !important;}",".shrUPSI .signup-btn-join .sflyButton {display: inline-block !important;}",".shrUPSI #signInButtons .sflyButton + A {margin-left: 10px; cursor: pointer;}",".shrUPSI .sflyButton {color: #fff !important;}",".shrUPSI .signin-join-link {text-align: center; font-size: 17px;}",".shrUPSI .signin-join-link {border-top: 1px solid #58595b; margin: 28px 15px; padding-top: 34px;}",".shrUPSI .signin-join-link A {display: block; margin-top: 10px; color: ${colors.sfly} !important; text-decoration: underline !important; cursor: pointer;}",".shrUPSI .signup-signin {padding-top: 0; margin-top: 15px !important; font-size: 13px; border-top: none;}",".shrUPSI .email-me {display: none;}",".shrUPSI .signup-form .wrap-label {display: none;}",".shrUPSI #signInWaitWheel {background: none; background-size: 26px;}",".shrUPSI #signInWaitWheel {min-height: 40px; ${0};}".substitute([Shr.Style.formatBackground({url:r.backgrounds.spinner.onWhite,url2x:r.backgrounds.spinner.onWhite2x,width:"40px"})]),".shrUPSI .siHeader, .shrUPSI .signin-footer-cont, .shrUPSI #su-title, .shrUPSI .signup-header-bevel, .shrUPSI .signup-rightxxx {display: none !important;}",".shrUPSI #signin-form.shrBusy, .shrUPSI .signup-form.shrBusy {background-image: none;}",".shrUPSI #signin-form.shrBusy #signInButtons A, .shrUPSI #signin-form.shrBusy .signin-join-link {visibility: hidden;}",".shrUPSI .signup-form.shrBusy .signup-signin {visibility: hidden;}",".shrUPSI .signup-form.shrBusy .wait-wheel {display: block !important; background-color: transparent; min-height: 40px; ${0};}".substitute([Shr.Style.formatBackground({url:r.backgrounds.spinner.onWhite,url2x:r.backgrounds.spinner.onWhite2x,width:"40px"})]),".shrUPSI .signup-form.shrBusy .signup-btn-join .sflyButton {display: none !important;}",".shrUPSI .siErrors, .shrUPSI .suErrors {margin: 0 auto !important; max-width: 80%;}",".shrUPSI .siErrors H6, .shrUPSI .suErrors H6 {font-size: inherit; margin: 0;}",".shrUPSI .siErrors .errorList, .shrUPSI .suErrors .errorList {padding: 0;}",".shrUPFC > LI .shrUPStack IMG {${0};}".substitute([Shr.Style.formatBackground({url:r.backgrounds.spinner.onWhite,url2x:r.backgrounds.spinner.onWhite2x,width:"40px",x:"center",y:"center"})]),".dlgWB .dlg-sizer {${0};}".substitute([Shr.Style.formatBackground({url:r.sprites.desktop,url2x:r.sprites.desktop2x,width:"350px",x:-300,y:-200})]),".shrOverlay {position: absolute; top: 0; right: 0; bottom: 0; left: 0;}",".shrUP {font-size: 13px;}",".shrUP.shrUPWide {margin: 0 !important;}",".shrUP.shrUPWide .shrUPFC, .shrUP.shrUPWide .shrUPHdr {border-width: 0px 0px 1px 0px;}",".shrUPDlg .dlg-header, .shrUPDlg .dlg-footer, .shrUPDlg .dlg-left, .shrUPDlg .dlg-right {display: none;}",".shrUPDlg .dlg-bodyborder {margin: 0 !important;}","TABLE.dlgWB.shrUPDlg {border-radius: 0; box-shadow: 0 5px 15px #565656;}",".shrUPDlg .dlg-body, .shrUP.shrUPWide .shrUPNB {background: ${colors.2014.navBarBg};}",".shrUPDlg .dlg-center, .shrUPDlg .dlg-left, .shrUPDlg .dlg-top, .shrUPDlg .dlg-bottom, .shrUPDlg .dlg-right, .shrUPDlg .dlg-topleft, .shrUPDlg .dlg-topright, .shrUPDlg .dlg-bottomleft, .shrUPDlg .dlg-bottomright, .shrUPDlg .dlg-top .cb-img {background: ${colors.2014.navBarBg} !important;}",".shrUP {color: ${colors.2014.content};}",".shrUP .shrUPNB {padding: 6px 18px; cursor: move;}",".shrUP .shrNB > .shrNBTitle {font-size: 20px; font-family: ${fonts.navBarTitle}; text-shadow: none;}",".shrUP .shrNBTitle, .shrUP .shrUPNB .shrBB {line-height: 30px;}",".shrUP .shrUPNB .shrBB {padding-left: 17px !important; font-size: 14px; text-decoration: none; cursor: pointer;}",".shrUP .shrUPNB .shrBB:after {width: 10px; height: 14px; top: 8px;}",".shrUP .shrUPNB .shrBB {color: #369;}",".shrUP .shrUPNB .shrBB {overflow: hidden; text-overflow: ellipsis;}",".shrUPDlg.shrMobile .shrUP:not(.shrUPWide) .shrSC {bottom: 0;}",".shrUPDlg:not(.shrMobile) .shrUP .shrSC {bottom: 10px;}",".shrUPDlg.shrMobile .shrUP.shrUPWide .shrSC {bottom: 2px;}",".shrUP .shrSC, .shrUP .shrSC * {line-height: 26px;}",".shrUP .shrSC TD A {border-width: 1px 1px 1px 0; color: ${colors.2015.scContent}; background-color: ${colors.2015.scBGColor}; border-color: ${colors.2015.scBorder}; text-shadow: none; box-shadow: none; background-image: none; font-size: 15px; font-weight: 400;}",".shrUP .shrSC TD.shrSelected A {color: ${colors.2015.scSelectedContent}; background-color: ${colors.2015.scSelectedBGColor}; background-image: none; box-shadow: none; font-size: 14px; font-weight: normal;}",".shrUP .shrSC TD:first-child A {border-left-width: 1px;}",".shrUP .shrSC TD:last-child A {border-radius: 0 4px 4px 0;}",".shrUP .shrSC TD A:focus {outline: none;}",".shrUP .shrUPSelCount {line-height: 0px;}",".shrUPWide .shrUPHdr {padding: 0 18px; background-color: #fff; border-bottom-color: ${colors.2014.lightBorder};}",".shrUPWide.shrUPImport.shrError .shrUPHdr {padding-top: 75px; padding-bottom: 6px;}",".shrUPWide .shrUPHdr, .shrUPWide .shrUPHdr > DIV {min-height: 42px; line-height: 42px;}",".shrUPWide .shrUPHdr * {font-size: 12px;}",".shrUPWide .shrMCHdr A.sflyButton {margin-top: 10px;}",".shrUPWide .shrUPHdr {text-align: center;}",".shrUPWide .shrUPHdr .shrUPNBSel * {line-height: 42px;}",".shrUPWide .shrUPHdr .shrUPNBSel .shrPipe {margin: 0 12px;}",".shrUPWide .shrUPSort {position: relative; float: right; line-height: 42px;}",".shrUPWide .shrUPSort:hover {text-decoration: underline;}",".shrUPWide .shrUPSort .shrArrow {margin-left: 5px; border-color: ${colors.2014.navBarContent};}",".shrUPWide .shrUPSort SELECT {position: absolute; top: 50%; margin-top: -10px; right: -5px; font-size: 13px; ${0};}".substitute([Shr.Style.formatOpacity(0)]),".shrUPWide .shrUPSort SELECT {max-width: 100%; cursor: pointer;}",".shrUPWide .shrUPHdr .shrUPNBSel + .shrUPSort {margin-right: 20px;}",".shrUPWide .shrUPFC {padding: 26px 29px; margin-bottom: 47px;}",".shrUPWide .shrUPFC > LI {color: ${colors.2014.content};}",".shrUPFC > LI .shrUPStack {margin: 0;}",".shrUPFC > LI .shrUPStack IMG {background-position: 50% 33%, center center; min-width: ${0}px;}".substitute([_._wideLayoutAlbumCover.w]),".shrUPFC > LI .shrUPStack IMG {background-size: cover, 40px;}",".shrUPFC > LI > DIV:last-child {margin-top: 5px; line-height: 32px; font-size: 14px;}",".shrUPWide LI.shrUPFolder, .shrUPWide LI.shrUPAlbum {padding: 15px 9px 0; border-left: 1px solid transparent; margin: 1px !important;}",".shrUPWide LI.shrUPFolder:hover, .shrUPWide LI.shrUPAlbum:hover {border-color: transparent;}",".shrUPWide LI.shrUPFolder:hover IMG, .shrUPWide LI.shrUPAlbum:hover IMG {border: 1px solid ${colors.2014.lightBorder}; -webkit-box-shadow: 0px 2px 4px 0px rgba(0,0,0,0.3); -moz-box-shadow: 0px 2px 4px 0px rgba(0,0,0,0.3); box-shadow: 0px 2px 4px 0px rgba(0,0,0,0.3);}",".shrUPWide LI.shrUPFolder:focus, .shrUPWide LI.shrUPAlbum:focus {outline: none;}","TABLE.dlgWB.shrUPDlg, .shrUPDlg .dlg-center, .shrUPDlg .dlg-body {overflow: visible;}",".dlg-body > FORM > .dragHandle {position: absolute; top: 0; bottom: 0; left: 0; right:0;}",'.dlg-body > FORM > .dragHandle[sizetype="n"] {cursor: n-resize; height: 5px; left: 5px; right: 5px; bottom: auto;}','.dlg-body > FORM > .dragHandle[sizetype="nw"] {cursor: nw-resize; width: 5px; height: 5px; right: auto; bottom: auto;}','.dlg-body > FORM > .dragHandle[sizetype="ne"] {cursor: ne-resize; width: 5px; height: 5px; left: auto; bottom: auto;}','.dlg-body > FORM > .dragHandle[sizetype="w"] {cursor: w-resize; width: 5px; right: auto; top: 5px; bottom: 5px;}','.dlg-body > FORM > .dragHandle[sizetype="e"] {cursor: e-resize; width: 5px; right: -5px; left: auto; top: 5px; bottom: 15px;}','.dlg-body > FORM > .dragHandle[sizetype="sw"] {cursor: sw-resize; width: 5px; height: 5px; right: auto; top: auto;}','.dlg-body > FORM > .dragHandle[sizetype="s"] {cursor: s-resize; height: 5px; left: 5px; right: 15px; top: auto;}','.dlg-body > FORM > .dragHandle[sizetype="se"] {cursor: se-resize; width: 15px; height: 15px; left: auto; top: auto; background-image: url(${sprites.desktop}); background-position: -300px -200px;;}',".shrUPWide .shrUPFC > LI.shrUPTile {width: 182px; height: 182px; font-size: 0; padding: 0; margin: 17px !important;}",".shrUPWide .shrUPFC > LI.shrUPTile {border-style: none;}",".shrUPWide .shrUPFC > LI.shrUPTile {${0};}".substitute([Shr.Style.formatBackground({url:r.sprites.tiles,url2x:r.sprites.tiles2x,width:"500px"})]),".shrUPWide .shrUPFC > LI.shrUPTile:hover {background-position: -200px 0;}",".shrUPWide .shrUPFC > LI.shrUPTile {background-position: 0 -1400px;}",".shrUPWide .shrUPFC > LI.shrUPTile:hover, .shrUPWide .shrUPFC > LI.shrUPTile:focus {background-color: #ccc; border-radius: 40px; box-shadow: 0 0 0 4px #ccc inset;}",".shrUPWide .shrUPFC > LI.shrUPTile.shrUPMC {background-position: 0 0;}",".shrUPWide .shrUPFC > LI.shrUPTile.shrUPSFLY {background-position: 0 -2600px; border-radius: 35px;}",".shrUPWide.shrUPNonMigrated .shrUPFC > LI.shrUPTile.shrUPSFLY {background-position: 0 -200px; border-radius: 40px;}",".shrUPWide .shrUPFC > LI.shrUPTile.shrUPSS {background-position: 0 -400px;}",".shrUPWide .shrUPFC > LI.shrUPTile.shrUPTL {background-position: 0 -600px;}",".shrUPWide .shrUPFC > LI.shrUPTile.shrUPFB {background-position: 0 -800px;}",".shrUPWide .shrUPFC > LI.shrUPTile.shrUPIG {background-position: 0 -1000px;}",".shrUPWide .shrUPFC > LI.shrUPTile.shrUPUPL {background-position: 0 -1200px;}",".shrUPWide .shrUPFC > LI.shrUPTile:before, .shrUPWide .shrUPFC > LI.shrUPTile:after {content: none;}",".shrUPWide .shrUPFC.shrMCFC > .shrEmpty A SPAN {color: ${colors.2014.content};}",".shrUPWide.shrUPImport DIV, .shrUPWide.shrUPImport .shrUPHdr DIV, .shrUPWide.shrUPImport .shrUPnewPPHdr DIV, .shrUPWide.shrUPImport .shrBusy DIV {color: ${colors.2014.content}; font-family: ${fonts.content} !important;}",".shrUPImport .shrUPFC .shrBusy > .shrPB {background: ${colors.2014.navBarBg}; border: 1px solid ${colors.2014.scBorder}; box-shadow: none;}",".shrUPImport .shrUPFC .shrBusy > .shrPB > .shrOverlay {margin: 0; max-width: none; background: ${colors.sfly};}",".shrUPWide.shrUPSel .shrUPFC > .shrEmpty {font-size: 28px; font-weight: normal; font-family: ${fonts.content}; color: ${colors.2014.content} !important;}",".shrUPNarrow.shrUPSel .shrUPSearch {display: none;}",".shrUPDlg.shrMobile .shrUPFC {height: auto; background-image: none;}",".shrUPDlg.shrMobile .shrUP.shrUPWide.shrUPAnon .shrUPNB.shrUPRoot + .shrUPHdr + .shrUPFC {padding-top: 65px !important;}",".shrUPDlg.shrMobile .shrUPNB {border: none;}",".shrUPDlg.shrMobile .shrUPFC {background: #fff;}",".shrUPDlg.shrMobile .shrUP, .shrUPDlg.shrMobile .shrSC {background: ${colors.2014.navBarBg};}",".shrUPDlg.shrMobile .shrUPWide .shrUPFC > LI.shrUPUPL.shrBusy {${0}}".substitute([Shr.Style.formatBackground({url:r.backgrounds.spinner.onWhite,url2x:r.backgrounds.spinner.onWhite2x,x:"center",y:"center",width:"34px"})]),".shrUPDlg.shrMobile .shrUPWide .shrUPHdr:not(.shrEmpty) + .shrUPFC {margin-top: 86px;}",".shrUPDlg.shrMobile .shrUP.shrUPWide.shrUPAnon .shrUPNB.shrUPRoot + .shrUPHdr + .shrUPFC {padding-top: 50px !important;}",".shrUPDlg.shrMobile .shrUP.shrUPWide .shrUPNB.shrUPRoot + .shrUPHdr.shrEmpty + .shrUPFC {padding-top: 70px !important;}",".shrMobile .shrUP:not(.shrUPWide) .shrNB.shrUPNB {padding: 6px; background-image: none;}",".shrMobile .shrUP:not(.shrUPWide) .shrUPNB .shrNBTitle {font-size: 16px; font-weight: normal !important; color: inherit;}",".shrMobile .shrUP:not(.shrUPWide) .shrUPFC {padding: 0;}",".shrMobile .shrUP:not(.shrUPWide).shrUPAnon .shrUPRoot + .shrUPHdr + .shrUPFC {margin-top: 45px;}",".shrMobile .shrUP:not(.shrUPWide).shrUPAnon .shrUPRoot + .shrUPHdr {font-size: 12px;}",".shrMobile .shrUP:not(.shrUPWide).shrUPAnon .shrUPRoot + .shrUPHdr, .shrMobile .shrUP:not(.shrUPWide) .shrUPAnon .shrUPRoot + .shrUPHdr * {line-height: 30px;}",".shrMobile .shrUP:not(.shrUPWide).shrUPSel .shrEmpty {color: ${colors.2014.content} !important;}",".shrMobile .shrUP:not(.shrUPWide) .shrUPFC > LI {font-weight: normal; color: ${colors.2014.content};}","#fb-root {height: 0 !important;}",".shrUPSnapSrc {display: inline-block; width: 22px; height: 22px; vertical-align: middle; border: 10px solid transparent; margin: -5px -5px 0 0; cursor: pointer;}",".shrUPSnapSrc {${backgrounds.tiles};}",".shrUPSrc .shrUPRoot .shrUPSnapSrc, .shrUPSel .shrUPSnapSrc, .shrUPImport .shrUPSnapSrc, .shrUPDone .shrUPSnapSrc, .shrUPOk .shrUPSnapSrc {display: none;}",".shrUPSrc .shrUPSnapSrc {background-position: -400px -1500px;}",".shrUPSrc.shrUPSrc_myComputer .shrUPSnapSrc {background-position: -400px -100px;}",".shrUPSrc.shrUPSrc_sfly .shrUPSnapSrc {background-position: -400px -2700px;}",".shrUPNonMigrated.shrUPSrc.shrUPSrc_sfly .shrUPSnapSrc {background-position: -400px -300px;}",".shrUPSrc.shrUPSrc_sites .shrUPSnapSrc {background-position: -400px -500px;}",".shrUPSrc.shrUPSrc_thisLife .shrUPSnapSrc {background-position: -400px -700px;}",".shrUPSrc.shrUPSrc_fb .shrUPSnapSrc {background-position: -400px -900px;}",".shrUPSrc.shrUPSrc_instagram .shrUPSnapSrc {background-position: -400px -1100px;}",".shrUPSrc.shrUPSrc_device .shrUPSnapSrc {background-position: -400px -1300px;}",".shrUPSrc.shrUPSrc_flickr .shrUPSnapSrc {background-position: -400px -1700px;}",".shrUPSrc.shrUPSrc_stockphotos .shrUPSnapSrc {background-position: -400px -2100px;}",".shrUPSrc.shrUPSrc_google .shrUPSnapSrc {background-position: -400px -2500px;}",".shrUPSnapSrcMenu {position: absolute; padding: 5px; background-color: #fff; z-index: 2;}",".shrUPSnapSrcMenu {border-radius: 5px;}",".shrUPSnapSrcMenu {box-shadow:","0 1px 0 0 #d4d4d4, 0 2px 0 0 #dadada,","-1px 0 0 0 #d4d4d4, -2px 0 0 0 #dadada,","1px 0 0 0 #d4d4d4, 2px 0 0 0 #dadada,","0 -1px 0 0 #adadad",";}",".shrUPSnapSrcMenu {display: none;}",".shrUPSnapSrcMenu.shrOpen, .shrUPSnapSrcMenu:hover {display: block;}",".shrUPSnapSrcMenu > SPAN {float: left; clear: none; width: 51px; height: 51px; margin: 5px; cursor: pointer;}",".shrUPSnapSrcMenu > SPAN {${backgrounds.tiles};}",".shrUPSnapSrcMenu > SPAN {background-position: -400px -1400px;}",".shrUPSnapSrcMenu > .shrArrow {position: absolute; top: -9px; left: 50%; margin-left: -7px; border-color: #adadad;}",".shrUPSnapSrcMenu > .shrArrow + .shrArrow {top: -7px; margin-left: -6px; border-color: #fff;}",".shrUPSnapSrcMenu > :nth-child(4n+3) {clear: left; text-align: center;}",".shrUPSnapSrcMenu .shrUPSrc_myComputer {background-position: -400px 0;}",".shrUPSnapSrcMenu .shrUPSrc_sfly       {background-position: -400px -2600px;}",".shrUPNonMigrated .shrUPSnapSrcMenu .shrUPSrc_sfly {background-position: -400px -200px;}",".shrUPSnapSrcMenu .shrUPSrc_sites      {background-position: -400px -400px;}",".shrUPSnapSrcMenu .shrUPSrc_thisLife   {background-position: -400px -600px;}",".shrUPSnapSrcMenu .shrUPSrc_fb         {background-position: -400px -800px;}",".shrUPSnapSrcMenu .shrUPSrc_instagram  {background-position: -400px -1000px;}",".shrUPSnapSrcMenu .shrUPSrc_device     {background-position: -400px -1200px;}",".shrUPSnapSrcMenu .shrUPSrc_flickr     {background-position: -400px -1600px;}",".shrUPSnapSrcMenu .shrUPSrc_stockphotos {background-position: -400px -2000px;}",".shrUPSnapSrcMenu .shrUPSrc_google     {background-position: -400px -2400px;}",".shrUPSnapSrcMenu a {text-decoration: none; color: #428bca; cursor: pointer;}",".shrUPDone .shrUPNB > DIV, .shrUPDone .shrSC, .shrUPOk .shrUPNB > DIV, .shrUPOk .shrSC {display: none;}",".shrUPWide .shrUPFC {width: 100%;}",".shrUPWide .shrUPRoot + .shrUPHdr + .shrUPFC {width: auto;}",".shrUPNBSel A {color: #369;}",".dlgWB2 .dragHandle .dlgTitle {font-family: ${fonts.content};}","BODY.shrUPFocus *:focus {box-shadow: 0 0 0 5px red;}",".shrUPWide .shrUPRoot + .shrUPHdr + .shrUPFC {padding-left: 6% !important; padding-right: 6% !important;}",".shrUPNB .shrUPInfo {position: relative; cursor: pointer; background: none; width: 15px;}",".shrUPNB .shrUPInfo:before {content: 'i'; display: block; width: 15px; height: 15px; font-weight: bold; color: #448ccb; background: #fff; border: 1px solid #448ccb;}",".shrUPNB .shrUPInfo:before {position: absolute; top: 0; left: 0; line-height: 15px; font-size: 14px; border-radius: 50%; margin-top: 3px;}",".shrUPInfoBox {padding: 10px;}",".shrUPNoSel .shrUPNBSAN, .shrUPSS .shrUPNBSAN, .shrUPDetail .shrUPNBSAN {display: none;}",".shrUPNBSAN {display: inline-block; position: absolute; right: 0; left: auto; top: 5px; cursor: pointer;}",".shrUPNBSAN {width: 24px; height: 24px;}",".shrUPNBSAN {${0};}".substitute([Shr.Style.formatBackground({url:r.sprites.desktop,url2x:r.sprites.desktop2x,width:"350px"})]),".shrUPNBSAN {background-position: -50px 0;}",".shrUPNBSAN:hover {background-position: -50px -50px;}",".shrUPNB.shrSelected .shrUPNBSAN {background-position: -50px -150px;}",".shrUPNB.shrSelected .shrUPNBSAN.shrSelected:hover {background-position: -50px -50px;}",".shrUPFC .shrError .shrError, .shrUPDebugInfo .shrError {display: block; color: white; border: none; resize: none; margin-top: 10px; width: 100%; height: 4em; outline: none;}",".shrUPFC .shrError .shrError.shrOpen, .shrUPDebugInfo .shrError.shrOpen {color: black; resize: vertical;}",".shrUPDlg .shrUPWide.shrUPSrc_stockphotos .shrUPRoot + .shrUPHdr + .shrUPFC {text-align: left; padding: 26px 29px !important;}",".shrSeparator:focus {outline: none;}",".shrUPRoot2 {display: table; table-layout: fixed; width: 100% !important; border-collapse: separate;}",".shrUPRoot2 > DIV {display: table-cell; text-align: center; vertical-align: middle; border-color: #ccc; border-style: none; border-width: 0; cursor: pointer;}",".shrUPRoot2 > DIV + DIV {position: relative;}",".shrUPRoot2 > DIV + DIV:before {content: ''; display: block; position: absolute; left: 0; top: 5px; bottom: 6px; width: 1px; background: #ccc;}",".shrUPRoot2 > DIV > SPAN {display: block; font-size: 18px; color: #444; margin-bottom: 15px;}",".shrUPRoot2 > DIV > OL {list-style: none; width: 290px; padding: 0; min-height: 174px; margin: 0 auto 20px;}",".shrUPRoot2 > DIV + DIV {border-width: 0 0 0 1px;}",".shrUPRoot2 > DIV .sflyButton {padding: 5px 20px;}",".shrUPRoot2 > DIV:first-child OL {${0};}".substitute([Shr.Style.formatBackground({file:r.backgrounds.clouds,file2x:r.backgrounds.clouds2x,width:"290px"})]),".shrUPRoot2 > DIV:first-child OL {background-position: center;}",".shrUPRoot2 > DIV > OL > LI {display: inline-block; width: 30px; height: 30px; margin: 2px;}",".shrUPRoot2 LI {${backgrounds.signinIcons};}",".shrUPRoot2 LI {background-position: 0 0;}",".shrUPRoot2 LI.shrUPSrc_myComputer  {display: none;}",".shrUPRoot2 LI.shrUPSrc_sfly        {background-position: 0 0;}",".shrUPNonMigrated .shrUPRoot2 LI.shrUPSrc_sfly {background-position: 0 0;}",".shrUPRoot2 LI.shrUPSrc_sites       {background-position: -78px 0;}",".shrUPRoot2 LI.shrUPSrc_thisLife    {display: none;}",".shrUPRoot2 LI.shrUPSrc_mobiledevice    {display: none !important;}",".shrUPRoot2 LI.shrUPSrc_fb          {background-position: -160px 0}",".shrUPRoot2 LI.shrUPSrc_instagram   {background-position: -198px 0;}",".shrUPRoot2 LI.shrUPSrc_device      {display: none;}",".shrUPRoot2 LI.shrUPSrc_flickr      {display: none;}",".shrUPRoot2 LI.shrUPSrc_stockphotos {background-position: -39px 0;}",".shrUPRoot2 LI.shrUPSrc_google      {background-position: -118px 0;}",".shrUPWide .shrUPFC > LI.shrUPNew, .shrUPWide .shrUPFC LI.shrUPNew .shrUPStack {position: relative;}",".shrUPWide .shrUPFC > LI.shrUPNew:before, ",".shrUPWide .shrUPFC.shrTLFC LI.shrUPNew .shrUPStack:before ","{content: ''; position: absolute; display: block; top: 0; right: 0; margin-left: -17px; margin-top: 4px; ${0}; background-size: 60px auto; background-position: right top !important;}".substitute([Shr.Style.formatBackground({file:r.backgrounds.newRibbon,file2x:r.backgrounds.newRibbon2x,width:"79px"})]),".shrUPWide.shrUPSrc_sfly .shrUPFC > LI.shrUPNew:before {display: block; margin: 0; top: 22px; right: 16px; left: auto; width: 100%; height: 100%; z-index: 2;}",".shrUPWide.shrUPSrc_sfly .shrUPFC.shrTLFC > LI.shrUPNew:before {display: none;}",".shrUPWide .shrUPFC.shrTLFC LI.shrUPNew .shrUPStack:before {width: 100%; height: 100%; margin-top: 0;}",".shrMobile .shrUPRoot2 > DIV {position: relative; top: 10px;}",".shrMobile .shrUP.shrUPAnon .shrUPRoot + .shrUPHdr + .shrUPFC.shrUPRoot2 {height: 100%; margin: 45px 0 0;}",".shrMobile :not(.shrOpen).shrUPInfoBox:hover {display: none !important;}",".shrUPDlg.shrMobile .shrUP.shrUPWide .shrUPNB.shrUPRoot + .shrUPHdr.shrEmpty + .shrUPFC.shrUPRoot2 {padding: 0 !important;}",".shrMobile .shrUPRoot2 > DIV + DIV:before {top: 47px; bottom: 47px;}",".shrUPNarrow .shrUPRoot2 > DIV > SPAN {margin-bottom: 0}",".shrUPNarrow .shrUPRoot2 > DIV > OL {background-size: 145px auto; min-height: 100px; margin-bottom: 0 !important;}",".shrUPMedium .shrUPRoot2 > DIV > OL {transform: scale(0.75);}","@media (orientation: portrait) {",".shrUPNarrow .shrUPRoot2 > DIV {display: block; top: 0; margin: 10% 0;}",".shrUPNarrow .shrUPRoot2 > DIV + DIV:before {left: 25px; right: 25px; top: -3.5%; height: 1px; width: auto;}","}",".shrMobile .shrUPNarrow .shrUPSI .dlgTitle {font-size: 20px;}",".shrMobile .shrUPNarrow .shrUPSI .dlg-inline {width: 100% !important; min-width: 0;}",".shrMobile .shrUPNarrow .shrUPSI TD:first-child LABEL {display: none;}",".shrMobile .shrUPNarrow .shrUPSI #signInButtons .sflyButton + A {display: block; margin: 20px 0 0;}",".shrMobile .shrUPNarrow .shrUPSI #signInButtons {text-align: center; margin-top: 20px;}",".shrMobile .shrUPNarrow .shrUPSI .signin-join-link {font-size: 16px;}",".shrMobile .shrUPNarrow .shrUPSI INPUT.input-text {width: 275px !important;}",".shrMobile .shrUPNarrow .shrUPSI INPUT.input-text {width: 275px !important; max-width: none;}",".shrMobile .shrUPNarrow .shrUPSI .input-v-email {padding-bottom: 4px;}",".shrMobile .shrUPNarrow .shrUPSI INPUT[name=terms] + DIV {text-align: center;}",".shrMobile .shrUPNarrow .shrUPSI .signup-btn-join {text-align: center;}",".shrMobile .shrUPNarrow .shrUPSI INPUT[name=terms] + DIV {font-family: helvetica, arial, sans-serif;}",".shrMobile .shrUPNarrow .shrUPSI .input-v-password .input-help {display: none;}",".shrUPSI .signup-signin {text-align: center; padding-top: 0; margin-top: 15px !important; font-size: 13px; border-top: none;}",".shrUPSI .dlgTitle {margin: 10px 0;}",".shrUPSI #signInWaitWheel {margin: 0 auto;}",".shrMobile .shrUPNarrow .shrUPSI .signup-signin {padding-top: 8px; margin-top: 10px !important;}",".shrUPNoBB .shrBB {display: none !important;}",".shrMobile .shrUPWide .shrUPFC {box-sizing: border-box;}",".shrUPSrc_instagram .shrUPFC.shrBusy .shrUPGrid:after {content: ''; display: block; height: 50px;}",".shrUPSrc_instagram .shrUPFC.shrBusy .shrUPGrid:after {position: relative; width: 100%; top: 100%; margin-bottom: -20px;}",".shrUPSrc_instagram .shrUPFC.shrBusy .shrUPGrid:after {${0}; background-position: center;}".substitute([Shr.Style.formatBackground({file:r.backgrounds.spinner.onWhite,file2x:r.backgrounds.spinner.onWhite2x})]),".shrSCfb {display: inline-block; position: absolute; right: 15px; color: #30659b;}",".shrSCfb {padding-left: 28px; cursor: pointer;}",".shrSCfb:before {content: ''; display: inline-block; position: absolute; left: 0; top: 50%; margin-top: -8px; width: 19px; height: 19px;}",".shrSCfb:before {${0};}".substitute([Shr.Style.formatBackground({url:r.sprites.desktop,url2x:r.sprites.desktop2x,width:"350px",x:"-100px",y:"-225px"})]),".shrSCfb:hover:before {background-position: -125px -225px;}",".shrUPnewPP .shrNB, .shrUPnewPP .shrSC {display: none;}",".shrUPnewPP {background-color: #fff !important;}",".shrUPnewPP.shrUPWide {min-width: 500px;}",".shrUPnewPP .shrUPFC.shrMCFC, .shrUPAnon.shrUPnewPP.shrUPWide .shrUPFC, .shrUPImport.shrUPnewPP .shrUPFC {box-shadow:  -3px -1px 3px -3px rgba(75, 81, 92, 0.4);}",".shrUPnewPP.shrUPWide .shrMCFC > .shrEmpty {width:80%; height: calc(88% + 25px);}",".shrUPnewPP.shrUPWide .shrUPFC {position: relative !important;}",".shrUPnewPP.shrUPWide .sflyButton, .shrUPnewPP.shrUPNarrow .sflyButton, .shrUPnewPP.shrUPWide .sflyButton-tertiary, .shrUPnewPP.shrUPNarrow .sflyButton-tertiary {border: none; box-shadow: none; text-shadow: none; background-image: none; background-color: #f05323; display: inline-block; font-weight: 300; text-transform: uppercase; letter-spacing: normal; line-height: 1; text-align: center; padding: 12px 24px 12px 24px; min-width: 32px; color: white; border-radius: 4px; vertical-align: middle; width: auto}",".shrUPnewPP.shrUPWide .sflyButton:hover, .shrUPnewPP.shrUPNarrow .sflyButton:hover, .shrUPnewPP.shrUPWide .sflyButton-tertiary:hover, .shrUPnewPP.shrUPNarrow .sflyButton-tertiary:hover {background-color: #dc4405;}",".shrUPnewPP.shrUPWide .sflyButton.sflyButton-quaternary {color: #58595b; border: solid 1px #c6c7c9; background-color: white;}",".shrUPnewPP.shrUPWide .sflyButton.sflyButton-quaternary:hover {color: #f05323; border: solid 1px #f05323;}",".shrUPnewPP.shrUPWide .sflyButton-tertiary.fb, .shrUPnewPP.shrUPNarrow .sflyButton-tertiary.fb, .shrUPnewPP.shrUPWide .sflyButton-tertiary.fb:hover, .shrUPnewPP.shrUPNarrow .sflyButton-tertiary.fb:hover {background-color: ${colors.fb}; position: relative; padding: 0; margin: 0; height: 37px; padding-left: 38px; padding-right: 10px; font-size: 13px;}",".sflyButton-tertiary.fb:before {    content: ' '; display: block; height: 24px; width: 24px; position: absolute;top: 7px;left: 7px; background-size: 24px; ${0}}".substitute([Shr.Style.formatBackground({file:"universalpicker/fb.png",file2x:"universalpicker/fb@2x.png",x:"center",y:"center"})]),".sflyButton-tertiary.disabled {filter: opacity(25%); pointer-events: none; cursor: default;} ",".shrUPnewPP.shrUP.shrUPNoSel .shrUPFC {margin-bottom: 132px;}",".shrUPnewPP.shrUPWide.shrUPTouch .shrUPFC {margin-top:0px;}",".shrUPnewPP.shrUPWide.shrUPTouch li.shrUPFolder.shrUPTile:not(.shrUPUPL) {display:none;}",".shrUPnewPP.shrUPWide.shrUPTouch li.shrUPFolder.shrUPUPL {top: calc(50% - 128px);}",".shrUPDlg.shrMobile .shrUPWide.shrUPnewPP .shrUPHdr:not(.shrEmpty) + .shrUPFC {margin-top: 0px;}",".shrUPnewPP.shrUPNarrow .shrUPFC {margin-left: 0; margin-bottom: 40px;}",".shrUPnewPP.shrUPNarrow .shrUPFC.shrMCFC {margin-top: 0px;}",".shrUPnewPP .shrUPNBSAN {display: none;}",".shrUPnewPP.shrUPNarrow .shrMCFC > .shrEmpty {border: none;}",".shrUPnewPP.shrUPDetail .shrUPG {background-color: #FFF;}",".shrUPnewPP.shrUPDetail.shrUPNarrow .shrUPG {background-color: #4b525c}",".shrUPnewPP.shrUPNarrow.shrUPDetail .shrUPFC {margin: 0;}",".shrUPnewPP.shrUPImport .shrUPSidebar:before, .shrUPnewPP.shrUPImport .shrUPBin:before, ",".shrUPnewPP.shrUPDone .shrUPSidebar:before, .shrUPnewPP.shrUPDone .shrUPBin:before, ",".shrUPnewPP.shrUPOk .shrUPSidebar:before, .shrUPnewPP.shrUPOk .shrUPBin:before {","content: ''; display: block;","position: absolute; top: 0; bottom: 0; left: 0; right: 0;","z-index: 2; background-color: #fff; opacity: 0.5;","}",".shrUPnewPP.shrUPNarrow.shrUPSidebarOpen .shrUPNavBar .shrUPNBTitleWrap {display: none;}",".shrUPnewPP.shrUPNarrow.shrUPSidebarOpen .shrUPSearch {display: none;}",".shrUPDlg {box-shadow: none !important;}",'.shrUPDlg .dlg-body > FORM > .dragHandle[sizetype="se"] {background-image: none;}',".shrUPSI .dlgTitle {font-size: 18px !important;}",".shrUPSI #signInButtons .sflyButton + A {display: block; margin-top: 10px;}",".shrUPSI .signin-join-link {font-size: 13px;}",".shrUPSI TR.password + TR TD.input-l-content {display: none;}",".shrUPSI .signup-form TR.password + TR + TR .input-l-text, .shrUPSI .signup-form TR.password + TR + TR + TR .input-l-text {display: none;}",".shrUPNarrow.shrUPAnon {overflow-y: auto;}",".shrUPSI .errorList LI {background-image: none; text-align: left;}",".shrUPSI DIV {text-align: center;}",".shrUPSI DIV.input-checkbox-choice, .shrUPSI .suErrorsHead, .shrUPSI .input-help {text-align: left;}",".shrUPSI #signInButtons A {margin-left: 0 !important;}",".shrUPRoot2 .shrUPSI #signin-form TR.input-row TD:first-child {display: none;}",".shrUPRoot2 .shrUPSI .siHeader {display: initial !important; margin: 0 !important; color: #6b7bbo;}",".shrUPRoot2 .shrUPSI #signInButtons {margin: 10px 0;}",".shrUPRoot2 .shrUPSI .signin-footer-cont {display: block !important; zoom: 75%; margin-top: 0 !important;}",".shrUPRoot2 .shrUPSI .signin-footer-cont OL {margin: 0; padding: 0;}",".shrUPRoot2 .shrUPSI .signin-footer-cont LI {list-style: none; display: inline-block; width: 51px; height: 51px; margin-right: 5px;}",".shrUPRoot2 .shrUPSI .signin-footer-cont LI:last-child {margin-right: 0;}",".shrUPRoot2 .shrUPSI .signin-footer-cont LI.shrUPSrc_myComputer {display: none;}",".shrUPRoot2 .siHeaderCtx {padding-bottom: 0;}",".shrUPRoot2 .shrUPSI #signInWaitWheel {position: absolute; left: 50%; margin-left: -25px !important;}",".shrUPRoot2 > DIV {vertical-align: top;}",".shrUPRoot2 > DIV:first-child {padding-top: 10px;}",".shrUPRoot2 > DIV + DIV {cursor: default;}","@media (orientation: landscape) {",".shrUPNarrow .shrUPRoot2 .shrUPUPL OL {display: block;}",".shrUPNarrow .shrUPRoot2 > DIV:last-child {top: 0;}",".shrUPNarrow .shrUPRoot2 > DIV:first-child {top: 5px;}",".shrUPNarrow .shrUPRoot2 > DIV + DIV:before {top: 0;}","}","@media (orientation: landscape) and (max-width: 604px) {",".shrUPNarrow .shrUPRoot2 > DIV:first-child {width: 45%;}",".shrUPWide .shrUPRoot2 > DIV {top: 50px;}","}",".shrUPSI TD:first-child LABEL {display: none;}",".shrUPSI TD.input-l-checkbox {width: 0;}",".shrUPSI #signInButtons {text-align: left; margin-left: 0; margin-top: 15px; margin-bottom: 0;}",".shrUPSI .input-grid .input-row {text-align: left;}",".shrUPSI #signInButtons A {color: #369;}",".shrUPSI #signInButtons A.sflyButton + DIV {display: inline-block; margin-left: 10px;}",".shrUPSI #signInButtons A.sflyButton + DIV A {padding-left: 10px !important;}",".shrUPSI #signInButtons A.sflyButton + DIV + A {display: block; margin-top: 10px;}",".shrUPSI .input-content {padding-left: 0;}",".shrUPSI .newDlg .dlgTitle {margin-left: -125px; margin-top: 0; margin-bottom: 20px; font-size: 16px !important; color: #58595b;}",".shrUPSI .signin-join-link {display: none;}",".shrUPAnon .shrUPNavBar {visibility: hidden;}",".shrUPSU .signup-checkboxes {text-align: left; margin-left: 0;}",".shrUPSU DIV {text-align: left !important;}",".shrUPSU .signup-signin {text-align: left;}",".shrUPSU .input-v-password .input-help {display: none;}",".shrUPSU .input-v-text INPUT, .shrUPSU .input-v-email INPUT, .shrUPSU .input-v-password INPUT {width: 250px !important;}",".shrUPSU .input-v-email {padding-bottom: 4px;}",".shrUPSI TR.password + TR TD.input-l-content {display: initial;}",".shrUPSI .dlg-inline {width: 100% !important;}",".shrUPSI .siErrors, .shrUPSU .suErrors {max-width: 250px; position: relative; left: -20px;}",".shrUPSI .dlg-inline {margin-top: -26px;}",".shrUPSI A.sflyButton + DIV + A {text-align: left;}",".shrUPNarrow .shrUPSI .dlg-inline {margin-top: 10px;}",".shrUPNarrow .shrUPSI .dlgTitle {margin-left: -130px;}",".shrUPSU .dlgTitle {text-align: center !important;}",".shrUPNarrow .shrUPSU .dlgTitle {margin-left: -110px;}",".shrUPSI #signInWaitWheel {display: block; margin: 0;}",".shrUPSI .signin-forgot-password {display: block; text-align: left; margin-left: 0; color: #369; font-size: 13px;}",".shrUPSI #signin-form.shrBusy #signInWaitWheel + A + DIV {visibility: hidden;}",".shrUPSI #signin-form.shrBusy .dlg-content {margin-bottom: 0;}","             .shrUPFC.shrUPRoot2 .shrUPSI .siHeader DIV:first-child {margin-bottom: 15px; font-size: 18px; color: #444;}","             .shrUPFC.shrUPRoot2 .shrUPSI .siHeader DIV:last-child {text-align: left;}","             .shrUPRoot2 .shrUPSI INPUT.input-text {width: 100% !important;}",".shrUPSI .signup-signin {display: none;}",".shrUPSI .signup-btn-join A.sflyButton + DIV {display: inline-block; margin-left: 10px;}",".shrUPSI .signup-btn-join A.sflyButton + DIV > A {margin-left: 5px; color: #369;}",".shrUPWide   .shrUPSidebar.shrUPRoot {display: none;}",".shrUPWide.shrUPTouch:not(.shrUPAnon) .shrUPSidebar.shrUPRoot {display: initial;}",".shrUPWide   .shrUPFC.shrUPRoot2 {margin-left: 0 !important;}",".shrUPWide   .shrUPFC.shrUPRoot2 > DIV {padding: 0 !important;}",".shrUPWide   .shrUPRoot2 > DIV > OL {min-height: 125px;}",".shrUPWide   .shrUPFC.shrUPRoot2 {padding: 0 !important;}",".shrUPWide   .shrUPFC.shrUPRoot2 .shrUPSI .dlgTitle {display: none !important;}",".shrUPWide   .shrUPSI .dlg-inline {margin-top: 0;}",".shrUPWide   .shrUPRoot + .shrUPHdr + .shrUPFC.shrUPRoot2 {padding: 0 !important;}",".shrUPWide   .shrUPRoot2 > DIV:last-child:before {top: -45px !important; bottom: 4px !important;}",".shrUPWide   .shrUPRoot2 .dlg-content.siHeader {display: none !important;}",".shrUPWide   .shrUPRoot2 .shrUPSI #signInButtons {position: relative;}",".shrUPWide   .shrUPRoot2 .shrUPSI #signInWaitWheel {left: 0 !important; margin-left: 0 !important;}",".shrUPWide   .shrUPRoot2 .shrUPSI #signin-form.shrBusy .dlg-content {margin-bottom: 9px;}",".shrUPWide   .shrUPSI .dlgTitle {font-size: 18px !important; color: #444 !important; margin-left: -105px;}",".shrUPWide.shrUPAnon .shrUPSU {margin-top: -26px;}",".shrUPWide.shrUPAnon .shrUPNavBar:not(.shrUPRoot) {visibility: initial; border: none !important;}",".shrUPWide.shrUPAnon:not(.shrUPImport) .shrUPNavBar:not(.shrUPRoot) > * {visibility: hidden;}",".shrUPNarrow .newDlg .dlgTitle {display: none !important;}",".shrUPNarrow .shrUPRoot2 .shrUPUPL {margin-top: 0 !important; padding-top: 0;}",".shrUPNarrow .shrUPRoot2 .shrUPSI #signInButtons .sflyButton {margin-bottom: 10px;}",".shrMobile .shrUPNarrow .shrUPSI INPUT.input-text {margin-left: 1px; width: calc(100% - 1px) !important; box-sizing: border-box;}",".shrUPNarrow.shrUPAnon .shrUPNavBar:not(.shrUPRoot) {visibility: initial;}",".shrUPNarrow.shrUPAnon .shrUPNavBar .shrBB {visibility: hidden;}",".shrUPNarrow.shrUPAnon .shrUPSidebar.shrUPRoot {display: none;}",".shrUPTouch .shrUPUPL INPUT {outline: none;display:block;}",".shrUPNarrow .signup-form .dlg-content > TABLE .input-text {width: 100% !important;}",".shrUPNarrow.shrUPAnon .shrUPRoot2 {box-shadow: none !important;}","@media (orientation: portrait) {",".shrUPNarrow .shrUPRoot2 > DIV:last-child {margin-top: 54px;}",".shrUPNarrow .shrUPRoot2 .shrUPSI .dlg-content {margin-top: 50px !important;}",".shrUPNarrow .shrUPRoot2 > DIV + DIV:before {top: -20px !important;}","}","@media (orientation: landscape) {",".shrUPNarrow .shrUPRoot2 {box-shadow: none; position: absolute; margin: 0 !important; top: 0; bottom: 0; height: auto; overflow: auto;}",".shrUPNarrow .shrUPRoot2 .dlg-content, .shrUPNarrow .shrUPRoot2 .dlg-inline {margin-top: 0 !important; margin-bottom: 0 !important;}",".shrUPNarrow .shrUPRoot2 .dlg-content.siHeader {display: none !important;}",".shrUPNarrow .shrUPRoot2 .shrUPUPL {top: 0;}",".shrUPNarrow .shrUPRoot2 {margin-top: 10px !important;}",".shrUPNarrow .shrUPRoot2 .signin-footer-cont {display: none !important;}",".shrUPNarrow .shrUPRoot2 > DIV {top: 0 !important;}",".shrUPNarrow .shrUPRoot2 .shrUPSI TR.input-row:first-child TD.input-v-content {padding-top: 0;}","}",".trUPPHideLifetouch .shrUPSrc_Lifetouch,  .trUPPHideLifetouch .shrTLLifetouch{ display: none !important; }",".shrUPDebug {}",".shrUPWide .shrUPDebug:before {content: ' ';  display: block; position: absolute; left: 50%; top: 0; bottom: 0; width: 0; border-left: 1px dashed magenta;}",".shrUPDebug:after {content: ' ';  display: block; position: absolute; left: 0; top: 50%; right: 0; height: 0; border-top: 1px dashed magenta;}",""];return r.tile.breakPt=Shr.Style.add(Shr.Style.multiply(n.tile.left,2),r.tile.padding,r.tile.margin),r.tile.narrowLeft=Shr.Style.multiply(n.tile.left,.5),(!Shr.B.isIE||8<Shr.B.ieVersion)&&(i.splice(-1,0,".shrUPDlg .shrUPWide .shrUPRoot + .shrUPHdr + .shrUPFC {padding-left: 60px; padding-right: 60px;}",".shrUPDlg .shrUPWide .shrUPRoot + .shrUPHdr + .shrUPFC.shrMCFC {padding-left: 50px; padding-right: 50px;}",".shrUPDlg .dlg-sizer {margin-top: -14px; margin-left: -7px;}","TABLE.shrUPDlg {border: 0px solid #fff; border-radius: 10px; border-collapse: separate !important; overflow: hidden; box-shadow: 0 0 25px #333;}",".shrUPDlg .dlg-left, .shrUPDlg .dlg-top, .shrUPDlg .dlg-bottom, .shrUPDlg .dlg-right, .shrUPDlg .dlg-topleft, .shrUPDlg .dlg-topright, .shrUPDlg .dlg-bottomleft, .shrUPDlg .dlg-bottomright, .shrUPDlg .dlg-top .cb-img {background: #fff;}",".shrUPDlg .dlg-lColOuter {width: 5px !important;}",".shrUPDlg .dlg-rColOuter {width: 5px !important;}",".shrUPDlg .dlg-header {height: 10px; font-size: 1px;}",".shrUPDlg .dlg-footer {height: 5px;}",".shrUPDlg .dlg-body FORM > DIV:first-child {}",""),Shr.B.isIE&&i.splice(-1,0,".shrUPDlg .dlg-topleft {border-radius: 10px 0 0 0;}",".shrUPDlg .dlg-topright {border-radius: 0 10px 0 0;}",".shrUPDlg .dlg-bottomleft {border-radius: 0 0 0 10px;}",".shrUPDlg .dlg-bottomright {border-radius: 0 0 10px 0;}","")),Shr.B.isIos?i.push(o(".shrUPFC > LI.shrUPUPL:before {background-size: 34px auto; ${0};}".substitute([Shr.Style.formatBackground({file:r.sprites.url,file2x:r.sprites.url2x,x:"3px",y:"-585px",width:"34px"})]))):Shr.B.isIE?(i.splice(-1,0,'.shrUPDlg .shrUPNB, .shrUPDlg .shrSC {background: filter: "none"; -ms-filter: "none";}',".shrUPStack > IMG {border-collapse: separate !important;}",".shrUPDlg .shrUPFC > .shrUPTile {overflow: hidden;}",".shrUPDlg .shrUPFC > .shrUPTile:hover {color: #333 !important;}",".shrUPDlg .shrUPFC > .shrUPTile:before {left: 10px !important;}",""),Shr.B.ieVersion<9&&i.splice(-1,0,".shrUPDlg .shrUP {font-family: ${fonts.content} !important;}",".shrUPDlg .shrUP .sflyButton {font-weight: normal;}",".shrUPDlg .shrUPFC > LI {font-weight: normal;}",".shrUPDlg .dlg-bodyborder {margin: 0 0 4px 3px; padding: 0; border: none;}",".shrUPDlg .shrUP {margin: 3px 20px 0;}",".shrUPDlg .shrUP, .shrUPDlg .shrUPFC {position: static;}",".shrUPDlg .shrUPFC {margin-top: 0;}",".shrUPDlg .shrUPDetail .shrUPFC {position: relative;}",".shrUPDlg .shrUPFC, .shrUPDlg .shrUPHdr {${0};}".substitute([Shr.Style.formatBoxSizing("border-box")]),".shrUPDlg .shrUPRoot + .shrUPHdr + .shrUPFC:not(.shrMCFC) {text-align: center;}",".shrUPDlg .shrUPFC > LI.shrUPTile {float: none; left: auto;}",".shrUPDlg .shrUPFC {height: 500px; margin-bottom: 39px; border: 1px solid ${colors.contentBorder}; padding: 10px;}",".shrUPDlg .shrNB {height: 30px; line-height: 30px;}",".shrUPDlg .shrNB .sflyButton {height: 28px; line-height: 28px;}",".shrUPDlg .shrNBTitle {font-weight: normal !important; font-size: 18px; color: inherit;}",".shrUPDlg .shrUPNB {background: #fff; padding: 0 0 10px 9px; border: none;}",".shrUPDlg .shrSC {bottom: -2px; background: transparent; padding: 0; border: none;}",".shrUPDlg .dlgTitle {display: none;}",".shrUPDlg .shrUPFC {min-height: 200px;}",".shrUPDlg .shrUPTile {white-space: normal; vertical-align: top;}",".shrUPDlg .shrUPFC {background-image: none; background-color: ${colors.contentBg};}",".shrUPFC .shrUPGrid {text-align: left !important;}",".shrUPDlg .shrNB {padding-left: 0;}",".shrUPDlg .shrNB > DIV {max-width: 25%;}",".shrUPDlg .shrUPWide .shrUPNB .shrBB {padding-left: 24px !important; max-width: 100%; overflow: hidden; text-overflow: ellipsis;}",".shrUPDlg .shrBB SPAN {line-height: 28px;}",".shrUPDlg .shrBB:before {content: none;}",".shrUPDlg .shrBB:after {content: '\\2039'; display: inline-block; position: absolute;left: 8px; top: -3px; font-size: 175%;}",".shrUPDlg .shrBB:after {content: ''; display: inline-block; position: absolute; left: 8px; top: 9px; width: 7px; height: 10px;}",".shrUPDlg .shrBB:after, .shrUPDlg .shrBB:hover:after {background-image: url(${sprites.desktop}) !important; background-position: -200px -200px; !important}",".shrUPDlg .shrUPFC > .shrEmpty, .shrUPDlg .shrUPFC > .shrBusy {margin-top: -65px;}",".shrUPWide .shrUPFC > LI {display: inline-block; margin: 5px 5px; text-align: center; font-size: 16px;}",".shrUPWide .shrUPFC > LI:after {content: none;}",".shrUPWide .shrUPNB.shrUPRoot + .shrUPHdr + .shrUPFC {padding: 43px 50px 0; text-align: center;}",".shrUPFC > .shrEmpty, .shrUPFC > .shrBusy {text-align: center; font-weight: bold; color: #333; background: none;}",".shrUPFC > .shrEmpty, .shrUPFC > .shrBusy {display: block; top: 50%; padding-top: 75px; margin-top: -55px;}",".shrUP .shrSC TD + TD {position: relative;}",".shrUPImport .shrUPFC .shrBusy > .shrPB {visibility: hidden;}",".shrUPImport .shrUPFC .shrBusy.shrProgress > .shrPB {visibility: visible;}",".shrUPNB > DIV > A:after {border: none !important;}",".shrUPWide .shrUPFC > LI DIV + DIV {white-space: nowrap; text-overflow: ellipsis; overflow: hidden;}",".dlg-body > FORM > .dragHandle {top: auto; left: auto; width: 15px; height: 15px; cursor: se-resize;}",".dlg-body > FORM > .dragHandle {background: transparent url(${sprites.desktop}) no-repeat -300px -200px;}",".shrUPDlg .shrUPNB {padding: 6px 18px; border: none;}",".shrUPDlg .shrSC {bottom: 6px;}",".shrUPFC > .shrEmpty {padding-top: 0; margin-top: -70px;}",".shrUPFC > LI {background-color: #fff;}",".shrUPSnapSrcMenu {max-width: 183px; border: 1px solid #adadad;}","")):Shr.B.isGecko&&i.splice(-1,0,".shrUP .shrSC TD:last-child A {position: relative;}"),_._styleProperties=Object.merge(r,n),i.join("\n").substitute(_._styleProperties)},confirmClose:!1,__transactionId:null,_transactionId:function(){return!_.__transactionId&&window.trUPP.util&&(_.__transactionId=window.trUPP.util.generateGuid()),_.__transactionId},_uploadCount:0,__mediaFetchTransactionId:null,_mediaFetchTransactionId:function(){return!_.__mediaFetchTransactionId&&window.trUPP.util&&(_.__mediaFetchTransactionId=window.trUPP.util.generateGuid()),_.__mediaFetchTransactionId},_mediaFetchCount:0,umsWWW:"https://${location.host}/services/user-media",umsAPI:"https://${Shr.AS.api}/user-media",umsServerDefault:void 0,ums:void 0,umsServer:void 0,productCreation:!0,_end:null}),_.src=Shr.Dialogs.UniversalPicker,_._debug=Object.extend(function(){_.isOpen&&_.refresh(_._folder=arguments.callee)},{id:"_debug",title:"UPP Diagnostics",getContents:function(){var e,t,r=[],n=r.push.bind(r),o=Shr.Html.formatTag.bind(Shr.Html),i="<br/>",s=n.bind(null,"<hr/>"),a=function(e,t,r){var n={},o=function(t){var o="function"==typeof e[t];(r||e[t])&&(n[t]=o?"fn()":e[t])};return t?t.split(",").forEach(function(e){o(e)}):function(){for(var t in e)o(t)}(),window.JSON.stringify(n)},l=function(e,t){n(o("span",{},e)+o("span",{},t.toString())+i)},c=function(e){var t=_._utilities.localStorage.getItem(e)||"";return"&nbsp;Override: "+o("input",{disabled:!0,value:t})+o("button",{onclick:function(r){var n=window.prompt("Enter override for "+e,t);null==n||(r.previousSibling.value=n?(_._utilities.localStorage.setItem(e,n),n):(_._utilities.localStorage.removeItem(e),""))}},"Edit")},d=o("button",{onclick:function(){_.back()}},"Back");return d+=i,d+=o("button",{onclick:function(){console.log("-----Shr.Dialogs.UniversalPicker._errors-------"),console.log(_._errors),console.log(window.JSON.stringify(_._errors)),console.log("----------------------------------------------"),_._stats&&(console.log("-----Shr.Dialogs.UniversalPicker._stats.apiErrors-----"),console.log(_._stats.apiErrors),console.log(window.JSON.stringify(_._stats.apiErrors)),console.log("------------------------------------------------------"))}},"Show errors in JS console"),l("SCore Library version=",Shr.SCore&&Shr.SCore.version||"n/a"),l("SCore Library src=",Shr.SCore&&Shr.SCore.src||"n/a"),l("UPP src=",_.src+c("Shr.Dialogs.UniversalPicker")),l("UPP version=",_.version),l("UPP upload transaction ID = ",_._transactionId()),s(),n(o("label",{},o("input",{type:"checkbox",checked:!!_.superfly,onchange:function(e){var t="Shr.Dialogs.UniversalPicker.superfly";try{e.checked?_._utilities.localStorage.setItem(t,"true"):_._utilities.localStorage.removeItem(t)}catch(e){window.alert("debug onchange threw: "+e.message)}}})+"deploy superfly migration support")),s(),l("Shr.U=",a(Shr.U,"uid,sflyEmail,oauthToken,sflyToken,sflyMember")),l("Shr.AS=",a(Shr.AS,"env,www,disabledDS")),l("Shr.B=",a(Shr.B)),s(),l("context=",a(_.context,"category,product,currentCount,maxCount,noSelect,noSelectAll,singleSelect,singleSelectToggleSelection,path,useHtml5ItemV2,useExif,hide")),l("context.sources:","{"),Shr.L.forEach(_.context.sources,function(e,t){l("&nbsp;&nbsp;"+t+":",a(e))}),n("}"+i),l("context.sinks:","{"),Shr.L.forEach(_.context.sinks,function(e,t){l("&nbsp;&nbsp;"+t+":",a(e))}),n("}"+i),s(),l("datasources:","{}"),Shr.L.forEach(_._root.folders,function(e,t){var r=e.uses?i+"src="+Object.get(e.uses)+c(e.uses):"";l("&nbsp;&nbsp;"+t+":",a(e,"id,hide,uses,requiresSignin,className,useExif,dataSourceType")+r)}),n("}"+i),s(),n("Last error:"+i),n(_.Error._formatLastError(!0)),s(),n("Timeout intervals:"+i),e="Shr.Dialogs.UniversalPicker.timeout",t=(t=_._utilities.localStorage.getItem(e))&&window.JSON.parse(t)||{},Shr.L.forEach(["uploadInit","uploadProgress","uploadProcessing","mediaFetchProcessing","mediaFetchProgress"],function(r){var s,a;n("&nbsp;&nbsp;"+r+":",(s=r,a=t&&t[s]||"",o("input",{disabled:!0,size:3,style:{"text-align":"right"},value:a})+o("button",{onclick:function(r){var n=window.prompt("Enter override for "+s,a);null==n||(r.previousSibling.value=n?(t[s]=parseInt(n),n):(delete t[s],""),_._utilities.localStorage.setItem(e,window.JSON.stringify(t)))}},"Edit")+i))}),d+=o("div",{style:{"font-family":"monospace"}},r.join("\n")),this.pending=d,!1},contentClassName:"shrUPDebugInfo"}),function(){"use strict";for(var e=["webkit","moz"],t=0;t<e.length&&!window.requestAnimationFrame;++t){var r=e[t];window.requestAnimationFrame=window[r+"RequestAnimationFrame"],window.cancelAnimationFrame=window[r+"CancelAnimationFrame"]||window[r+"CancelRequestAnimationFrame"]}if(/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)||!window.requestAnimationFrame||!window.cancelAnimationFrame){var n=0;window.requestAnimationFrame=function(e){var t=Date.now(),r=Math.max(n+16,t);return window.setTimeout(function(){e(n=r)},r-t)},window.cancelAnimationFrame=window.clearTimeout}}(),_._testAndTarget={vt:!0,useSearch:!0},Object.extend(_,{uniup_mediaFetch:(m=!0,g="uniup_mediaFetch",f=_._utilities.localStorage.getItem("Shr.Dialogs.UniversalPicker."+g),m=null!=f?!!f:m?!_.isDisabled(g):_.isDisabled(g)),newPP:(h=!0,u="newPP",p=_._utilities.localStorage.getItem("Shr.Dialogs.UniversalPicker."+u),h=null!=p?!!p:h?!_.isDisabled(u)&&h:!!_.isDisabled(u)||h),momentDB:(l=!0,c="momentDB",d=_._utilities.localStorage.getItem("Shr.Dialogs.UniversalPicker."+c),l=null!=d?!!d:l?!_.isDisabled(c):_.isDisabled(c))}),Object.extend(_,{useZoom2:!0}),Object.extend(_,{_newZoomView:!1,_zoomedFolder:null,_zoomedIndex:-1,_getGridIndex:function(e,t){var r=-1;if(e&&0<e.length){e=Shr.Array.filter(e,function(e){return e&&e._item&&!e._item.separator});for(var n=0;n<e.length;n++)if(e[n]===t.parentNode){r=n;break}}return r},_loadNewZoom:function(e,t){var r=_._zoomedFolder||_._folder,n=-1;e&&(n=_._getGridIndex(e,t)),r&&r.items&&0<r.items.length&&-1!==n?new _.View.Event("launchNewZoom",r,n):new _.View.Event("newZoomOut")}}),_._renderUPPStyle=function(){var e,t,r=Shr.AS.getEnv(),n="https://cdn${0}.staticsfly.com/css/fonts/fonts.css".substitute(["prod"===r?"":"-"+r]);if(!_._stylesInjected){_._stylesInjected=!0,(e=document.createElement("style")).innerHTML=_._formatStyle(),(t=document.createElement("link")).type="text/css",t.rel="stylesheet",t.href=n;try{document.querySelector("head").appendChild(t),document.querySelector("head").appendChild(e)}catch(e){}}},_.formatContent=function(e){var t;return document.body.querySelector("#trUPP-dlg-"+this.context.did),_._renderUPPStyle(),_.renderContent(function(e){t=e},_.context),e.renderError||window.setTimeout(_.onLoad.bind(this,null,_.context),0),t},_}(),Shr.SegmentedControl=i={_className:"shrSC",onSegmentClick:function(e,t){var r,n;(t=t||{}).parent=t.parent||e.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode,t.segs&&Shr.Dom.removeClass(t.parent,t.segs),t.seg&&t.seg.className&&Shr.Dom.addClass(t.parent,t.seg&&t.seg.className),Shr.ClassToggle.select(e.parentNode),Shr.L.forEach(e.parentNode.parentNode.childNodes,function(t){(t=t.firstChild)==e?(r=n,t.removeAttribute("tabindex")):(n=t).setAttribute("tabindex","1")}),window.setTimeout(function(){Shr.Dom.tryFocus(r||n)},0)},format:function(e,t){var r=Object.extend({},t),n=(r.className||"").split(" "),o=[],s=[],a=e&&e.parent,l=(Shr.Dialogs.UniversalPicker,this._formatFeedback());return Shr.L.forEach(e.segments,function(e){s.push(e.className)}),n.push(i._className),r.className=n.join(" "),Shr.L.forEach(e.segments,function(e){var t=Object.extend(e.selected?{}:{tabindex:"1"},e.atts);t.onclick=t.onclick||Shr.EB.on("click",i.onSegmentClick,{parent:a,seg:e,segs:s}),o.push(Shr.Html.formatTag("td",{className:e.selected?"shrSelected":void 0},Shr.Html.a("",e.text||"",t)))}),Shr.StyleManager.renderStyle(i),Shr.Html.formatTag("div",r,Shr.Html.formatTag("table",{},Shr.Html.formatTag("tbody",{},Shr.Html.formatTag("tr",{},o.join(""))))+l)},_formatFeedback:function(){var e=Shr.Dialogs.UniversalPicker,t="";return e.context.noFeedback||(t=Shr.Html.formatTag("div",{className:"shrSCfb",onclick:function(){var t="${feedback.url}".localize(e).substitute([Shr.U.id]),r=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,n="menubar=1,resizable=1,width=560,height=760,top="+(r&&900<r?(r-700)/2:0);window.open(t,"mcxSurvey",n).focus()}},"${feedback.text}".localize(e))),t},renderStyle:function(e){var t=Object.merge({},Shr.Style.parameters,{borderWidth:"1px",colors:{border:"#a5a09d",bar:{gradient:{light:"#e0dbd7",dark:"#c7c2bc"}},button:{normal:"#369",selected:"#999",boxShadow:"#aaa",textShadow:"#fff",gradient:{light:"#fff",selected:{light:"#efe9e5"}}}},button:{fontSize:"13px",padding:{v:0,h:"10px"}}}),r={innerHeight:Shr.Style.subtract(t.mobileBarButtonHeight,t.borderWidth,t.borderWidth),lineHeight:Shr.Style.subtract(Shr.Style.parameters.mobileBarButtonHeight,t.borderWidth,t.borderWidth),colors:{button:{gradient:{dark:t.colors.bar.gradient.light,selected:{dark:t.colors.bar.gradient.light}}}},padding:{v:Shr.Style.multiply(Shr.Style.subtract(t.minTouchSize,t.mobileBarButtonHeight),.5),h:0}};Object.merge(t,r),t.gradient={bar:Shr.Style.formatLinearGradient(t.colors.bar.gradient.light,t.colors.bar.gradient.dark),button:{normal:Shr.Style.formatLinearGradient(t.colors.button.gradient.light,t.colors.button.gradient.dark),active:Shr.Style.formatLinearGradient(t.colors.button.gradient.dark,t.colors.button.gradient.light),selected:Shr.Style.formatLinearGradient(t.colors.button.gradient.selected.light,t.colors.button.gradient.selected.dark)}},e([".shrSC {${gradient.bar}; width: 100%; text-align: center; padding: ${padding.v} ${padding.h}; border-top: ${borderWidth} solid ${colors.border};}",".shrSC TABLE {display: inline-block; width: auto;}",".shrSC TR {white-space: nowrap;}",".shrSC TD {padding: 0;}",".shrSC A {${gradient.button.normal}; display: block; width: auto; padding: ${button.padding.v} ${button.padding.h}; line-height: ${lineHeight}; border: ${borderWidth} solid ${colors.border}; text-align: center; font-size: ${button.fontSize};}",".shrSC A {${fonts.avenir85Heavy};}",".shrSC A:active {${gradient.button.active};}",".shrSC A {color: ${colors.button.normal}; text-decoration: none; text-shadow: 1px 1px ${colors.button.textShadow};}",".shrSC TD:first-child A {border-radius: 4px 0 0 4px;}",".shrSC TD:last-child A {border-radius: 0 4px 4px 0;}",".shrSC TD.shrSelected A {${gradient.button.selected}; box-shadow: 0 3px 5px ${colors.button.boxShadow} inset; cursor: default;}",".shrSC TD.shrSelected A {color: ${colors.button.selected}; }",".shrSC TD:only-child {width: 100%;}",".shrSC TD:first-child:nth-last-child(2), .shrSC TD:first-child:nth-last-child(2) ~ TD {width: 129px;}",".shrSC TD:first-child:nth-last-child(3), .shrSC TD:first-child:nth-last-child(3) ~ TD {width: 33.33%;}",".shrSC TD:first-child:nth-last-child(4), .shrSC TD:first-child:nth-last-child(4) ~ TD {width: 25%;}",".shrSC TD:first-child:nth-last-child(5), .shrSC TD:first-child:nth-last-child(5) ~ TD {width: 20%;}",""].join("\n").substitute(t))}},Shr.BackButton=((o={_className:"shrBB",L10N:{back:"Back"},format:function(e){var t=Object.extend({},e),r=(t.className||"").split(" ");return r.push(o._className),t.className=r.join(" "),t.title=t.title||o.L10N.back,Shr.StyleManager.renderStyle(o),Shr.Html.formatTag("a",t,t.title)},renderStyle:function(e){var t=Object.merge({},Shr.Style.parameters,{primary:{gradient:Shr.Button.styleParameters.primary.gradient,arrowGradient:Shr.Style.formatLinearGradient("45deg",Shr.Button.styleParameters.colors.primary.stop,Shr.Button.styleParameters.colors.primary.start)},secondary:{gradient:Shr.Button.styleParameters.secondary.gradient,arrowGradient:Shr.Style.formatLinearGradient("45deg",Shr.Button.styleParameters.colors.secondary.stop,Shr.Button.styleParameters.colors.secondary.start)},tertiary:{borderColor:Shr.Button.styleParameters.colors.tertiary.border,gradient:Shr.Button.styleParameters.tertiary.gradient,arrowGradient:Shr.Style.formatLinearGradient("45deg",Shr.Button.styleParameters.colors.tertiary.stop,Shr.Button.styleParameters.colors.tertiary.start)},rotation:Shr.Style.formatTransform({rotate:"-45deg",skew:"-10deg, -10deg"}),height:Shr.Style.parameters.mobileBarButtonHeight});t.tertiary.pointBorderColor=Shr.Style.darker(t.tertiary.borderColor,.2),e([".shrBB {position: relative;}",""].join("\n").substitute(t))}}).className=o._className,o),Shr.myDevicesDS=r(19)}catch(e){window&&window.trUPP&&window.trUPP.Timing&&window.trUPP.Timing.recordInfo("upp_exception",{ex_message:e.message,ex_stack:e.stack}),Console.write("Error loading UniversalPicker: "+e.message)}var o,i},function(e,t,r){"use strict";e.exports=r(12)},function(e,t,r){"use strict";e.exports=r(2),r(13),r(14),r(15),r(16),r(18)},function(e,t,r){"use strict";var n=r(2);(e.exports=n).prototype.done=function(e,t){(arguments.length?this.then.apply(this,arguments):this).then(null,function(e){setTimeout(function(){throw e},0)})}},function(e,t,r){"use strict";var n=r(2);(e.exports=n).prototype.finally=function(e){return this.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){throw t})})}},function(e,t,r){"use strict";var n=r(2);e.exports=n;var o=d(!0),i=d(!1),s=d(null),a=d(void 0),l=d(0),c=d("");function d(e){var t=new n(n._n);return t._i=1,t._j=e,t}n.resolve=function(e){if(e instanceof n)return e;if(null===e)return s;if(void 0===e)return a;if(!0===e)return o;if(!1===e)return i;if(0===e)return l;if(""===e)return c;if("object"==typeof e||"function"==typeof e)try{var t=e.then;if("function"==typeof t)return new n(t.bind(e))}catch(e){return new n(function(t,r){r(e)})}return d(e)},n.all=function(e){var t=Array.prototype.slice.call(e);return new n(function(e,r){if(0===t.length)return e([]);var o=t.length;function i(s,a){if(a&&("object"==typeof a||"function"==typeof a)){if(a instanceof n&&a.then===n.prototype.then){for(;3===a._i;)a=a._j;return 1===a._i?i(s,a._j):(2===a._i&&r(a._j),void a.then(function(e){i(s,e)},r))}var l=a.then;if("function"==typeof l)return void new n(l.bind(a)).then(function(e){i(s,e)},r)}t[s]=a,0==--o&&e(t)}for(var s=0;s<t.length;s++)i(s,t[s])})},n.reject=function(e){return new n(function(t,r){r(e)})},n.race=function(e){return new n(function(t,r){e.forEach(function(e){n.resolve(e).then(t,r)})})},n.prototype.catch=function(e){return this.then(null,e)}},function(e,t,r){"use strict";var n=r(2),o=r(17);(e.exports=n).denodeify=function(e,t){return"number"==typeof t&&t!==1/0?function(e,t){for(var r=[],o=0;o<t;o++)r.push("a"+o);var s=["return function ("+r.join(",")+") {","var self = this;","return new Promise(function (rs, rj) {","var res = fn.call(",["self"].concat(r).concat([i]).join(","),");","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],s)(n,e)}(e,t):function(e){for(var t=Math.max(e.length-1,3),r=[],o=0;o<t;o++)r.push("a"+o);var s=["return function ("+r.join(",")+") {","var self = this;","var args;","var argLength = arguments.length;","if (arguments.length > "+t+") {","args = new Array(arguments.length + 1);","for (var i = 0; i < arguments.length; i++) {","args[i] = arguments[i];","}","}","return new Promise(function (rs, rj) {","var cb = "+i+";","var res;","switch (argLength) {",r.concat(["extra"]).map(function(e,t){return"case "+t+":res = fn.call("+["self"].concat(r.slice(0,t)).concat("cb").join(",")+");break;"}).join(""),"default:","args[argLength] = cb;","res = fn.apply(self, args);","}","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],s)(n,e)}(e)};var i="function (err, res) {if (err) { rj(err); } else { rs(res); }}";n.nodeify=function(e){return function(){var t=Array.prototype.slice.call(arguments),r="function"==typeof t[t.length-1]?t.pop():null,i=this;try{return e.apply(this,arguments).nodeify(r,i)}catch(e){if(null==r)return new n(function(t,r){r(e)});o(function(){r.call(i,e)})}}},n.prototype.nodeify=function(e,t){if("function"!=typeof e)return this;this.then(function(r){o(function(){e.call(t,null,r)})},function(r){o(function(){e.call(t,r)})})}},function(e,t,r){"use strict";var n=r(6),o=[],i=[],s=n.makeRequestCallFromTimer(function(){if(i.length)throw i.shift()});function a(e){var t;(t=o.length?o.pop():new l).task=e,n(t)}function l(){this.task=null}e.exports=a,l.prototype.call=function(){try{this.task.call()}catch(e){a.onerror?a.onerror(e):(i.push(e),s())}finally{this.task=null,o[o.length]=this}}},function(e,t,r){"use strict";var n=r(2);(e.exports=n).enableSynchronous=function(){n.prototype.isPending=function(){return 0==this.getState()},n.prototype.isFulfilled=function(){return 1==this.getState()},n.prototype.isRejected=function(){return 2==this.getState()},n.prototype.getValue=function(){if(3===this._i)return this._j.getValue();if(!this.isFulfilled())throw new Error("Cannot get a value of an unfulfilled promise.");return this._j},n.prototype.getReason=function(){if(3===this._i)return this._j.getReason();if(!this.isRejected())throw new Error("Cannot get a rejection reason of a non-rejected promise.");return this._j},n.prototype.getState=function(){return 3===this._i?this._j.getState():-1===this._i||-2===this._i?0:this._i}},n.disableSynchronous=function(){n.prototype.isPending=void 0,n.prototype.isFulfilled=void 0,n.prototype.isRejected=void 0,n.prototype.getValue=void 0,n.prototype.getReason=void 0,n.prototype.getState=void 0}},function(e,t){var r=Shr.Dialogs.UniversalPicker,n=window.trUPP&&window.trUPP.util||Shr,o="shrMD",i="MobDev",s={_form:o+i+"-form",_stepsContainer:o+i+"-steps",_buttonsContainer:o+i+"-btns",_titleForm:o+i+"-title",_fieldContainer:o+i+"-field",_inputContainer:o+i+"-input",_tooltip:o+i+"-tooltip",_applestore:o+i+"-applestore",_playstore:o+i+"-playstore",_stepbox:o+i+"-step",_stepone:o+i+"-stepOne",_steptwo:o+i+"-stepTwo",_stepthree:o+i+"-stepThree"},a={L10N:{title:"Mobile Device",formMobileNumber:"From your phone to Shutterfly",btnText:"GET THE APP",inputPlaceHolderText:"Enter phone number",warningText:"Message and data rates may apply",steps:{titles:{s1:"STEP 1",s2:"STEP 2",s3:"STEP 3"},desc:{one:"Download the Shutterfly App",two:'Tap "Upload"',three:'Instantly access your photos under "Recent Uploads"'}},errorTooltips:{empty:"Can't be empty",invalid:"Invalid phone number"}}};Object.extend(a,{id:"mobiledevice",title:"${title}",init:function(){this.title="${title}".localize(this)},renderStyle:function(e){e(this._formatStyle())},getContents:function(){return this.pending||(this.pending=this._getContent()),!1}}),Object.extend(a,{_cacheElements:function(){a._elInputContainer=document.querySelector("."+s._inputContainer),a._elTooltipContainer=document.querySelector("."+s._tooltip),a._elInput=a._elInputContainer.querySelector("input")},_hideErrorFeedback:function(){a._elInputContainer=a._elInputContainer||document.querySelector("."+s._inputContainer),a._elInputContainer.classList.remove("error","valid")},_showErrorFeedback:function(e){a._elInputContainer.classList.add("error"),a._elTooltipContainer.innerHTML=e},_validateInput:function(){a._cacheElements(),a._hideErrorFeedback(),0!==a._elInput.value.length?a._isValidPhoneNumber(a._elInput.value)?(a._elInputContainer.classList.add("valid"),a._sendLink(a._elInput.value)):a._showErrorFeedback(a.L10N.errorTooltips.invalid):a._showErrorFeedback(a.L10N.errorTooltips.empty)},_isValidPhoneNumber:function(e){return!!e.match(/^\d{10}$/g)},_sendLink:function(e){r.API.SflyAjax.sendAjaxRequest({url:["https:/",Shr.AS.tl,"json"].join("/"),args:JSON.stringify({method:"message.sendMobileInstallLink",params:[e,{pid:"Web",af_channel:"Web",c:"SFLY_twilio_upp",is_retargeting:"true"}],headers:{"X-SFLY-SubSource":"upp"},id:null})},function(e){})},_getContent:function(){var e=Shr.Html.formatTag("p",{className:s._titleForm},"${formMobileNumber}"),t=Shr.Html.formatTag("div",{className:s._stepbox+" "+s._stepone},Shr.Html.formatTag("div",{})+""+Shr.Html.formatTag("p",{"data-title":"${steps.titles.s1}"},"${steps.desc.one}")),r=Shr.Html.formatTag("a",{className:s._applestore,href:"https://shutterfly.onelink.me/1053802476?pid=Web&af_channel=Web&c=SFLY_SFLY_photos_library_badges&is_retargeting=true",target:"_blank"});return e+=Shr.Html.formatTag("div",{className:s._fieldContainer},Shr.Html.formatTag("div",{"data-title":"${warningText}",className:s._inputContainer},Shr.Html.formatTag("input",{type:"tel",placeholder:"${inputPlaceHolderText}",onblur:this._hideErrorFeedback})+Shr.Html.formatTag("div",{className:s._tooltip}," Here is the message"))+Shr.Html.formatTag("button",{className:"sflyButton-tertiary",onclick:this._validateInput},"${btnText}")),t+=Shr.Html.formatTag("div",{className:s._stepbox+" "+s._steptwo},Shr.Html.formatTag("div",{})+Shr.Html.formatTag("p",{"data-title":"${steps.titles.s2}"},"${steps.desc.two}")),t+=Shr.Html.formatTag("div",{className:s._stepbox+" "+s._stepthree},Shr.Html.formatTag("div",{})+Shr.Html.formatTag("p",{"data-title":"${steps.titles.s3}"},"${steps.desc.three}")),r+=Shr.Html.formatTag("a",{className:s._playstore,href:"https://shutterfly.onelink.me/1053802476?pid=Web&af_channel=Web&c=SFLY_SFLY_photos_library_badges&is_retargeting=true",target:"_blank"}),Shr.Html.formatTag("section",{className:o},Shr.Html.formatTag("div",{className:s._form},e)+Shr.Html.formatTag("div",{className:s._stepsContainer},t)+Shr.Html.formatTag("div",{className:s._buttonsContainer},r)).localize(this)},_formatStyle:function(){var e={bgSteps:{desktop:{step1:Shr.Style.formatBackground({file:n.IURL("universalpicker/phone-1.png"),file2x:n.IURL("universalpicker/phone-1@2x.png"),width:"74px"}),step2:Shr.Style.formatBackground({file:n.IURL("universalpicker/phone-2.png"),file2x:n.IURL("universalpicker/phone-2@2x.png"),width:"74px"}),step3:Shr.Style.formatBackground({file:n.IURL("universalpicker/computer.png"),file2x:n.IURL("universalpicker/computer@2x.png"),width:"140px"})}},bgStores:{apple:Shr.Style.formatBackground({file:n.IURL("universalpicker/btn-appstore.png"),file2x:n.IURL("universalpicker/btn-appstore@2x.png"),width:"129px"}),play:Shr.Style.formatBackground({file:n.IURL("universalpicker/btn-playstore.png"),file2x:n.IURL("universalpicker/btn-playstore@2x.png"),width:"129px"})},inputStates:{valid:Shr.Style.formatBackground({file:n.IURL("universalpicker/confirmation.png"),file2x:n.IURL("universalpicker/confirmation@2x.png"),width:"10px"}),wrong:Shr.Style.formatBackground({file:n.IURL("universalpicker/error-input.png"),file2x:n.IURL("universalpicker/error-input@2x.png"),width:"22px"})}};return[".shrMD {text-align:center}",".shrMD .shrMDMobDev-steps {display:flex;justify-content:center}",".shrMD .shrMDMobDev-step {flex: 1; max-width: 300px;}",".shrMD .shrMDMobDev-step p {padding: 0 10px; margin-bottom: 0;}",".shrMD .shrMDMobDev-step p:before{ content:attr(data-title);display:block;color:#929497;font-size:16px;margin-bottom:5px;}",".shrMD .shrMDMobDev-step > div {height: 134px;margin-bottom:20px;position:relative;}",".shrMD .shrMDMobDev-step > div:after,.shrMD .shrMDMobDev-step > div:before{content:'';display:block;}",".shrMD .shrMDMobDev-step > div:after {position:absolute;width:100%;height:100%;top:0;left:0;background-position:bottom center;}",".shrMD .shrMDMobDev-step > div:before {width:140px;height:140px;background:#f5f6f8;position:absolute;margin:0 auto;left:0;right:0;top:-30px;border-radius:50%;}",".shrMD .shrMDMobDev-stepOne > div:after { ${bgSteps.desktop.step1} }",".shrMD .shrMDMobDev-stepTwo > div:after { ${bgSteps.desktop.step2} }",".shrMD .shrMDMobDev-stepThree > div:after { ${bgSteps.desktop.step3} }",".shrMD .shrMDMobDev-btns {margin-top:40px}",".shrMD .shrMDMobDev-btns a:first-child{margin-right:10px;}",".shrMD .shrMDMobDev-btns a{width:129px;height:38px;display:inline-block;}",".shrMD .shrMDMobDev-btns .shrMDMobDev-applestore{ ${bgStores.apple} }",".shrMD .shrMDMobDev-btns .shrMDMobDev-playstore{ ${bgStores.play} }",".shrMD .shrMDMobDev-form {margin:28px 0 60px;}",".shrMD .shrMDMobDev-form .shrMDMobDev-title {font-size:18px;color:#2d3137;display:inline-block;margin-right:18px;margin-bottom:18px;}",".shrMD .shrMDMobDev-form .shrMDMobDev-field {display:inline-block}",".shrMD .shrMDMobDev-form .shrMDMobDev-field .shrMDMobDev-input {margin-right:10px;display:inline-block;position:relative;margin-bottom: 20px;}",".shrMD .shrMDMobDev-form .shrMDMobDev-field .shrMDMobDev-input:after {content:'';display:none;width:22px;height:22px;position:absolute;right:10px;top:5px;}",".shrMD .shrMDMobDev-form .shrMDMobDev-field input {width: 176px;border-radius: 4px; border: solid 1px #dcdee1;padding: 6px 15px;color:#58595b}",".shrMD .shrMDMobDev-form .shrMDMobDev-field input::placeholder{color:#929497}",".shrMD .shrMDMobDev-form .shrMDMobDev-field input:hover{border-color:#929497}",".shrMD .shrMDMobDev-form .shrMDMobDev-field input:focus{caret-color:#f05323;outline:0}",".shrMD .shrMDMobDev-form .shrMDMobDev-field .shrMDMobDev-input:before {content:attr(data-title);display:block;position: absolute;bottom: -17px;color: #929497;font-size: 9px;left: 5px;}",".shrMD .shrMDMobDev-form .shrMDMobDev-field button{font-size:12px;}",".shrMD .shrMDMobDev-form .shrMDMobDev-field button:focus{outline:none}",".shrMD .shrMDMobDev-form .shrMDMobDev-field .shrMDMobDev-input.error input {border-color:#cc0000;color:#cc0000}",".shrMD .shrMDMobDev-form .shrMDMobDev-field .shrMDMobDev-input.error:after { ${inputStates.wrong}; display:block}",".shrMD .shrMDMobDev-form .shrMDMobDev-field .shrMDMobDev-input.valid:after{ ${inputStates.valid}; display:block; background-position:center;}",".shrMD .shrMDMobDev-form .shrMDMobDev-field .shrMDMobDev-tooltip {display:none;position: absolute;right: 0;border: 1px solid #dcdee1;padding: 4px;width:170px;top: -31px;background: #fff;color: #58595b;box-shadow: 0 5px 15px 0 rgba(0, 0, 0, 0.08), 0 2px 4px 0 rgba(0, 0, 0, 0.11);border-radius: 4px;font-size: 14px;right:-69px;}",".shrMD .shrMDMobDev-form .shrMDMobDev-field .shrMDMobDev-tooltip:after {content:'';width: 0;height: 0;border-style: solid;border-width: 6px 7px 0 7px;border-color: #ffffff transparent transparent transparent;position:absolute;bottom: -6px;right: 82px;}",".shrMD .shrMDMobDev-form .shrMDMobDev-field .shrMDMobDev-input.error .shrMDMobDev-tooltip {display:block}",".shrUPMedium .shrMD .shrMDMobDev-step > div:before,",".shrUPNarrow .shrMD .shrMDMobDev-step > div:before {display:none}",".shrUPMedium .shrMD .shrMDMobDev-steps,",".shrUPNarrow .shrMD .shrMDMobDev-steps {display:block}",".shrUPMedium .shrMD .shrMDMobDev-form,",".shrUPNarrow .shrMD .shrMDMobDev-form {margin-bottom:0;}",".shrUPMedium .shrMD .shrMDMobDev-form .shrMDMobDev-field,",".shrUPNarrow .shrMD .shrMDMobDev-form .shrMDMobDev-field {display:none}",".shrUPMedium .shrMD .shrMDMobDev-form .shrMDMobDev-title,",".shrUPNarrow .shrMD .shrMDMobDev-form .shrMDMobDev-title {margin-right:0;margin-bottom:22px;}",".shrUPMedium .shrMD .shrMDMobDev-step,",".shrUPNarrow .shrMD .shrMDMobDev-step {margin:0 auto 5px;height:80px;flex: none;max-width:272px;}",".shrUPMedium .shrMD .shrMDMobDev-step  > div,",".shrUPNarrow .shrMD .shrMDMobDev-step  > div{ height: 60px;width: 60px;float:left;margin-right: 31px;margin-bottom:0;}",".shrUPMedium .shrMD .shrMDMobDev-step  > div:after,",".shrUPNarrow .shrMD .shrMDMobDev-step  > div:after {background-size:contain}",".shrUPMedium .shrMD .shrMDMobDev-step p,",".shrUPNarrow .shrMD .shrMDMobDev-step p {text-align:left;margin:0;position:relative;top:6px}",".shrUPMedium .shrMD .shrMDMobDev-step p:before,",".shrUPNarrow .shrMD .shrMDMobDev-step p:before {font-size:14px;margin-bottom:3px}"].join("\n").substitute(e)}}),e.exports=a},function(e,t){var r,n,o=window.trUPP=window.trUPP||{},i=Shr.Dialogs.UniversalPicker;o.UploadTimer=(r={_maxLength:200,_uploadSpeedArr:[],_lastAvgUploadSpeed:0},{isAvgSpeedEarly:!(n=function(){for(var e=r._uploadSpeedArr.length,t=0,n=0;n<e;n++)t+=r._uploadSpeedArr[n];r._lastAvgUploadSpeed=t/e}),getLastAvgSpeed:function(){return r._lastAvgUploadSpeed},reportUploadData:function(e,t){try{var o=e/(t/1e3);r._uploadSpeedArr.push(o);var i=r._uploadSpeedArr.length;0===r._lastAvgUploadSpeed&&3===i&&(n(),this.isAvgSpeedEarly=!0),i>r._maxLength&&(n(),this.isAvgSpeedEarly=!1,this.clear())}catch(e){}},clear:function(){r._uploadSpeedArr=[]},showTimeRemaining:function(e){return!e.find(function(e){return e.source.dataSourceType!==i.Source.DataSourceType.upload})},getTimeRemaining:function(e,t){var n=null;try{var o=(e-t)/r._lastAvgUploadSpeed;n=trUPP.util.SecondsToTimeFormat(o)}catch(e){}return n},getPrivate:function(){}})},function(e,t){var r,n=window.trUPP=window.trUPP||{},o=(Shr.P,Shr.Dialogs.UniversalPicker);n.Log=r={pageName:"/newpicturepicker",_getProp44:function(e){var t="prospect";return Shr.U.id&&(t=Shr.U.migrated?"migrated":"nonmigrated"),[e,t].join(" | ").replace("//","/")},_getDisabled:function(){return o.isDisabled("omtr")},_logPageView:function(e,t){try{if(e&&!r._getDisabled()&&window.s&&window.s.t){"Iterator"in window||(window.Iterator=function(){}),window.scw.userAgent=window.scw.userAgent||navigator.userAgent;var n=window.scw,o=Object.extend({},window.s),i=Object.extend({},t);delete o.products,r._clearTrackingVars(),Object.extend(i,{partnerId:window.scw&&window.scw.partnerId||"SFLY",partnerSubId:window.scw&&window.scw.partnerSubId||"WEB",visitorType:window.scw&&window.scw.visitorType||(Shr.U.id?"signedIn":"signedOut")},i),i&&(window.scw=Object.extend(Object.extend({},n),i)),window.scw.pageName=e,window.scw.emailId="";try{window.translateScwBase(),window.s.events="",window.s.t()}catch(e){}window.scw=n,window.s=o}else{var s=Shr.AS.getEnv();s&&s.match(/prod|stage/)}}catch(e){}},_clearTrackingVars:function(){var e=window.s;e.pageName="";for(var t=1;t<=23;t++)e["prop"+t]="";for(var r=1;r<=51;r++)e["eVar"+r]=""},_logLinkClick:function(e,t){if(!r._getDisabled()&&window.s&&window.s.t){var n=Object.extend({},window.s),o=[],i=0,s=Object.extend({},t),a=window.s;for(var l in a.linkTrackEvents="None",a.linkTrackVars="",r._clearTrackingVars(),s.prop12=s.prop12||e||r.pageName,s.prop14=s.prop14||[s.prop12,s.prop13].join("|"),s.prop44=s.prop44||r._getProp44(e),s.evar39=s.evar39||s.prop12,s.evar40=s.evar40||s.prop13,s.evar41=s.evar41||s.prop14,s.serverType=s.serverType||"",s.pe=s.pe||"lnk_o",s)o[i]=l,i++,a[l]=s[l];a.linkTrackVars=o.join(",");try{a.tl(null,"o",e)}catch(e){}window.s=n}},logOmnitureClick:function(e){try{window.DTLSiteFeatureEnabled||r._logLinkClick(r.pageName,{prop13:e})}catch(e){}},_setupOmnitureDTLTracking:function(e){r.script=document.createElement("script"),r.script.type="text/javascript",r.script.src=Shr.A.www+"/rest/omnitureDTL/adobeDTM.siteCatalyst.DTL",r.script.onload=function(){r._onSetupLoad(e)},r.script.onerror=function(){r._onSetupError(e)},document.getElementsByTagName("head")[0].appendChild(r.script)},_onSetupError:function(e){e(!1)},_onSetupLoad:function(e){try{window.DTLSiteFeatureEnabled?window.$omnitureDTL.setupOmnitureDTLTracking(Shr.A.www,function(t){e(!0)},null):e(!1)}catch(e){}},_logDTL:function(e){try{window.DTLSiteFeatureEnabled&&(window.$omnitureDTL.processOmnitureJSPData(function(){}),window.$omnitureDTL.putOmnitureJSPData(location.origin,e))}catch(e){}},updateSessionInfo:function(){r.script&&r.script.parentNode.removeChild(r.script),r.script=document.createElement("script"),r.script.type="text/javascript",r.script.src=Shr.A.www+"/rest/omnitureDTL/adobeDTM.siteCatalyst.DTL",r.script.onload=function(){r._onSessionLoad()},r.script.onerror=function(){r._onSessionError()},document.getElementsByTagName("head")[0].appendChild(r.script)},_getVisitorId:function(){var e=document.cookie,t=window.BaseADTMD.env;if(void 0===t)return"";var r=' visitor="';"prod"!==(t=t.toLowerCase())&&(r=" visitor_"+t+'="');var n=e.indexOf(r);if(-1==n)return"";var o=e.substring(n+r.length);return o.substring(0,o.indexOf('"'))},_onSessionLoad:function(){try{var e=window.$omnitureDTL.clone(window.BaseADTMD);e.session.visitorDetails.visitorId=r._getVisitorId(),e.noClobber=!0,window.$omnitureDTL.processOmnitureJSPData(function(){}),window.$omnitureDTL&&window.$omnitureDTL.putOmnitureJSPData&&window.$omnitureDTL.putOmnitureJSPData(location.origin,e)}catch(e){}},_onSessionError:function(){},loadLog:function(){void 0===window.DTLSiteFeatureEnabled&&r._setupOmnitureDTLTracking(function(e){window.DTLSiteFeatureEnabled=e})},logDialogDisplay:function(){try{window.DTLSiteFeatureEnabled?window._satellite&&window._satellite.track("upp load"):r._logPageView(r.pageName,{prop36:"null"})}catch(e){}},logAddClick:function(e){if(!window.DTLSiteFeatureEnabled){var t={linkTrackEvents:e.events.toString(),prop12:r.pageName,prop13:"add",prop61:e.sources.toString(),eVar53:e.selection&&e.selection.length||0,events:e.events.toString()};r._logLinkClick(r.pageName,t)}var n=e.sourcesCounts,i=[],s=new Date;Shr.L.forEach(n,function(e,t){i.push({uploadSource:t,numberOfUploads:e})});var a={event:{eventInfo:{eventName:o.context.bypass?"drag and drop upload":"upp upload"},eventDetails:{uppSources:e.sources.toString(),numberOfUploads:e.selection&&e.selection.length||0,sourceDetails:i},visitorInfo:{lastUploadDate:s.dateFormat("Y-m-d")}}};r._logDTL(a)},logSignInLoad:function(){r._logDTL({event:{eventInfo:{eventName:"form view"},eventDetails:{formName:"sign in"}}})},logSignInError:function(e){var t={event:{eventInfo:{eventName:"form error"},eventDetails:{formName:"sign in",formerror:e&&e.join("|")}}};r._logDTL(t)},logSignUpLoad:function(){r._logDTL({event:{eventInfo:{eventName:"form view"},eventDetails:{formName:"sign up"}}})},logSignUpError:function(e){var t={event:{eventInfo:{eventName:"form error"},eventDetails:{formName:"sign up",formerror:e&&e.join("|")}}};r._logDTL(t)},logUploadProgressWidget:function(){r.logOmnitureClick("background upload:progress widget"),r._logDTL({event:{eventInfo:{eventName:"modal_dialog load"},eventDetails:{eventLocation:"background upload:upload progress widget"}}})},logUploadProgressModal:function(){r.logOmnitureClick("background upload:progress modal"),new Date,r._logDTL({event:{eventInfo:{eventName:"modal_dialog load"},eventDetails:{eventLocation:"background upload:upload progress modal"}}})},logUploadProgressError:function(){r.logOmnitureClick("background upload:error modal"),new Date,r._logDTL({event:{eventInfo:{eventName:"modal_dialog load"},eventDetails:{eventLocation:"background upload:upload error"}}})}}},function(e,t){(window.trUPP=window.trUPP||{}).util={_codeBase:null,get codeBase(){return this._codeBase||(this._codeBase="//${0}/trupp/builds/${1}/dist/".substitute([window.localStorage.getItem("Shr.AS.staticServer")||Shr.AS.staticServer,window.trUPP&&window.trUPP.version])),this._codeBase},_imageBase:null,get imageBase(){return this._imageBase||(this._imageBase=this.codeBase+"assets/"),this._imageBase},CURL:function(e){return this.codeBase+e},IURL:function(e,t){var r,n,o=1.5<(window.devicePixelRatio||1);return!t&&o&&-1===e.indexOf("@2x")&&(n=(r=e.split(".")).pop(),e=r.join(".")+"@2x."+n),(this.imageBase+e).toLowerCase()},Inherit:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}return n.prototype=Object.extend({},t.prototype,e.prototype),e.prototype=new n,e.__super__=t.prototype,e},groupBy:function(e,t,r){try{return e.reduce(function(e,n){var o;return r&&(o=n[r]),t&&(o=t(n)),o&&(e[o]=e[o]||[]).push(n),e},{})}catch(e){return{}}},generateGuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})},SecondsToTimeFormat:function(e){var t=(e=Math.round(e))%3600,r={h:Math.floor(e/3600),m:Math.floor(t/60),s:Math.ceil(t%60)},n="";if(3600<=e)n="more than an hour";else if(60<=e){var o=1==r.m?" minute":" minutes";n="about ${0}".substitute([r.m])+o}else n="less than a minute";return n}}},function(e,t){var r;(r=window.trUPP=window.trUPP||{}).isDisabled=function(e){return-1!=(r.disabledDS||"").split(" ").join("").split(",").indexOf(e)},r.Feature=function(e,t,n){var o=r.Feature,i=t,s=window.localStorage.getItem("trUPP.Feature."+e);switch(r.isDisabled(e)&&(i=!t),s){case null:case void 0:case"":break;default:i="true"===s}n?Object.defineProperty(o,e,{get:function(){return n(i)}}):o[e]=i}},function(e,t){var r,n,o,i,s,a,l,c,d,h,u,p,m,g,f,_=Shr.Dialogs.UniversalPicker;Object.defineProperty(_,"vt",(r=!1,n=_._utilities.localStorage.getItem("Shr.Dialogs.UniversalPicker.vt"),o=r=null!=n?!!n:r?!_.isDisabled("vt"):_.isDisabled("vt"),{get:function(){var e=o;return _.context&&"vt"in _.context?e=_.context.vt:e||(e=!!_._testAndTarget.vt),e}})),Object.defineProperty(_,"useSearch",(i=!1,s="useSearch",a=_._utilities.localStorage.getItem("Shr.Dialogs.UniversalPicker."+s),l=i=null!=a?!!a:i?!_.isDisabled(s):_.isDisabled(s),{get:function(){var e=l;return _.context&&"useSearch"in _.context&&(e=_.context.useSearch),e||(e=!!_._testAndTarget.useSearch),e}})),Object.defineProperty(_,"mayBeNotUsingSearch",{get:function(){return!_.useSearch&&void 0!==_._testAndTarget.useSearch&&!_._testAndTarget.useSearch}}),Object.defineProperty(_,"truPPLocalDebuging",{get:function(){return window.localStorage.getItem("truPPLocalDebuging")}}),Object.defineProperty(_,"isPhotosWebClient",{get:function(){return _.context&&"photosweb"===_.context.category}}),Object.defineProperty(_,"newBgUpload",(c=!1,d="newBgUpload",h=_._utilities.localStorage.getItem("Shr.Dialogs.UniversalPicker."+d),u=c=null!=h?!!h:c?!_.isDisabled(d):_.isDisabled(d),{get:function(){var e=u;return _.context&&"newBgUpload"in _.context&&(e=_.context.newBgUpload),e}})),Object.defineProperty(_,"showRemainingUploadTime",{get:function(){var e=!1;return _._optimizelyFeatureFlags&&"showRemainingUploadTime"in _._optimizelyFeatureFlags&&(e=_._optimizelyFeatureFlags.showRemainingUploadTime),_.context&&"showRemainingUploadTime"in _.context&&(e=_.context.showRemainingUploadTime),null!=_._utilities.localStorage.getItem("Shr.Dialogs.UniversalPicker.showRemainingUploadTime")&&(e="true"===_._utilities.localStorage.getItem("Shr.Dialogs.UniversalPicker.showRemainingUploadTime")),e}}),Object.defineProperty(_,"disableSourceGoogle",{get:function(){return!0}}),Object.defineProperty(_,"disableSourceFacebook",{get:function(){var e=!1;return _._optimizelyFeatureFlags&&"disableSourceFacebook"in _._optimizelyFeatureFlags&&(e=_._optimizelyFeatureFlags.disableSourceFacebook),null!=_._utilities.localStorage.getItem("Shr.Dialogs.UniversalPicker.disableSourceFacebook")&&(e="true"===_._utilities.localStorage.getItem("Shr.Dialogs.UniversalPicker.disableSourceFacebook")),e}}),Object.defineProperty(_,"disableSourceInstagram",{get:function(){var e=!1;return _._optimizelyFeatureFlags&&"disableSourceInstagram"in _._optimizelyFeatureFlags&&(e=_._optimizelyFeatureFlags.disableSourceInstagram),null!=_._utilities.localStorage.getItem("Shr.Dialogs.UniversalPicker.disableSourceInstagram")&&(e="true"===_._utilities.localStorage.getItem("Shr.Dialogs.UniversalPicker.disableSourceInstagram")),e}}),Object.defineProperty(_,"convertToJPEG",(g="convertToJPEG",p=!0,m=_._utilities.localStorage.getItem("Shr.Dialogs.UniversalPicker."+g),f=p=null!=m?!!m:p?!_.isDisabled(g):_.isDisabled(g),{get:function(){var e=f;return _.context&&g in _.context&&(e=_.context[g]),e}}))},function(e,t){var r;r={className:"trUPPAlert",renderStyle:function(e){e(r._formatStyle())},renderContent:function(e,t){var r,n,o="",i=Shr.Html.formatTag("div",{className:"shrUPAlert-close",onclick:function(){return window.trUPP.Dialog.close(t.did,window.trUPP.Dialog.reason.cancel),!1}});r=Shr.Html.formatTag("header",{},(t.title||"")+i),n=Shr.Html.formatTag("div",{},t.body||""),t.buttons&&(o=Shr.Html.formatTag("footer",{},t.buttons.map(function(e){return Shr.Button.format(e.title,{style:e.style,className:"purple"==e.color?"sflyButton-secondary":void 0,name:e.name,disabled:e.disabled,onclick:e.onclick||function(){return window.trUPP.Dialog.close(t.did,"result"in e?e.result:window.trUPP.Dialog.reason.cancel),!1}})}).join(""))),e(Shr.Html.formatTag("section",{},r+n+o))},onClose:function(e,t){var r=!0;return e.onClose&&(r=e.onClose(e,t)),r},formatContent:function(){var e,t=[];if(!r._stylesInjected){r._stylesInjected=!0,e=document.createElement("style"),r.renderStyle(function(t){e.innerHTML=t});try{document.querySelector("head").appendChild(e)}catch(e){}}return r.renderContent(function(){Array.prototype.forEach.call(arguments,function(e){t.push(e)})},r.context),t.join("\n")},_formatStyle:function(){return["/* message.js styles... */",".trUPPAlert {top: 50% !important; bottom: auto !important; left: 50% !important; right: auto !important; width: 100%;}",".trUPPAlert {font-weight: 400;}",".trUPPAlert * { box-sizing: border-box; }",".trUPPAlert > SECTION {display: flex; flex-direction: column; align-items: left; justify-content: left; text-align: left;}",".trUPPAlert > SECTION {max-width: 50%; border-radius: 6px; transform: translate(-50%, -50%);}",".trUPPAlert > SECTION > HEADER {position: relative; width: 100%; padding: 30px 30px 0 30px; font-size: 20px; color: #58595b; border-top-left-radius: 6px; border-top-right-radius: 6px;}",".trUPPAlert > SECTION > HEADER .shrUPAlert-close {position: absolute; top: 15px; right: 15px; width: 16px; height: 16px; cursor: pointer;}",".trUPPAlert > SECTION > HEADER .shrUPAlert-close:before, .trUPPAlert > SECTION > HEADER .shrUPAlert-close:after {content: ''; position: absolute; top: -1px; right: 7px; width: 2px; height: 18px; background-color: #c6c7c9; transform: rotate(-45deg);}",".trUPPAlert > SECTION > HEADER .shrUPAlert-close:after {transform: rotate(45deg);}",".trUPPAlert > SECTION > DIV {width: 100%; padding: 0 30px; margin: 20px 0; font-size: 16px;}",".trUPPAlert > SECTION > FOOTER {width: 100%; height: 66px; padding: 15px; text-align: right; background-color: #f9fafc; border-bottom-left-radius: 6px; border-bottom-right-radius: 6px; box-shadow: inset 0 1px 0 0 #dcdee1; }",".trUPPAlert > SECTION > FOOTER .sflyButton {margin-left: 15px; padding: 0 26px; font-weight: 300; font-size: 12px; line-height: 36px; text-shadow: none; text-transform: uppercase; background-color: #f05323; background-image: none; border-radius: 4px; box-shadow: none;}",".trUPPAlert > SECTION > FOOTER .sflyButton-secondary {}","@media screen and (max-width: 479px) {","/* XSmall allows slightly wider alert. */",".trUPPAlert > SECTION {max-width: 75%;}","}",""].join("\n")}},window.trUPP=window.trUPP||{},window.trUPP.Dialogs=window.trUPP.Dialogs||{},window.trUPP.Dialogs.Message=r},function(e,t,r){var n,o,i,s;i=window.trUPP=window.trUPP||{},s=Shr.Dialogs.UniversalPicker,i.BgToast=r(27),i.BgDetails=r(28),i.bgHelper=(o={_init:!1,get bgToastWgt(){return i.BgToast},get bgDetailsWgt(){return i.BgDetails},get _promise(){return i.Promise},_toBeAddedMoments:[],_resendVisibleMoments:!1,_e:{_total:[],_completed:[],_succeeded:[],_canceled:[],_failed:[],_done:!0,_batches:[],_aborted:!1,_showTimeRemaining:!1,_timeRemaining:null},_resetCounters:function(){var e=o._e;e._total=[],e._completed=[],e._succeeded=[],e._canceled=[],e._failed=[],e._done=!0,e._batches=[],e._aborted=!1,e._showTimeRemaining=!1,e._timeRemaining=null,i.UploadTimer.clear()},_bindEvent:function(){window.addEventListener("Shr.Dialogs.UniversalPicker",o._handleEvent)},_handleEvent:function(e){switch(e.detail.type){case s.EventType.start:o._onStart(e.detail.detail);break;case s.EventType.itemUpdate:o._onItemUpdate(e.detail.detail);break;case s.EventType.done:o._onDone(e.detail.detail)}},_onStart:function(e){var t=[].concat(e.done,e.error),r=[].concat(e.cancel),n=[].concat(e.wait,e.xfer),i=t.concat(n),a=o._e;0!==i.length&&(a._done&&o._resetCounters(),a._done=!1,a._batches.push(e.index),a._total=a._total.concat(i),a._showTimeRemaining=trUPP.UploadTimer.showTimeRemaining(a._total),a._showTimeRemaining=a._showTimeRemaining&&s.showRemainingUploadTime,a._completed=a._completed.concat(t),a._canceled=a._canceled.concat(r),o._resendVisibleMoments=!0,o._broadcastToBgWgts(s.EventType.start))},_onItemUpdate:function(e){var t,r=s.Sink.state,n=!1,i=o._e;i._done||(-1!==[r.done,r.error,r.cancel].indexOf(e.state)&&i._completed.length<i._total.length&&(r.cancel===e.state?-1===i._canceled.indexOf(e)&&(i._canceled.push(e),-1!==(t=i._total.indexOf(e))&&i._total.splice(t,1)):i._completed.find(function(t){return t.mPath===e.mPath})||i._completed.push(e),n=!0),o._setTimeRemaining(),o._broadcastToBgWgts(s.EventType.itemUpdate,e,n))},_onDone:function(e){if(0!==[].concat(e.wait,e.xfer,e.done,e.error,e.cancel).length){var t,r,n=s.getStatus(),i=s.Sink.state,a=!0,l=o._e;for(r=0;r<n.length;r++)if(t=n[r],-1===[i.done,i.error,i.cancel].indexOf(t.state)){a=!1;break}l._failed=l._failed.concat(e.error,e.wait,e.xfer),function(){var t;for(t=0;t<e.cancel.length;t++)if(-1===l._canceled.indexOf(e.cancel[t])){!0;break}}(),a&&(l._done=a,l._completed.length,l._total.length,0===l._failed.length?l._succeeded=[].concat(l._total):l._total.forEach(function(e){-1===l._failed.indexOf(e)&&l._succeeded.push(e)})),o._broadcastToBgWgts(s.EventType.done)}},_setTimeRemaining:function(){var e=o._e;if(e._showTimeRemaining){var t,r=0,n=0,i=(Date.now(),trUPP.UploadTimer.getLastAvgSpeed()),s=trUPP.UploadTimer.isAvgSpeedEarly,a=function(){return e._timeRemaining=" calculating... "};if(0===i)return void a();if(e._timeRemaining,e._total.forEach(function(e){e.progress&&(n+=e.progress*e.size),r+=e.size}),s&&!(.25<=n/r))return void a();(t=trUPP.UploadTimer.getTimeRemaining(r,n))&&(e._timeRemaining=" ".concat(t," "))}},_initBgWidgets:function(e){[o.bgToastWgt,o.bgDetailsWgt].forEach(function(t){t.init(Object.extend({},n,{toggleBgDetails:o._toggleBgDetails,toggleBgToast:o._toggleBgToast,cancelUpload:o._cancelUpload,addBgWidget:o._addWgtToClient}),e)}.bind(this))},_updateBgWidgets:function(e){[o.bgToastWgt,o.bgDetailsWgt].forEach(function(t){t.updateConfigs&&"function"==typeof t.updateConfigs&&t.updateConfigs(e)}.bind(this))},_addWgtToClient:function(e,t){return new o._promise(function(r,n){var o=document.createElement("div");o.id=e,t.forEach(function(e){o.classList.add(e)}),document.body.appendChild(o),Shr.Dom.onContentReady(o.id,function(){r(o)})})},_toggleBgDetails:function(e,t){o.bgDetailsWgt.visible=e,t?(i.Log.logUploadProgressError(),o.bgDetailsWgt.show(o._e,s.EventType.done)):(i.Log.logUploadProgressModal(),o._resendVisibleMoments=!0,o._broadcastToBgWgts(s.EventType.itemUpdate,null)),s.Log.metric(["upp","BgUpload","showBgDetails"].join("."),Date.now())},_toggleBgToast:function(e){o.bgToastWgt.visible=e,o.bgToastWgt.show(),i.Log.logUploadProgressWidget()},_cancelUpload:function(e,t){var r=o._e,n=[];if(e){var a=r._total.find(function(t){return t.id===e});s.cancel([a])}else n=0===r._completed.length?(r._aborted=!0,[].concat(r._total)):r._total.filter(function(e){return-1===r._completed.indexOf(e)}),s.cancel(n,!0);s.Log.metric(["upp","BgUpload",e?"cancelItem":"cancelAll"].join("."),Date.now()),t&&i.Log.logOmnitureClick(t)},_broadcastToBgWgts:function(e,t,r){var n=null,a=o._e;[o.bgToastWgt,o.bgDetailsWgt].forEach(function(l){l===o.bgDetailsWgt&&l.visible&&(o._resendVisibleMoments&&e!==s.EventType.start&&(o._resendVisibleMoments=!1,o._toBeAddedMoments=a._total.filter(function(e){return-1===a._completed.indexOf(e)})),n={toBeAdded:[].concat(o._toBeAddedMoments),toBeRemoved:r},o._toBeAddedMoments=[]),l===o.bgToastWgt&&l.visible&&s.EventType.start===e&&1===a._batches.length&&i.Log.logUploadProgressWidget(),l.show(Object.extend({},a),e,t,n)})}},{init:function(e,t){o._init?t&&o._updateBgWidgets(t):(o._init=!0,n=e,o._initBgWidgets(t),s.Log.metric(["upp","BgUpload","init"].join("."),Date.now()))},handleEvent:function(e){o._handleEvent(e),window.setTimeout(function(){e.detail.detail=Object.extend({},e.detail.detail),window.dispatchEvent(e)},0)},getPrivateMethods:function(){}})},function(e,t){var r,n,o,i,s,a=Shr.Dialogs.UniversalPicker,l=!0,c="trUPP",d="BgToast",h=null,u={_bgToast:c+d,_btn:c+d+"-btn",_primaryBtn:c+d+"-primaryBtn",_secondaryBtn:c+d+"-secondaryBtn",_title:c+d+"-title",_title_upload:c+d+"-title upload",_text:c+d+"-text",_uploading:c+d+"-uploading",_complete:c+d+"-complete",_error:c+d+"-error",_canceled:c+d+"-canceled",_progressBar:c+d+"-progressBar",_video:c+d+"-video"},p={L10N:{stop_btn:"STOP",view_btn:"VIEW",ignore_btn:"IGNORE",uploading_title:"Uploading",warning_message:"Keep window open until upload is complete",time_remaining_text:"Time remaining:",uploading_text:"${0} of ${1}",canceled_title:"UPLOAD CANCELED",canceled_text:"Your upload has been canceled",error_title:"ERROR",error_text_singular:"1 item was not uploaded",error_text_plural:"${0} of ${1} items were not uploaded",complete_title:"PHOTOS ADDED",complete_text_singular:"1 item has been added",complete_text_plural:"${0} of ${1} items have been added",context:{upload:{complete_title:"UPLOAD COMPLETE",complete_text_singular:"1 item has been uploaded",complete_text_plural:"${0} of ${1} items have been uploaded"}}},get visible(){return l},set visible(e){l=e}};Object.extend(p,{id:"trupp_bgtoast",init:function(e,t){o=t||{},(r=e).addBgWidget("trUPPBgToast-Id",[r.classNames.bgToast,r.classNames.disabled]).then(function(e){(n=e).innerHTML=this._getContent(),Shr.StyleManager.renderStyle(this)}.bind(this))},updateConfigs:function(e){o=e||{}},renderStyle:function(e){e(this._formatStyle())},show:function(e,t,o){s=a.context.labelsContext,a.EventType.start!==t&&(l&&(n.classList.remove(r.classNames.disabled),h&&e&&t&&(window.clearTimeout(h),h=null)),t&&p._updateView.apply(null,arguments))},hide:function(e,t){t?h=null:l=!1,e&&p._resetView(),n.classList.add(r.classNames.disabled)}}),Object.extend(p,{_updateView:function(e,t,r){var o=p._determineView.apply(null,arguments);switch(i=e,p._updateParentClassWithView(o),o){case u._uploading:p._updateUploadingView.apply(null,arguments);break;case u._canceled:h=window.setTimeout(function(){p.hide(!0,!0)},6e3);break;case u._error:p._updateErrorView.apply(null,arguments);break;default:var s=n.querySelector("."+u._complete),a=p._formatCompleteView();s.insertAdjacentHTML("afterend",a),s.parentNode.removeChild(s),p._updateCompleteView.apply(null,arguments)}},_determineView:function(e,t,r){var n=u._uploading;return a.EventType.done===t&&e._done&&(n=e._aborted?u._canceled:e._succeeded.length===e._total.length?u._complete:u._error),n},_updateParentClassWithView:function(e){n.classList.contains(e)||([u._uploading,u._complete,u._error,u._canceled].forEach(function(e){n.classList.remove(e)}),n.classList.add(e))},_getContent:function(){return p._formatUploadingView()+p._formatCompleteView()+p._formatCanceledView()+p._formatErrorView()},_formatUploadingView:function(){var e=u._uploading,t=Shr.Html.formatTag("span",{className:u._title_upload},""),r=Shr.Html.formatTag("span",{className:u._title},"${uploading_title}".localize(p)+" "+t),n=Shr.Html.formatTag("div",{className:"warningMsg"},Shr.Html.formatTag("div",{className:"warnIco"},'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="22" height="22" viewBox="0 0 22 22"><defs><path id="a" d="M10.99 17.497a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm0-3.01a1 1 0 0 1-1-1v-4a1 1 0 1 1 2 0v4a1 1 0 0 1-1 1zm9.996 6.51H.994a1 1 0 0 1-.86-.49 1 1 0 0 1 0-1l9.996-18a1 1 0 0 1 1.74 0l9.996 18a1 1 0 0 1 0 1 1 1 0 0 1-.88.49zm-18.293-2h16.594l-8.297-15-8.297 15z"/></defs><use fill="#FFF" fill-rule="evenodd" xlink:href="#a"/></svg>')+p._formatText(!1,"${warning_message}".localize(p))),o=p._formatBtn("${view_btn}".localize(p),[u._btn,u._primaryBtn],p._viewOnClick.bind(this,!1)),i=p._formatBtn("${stop_btn}".localize(p),[u._btn,u._secondaryBtn],p._stopOnClick),s=Shr.Html.formatTag("div",{},i+o),a=Shr.Html.formatTag("span",{className:"trUPPBgToast-text uploading-text"},"${time_remaining_text}".localize(p)),l=n+Shr.Html.formatTag("div",{},Shr.Html.formatTag("img",{})+Shr.Html.formatTag("div",{},r+a+s))+Shr.Html.formatTag("div",{className:u._progressBar},Shr.Html.formatTag("div",{}));return Shr.Html.formatTag("div",{className:e},l)},_updateUploadingView:function(e,t,o){var i,s,a=n.querySelector("."+u._uploading),l=a.querySelector("."+u._progressBar+" div"),c=a.querySelector("."+u._title),d=e._completed.length,h=e._total.length,m=e._showTimeRemaining&&e._timeRemaining?"${time_remaining_text}".localize(p)+" "+e._timeRemaining:"",g=a.querySelector(".uploading-text");o&&!o._toastThumbShown&&(o._toastThumbShown=!0,s=r.gridThumbnailSize,(i=a.querySelector("img")).src=o.getThumbnailUrl(s,s),o.isVideo&&o.isVideo()?i.classList.add(u._video):i.classList.remove(u._video)),c.innerHTML="${uploading_title}".localize(p)+" "+"${uploading_text}".localize(p).substitute([d===h?d:d+1,h]),g.innerHTML=m,l.style.width=parseInt(100*d/h)+"%"},_formatCompleteView:function(){var e=u._complete,t=p._formatText(!0,""),r=p._formatText(!1,""),n=o.complete?o.complete.buttons:void 0,i="";if(n)for(var s=0;s<n.length;s++)i+=p._formatBtn(n[s].text,[u._btn,u._primaryBtn],p._customCallback.bind({callback:n[s].callback}));var a=Shr.Html.formatTag("a",{className:"close",onclick:"trUPP.BgToast.hide(true, true);"},"")+t+r+Shr.Html.formatTag("div",{},i);return Shr.Html.formatTag("div",{className:e},a)},_formatCanceledView:function(){var e=u._canceled,t=p._formatText(!0,"${canceled_title}".localize(p))+p._formatText(!1,"${canceled_text}".localize(p));return Shr.Html.formatTag("div",{className:e},t)},_updateCompleteView:function(e,t,r){var i=n.querySelector("."+u._complete),a=i.querySelector("."+u._title),l=i.querySelector("."+u._text),c=e._total.length,d=s+"complete_title",h=s+"complete_text"+(1===c?"_singular":"_plural");a.innerHTML=("${"+d+"}").localize(p),l.innerHTML=("${"+h+"}").localize(p).substitute([c,c]),o.complete&&o.complete.callback&&p._customCallback.apply({albumId:o.complete.albumId,callback:o.complete.callback})},_formatErrorView:function(){var e=u._error,t=p._formatText(!0,"${error_title}".localize(p)),r=p._formatText(!1,""),n=p._formatBtn("${ignore_btn}".localize(p),[u._btn,u._secondaryBtn],p._ignoreOnClick),o=p._formatBtn("${view_btn}".localize(p),[u._btn,u._primaryBtn],p._viewOnClick.bind(this,!0)),i=t+r+Shr.Html.formatTag("div",{},n+o);return Shr.Html.formatTag("div",{className:e},i)},_updateErrorView:function(e,t,r){var i=n.querySelector("."+u._error).querySelector("."+u._text),s=e._failed.length,a=e._total.length;Shr.L.forEach(e._failed,function(e){401===e._status&&o&&o.onError&&o.onError()}),i.innerHTML=(1===a?"${error_text_singular}":"${error_text_plural}").localize(p).substitute([s,a])},_formatText:function(e,t){return Shr.Html.formatTag("span",{className:e?u._title:u._text},t)},_formatBtn:function(e,t,r){return Shr.Html.formatTag("a",{className:t,onclick:r},e)},_viewOnClick:function(e){r.toggleBgDetails(!0,e),p.hide()},_ignoreOnClick:function(){p.hide(!0)},_stopOnClick:function(){r.cancelUpload(null,"background upload:progress widget:stop")},_customCallback:function(){var e=i&&i._completed&&i._completed.map(function(e){return{id:e.data&&e.data.imageId||e.mPath.split(":")[1],mPath:e.mPath,source:{id:e.source.id,title:e.source.title},type:e.type}});this.albumId||p.hide(!0,!0),i=null,this.callback(e||[],this.albumId)},_resetView:function(){l=!0},_formatStyle:function(){return[".trUPPBgToast.shrDisabled {display: none;}",".trUPPBgToast {z-index: 100; box-sizing: content-box; display: block; width: 285px; max-height: 131px; position: fixed; bottom: 30px; left: 20px;border-radius: 2px; background-color: #ffffff; box-shadow: 0 0 15px rgba(88, 89, 91, .35);font-family: 'Avenir LT', Verdana, Arial, sans-serif !important; overflow:hidden;}",".trUPPBgToast.trUPPBgToast-error {height: 115px;}",".trUPPBgToast .trUPPBgToast-primaryBtn, .trUPPBgToast .trUPPBgToast-secondaryBtn {font-size: 12px;font-weight: 700; text-decoration: none; cursor: pointer;}",".trUPPBgToast .trUPPBgToast-primaryBtn:hover, .trUPPBgToast .trUPPBgToast-secondaryBtn:hover {text-decoration: none;}",".trUPPBgToast .trUPPBgToast-primaryBtn {color: #f05323;margin-left:20px;}",".trUPPBgToast .trUPPBgToast-secondaryBtn {color: #58595b;}",".trUPPBgToast .trUPPBgToast-title, .trUPPBgToast .trUPPBgToast-text {font-size: 13px;color: #58595b;display: block;}",".trUPPBgToast .trUPPBgToast-title {font-weight: 900; margin-bottom: 8px}",".trUPPBgToast .trUPPBgToast-text {font-weight: 500;}",".trUPPBgToast .trUPPBgToast-text.uploading-text {font-size: 11px;}",".trUPPBgToast .trUPPBgToast-uploading .trUPPBgToast-text {color: #58595b;}",".trUPPBgToast .trUPPBgToast-uploading .trUPPBgToast-title {font-size: 14px;font-weight: 700;}",".trUPPBgToast .trUPPBgToast-complete, .trUPPBgToast .trUPPBgToast-canceled, .trUPPBgToast .trUPPBgToast-error {padding: 20px}",".trUPPBgToast .trUPPBgToast-uploading, .trUPPBgToast .trUPPBgToast-complete, .trUPPBgToast .trUPPBgToast-canceled, .trUPPBgToast .trUPPBgToast-error {display: none; position: relative; width: 100%; height: 100%; box-sizing: border-box;}",".trUPPBgToast.trUPPBgToast-uploading .trUPPBgToast-uploading, .trUPPBgToast.trUPPBgToast-complete .trUPPBgToast-complete, .trUPPBgToast.trUPPBgToast-error .trUPPBgToast-error, .trUPPBgToast.trUPPBgToast-canceled .trUPPBgToast-canceled {display: block;}",".trUPPBgToast .trUPPBgToast-uploading div:nth-child(2) {position: relative; height: 90px; top: 0px;}",".trUPPBgToast .trUPPBgToast-uploading div:nth-child(2) > * {position: relative; display: inline-block;}",".trUPPBgToast .trUPPBgToast-uploading div:nth-child(2) img {height: 90px; width: 90px; object-fit: cover;}",".trUPPBgToast .trUPPBgToast-uploading div:nth-child(2) img.trUPPBgToast-video {padding: 20px; box-sizing: border-box; background-color: #58595b; object-fit: contain;}",".trUPPBgToast .trUPPBgToast-uploading div:nth-child(2) > div {position: absolute; width: calc(100% - 90px);box-sizing: border-box; padding-top:14px; padding-left:10px; padding-right:5px; padding-bottom: 9px;}",".trUPPBgToast .trUPPBgToast-uploading div:nth-child(2) > div span {display: block; margin-bottom: 4px;}",".trUPPBgToast .trUPPBgToast-uploading div:nth-child(2) > div > div {text-align: right; padding: 10px 5px 9px; width: 90%}",".trUPPBgToast .trUPPBgToast-uploading .trUPPBgToast-progressBar {position: relative; width:100%; background-color: #f9fafc; height: 6px;}",".trUPPBgToast .trUPPBgToast-uploading .trUPPBgToast-progressBar > div {display: block; height: 100%; background-color: #f05323; width: 0px;-webkit-transition: width 0.9s;transition: width 0.9s;}",".trUPPBgToast .trUPPBgToast-uploading div:nth-child(2) div span { display: flex }",".trUPPBgToast .trUPPBgToast-uploading div:nth-child(2) div span span { margin-left: 5px }",".trUPPBgToast .trUPPBgToast-uploading .warningMsg {display: flex;align-items: center; background-color: #f5f6f8}",".trUPPBgToast .trUPPBgToast-uploading .warningMsg .warnIco { background: #f05323; padding: 5px 5px 3px 5px; margin: 0;}",".trUPPBgToast .trUPPBgToast-uploading .warningMsg span { font-size: 11px; padding-left: 8px; color: #58595b}",".trUPPBgToast .trUPPBgToast-complete { padding-bottom: 10px; }",".trUPPBgToast .trUPPBgToast-complete > div {text-align: right; padding: 5px;}",".trUPPBgToast .trUPPBgToast-complete .close {position: relative; float: right; top: -10px; right: -16px; width: 16px; height: 16px; opacity: 0.3;}",".trUPPBgToast .trUPPBgToast-complete .close:hover { opacity: 1; }",".trUPPBgToast .trUPPBgToast-complete .close:before, .close:after { position: absolute; content: ' '; height: 16px; width: 2px; background-color: #333; }",".trUPPBgToast .trUPPBgToast-complete .close:before { transform: rotate(45deg); }",".trUPPBgToast .trUPPBgToast-complete .close:after { transform: rotate(-45deg); }",".trUPPBgToast .trUPPBgToast-error {padding-bottom: 15px}",".trUPPBgToast .trUPPBgToast-error > div {text-align: right; padding: 20px 0 0 0;}",""].join("\n")}}),e.exports=p},function(e,t,r){var n,o,i,s=window.trUPP=window.trUPP||{},a=Shr.Dialogs.UniversalPicker,l=!1,c=!1,d="trUPP",h="BgDetails",u=d+h+"-heimdallId",p={_bgDetails:d+h,_btn:d+h+"-btn",_primaryBtn:d+h+"-primaryBtn",_secondaryBtn:d+h+"-secondaryBtn",_close:d+h+"-close",_title:d+h+"-title",_text:d+h+"-text",_contextual:d+h+"-contextual",_uploading:d+h+"-uploading",_error:d+h+"-error",_heimdall:d+h+"-heimdall",_errorList:d+h+"-errorList",_errorThumbnail:d+h+"-errorThumbnail"};s.Heimdall=s.Heimdall||{},s.Heimdall.ProgressMoment=r(29),window.PMCHeimdall||(Shr.ScriptManager.batchLoad([["https:/","d25wcz1jocbade.cloudfront.net",Shr.AS.getEnv(),"pmc-heimdall","app.js"].join("/")],{cb:function(){}}),Shr.StyleManager.renderStyleSheet(["https:/","d25wcz1jocbade.cloudfront.net",Shr.AS.getEnv(),"pmc-heimdall","main.css"].join("/")));var m={L10N:{stop_btn:"CANCEL UPLOAD",ignore_btn:"OK",uploading_title:"Uploading ${0} of ${1}",uploading_text:"Keep browser window open until upload is complete",context_photos:"photos",context_videos:"videos",context_both:"photos and videos",error_title_singular:"1 Error",error_title_plural:"${0} Errors",error_text_singular:"We are unable to upload this item",error_text_plural:"We are unable to upload these items",generic_error_msg:"Shutterfly cannot upload this file at this time"},get visible(){return l},set visible(e){l=e}};Object.extend(m,{id:"trupp_bgdetails",init:function(e){(n=e).addBgWidget("trUPPBgDetails-Id",[n.classNames.bgDetails,n.classNames.disabled]).then(function(e){(o=e).innerHTML=this._getContent(),Shr.StyleManager.renderStyle(this),Shr.Dom.onContentReady(u,function(){this._heimdallInit(this)}.bind(this))}.bind(this))},renderStyle:function(e){e(this._formatStyle())},show:function(e,t,r){a.EventType.start!==t&&l&&(o.classList.remove(n.classNames.disabled),m._updateView.apply(this,arguments))},hide:function(){l=!1,o.classList.add(n.classNames.disabled),n.toggleBgToast(!0),m._resetView()}}),Object.extend(m,{_updateView:function(e,t,r){var n=m._determineView.apply(null,arguments);switch(m._updateParentClassWithView(n),n){case p._uploading:m._updateUploadingView.apply(this,arguments);break;case p._error:m._updateErrorView.apply(null,arguments);break;default:m.hide()}},_determineView:function(e,t,r){var n=p._uploading;return a.EventType.done===t&&e._done&&(n=e._aborted?p._canceled:e._succeeded.length===e._total.length?p._complete:p._error),n},_updateParentClassWithView:function(e){o.classList.contains(e)||([p._uploading,p._error].forEach(function(e){o.classList.remove(e)}),o.classList.add(e))},_getContent:function(){return Shr.Html.formatTag("div",{})+Shr.Html.formatTag("div",{},m._formatUploadingView()+m._formatErrorView())+m._formatFooterView()},_formatUploadingView:function(){var e=p._uploading,t=m._formatText(!0,"")+m._formatText(!1,"${uploading_text}".localize(m))+Shr.Html.formatTag("div",{id:u,className:p._heimdall});return Shr.Html.formatTag("div",{className:e},t)},_updateUploadingView:function(e,t,r,n){var l,c=e._completed,d=e._total,h=!1,u=o.querySelector("."+p._uploading+" ."+p._title),g=n&&n.toBeAdded,f=n&&n.toBeRemoved,_=e._showTimeRemaining&&e._timeRemaining&&e._timeRemaining.replace(" minutes"," min");u.innerText="${uploading_title}".localize(m).substitute([c.length===d.length?c.length:c.length+1,d.length]),u.insertAdjacentHTML("beforeend",e._showTimeRemaining&&e._timeRemaining?Shr.Html.formatTag("span",{className:"time-remaining"},"( "+_+" remaining )"):""),g&&0<g.length&&(i.clearObjects(),g=g.map(function(e){return e.isVideo&&e.isVideo(),new s.Heimdall.ProgressItem(e)}),f&&-1!==(l=g.indexOf(r))&&(h=!0,g.splice(l,1)),g=g.reverse(),i.addObjects(g)),f?!h&&i.removeObjects([r.id]):r&&r.source.dataSourceType==a.Source.DataSourceType.upload&&i.updateObjects([{id:r.id,progress:r.progress}])},_clickCallback:function(e,t,r){switch(t){case"cancel":e&&0<e.length&&e.forEach(function(e){i.removeObjects(e),n.cancelUpload(e)})}},_formatErrorView:function(){var e=p._error,t=m._formatText(!0,"")+m._formatText(!1,"${error_text_plural}".localize(m))+Shr.Html.formatTag("div",{className:p._errorList});return Shr.Html.formatTag("div",{className:e},t)},_heimdallInit:function(){var e=m._getProgressMoment(),t={container:o.querySelector("."+p._heimdall),environment:Shr.AS.getEnv(),layout:"VerticalCondensed",layout_options:{default_size:"small",group_objects:!1,object_id_attr:"id",object_sizes:{small:{min_height:93,max_height:93},mobile:{min_height:93,max_height:93}},view_object:e,overlay:s.Heimdall.ProgressMoment.getMomentOverlayObject},life_uid:Shr.U.id,scrubber:"Basic",scrubber_options:{show_handle:!0,show_markers:!1,show_needle:!1,show_tooltip:!1,vertical:!0},clickCallback:m._clickCallback.bind(this)};i=new window.PMCHeimdall([],t)},_getProgressMoment:function(){var e;return c||(e=window.PMCHeimdall.referenceObject("square_moment"),c=s.util.Inherit(s.Heimdall.ProgressMoment.getMomentObject,e),s.Heimdall.ProgressMoment.renderStyles()),c},_updateErrorView:function(e,t,r){var i=o.querySelector("."+p._error),s=i.querySelector("."+p._title),a=i.querySelector("."+p._errorList),l=e._failed;1===l.length?s.innerText="${error_title_singular}".localize(m):s.innerText="${error_title_plural}".localize(m).substitute([l.length]);var c=[];l.forEach(function(e){var t=e.getThumbnailUrl(n.gridThumbnailSize)||"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAAAAACH5BAkKAAEALAAAAAABAAEAAAICTAEAOw==",r=Shr.Html.formatTag("img",{src:t}),o=Shr.Html.formatTag("div",{className:p._errorThumbnail},r),i=Shr.Html.formatTag("div",{className:p._title},e.title||"file.jpg"),s=Shr.Html.formatTag("div",{className:p._text},"${generic_error_msg}".localize(m));c.push(Shr.Html.formatTag("div",{},o+i+s))}),a.innerHTML=c.join("")},_resetErrorView:function(){var e=o.querySelector("."+p._error),t=e.querySelector("."+p._title);e.querySelector("."+p._errorList).innerHTML="",t.innerHTML=""},_formatCloseBtn:function(){return Shr.Html.formatTag("div",{},Shr.Html.formatTag("div",{className:p._close,onclick:m._ignoreOnClick}))},_formatFooterView:function(){var e=m._formatBtn("${ignore_btn}".localize(m),[p._btn,p._primaryBtn],m._ignoreOnClick),t=m._formatBtn("${stop_btn}".localize(m),[p._btn,p._secondaryBtn],m._stopOnClick);return Shr.Html.formatTag("div",{},t+e)},_formatText:function(e,t){return Shr.Html.formatTag("span",{className:e?p._title:p._text},t)},_formatBtn:function(e,t,r){return Shr.Html.formatTag("a",{className:t,onclick:r},e)},_ignoreOnClick:function(){m.hide()},_stopOnClick:function(){n.cancelUpload(null,"background upload:progress modal:stop")},_resetView:function(){i.clearObjects(),m._resetErrorView()},_formatStyle:function(){return[".trUPPBgDetails.shrDisabled {display: none;}",".trUPPBgDetails {z-index: 100; display: block; width: 480px; height: 443px; position: fixed; bottom: 30px; left: 20px; border-radius: 6px; background-color: #ffffff; box-shadow: 0 0 15px rgba(88, 89, 91, .35); font-family: 'Avenir LT', Verdana, Arial, sans-serif !important;}","@media screen and (max-width: 420px){.trUPPBgDetails{width: 100%; left: 0;}}",".trUPPBgDetails * {box-sizing: border-box;}",".trUPPBgDetails .trUPPBgDetails-btn {display: inline-block; height: 36px; min-width: 32px; font-size: 12px; font-weight: bold; text-decoration: none; letter-spacing: normal; text-transform: uppercase; line-height: 36px; margin-left: 10px; padding: 0 24px; border: 1px solid transparent; border-radius: 4px; cursor: pointer;}",".trUPPBgDetails .trUPPBgDetails-btn:hover {text-decoration: none;}",".trUPPBgDetails .trUPPBgDetails-btn.trUPPBgDetails-primaryBtn {color: #fff; background-color: #f05323;}",".trUPPBgDetails .trUPPBgDetails-btn.trUPPBgDetails-primaryBtn:hover {background-color: #dc4405;}",".trUPPBgDetails .trUPPBgDetails-btn.trUPPBgDetails-primaryBtn:active {background-color: #bf3602;}",".trUPPBgDetails .trUPPBgDetails-btn.trUPPBgDetails-secondaryBtn {color: #58595b; background-color: rgba(255, 255, 255, 0.05); border-color: #c6c7c9;}",".trUPPBgDetails .trUPPBgDetails-btn.trUPPBgDetails-secondaryBtn:hover {color: #f05323; border-color: #f05323;}",".trUPPBgDetails .trUPPBgDetails-btn.trUPPBgDetails-secondaryBtn:active {color: #dc4405; border-color: #dc4405;}",".trUPPBgDetails .trUPPBgDetails-title, .trUPPBgDetails .trUPPBgDetails-text {color: #58595b;}",".trUPPBgDetails .trUPPBgDetails-title {font-size: 20px; font-weight: 500;}",".trUPPBgDetails .trUPPBgDetails-title .time-remaining {padding: 0 0 0 8px; margin: 0}",".trUPPBgDetails .trUPPBgDetails-title .time-remaining span {padding: 0; margin: 0; display: inherit}",".trUPPBgDetails .trUPPBgDetails-text {font-size: 14px; line-height: 1.57;}",".trUPPBgDetails .trUPPBgDetails-text .trUPPBgDetails-contextual {display: inline; padding: 0;}",".trUPPBgDetails .trUPPBgDetails-uploading .trUPPBgDetails-title > span {display: inline-block !important;font-size: 14px;color: #58595b;}",".trUPPBgDetails > div:nth-child(2) {position: relative; height: calc(100% - 35px - 66px); width: 100%; text-align:left;}",".trUPPBgDetails .trUPPBgDetails-uploading, .trUPPBgDetails .trUPPBgDetails-error {display: none; position: relative; width: 100%; height: 100%; text-align: left;}",".trUPPBgDetails.trUPPBgDetails-uploading .trUPPBgDetails-uploading, .trUPPBgDetails.trUPPBgDetails-error .trUPPBgDetails-error {display: flex;flex-direction: column;}",".trUPPBgDetails .trUPPBgDetails-uploading .trUPPBgDetails-heimdall, .trUPPBgDetails .trUPPBgDetails-error .trUPPBgDetails-errorList {flex-grow: 1;}",".trUPPBgDetails .trUPPBgDetails-error .trUPPBgDetails-errorList {padding-left: 20px;}",".trUPPBgDetails .trUPPBgDetails-uploading span, .trUPPBgDetails .trUPPBgDetails-error span {display: block;padding: 0 32px 0 40px; margin-bottom: 24px}",".trUPPBgDetails > div:nth-child(1) {position: relative; height: 35px; width: 100%;}",".trUPPBgDetails > div:nth-child(1) > .trUPPBgDetails-close {position: absolute; top: 13px; right: 13px; width: 22px; height: 22px; cursor: pointer;}",".trUPPBgDetails > div:nth-child(1) > .trUPPBgDetails-close:before, .trUPPBgDetails > div:nth-child(1) > .trUPPBgDetails-close:after {content: ''; display: block; position: absolute; top: 50%; left: 50%; width: 2px; height: 18px; background-color: rgb(146, 158, 151); transform: translate(-50%, -50%) rotate(-45deg)}",".trUPPBgDetails > div:nth-child(1) > .trUPPBgDetails-close:after {transform: translate(-50%, -50%) rotate(45deg);}",".trUPPBgDetails > div:nth-child(3) {position: relative; height: 66px; width: 100%;text-align: right; padding:15px; border-bottom-left-radius: 6px; border-bottom-right-radius: 6px; background-color: #f9fafc; box-shadow: inset 0 1px 0 0 #dcdee1;}",".trUPPBgDetails.trUPPBgDetails-error > div:nth-child(3) .trUPPBgDetails-secondaryBtn {display:none;}",".trUPPBgDetails .trUPPBgDetails-heimdall.pmc-heimdall .action-bar {display: none}",".trUPPBgDetails .trUPPBgDetails-heimdall.pmc-heimdall .scrubber-container {top: 0;}",".trUPPBgDetails .trUPPBgDetails-heimdall.pmc-heimdall .moment .overlay {display:block; border: none}",".trUPPBgDetails .trUPPBgDetails-heimdall.pmc-heimdall .moment:hover .overlay {border:0;}",".trUPPBgDetails .trUPPBgDetails-heimdall.pmc-heimdall .moment.video img {padding: 20px; box-sizing: border-box; background-color: #58595b; object-fit: contain;}",".trUPPBgDetails .trUPPBgDetails-heimdall.pmc-heimdall .moment.video .icon.play {display: none;}",".trUPPBgDetails .trUPPBgDetails-errorList {overflow: auto;}",".trUPPBgDetails .trUPPBgDetails-errorList > div { position: relative; width: 100%; height: 60px; margin: 10px 0; }",".trUPPBgDetails .trUPPBgDetails-errorList > div > .trUPPBgDetails-errorThumbnail { position: absolute; top: 0; left: 0; width: 60px; height: 60px; }",".trUPPBgDetails .trUPPBgDetails-errorList > div > .trUPPBgDetails-errorThumbnail:before { content: ''; display: block; position: absolute; top: 55%; left: 37%; width: 16px; height: 16px; transform: rotate(45deg) translate(-50%, -50%); background-color: rgb(188, 38, 26); border-radius: 2px; z-index: 1;}",".trUPPBgDetails .trUPPBgDetails-errorList > div > .trUPPBgDetails-errorThumbnail:after {content: '!'; display: block; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: #fff; z-index: 1;}",".trUPPBgDetails .trUPPBgDetails-errorList > div > .trUPPBgDetails-errorThumbnail > img {width: 60px; height: 60px; object-fit: cover; background-color: #dcdee1; opacity: 0.5;}",".trUPPBgDetails .trUPPBgDetails-errorList > div > .trUPPBgDetails-title {margin-left: 70px; font-size: 14px;}",".trUPPBgDetails .trUPPBgDetails-errorList > div > .trUPPBgDetails-text {margin-left: 70px; font-size: 11px;padding-right:20px;}",".trUPPBgDetails .trUPPBgDetails-errorList::-webkit-scrollbar {width: 12px; background: transparent;}",".trUPPBgDetails .trUPPBgDetails-errorList::-webkit-scrollbar-thumb {height: 26px; background-color: #c6c7c9; border-radius: 0px;}",".trUPPBgDetails .trUPPBgDetails-errorList::-webkit-scrollbar-thumb:hover {background-color: #c6c7c9; border-radius: 0px;}",""].join("\n")},_getBgDetailsContainer:function(){}}),e.exports=m},function(e,t){var r="trUPP-BgProgress",n=Object.extend(function(e,t){return n.__super__.constructor.apply(this,arguments),this.progress=e.progress,this},{prototype:{update:function(e){var t;return 0<this.model.progress&&this.progress!==this.model.progress&&(this.progress=this.model.progress,(t=this.el&&this.el.querySelector("."+r))&&(t.classList.add("progress"),t.querySelector("div").style.width=this.progress+"%")),{keepSort:!1,refresh:!1}},_getTemplate:function(){var e=Shr.Html.formatTag("div",{id:"trUPP-BgProgressMId-"+this.id,className:r},Shr.Html.formatTag("div",{})),t=Shr.Html.formatTag("div",{className:"overlay"}),n=Shr.Html.formatTag("img",{src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAAAAACH5BAkKAAEALAAAAAABAAEAAAICTAEAOw=="});return Shr.Html.formatTag("div",{className:"moment"},n+t+e)}}}),o=Object.extend(function(){this.el=null},{prototype:{render:function(){var e=document.createElement("div"),t=Shr.Html.formatTag("div",{action:"cancel"},'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="22" height="22" viewBox="0 0 22 22"><defs><path id="x" d="M17.204 15.781a1 1 0 0 1 0 1.42.999.999 0 0 1-1.418 0L11 12.413 6.214 17.2a.999.999 0 0 1-1.418 0 1 1 0 0 1 0-1.419l4.785-4.786L4.796 6.21a1.003 1.003 0 0 1 1.418-1.42L11 9.577l4.786-4.786a1.003 1.003 0 1 1 1.418 1.419l-4.785 4.786 4.785 4.786z"/></defs><use xlink:href="#x"/></svg>');return e.classList.add("trUPP-ProgressOverlay"),e.insertAdjacentHTML("afterbegin",t),this.el=e,this},remove:function(){return this}}}),i={get getMomentObject(){return n},get getMomentOverlayObject(){return o},renderStyles:function(){var e=document.createElement("style");e.innerHTML=[".trUPPBgDetails-heimdall .trUPP-BgProgress {position: absolute; width:100%; height:4px; background-color: rgba(249, 250, 252, 0.9); bottom:0;display: none;}",".trUPPBgDetails-heimdall .trUPP-BgProgress.progress {display: block;}",".trUPPBgDetails-heimdall .trUPP-BgProgress > div {display: block; height: 100%; background-color: #f05323; width: 0px;-webkit-transition: width .9s;transition: width 0.9s;}",".trUPPBgDetails-heimdall .trUPP-ProgressOverlay {height: 100%; background-color: transparent; cursor: default;}",".trUPPBgDetails-heimdall .trUPP-ProgressOverlay > div {position: absolute; top: 6px; right: 6px; width: 22px; height: 22px; cursor: pointer; fill: #ffffff; filter: drop-shadow( 0px 2px 4px rgba(0, 0, 0, .5));}",".trUPPBgDetails-heimdall .trUPP-ProgressOverlay > div:hover {fill: #f05323}",".trUPPBgDetails-heimdall .trUPP-ProgressOverlay > div svg {pointer-events: none;}",""].join("\n"),document.querySelector("head").appendChild(e)}};e.exports=i},function(e,t,r){var n,o,i=window.trUPP=window.trUPP||{},s=(Shr.Dialogs.UniversalPicker,r(31));i.Timing=(n="//${0}.shutterfly.com/application/log.gif".substitute(["prod"===Shr.AS.getEnv()?"www":"www."+Shr.AS.getEnv()]),o={logger:new s.default("PMC_UPP",{resource:n}),timers:{},eventTimestamps:{},eventFlags:{},startTimer:function(e){try{if(o.timers[e])return!1;o.timers[e]={startTime:Date.now()}}catch(e){}},endTimer:function(e,t){try{if(null==o.timers[e])return!1;var r=Date.now()-o.timers[e].startTime;o.recordTime(e,r,t),o.deleteTimer(e)}catch(e){}},recordTime:function(e,t,r){try{var n=o._getPlatformInfo();r=Object.extend(n,r),Shr.U.getIdToken().then(function(n){Shr&&Shr.U&&(r.UID=Shr.U.id,r.email=Shr.U.email,r.token=n,r.useNewAuth=Shr.U.useNewAuth),o.logger.metric(e,t,r)}).catch(function(e){window.trUPP.Timing.recordSessionEvents({event:"getIdToken",err:e,session_method:"timing recordTime"})})}catch(n){}},deleteTimer:function(e){try{if(null==o.timers[e])return!1;delete o.timers[e]}catch(e){}},recordInfo:function(e,t){try{var r=o._getPlatformInfo();t=Object.extend(r,t),Shr.U.getIdToken().then(function(r){Shr&&Shr.U&&(t.UID=Shr.U.id,t.email=Shr.U.email,t.token=r,t.useNewAuth=Shr.U.useNewAuth),o.logger.info(e,t)}).catch(function(e){window.trUPP.Timing.recordSessionEvents({event:"getIdToken",err:e,session_method:"timing recordInfo"})})}catch(r){}},recordSessionEvents:function(e){e.err&&(e.err=window.JSON.stringify(e.err)),o.recordInfo("session",e)},loadOrNavigateEvent:function(e,t){var r=window.performance.now(),n=r-o.eventTimestamps.clickFolder,i=e+"Click";o.eventFlags.loadFolder&&(n=r-o.eventTimestamps.showTimestamp,i=e+"Load"),o.recordTime(i,n,t)},setFolderTracking:function(){o.setEventFlag("firstPhoto",!1),o.setEventTimestamp("clickFolder")},logAlbumLoad:function(e){var t="social",r=e.items?e.items.length:0;e.owner?t="sfly":e.siteId&&(t="share"),o.loadOrNavigateEvent("album",{album_size:r,album_id:e.id,album_type:t,album_name:e.title}),o.setEventFlag("loadFolder",!1),o.setEventTimestamp("clickFolder",null),o.setEventFlag("firstPhoto",!0)},logAlbumsLoad:function(e){var t="social",r=0,n=e.parent?e.parent.id:null,i=e.parent?e.parent.title:null;e.owner?t="sfly":e.siteId&&(t="share"),r=e&&e.parent&&e.parent.albums?e.parent.albums.length:e&&e.parent&&e.parent.UserFolder.length?e.parent.UserFolder.length:0,r+=e&&e.parent&&e.parent.folders?e.parent.folders.length:0,o.loadOrNavigateEvent("folder",{folder_size:r,folder_id:n,folder_type:t,folder_name:i}),o.setEventFlag("loadFolder",!1),o.setEventTimestamp("clickFolder",null),o.setEventFlag("firstPhoto",!0)},setEventFlag:function(e,t){o.eventFlags[e]=t},getEventFlag:function(e){return o.eventFlags[e]||!1},setEventTimestamp:function(e,t){o.eventTimestamps[e]=t||window.performance.now()},getEventTimestamp:function(e){return o.eventTimestamps[e]||null},_getPlatformInfo:function(){return window.trUPP.B?{user_os:window.trUPP.B.os,user_browser:window.trUPP.B.browser}:{}}})},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();t.default=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(e){return e},n=arguments[3];return new h(e,t,r,n||u())};var i=c(r(33)),s=c(r(41)),a=c(r(45)),l=c(r(48));function c(e){return e&&e.__esModule?e:{default:e}}var d=(0,a.default)(),h=function(){function e(t,r,n,o){!function(t,r){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this.xhr=i.default,this.name=t,this.additionalLogData=r,this._finalCleanup=n,this.performanceApi=o,this.additionalLogData.logSession=d,this.resource=this.additionalLogData.resource||"/application/log.gif"}return o(e,[{key:"debug",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return this._log("DEBUG",!0,e,t,Date.now())}},{key:"info",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return this._log("INFO",!0,e,t,Date.now())}},{key:"warn",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return this._log("WARN",!0,e,t,Date.now())}},{key:"error",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return this._log("ERROR",!1,e,t,Date.now())}},{key:"metric",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return this._log("METRIC",!0,e,n({},r,{duration:t}),Date.now())}},{key:"asyncMetric",value:function(e,t){return new l.default(this,e,t,this.performanceApi)}},{key:"_log",value:function(e,t,r,o,i){var a=n({name:this.name,level:e,message:r,success:t,msg:r,timestamp:i},this.additionalLogData,o);return a=this._cleanupData(a),a=this._finalCleanup(a),this._request(s.default.stringify(a))}},{key:"_cleanupData",value:function(e){var t={};for(var r in e)if(e.hasOwnProperty(r)){var n=e[r],o="function"==typeof n?n():n;null!=o&&(t[r]=(""+o).substring(0,1e3))}return t}},{key:"_request",value:function(e){var t=this.resource+"?"+e;return null==this.xhr.ajax?this.xhr({method:"GET",uri:t},function(e){if(e)return console.log("Unable to log message: "+t)}):this.xhr.ajax({method:"GET",url:t}).fail(function(){console.log("Unable to log message: "+t)})}}]),e}(),u=function(){try{if("[object process]"===Object.prototype.toString.call(void 0!==e?e:0))return;return window.performance}catch(e){return}}}).call(this,r(32))},function(e,t){var r,n,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(r===setTimeout)return setTimeout(e,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:i}catch(e){r=i}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(e){n=s}}();var l,c=[],d=!1,h=-1;function u(){d&&l&&(d=!1,l.length?c=l.concat(c):h=-1,c.length&&p())}function p(){if(!d){var e=a(u);d=!0;for(var t=c.length;t;){for(l=c,c=[];++h<t;)l&&l[h].run();h=-1,t=c.length}l=null,d=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function g(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new m(e,t)),1!==c.length||d||a(p)},m.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=g,o.addListener=g,o.once=g,o.off=g,o.removeListener=g,o.removeAllListeners=g,o.emit=g,o.prependListener=g,o.prependOnceListener=g,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t,r){"use strict";var n=r(34),o=r(35),i=r(36),s=r(40);function a(e,t,r){var n=e;return o(t)?(r=t,"string"==typeof e&&(n={uri:e})):n=s(t,{uri:e}),n.callback=r,n}function l(e,t,r){return c(t=a(e,t,r))}function c(e){if(void 0===e.callback)throw new Error("callback argument missing");var t=!1,r=function(r,n,o){t||(t=!0,e.callback(r,n,o))};function n(e){return clearTimeout(d),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,r(e,_)}function o(){if(!a){var t;clearTimeout(d),t=e.useXDR&&void 0===c.status?200:1223===c.status?204:c.status;var n=_,o=null;return 0!==t?(n={body:function(){var e=void 0;if(e=c.response?c.response:c.responseText||function(e){try{if("document"===e.responseType)return e.responseXML;var t=e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;if(""===e.responseType&&!t)return e.responseXML}catch(e){}return null}(c),f)try{e=JSON.parse(e)}catch(e){}return e}(),statusCode:t,method:u,headers:{},url:h,rawRequest:c},c.getAllResponseHeaders&&(n.headers=i(c.getAllResponseHeaders()))):o=new Error("Internal XMLHttpRequest Error"),r(o,n,n.body)}}var s,a,c=e.xhr||null;c||(c=e.cors||e.useXDR?new l.XDomainRequest:new l.XMLHttpRequest);var d,h=c.url=e.uri||e.url,u=c.method=e.method||"GET",p=e.body||e.data,m=c.headers=e.headers||{},g=!!e.sync,f=!1,_={body:void 0,headers:{},statusCode:0,method:u,url:h,rawRequest:c};if("json"in e&&!1!==e.json&&(f=!0,m.accept||m.Accept||(m.Accept="application/json"),"GET"!==u&&"HEAD"!==u&&(m["content-type"]||m["Content-Type"]||(m["Content-Type"]="application/json"),p=JSON.stringify(!0===e.json?p:e.json))),c.onreadystatechange=function(){4===c.readyState&&setTimeout(o,0)},c.onload=o,c.onerror=n,c.onprogress=function(){},c.onabort=function(){a=!0},c.ontimeout=n,c.open(u,h,!g,e.username,e.password),g||(c.withCredentials=!!e.withCredentials),!g&&0<e.timeout&&(d=setTimeout(function(){if(!a){a=!0,c.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",n(e)}},e.timeout)),c.setRequestHeader)for(s in m)m.hasOwnProperty(s)&&c.setRequestHeader(s,m[s]);else if(e.headers&&!function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(c.responseType=e.responseType),"beforeSend"in e&&"function"==typeof e.beforeSend&&e.beforeSend(c),c.send(p||null),c}e.exports=l,(e.exports.default=l).XMLHttpRequest=n.XMLHttpRequest||function(){},l.XDomainRequest="withCredentials"in new l.XMLHttpRequest?l.XMLHttpRequest:n.XDomainRequest,function(e,t){for(var r=0;r<e.length;r++)t(e[r])}(["get","put","post","patch","head","delete"],function(e){l["delete"===e?"del":e]=function(t,r,n){return(r=a(t,r,n)).method=e.toUpperCase(),c(r)}})},function(e,t,r){(function(t){var r;r="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},e.exports=r}).call(this,r(3))},function(e,t){e.exports=function(e){var t=r.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)};var r=Object.prototype.toString},function(e,t,r){var n=r(37),o=r(38);e.exports=function(e){if(!e)return{};var t={};return o(n(e).split("\n"),function(e){var r,o=e.indexOf(":"),i=n(e.slice(0,o)).toLowerCase(),s=n(e.slice(o+1));void 0===t[i]?t[i]=s:(r=t[i],"[object Array]"===Object.prototype.toString.call(r)?t[i].push(s):t[i]=[t[i],s])}),t}},function(e,t){(t=e.exports=function(e){return e.replace(/^\s*|\s*$/g,"")}).left=function(e){return e.replace(/^\s*/,"")},t.right=function(e){return e.replace(/\s*$/,"")}},function(e,t,r){"use strict";var n=r(39),o=Object.prototype.toString,i=Object.prototype.hasOwnProperty;e.exports=function(e,t,r){if(!n(t))throw new TypeError("iterator must be a function");var s;3<=arguments.length&&(s=r),"[object Array]"===o.call(e)?function(e,t,r){for(var n=0,o=e.length;n<o;n++)i.call(e,n)&&(null==r?t(e[n],n,e):t.call(r,e[n],n,e))}(e,t,s):"string"==typeof e?function(e,t,r){for(var n=0,o=e.length;n<o;n++)null==r?t(e.charAt(n),n,e):t.call(r,e.charAt(n),n,e)}(e,t,s):function(e,t,r){for(var n in e)i.call(e,n)&&(null==r?t(e[n],n,e):t.call(r,e[n],n,e))}(e,t,s)}},function(e,t,r){"use strict";var n=Function.prototype.toString,o=/^\s*class\b/,i=function(e){try{var t=n.call(e);return o.test(t)}catch(e){return!1}},s=Object.prototype.toString,a="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;e.exports=function(e){if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;if("function"==typeof e&&!e.prototype)return!0;if(a)return function(e){try{return!i(e)&&(n.call(e),!0)}catch(e){return!1}}(e);if(i(e))return!1;var t=s.call(e);return"[object Function]"===t||"[object GeneratorFunction]"===t}},function(e,t){e.exports=function(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var o in n)r.call(n,o)&&(e[o]=n[o])}return e};var r=Object.prototype.hasOwnProperty},function(e,t,r){e.exports=r(42)},function(e,t,r){var n=r(43),o=r(44);e.exports={stringify:n,parse:o}},function(e,t,r){var n=r(8),o={delimiter:"&",arrayPrefixGenerators:{brackets:function(e,t){return e+"[]"},indices:function(e,t){return e+"["+t+"]"},repeat:function(e,t){return e}},strictNullHandling:!1,stringify:function(e,t,r,i,s){if("function"==typeof s)e=s(t,e);else if(n.isBuffer(e))e=e.toString();else if(e instanceof Date)e=e.toISOString();else if(null===e){if(i)return n.encode(t);e=""}if("string"==typeof e||"number"==typeof e||"boolean"==typeof e)return[n.encode(t)+"="+n.encode(e)];var a=[];if(void 0===e)return a;for(var l=Array.isArray(s)?s:Object.keys(e),c=0,d=l.length;c<d;++c){var h=l[c];a=Array.isArray(e)?a.concat(o.stringify(e[h],r(t,h),r,i,s)):a.concat(o.stringify(e[h],t+"["+h+"]",r,i,s))}return a}};e.exports=function(e,t){var r,n,i=void 0===(t=t||{}).delimiter?o.delimiter:t.delimiter,s="boolean"==typeof t.strictNullHandling?t.strictNullHandling:o.strictNullHandling;"function"==typeof t.filter?e=(n=t.filter)("",e):Array.isArray(t.filter)&&(r=n=t.filter);var a,l=[];if("object"!=typeof e||null===e)return"";a=t.arrayFormat in o.arrayPrefixGenerators?t.arrayFormat:"indices"in t?t.indices?"indices":"repeat":"indices";var c=o.arrayPrefixGenerators[a];r||(r=Object.keys(e));for(var d=0,h=r.length;d<h;++d){var u=r[d];l=l.concat(o.stringify(e[u],u,c,s,n))}return l.join(i)}},function(e,t,r){var n=r(8),o={delimiter:"&",depth:5,arrayLimit:20,parameterLimit:1e3,strictNullHandling:!1,parseValues:function(e,t){for(var r={},o=e.split(t.delimiter,t.parameterLimit===1/0?void 0:t.parameterLimit),i=0,s=o.length;i<s;++i){var a=o[i],l=-1===a.indexOf("]=")?a.indexOf("="):a.indexOf("]=")+1;if(-1===l)r[n.decode(a)]="",t.strictNullHandling&&(r[n.decode(a)]=null);else{var c=n.decode(a.slice(0,l)),d=n.decode(a.slice(l+1));Object.prototype.hasOwnProperty.call(r,c)?r[c]=[].concat(r[c]).concat(d):r[c]=d}}return r},parseObject:function(e,t,r){if(!e.length)return t;var n,i=e.shift();if("[]"===i)n=(n=[]).concat(o.parseObject(e,t,r));else{n=Object.create(null);var s="["===i[0]&&"]"===i[i.length-1]?i.slice(1,i.length-1):i,a=parseInt(s,10),l=""+a;!isNaN(a)&&i!==s&&l===s&&0<=a&&r.parseArrays&&a<=r.arrayLimit?(n=[])[a]=o.parseObject(e,t,r):n[s]=o.parseObject(e,t,r)}return n},parseKeys:function(e,t,r){if(e){r.allowDots&&(e=e.replace(/\.([^\.\[]+)/g,"[$1]"));var n=/(\[[^\[\]]*\])/g,i=/^([^\[\]]*)/.exec(e),s=[];i[1]&&s.push(i[1]);for(var a=0;null!==(i=n.exec(e))&&a<r.depth;)++a,s.push(i[1]);return i&&s.push("["+e.slice(i.index)+"]"),o.parseObject(s,t,r)}}};e.exports=function(e,t){if(""===e||null==e)return Object.create(null);(t=t||{}).delimiter="string"==typeof t.delimiter||n.isRegExp(t.delimiter)?t.delimiter:o.delimiter,t.depth="number"==typeof t.depth?t.depth:o.depth,t.arrayLimit="number"==typeof t.arrayLimit?t.arrayLimit:o.arrayLimit,t.parseArrays=!1!==t.parseArrays,t.allowDots=!1!==t.allowDots,t.parameterLimit="number"==typeof t.parameterLimit?t.parameterLimit:o.parameterLimit,t.strictNullHandling="boolean"==typeof t.strictNullHandling?t.strictNullHandling:o.strictNullHandling;for(var r="string"==typeof e?o.parseValues(e,t):e,i=Object.create(null),s=Object.keys(r),a=0,l=s.length;a<l;++a){var c=s[a],d=o.parseKeys(c,r[c],t);i=n.merge(i,d)}return n.compact(i)}},function(e,t,r){var n=r(46),o=r(47);e.exports=function(e,t,r){var i=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var s=(e=e||{}).random||(e.rng||n)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var a=0;a<16;++a)t[i+a]=s[a];return t||o(s)}},function(e,t){var r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(r){var n=new Uint8Array(16);e.exports=function(){return r(n),n}}else{var o=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),o[t]=e>>>((3&t)<<3)&255;return o}}},function(e,t){for(var r=[],n=0;n<256;++n)r[n]=(n+256).toString(16).substr(1);e.exports=function(e,t){var n=t||0,o=r;return[o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]]].join("")}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=0,s=function(){function e(t,r,n,o){!function(t,r){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this.logger=t,this.message=r,this.url=n,this.perf=void 0,this._isCompletePerformance(o)&&(this.perf=o),this.startTime=Date.now();var s=i++;this.startMark="SFJS-"+this.message+"-"+s+"-start",this.endMark="SFJS-"+this.message+"-"+s+"-end",this.resolved=!1,this.perf&&this.perf.mark(this.startMark)}return o(e,[{key:"log",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(this.resolved)return!1;var t=this._duration();return e.clientStartTime=this.startTime,this.url&&(e.url=this.url),this.logger.metric(this.message,t,e),this._clearMarks(),!0}},{key:"success",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};e.success=!0,this.log(e),this.resolved=!0}},{key:"failure",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};e.success=!1,this.log(e),this.resolved=!0}},{key:"_duration",value:function(){var e=Date.now()-this.startTime;if(!this.perf)return e;if(this.perf.mark(this.endMark),this.perf.measure(this.message,this.startMark,this.endMark),this.perf.getEntriesByName(this.message).count<=0)return e;var t=this.perf.getEntriesByName(this.message)[0];return parseInt(t.duration,10)}},{key:"_clearMarks",value:function(){this.perf&&void 0!==this.perf.clearMarks&&void 0!==this.perf.clearMeasures&&(this.perf.clearMarks(this.startMark),this.perf.clearMarks(this.endMark),this.perf.clearMeasures(this.message))}},{key:"_isCompletePerformance",value:function(e){return!(!e||"object"!=(void 0===e?"undefined":n(e)))&&"function"==typeof e.mark&&"function"==typeof e.measure&&"function"==typeof e.getEntriesByName}}]),e}();t.default=s},function(e,t){var r=Shr.Dialogs.UniversalPicker;r.Optimizely=function(){var e,t,n,o;e="https://api2."+Shr.AS.getEnv()+".shutterfly.com/v1/optimizely-wrapper",o=function(t,n,o){var i={url:e+n,method:t,contentType:"application/json",headers:{"SFLY-Apikey":"NdLEU0A09QmqiHh2qCGcr6tiRjRYJjo6"}};return o&&(i.args=window.JSON.stringify(o)),new window.trUPP.Promise(function(e,t){r._SflyAjax.sendAjaxRequest(i,function(r){200===r.status?e(JSON.parse(r.responseText)):t(r.responseText)})})},this.setUser=function(e,r){return n=r,t=e},this.getUserFeatures=function(){return t?o("POST","/getEnabledFeatures/"+t,n||{}):(console.log("[OPTIMIZELY] User is not set"),!1)}}},function(e,t,r){var n=Shr.Dialogs.UniversalPicker,o=r(0)("shrUP","trUPP");n.Folder=Object.extend(function(e,t){Object.extend(this,{type:n.Folder.Type.folder},t),this.parent=e},{prototype:{getUppExt:function(){return this.uppExt||(this.uppExt=n._getUppExt()),this.uppExt},getContents:function(){return!0},formatContent:function(){return n._formatFolders(this)+n._formatAlbums(this)+(Shr.Array.getLength(this.items)?Shr.Html.formatTag("li",{className:o._itemGrid},n._formatItems(this)):"")},formatTitle:function(e){return Shr.Html.escape(e?this.activeTitle||this.title||"":this.title||"")},onclick:function(e,t){var r=[];window.trUPP.Timing.setFolderTracking(),new n.View.Event("folderClick",n._stack[n._stack.length-1],this),Shr.L.tryToCall(n._folder.onblur&&n._folder.onblur.bind(n._folder)),n._stack.push({folder:n._folder=this}),this.isAlbum||this.noLog||t||(Shr.L.forEach((n._getPath()||"").split("/"),function(e){/[^0-9]/.test(e)&&r.push(e)}),n.superfly&&Shr.U.migrated&&r[0].match(/sfly|thisLife/)&&2==r.length&&window.trUPP.Log.logOmnitureClick(r.pop())),n.refresh(this)},onblur:function(){n.Grid&&n.Grid._animationFrame&&window.cancelAnimationFrame(n.Grid._animationFrame)},getSortChoices:function(){var e={};return Shr.L.forEach({"title asc":"${sortChoices.titleAtoZ}","title desc":"${sortChoices.titleZtoA}"},function(t,r){e[r]=new String(t.localize(n))}),e},getThumbnailUrl:function(e,t){return""},selectItems:function(e,t){return e=e.length?e:[e],e=Shr.Array.filter(e,function(e){return!this.items[e].disabled&&(t?this.items[e].selected:!this.items[e].selected)}.bind(this)),n._onSelect(!t,e)},deselectItems:function(e){return this.selectItems(e,!0)},formatCover:function(){var e,t,r,i=this,s=i.isAlbum&&i.thumbnail?{"background-image":"url(${0})".substitute([i.getThumbnailUrl(44,44)])}:{},a=i.isAlbum?Shr.Html.formatTag("img",{src:Shr.ImgSrc.blank2,style:s}):"",l=i.formatTitle?i.formatTitle():n.Folder.prototype.formatTitle.call(i),c=[i.isAlbum?o._album:o._folder],d=window.trUPP&&window.trUPP.util||Shr,h=1.5<window.devicePixelRatio?d.IURL("universalpicker/smooth_spinner@2x.gif"):d.IURL("universalpicker/smooth_spinner.gif"),u={className:[o._stack]},p=i.count,m=i._childType;if(i.className&&c.push(i.className),i.parent==n._root)c.push(o._tile);else{e=n._wideLayoutAlbumCover._physical.w,t=n._wideLayoutAlbumCover._physical.h;var g=i.getThumbnailUrl&&i.getThumbnailUrl(e,t)||n.Folder.prototype.getThumbnailUrl.call(i,e,t);""!=g?((r=new Image).onload=function(){window.trUPP.Timing.getEventFlag("firstPhoto")||window.trUPP.Timing.logAlbumsLoad(i)},r.src=g,s={"background-image":"url(${0}), url(${1})".substitute([g,h])}):(s={"background-color":i.isAlbum?"#666":"#fff","background-image":"none"},i.isAlbum||Object.extend(s,{"border-top":"0px"})),Shr.B.isIE&&Shr.B.ieVersion<9&&(s["background-image"]=s["background-image"].split(", url(").shift()),a=Shr.Html.formatTag("img",{src:Shr.ImgSrc.blank2,style:s}),i.noStack||(void 0===p&&!i.noCount&&(i.isAlbum&&i.items||i.folders||i.albums)&&(p=i.isAlbum&&i.items?(i.items||[]).length:(i.folders||[]).length+(i.albums||[]).length+(i.items||[]).length),l=Shr.Html.formatTag("div",{"data-itemCount":p||"0"},/^\s+$/.test(l)?"&nbsp;":l),i.isAlbum||void 0!==m||(m=i.folders&&i.folders.length?n.Folder.Type.folder:n.Folder.Type.album),i.isAlbum?void 0!==p?Object.extend(u,{"data-itemCount":p||"0"}):u.className.push(o._stackWithoutCount):void 0!==p&&Object.extend(u,{"data-childCount":Number(p).toCount((m==n.Folder.Type.folder?"${folder}":"${album}").localize(n))}),a=Shr.Html.formatTag("div",u,a))}return Shr.Html.formatTag("li",{className:c,onclick:Shr.EB.on("click",n._onFolderClick,i),tabindex:"0"},a+l)}},Type:{root:1,importing:2,selected:3,source:4,folder:5,album:6,done:7,ok:8,synthetic:9}})},function(e,t){var r=Shr.Dialogs.UniversalPicker;r.Source=Object.extend(function(e,t){this.id=e,r.Folder.call(this,r._root,Object.extend({type:r.Folder.Type.source},t))},{prototype:Object.extend({},r.Folder.prototype,{init:function(e){},onClose:function(e){},renderStyle:function(e){},getContents:function(e,t){var n,o,i,s,a,l=!0,c=function(e){return e.toString().replace(/\s/g,"").split(",")};return this.uses&&(this.requiresPopup&&this.requiresPopup.url&&Shr.EB.isOnClick&&(a=this.requiresPopup.url.localize(r),delete this.requiresPopup.url,Object.extend(this.requiresPopup,r._popupPosition(this.requiresPopup.width,this.requiresPopup.height)),Shr.B.isIE&&Object.extend(this.requiresPopup,{width:this.requiresPopup.width+50,height:this.requiresPopup.height+50}),r._popupMustBeOpenedFromIFrame||(s=window.openPopup(a,this.requiresPopup))),l=!1,n=(o=c(this.uses)).length&&o[0],i=r._utilities._toScriptUrlList(o),Shr.ScriptManager.batchLoad(i,{async:!0,cb:function(n){var o=function(){this.init(r.context,s,a),Shr.StyleManager.renderStyle(this),e&&t?t():r.refresh(this)},i=("string"==typeof n?Object.get(n):n)||{};Object.extend(i,{L10N:Object.merge((r._sources[this.id]||{}).L10N||{},i.L10N),className:r._sources[this.id].className,requiresSignin:r._sources[this.id].requiresSignin,hide:r._sources[this.id].hide,id:r._sources[this.id].id,title:r._sources[this.id].title,isSocialSite:r._sources[this.id].isSocialSite}),r._sources[this.id]=i,Object.merge(this,i),Object.merge(this,r.context.sources&&r.context.sources[this.id]),i&&i.uses?Shr.ScriptManager.batchLoad(r._utilities._toScriptUrlList(c(i.uses)),{async:!0,cb:function(){delete i.uses,o.apply(this)}.bind(this)}):i&&o.call(this)}.bind(this,n)})),l},getSortChoices:function(){return{}},onclick:function(e,t){return r._setSrcClassName(!1),r._currentSrc=this.id,r._setSrcClassName(!0),t||window.trUPP.Log.logOmnitureClick(this.id),!this.requiresSignin||Shr.U.id?(1<r._stack.length&&r._stack.splice(1,r._stack.length-1),r.Folder.prototype.onclick.apply(this,arguments)):r.trUPPDlgEnabled()?(delete r._signin._next,delete r._signup._next,void(r._root2._isSignin?(r._signin._next=this,r._signin.onclick()):(r._signup._next=this,r._signup.onclick()))):(r._signin._next=this,r._signin._snappedSrc=r._snappedSrc,r._signin.onclick())},requiresSignin:!0}),DataSourceType:{upload:"upload",sfly:"sfly",facebook:"FACEBOOK",instagram:"INSTAGRAM",flickr:"FLICKR",google:"GOOGLEPHOTOS",sites:"SHARESITES"},alert:function(e,t){var n=Object.extend({},r._popupContext(),{body:e,title:t,buttons:[{title:"${ok}".localize(r)}]});window.trUPP.Dialog.show("Message",n)},canSelect:function(e,t){var n=r.context.singleSelect,o=!1;return n||(n=parseInt(r.context.maxCount)||Number.MAX_VALUE,n-=r.context.currentCount||0,n-=r._selection.length,n=(e||0)<=(n-=r.context.skipSelections?0:r._prevCount)),n&&r.context.singleSelect&&1<e&&(o=!(n=!1)),n||t||window.setTimeout(function(){r.Source._selectFewerItems(void 0,void 0,o)},100),n},getSelection:function(){return r._import._results()},_selectFewerItems:function(e,t,n){e=void 0===e?parseInt(r.context.maxCount)||Number.MAX_VALUE:e,r.Source.alert("${tooMany.text}".localize(r,[new Number(e).toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")]),"${tooMany.title}".localize(r))}})},function(e,t){var r=Shr.Dialogs.UniversalPicker;r.Album=Object.extend(function(e,t){r.Folder.call(this,e,Object.extend({isAlbum:!0,type:r.Folder.Type.album},t))},{prototype:Object.extend({},r.Folder.prototype)})},function(e,t,r){var n=Shr.Dialogs.UniversalPicker,o=r(0)("shrUP","trUPP");n.Item=Object.extend(function(e){Object.extend(this,e)},{prototype:{isVideo:function(){return(this.location&&this.location.type||"").match(/^video\/.*/)},getThumbnailUrl:function(e,t,r){return n.Item.returnThumbnailUrl(Shr.ImgSrc.blank,r)},formatContent:function(e){var t=[];return this.separator&&(t.push(n.Grid._className._separator),this.className&&t.push(this.className)),this.disabled&&t.push(n.Grid._className._disabled),this.selected&&t.push(o._shrSelected),Shr.Html.formatTag("li",{tabIndex:"0",className:t},Shr.Html.formatTag("div")+(e||""))}},returnThumbnailUrl:function(e,t){return t&&e&&e.length&&window.setTimeout(function(){Shr.L.tryToCall(t,e.toString())},0),e&&e.toString()},getResolution:function(){return n._utilities._getResolution.apply(n,arguments)},type:{sfly:0,anonymous:1,stockphoto:2}}),Object.defineProperty(n.Item.prototype,"path",{get:function(){return this._path}})},function(e,t,r){var n,o=Shr.Dialogs.UniversalPicker,i=o._Html5ItemV2=Object.extend(function(e,t){o.Item.call(this,{id:e.name+"-"+window.trUPP.util.generateGuid(),title:e.name,date:e.lastModifiedDate&&e.lastModifiedDate.getTime(),size:e.size,selected:!0,autoSelect:!0,parent:t}),this.location=e,this._smallThumbnailWidth=i._smallThumbnailWidth,this._smallThumbnailHeight=i._smallThumbnailHeight,this._bigThumbnailWidth=this._bigThumbnailHeight=0},{prototype:{getThumbnailUrl:function(e,t,r){var n,s,a,l=this._selItem||(this._selItem=Shr.Array.findByProperty(o._selection,"_item",this)),c=l&&l.source,d=c&&"exifThumbnailWeight"in c?c.exifThumbnailWeight:"exifThumbnailWeight"in o.context?o.context.exifThumbnailWeight:i._smallThumbnailWeight;return t=t||e,l&&l.isVideo()?n="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjJweCIgaGVpZ2h0PSIxNnB4IiB2aWV3Qm94PSIwIDAgMjIgMTYiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDUwLjIgKDU1MDQ3KSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5pY29ucy9hY3Rpb24vdmlkZW9fc2VsZWN0ZWQ8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZGVmcz4KICAgICAgICA8cGF0aCBkPSJNMjIsNiBMMjIsMTYgQzIxLjk5NzAyNTEsMTYuMzI5OTU4MSAyMS44MzE0NzA2LDE2LjYzNzIwODQgMjEuNTU3NTM0NSwxNi44MjExNjU1IEMyMS4yODM1OTg0LDE3LjAwNTEyMjYgMjAuOTM2NTQ4NiwxNy4wNDIxMDI5IDIwLjYzLDE2LjkyIEwxNywxNC40NyBMMTcsMTggQzE3LDE4LjU1MjI4NDcgMTYuNTUyMjg0NywxOSAxNiwxOSBMMSwxOSBDMC40NDc3MTUyNSwxOSA2Ljc2MzUzNzUxZS0xNywxOC41NTIyODQ3IDAsMTggTDAsNCBDLTYuNzYzNTM3NTFlLTE3LDMuNDQ3NzE1MjUgMC40NDc3MTUyNSwzIDEsMyBMMTYsMyBDMTYuNTUyMjg0NywzIDE3LDMuNDQ3NzE1MjUgMTcsNCBMMTcsNy41MiBMMjAuNjMsNS4wNyBDMjAuOTM4MTg3OSw0Ljk0NzI1OTY0IDIxLjI4NzE4NCw0Ljk4NTM0IDIxLjU2MTY0OTYsNS4xNzE2NTYwMiBDMjEuODM2MTE1MSw1LjM1Nzk3MjA0IDIyLjAwMDMyMTMsNS42NjgyNjk4NiAyMiw2IFoiIGlkPSJwYXRoLTEiPjwvcGF0aD4KICAgIDwvZGVmcz4KICAgIDxnIGlkPSJBbGwtUGhvdG9zIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0iTVdFQi9VUFAvc2VsZWN0L3NlbGVjdC1iaW4iIHRyYW5zZm9ybT0idHJhbnNsYXRlKC00My4wMDAwMDAsIC0xMDAuMDAwMDAwKSI+CiAgICAgICAgICAgIDxnIGlkPSJpY29ucy9hY3Rpb24vdmlkZW9fc2VsZWN0ZWQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDQzLjAwMDAwMCwgOTcuMDAwMDAwKSI+CiAgICAgICAgICAgICAgICA8bWFzayBpZD0ibWFzay0yIiBmaWxsPSJ3aGl0ZSI+CiAgICAgICAgICAgICAgICAgICAgPHVzZSB4bGluazpocmVmPSIjcGF0aC0xIj48L3VzZT4KICAgICAgICAgICAgICAgIDwvbWFzaz4KICAgICAgICAgICAgICAgIDx1c2UgaWQ9InZpZGVvX3NlbGVjdGVkIiBmaWxsPSIjNTk1OTVCIiBmaWxsLXJ1bGU9Im5vbnplcm8iIHhsaW5rOmhyZWY9IiNwYXRoLTEiPjwvdXNlPgogICAgICAgICAgICAgICAgPGcgaWQ9Ii1jb2xvci0vLTE5Li13aGl0ZV9GRkZGRkYiIG1hc2s9InVybCgjbWFzay0yKSIgZmlsbD0iI0ZGRkZGRiIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICAgICAgICAgICAgICA8cmVjdCBpZD0id2hpdGVfRkZGRkZGIiB4PSIwIiB5PSIwIiB3aWR0aD0iMjIiIGhlaWdodD0iMjIiPjwvcmVjdD4KICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+":(l&&l.state==o.Sink.state.done||this.state==o.Sink.state.done?((a=(s=l||this).height?s.width/s.height:1)<1?(t=Math.round(t/a),e=Math.round(t*a)):(e=Math.round(e*a),t=Math.round(e/a)),s.type==o.Item.type.anonymous?(n=o._procservTemplate.substitute([Shr.AS.img,s.id,e,t,i._degreesForOrientation[s.orientation||1]/90]),this._data&&this._data.orientation&&(n+="&r=",n+=i._degreesForOrientation[this._data.orientation]/90)):s.sync?n="${0}/${1}".substitute([s.data.imageURL,o._utilities._getResolution(s,e,t)]):s.mPath.match(/^Image:/)?n=o._mediaRenderTemplate.substitute([Shr.AS.uniim||Shr.AS.img,Shr.U.id,s.mPath.split(":").pop(),o._utilities._getResolution(s,e,t),Shr.AS.uniim?"https:":""]):s.data.mspData&&s.data.mspImagePath?(n=o._sources.sfly._getThumbnailUrl("//${0}/procsimple?imageID=${1}&DATA=${2}&rotation=${3}&rendersize=fit3600x3600".substitute([Shr.AS.gim,s.data.mspImagePath,s.data.mspData,i._degreesForOrientation[this.orientation||1]]),e,t),this._data&&this._data.orientation&&(n+="&rotation=",n+=i._degreesForOrientation[this._data.orientation])):n="${0}/${1}".substitute([s.data.imageURL,o._utilities._getResolution(s,e,t)]),o.Item.returnThumbnailUrl(n,r)):this._smallThumbnail&&(this._smallThumbnail._width*d>=e||this._smallThumbnail._height*d>=t)?n=o.Item.returnThumbnailUrl(this._smallThumbnail,r):o.context.useOldCode&&!this._smallThumbnail&&(this._smallThumbnailWidth*d>=e||this._smallThumbnailHeight*d>=t)?n=this._getExifThumbnail(e,t,r,d):this._bigThumbnail&&(this._bigThumbnail._width>=e||this._bigThumbnail._height>=t)?n=o.Item.returnThumbnailUrl(this._bigThumbnail,r):o.context.useOldCode?n=this._getThumbnail(e,t,r):(i._queueThumbnailRequest({_item:this,_setThumbnail:r,_smallThumbnailWeight:d,w:e,h:t}),this._bigThumbnail&&this._bigThumbnail.length?n=this._bigThumbnail.toString():this._smallThumbnail&&this._smallThumbnail.length&&(n=this._smallThumbnail.toString())),n&&n.toString())},_getThumbnailUrl:function(e){this._imgData?!this._smallThumbnail&&this._imgData.thumbnail&&this._imgData.thumbnail.src?this._loadExifThumbnail(e):i._noObjectURLs()?this._loadFullImageUsingDataURL(e):this._loadFullImage(e):this._readImageData(e)},_readImageData:function(e){var t=new window.FileReader;Object.extend(t,{onloadend:function(t){var r,n,o;t.error?i._stats._exif._errors++:(i._stats._exif.n++,i._stats._exif.time+=Date.now()-t._readStart,r=new window.Uint8Array(t.result),this._imgData=i._getImgData(r),this.width=this._imgData.width,this.height=this._imgData.height,this.orientation=this._imgData.orientation,i._swapWidthAndHeightIfRotated(this,this.orientation),this._imgData.dateTaken&&(this.date=this._imgData.dateTaken),this._selItem&&(this._selItem.width=this.width,this._selItem.height=this.height,this._selItem.orientation=this.orientation,this._selItem.rotation=this.rotation,this._imgData.dateTaken&&(this._selItem.date=this._imgData.dateTaken)),(n=this._imgData.thumbnail)&&(i._noObjectURLs()?function(){for(var e="",t=0;t<n.length;t++)e+=String.fromCharCode(r[n.offset+t]);n.src="data:image/jpeg;base64,"+window.btoa(e)}():(o=new window.Blob([i._slice(t.result,n.offset,n.offset+n.length)],{type:"image/jpeg"}),n.src=i._createObjectURL(o)))),i._queueThumbnailRequest(e,!0)}.bind(this,t),_readStart:Date.now()}).readAsArrayBuffer(i._slice(this.location,0,131072))},_loadExifThumbnail:function(e){var t,r=e._item._selItem;r&&r.source,this._loadImage(e,this._imgData.thumbnail.src,function(r){var n=!1;return t=Object.extend(new String(i._rotateAndCropImage(this._imgData,this._imgData.thumbnail,r)),{_width:this._imgData.thumbnail.width,_height:this._imgData.thumbnail.height}),i._noSmallThumbnailCache()?(n=!0,o.Item.returnThumbnailUrl(t,e._setThumbnail),Shr.B.isIE):this._smallThumbnail=t,this.width||this.height||(this.aspectRatio=r.height?r.width/r.height:0,this.aspectRatio&&(this.width=this.aspectRatio<1?1600*this.aspectRatio:1600,this.height=this.aspectRatio<1?1600:1600/this.aspectRatio),this._selItem&&(this._selItem.width=this.width,this._selItem.height=this.height,this._selItem.aspectRatio=this.aspectRatio)),n}.bind(this),function(e){e.src.startsWith("blob:")&&((window.URL||window.webkitURL).revokeObjectURL(e.src),delete this._imgData.thumbnail.src)}.bind(this))},_loadFullImage:function(e){this._loadImage(e,this._getImageAsObjectURL(),function(t){return this._getBigThumbnail(e,t)}.bind(this),function(e){return!0}.bind(this))},_getBigThumbnail:function(e,t){var r,n=i._swapWidthAndHeightIfRotated({width:t.width,height:t.height},this._imgData.orientation),s=function(e){return Math.max(e.w,n.width),Math.max(e.h,n.height),Math.min(e.w/n.width,e.h/n.height)},a=s(e),l=!1;return this.width=n.width,this.height=n.height,this._smallThumbnail||i._noSmallThumbnailCache()||(this._smallThumbnail=i._rotateAndScaleImage(t,s({w:this._smallThumbnailWidth,h:this._smallThumbnailHeight}),this._imgData.orientation)),Shr.L.forEach(1!=a&&i._queue,function(e){if(e._item==this)return 1!=(a=Math.max(a,s(e)))}),r=i._rotateAndScaleImage(t,a,this._imgData.orientation),i._noBigThumbnailCache()||e.w==Number.MAX_VALUE&&e.h==Number.MAX_VALUE?(l=!0,o.Item.returnThumbnailUrl(r,e._setThumbnail)):this._bigThumbnail=r,l},_loadFullImageUsingDataURL:function(e){var t=new window.FileReader;Object.extend(t,{onloadend:function(t,r){var n;t.error||(n=r.target.result,this._loadImage(e,n,function(t){this._getBigThumbnail(e,t)}.bind(this),function(e){return!0}.bind(this)))}.bind(this,t),_startTime:Date.now()}).readAsDataURL(this.location)},_loadImage:function(e,t,r,n){var o=new Image,s=function(e,t,r){e.onload=e.onerror=void 0,e.src=Shr.ImgSrc.blank2,r||i._queueThumbnailRequest(t,!0)};Object.extend(o,{onload:function(t){var n=r(t);s(t,e,n)}.bind(this,o),onerror:function(){var t=n(o);s(o,e,t)}.bind(this,o),_startTime:Date.now()}).src=t},_getThumbnail:function(e,t,r){var n,s=this._bigTthumbnail;return s||(this._imgData?(s=new String(this._getImageAsObjectURL()),i._degreesForOrientation[this._imgData.orientation]&&(n=new Image,Object.extend(n,{onload:function(e){i._stats._full.n++,i._stats._full.time+=Date.now()-n._loadStart,s=this._bigThumbnail=Object.extend(new String(i._rotateAndCropImage(this._imgData,this,e)),{_width:this.width=e.width,_height:this.height=e.height}),o.Item.returnThumbnailUrl(s,r),e.cleanup()}.bind(this,n),onerror:function(e){e.cleanup()}.bind(this,n),cleanup:function(){this.onload=this.onerror=void 0,this.src=Shr.ImgSrc.blank2},_loadStart:Date.now()}).src=s.toString(),s="")):(this._getExifThumbnail(e,t,function(n){this._getThumbnail(e,t,r)}.bind(this)),s="")),s.toString()},_getImageAsObjectURL:function(){var e=this._objectURL;return e||(e=Shr.B.isIE?new String(i._createObjectURL(i._slice(this.location,0,this.location.size),!0)):this._objectURL=new String(i._createObjectURL(this.location))),e},_getExifThumbnail:function(e,t,r,n){var o,s,a,l,c=function(){o=this.getThumbnailUrl(e,t,r)}.bind(this),d=function(){this._smallThumbnailWidth=this._smallThumbnailHeight=0,c()}.bind(this);return n=n||i._smallThumbnailWeight,this._smallThumbnail&&this._smallThumbnail.toString()?o=this._smallThumbnail:this._imgData?this._imgData.thumbnail?!(s=this._imgData.thumbnail).width||!s.height||e<=s.width*n||t<=s.height*n?(l=new Image,Object.extend(l,{onload:function(e){s.width&&s.height||(s.width=e.width,s.height=e.height,i._swapWidthAndHeightIfRotated(s,this._imgData.orientation),this._smallThumbnailWidth=s.width,this._smallThumbnailHeight=s.height),s.src=i._rotateAndCropImage(this._imgData,s,e),e.onload=void 0,e.onerror=void 0,this._smallThumbnail=Object.extend(new String(s.src),{_width:s.width,_height:s.height}),this.width||this.height||(this.aspectRatio=e.height?e.width/e.height:0,this.aspectRatio&&(this.width=1<this.aspectRatio?1600:1600/this.aspectRatio,this.height=1<this.aspectRatio?1600/this.aspectRatio:1600),this._selItem&&(this._selItem.width=this.width,this._selItem.height=this.height,this._selItem.aspectRatio=this.aspectRatio)),c()}.bind(this,l),onerror:function(e){d()}.bind(this,l),_loadStart:Date.now()}).src=s.src):(o.width&&(this._smallThumbnailWidth=o.width),o.width&&(this._smallThumbnailHeight=o.height),c()):d():(a=new window.FileReader,Object.extend(a,{onloadend:function(e){var t;e.error?(i._stats._exif._errors++,d()):(i._stats._exif.n++,i._stats._exif.time+=Date.now()-e._readStart,t=new window.Uint8Array(e.result),this._imgData=i._getImgData(t),this.width=this._imgData.width,this.height=this._imgData.height,this.orientation=this._imgData.orientation,i._swapWidthAndHeightIfRotated(this,this.orientation),this._selItem&&(this._selItem.width=this.width,this._selItem.height=this.height,this._selItem.orientation=this.orientation,this._selItem.rotation=this.rotation),(o=this._imgData.thumbnail)&&(o.src=i._createObjectURL(new window.Blob([i._slice(e.result,o.offset,o.offset+o.length)],{type:"image/jpeg"}))),c())}.bind(this,a),_readStart:Date.now()}).readAsArrayBuffer(i._slice(this.location,0,131072))),o}},_init:function(){this._stats={_n:0,_bytes:0,_msec:0,_errors:0,_full:{_n:0,_msec:0,_errors:0},_exif:{_n:0,_msec:0,_errors:0}},this._queue=[],window.ArrayBuffer&&window.ArrayBuffer.prototype&&!window.ArrayBuffer.prototype.slice&&(window.ArrayBuffer.prototype.slice=function(e,t){if(void 0===e&&(e=0),void 0===t&&(t=this.byteLength),e=Math.floor(e),t=Math.floor(t),e<0&&(e+=this.byteLength),t<0&&(t+=this.byteLength),e=Math.min(Math.max(0,e),this.byteLength),(t=Math.min(Math.max(0,t),this.byteLength))-e<=0)return new window.ArrayBuffer(0);var r=new window.ArrayBuffer(t-e),n=new window.Uint8Array(r),o=new window.Uint8Array(this,e,t-e);return n.set(o),r})},_useExif:!0,_smallThumbnailWidth:160,_smallThumbnailHeight:120,_smallThumbnailWeight:2,_degreesForOrientation:[0,0,0,180,0,270,90,90,270],_defaultQueueDelay:15,_queueDelay:function(){return o.context&&o.context.queueDelay||this._defaultQueueDelay},_defaultNoObjectURLs:!1,_noObjectURLs:function(){return o.context&&"noObjectURLs"in o.context?o.context.noObjectURLs:this._defaultNoObjectURLs},_defaultNoSmallThumbnailCache:!1,_noSmallThumbnailCache:function(){return o.context&&"noSmallThumbnailCache"in o.context?o.context.noSmallThumbnailCache:this._defaultNoSmallThumbnailCache},_defaultNoBigThumbnailCache:!1,_noBigThumbnailCache:function(){return o.context&&"noBigThumbnailCache"in o.context?o.context.noBigThumbnailCache:this._defaultNoBigThumbnailCache},_swapWidthAndHeightIfRotated:function(e,t){return i._degreesForOrientation[t]/90%2&&(e.width=e.height+(e.height=e.width,0)),e},_handle:void 0,_queueThumbnailRequest:function(e,t){t?this._queue.unshift(e):this._queue.push(e),this._handle||(this._handle=window.setTimeout(this._processThumbnailRequest.bind(this),this._queueDelay()))},_processThumbnailRequest:function(){var e,t=this._queue.shift(),r=t&&t._item,n=t&&t.w,i=t&&t.h;try{t&&(r._smallThumbnail&&(r._smallThumbnail._width*t._smallThumbnailWeight>=n||r._smallThumbnail._height*t._smallThumbnailWeight>i)?e=r._smallThumbnail:r._bigThumbnail&&(r._bigThumbnail._width>=n||r._bigThumbnail._height>=i)?e=r._bigThumbnail:r._getThumbnailUrl(t),o.Item.returnThumbnailUrl(e,t._setThumbnail))}finally{this._queue.length?this._handle=window.setTimeout(this._processThumbnailRequest.bind(this),this._queueDelay()):delete this._handle}},resetQueue:function(){var e,t,r=[];for(e=0;e<i._queue.length;e++)(t=i._queue[e])._setThumbnail&&t._setThumbnail.forUPP||r.push(t);i._queue.length!=r.length&&(i._queue=r)},testJPEG:function(e,t){var r=e.location,n=new window.FileReader,o=(r.slice||r.mozSlice||r.webkitSlice||function(){}).call(r,0,3);try{Object.extend(n,{onloadend:function(r){var n,o=!1;r.currentTarget.error||3!=r.currentTarget.result.byteLength||255==(n=new window.Uint8Array(r.currentTarget.result))[0]&&216==n[1]&&255==n[2]&&(o=!0),t(e,o)}}).readAsArrayBuffer(o)}catch(r){t(e,!1)}},_rotateAndScaleImage:function(e,t,r){var n,o,s,a,l=i._degreesForOrientation[r],c=e.src,d={width:e.width,height:e.height};if(l||1!=t){n=(d=document.createElement("canvas")).getContext("2d"),o=d.width=Math.round(e.width*t),s=d.height=Math.round(e.height*t),i._swapWidthAndHeightIfRotated(d,r),n.translate(d.width/2,d.height/2),n.rotate(l*Math.PI/180);try{n.drawImage(e,-Math.round(o/2),-Math.round(s/2),o,s)}catch(e){}c=i._noObjectURLs()?d.toDataURL():(a=i._dataURIToBlob(d.toDataURL()),i._createObjectURL(a))}return Object.extend(new String(c),{_width:d.width,_height:d.height,_blob:Shr.B.isIE&&!i._noObjectURLs()?a:void 0})},_rotateAndCropImage:function(e,t,r){var n,o,s,a,l,c,d,h,u,p,m,g=Math.min(e.width,e.height),f=Math.max(e.width,e.height)/g,_=Math.min(r.width,r.height),S=Math.max(r.width,r.height),b=S/_,y=Math.round(S/f),P=Math.abs(4/3-b)<.01?_-y:0,v=i._degreesForOrientation[e.orientation],w=r.src;if(P||v){o=(n=document.createElement("canvas")).getContext("2d"),s=r.width<r.height,n.height=u=m=s?(a=P/2,l=0,c=-(_-P)/2,d=-S/2,n.width=h=p=P?y:r.width,r.height):(a=0,l=P/2,c=-S/2,d=-(_-P)/2,n.width=h=p=r.width,P?y:r.height),i._swapWidthAndHeightIfRotated(n,e.orientation),o.translate(n.width/2,n.height/2),o.rotate(v*Math.PI/180),t.width=n.width,t.height=n.height;try{o.drawImage(r,a,l,h,u,c,d,p,m),w=i._noObjectURLs()?n.toDataURL():i._createObjectURL(i._dataURIToBlob(n.toDataURL()))}catch(e){}}return w},_dataURIToBlob:function(e){for(var t=window.atob(e.split(",")[1]),r=new window.ArrayBuffer(t.length),n=new window.Uint8Array(r),o=e.split(",")[0].split(":")[1].split(";")[0],s=0;s<t.length;s++)n[s]=t.charCodeAt(s);return new window.Blob([i._canCreateBlobFromView?n:r],{type:o})},_canCreateBlobFromView:function(){try{return 100===new window.Blob([new window.Uint8Array(100)]).size}catch(e){return!1}}(),_ObjectURL:function(e){var t=new String(i._URL.createObjectURL(e));return Shr.B.isIE&&(t._blob=e),t.revoke=function(){i._URL.revokeObjectURL(this.toString()),this._revoked=!0,delete this._blob},t.toString=function(){return this._revoked?"blob:revoked!":String.prototype.toString.apply(this)},t},_URL:("URL"in window?n=window.URL:"webkitURL"in window?window.webkitURL:n={createObjectURL:function(){}},n),_createObjectURL:function(e,t){var r;return r="URL"in window?window.URL:"webkitURL"in window?window.webkitURL:{createObjectURL:function(){}},!t&&Shr.B.isIE&&window.setInterval(function(){},36e5),r.createObjectURL(e)},_slice:function(e,t,r){return(e.slice||e.mozSlice||e.webkitSlice||function(){}).call(e,t,r)},_depth:"",_lastBytesArrayLength:0,_getImgData:function(e,t){var r,n,o={},s={TEM:65281,RES_start:65282,RES_end:65471,SOF0:65472,SOF2:65474,DST_start:65488,DST_end:65495,SOI:65496,EOI:65497,APP1:65505},a={ImageWidth:256,ImageLength:257,Orientation:274,DateTime:306,JPEGOffset:513,JPEGLength:514},l=function(e){var t,r,n=function(){for(;e._pos<e.byteLength&&255!=e[e._pos];)e._pos++;for(;e._pos<e.byteLength&&255==e[e._pos];)e._pos++;e._pos<e.byteLength?(t=65280+e[e._pos],e._pos++):t=s.EOI},o={};if(e._pos=0,e._bigEndian=!0,n(),t==s.SOI)for(;n(),r=0,t==s.EOI||e._pos>e.byteLength||s.RES_start<=t&&t<=s.RES_end||t==s.SOI||s.RST_start<=t&&t<=s.RST_end||t==s.TEM||e._pos+2>e.byteLength||((o[t]=o[t]||[]).push(e._pos),r=i._u16(e)),e._pos+=r&&r-2,e._pos<e.byteLength&&t!=s.EOI;);return o}(e),c=[];return o.orientation=1,n=i._lastBytesArrayLength==e.length&&t?[]:l[s.APP1]||[],i._lastBytesArrayLength=e.length,n.forEach(function(t){var r,n=i._u16(e,t),s=t+n<e.byteLength?function(e){var t,r,n,o,s={};if(e._pos=0,"Exif"==i._stringFromBytes(e,4)){e._pos+=2,o=e._pos,e._bigEndian="MM"==i._stringFromBytes(e,2),i._u16(e),i._u32(e);do{for(t=i._u16(e);t;t--)r={_id:i._u16(e),_format:i._u16(e),_count:i._u32(e)},i._getTIFFValue(e,r),s[r._id]=r;n=i._u32(e),e._pos=o+n}while(n&&e._pos<e.byteLength)}return s}(new window.Uint8Array(e.buffer,t+2,n-2)):{};c.push(s),s[a.ImageWidth]&&(o.width=s[a.ImageWidth]._value),s[a.ImageHeight]&&(o.height=s[a.ImageHeight]._value),s[a.Orientation]&&(o.orientation=s[a.Orientation]._value),s[a.DateTime]&&(r=[(r=(r=i._stringFromBytes(e,20,t+8+s[a.DateTime]._value)).replace(/:/g," ").split(" "))[1],r[2],r[0],r.slice(3).join(":")].join(" "),o.dateTaken=new Date(r).getTime()),!o.thumbnail&&s[a.JPEGOffset]&&s[a.JPEGLength]&&(o.thumbnail={offset:t+8+s[a.JPEGOffset]._value,length:s[a.JPEGLength]._value},Object.extend(o.thumbnail,i._getImgData(new window.Uint8Array(e.buffer,o.thumbnail.offset,o.thumbnail.length),!0)))}),(r=l[s.SOF0]||l[s.SOF2])&&(o.width=i._u16(e,r[0]+5),o.height=i._u16(e,r[0]+3)),o},_stringFromBytes:function(e,t,r){var n=[],o=void 0!==r?r:e._pos;for(void 0===r&&(e._pos+=t);n.push(e[o++]),0<--t;);return String.fromCharCode.apply(String,n)},_u8:function(e,t){return void 0===t&&(t=e._pos++),e[t]},_u16:function(e,t){var r=i._u8(e,t),n=i._u8(e,void 0===t?void 0:t+1);return e._bigEndian&&(r=n+(n=r,0)),(n<<8)+r},_u32:function(e,t){var r,n=void 0===t;return r=(e[(t=n?e._pos:t)+3]<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t],e._bigEndian&&(r=(r=r<<8&4278255360|r>>>8&16711935)<<16|r>>>16),n&&(e._pos+=4),r},_getTIFFValue:function(e,t){var r;switch(t._format){case 3:case 8:r=2*t._count;break;case 4:case 9:case 11:r=4*t._count;break;case 5:case 10:case 12:r=8*t._count;break;case 1:case 2:case 6:case 7:default:r=t._count}4<r?(t._isOffset=!0,t._value=i._u32(e,e._pos)):1==t._count&&1==t._format?t._value=i._u8(e,e._pos):1==t._count&&3==t._format?t._value=i._u16(e,e._pos):1==t._count&&4==t._format&&(t._value=i._u32(e,e._pos)),e._pos+=4},_hexChars:"0123456789ABCDEF",_hex16:function(e){return i._hexChars[(e>>>12)%16]+i._hexChars[(e>>>8)%16]+i._hexChars[(e>>>4)%16]+i._hexChars[e%16]},_hex32:function(e){return""+i._hexChars[(e>>>28)%16]+i._hexChars[(e>>>24)%16]+i._hexChars[(e>>>20)%16]+i._hexChars[(e>>>16)%16]+i._hexChars[(e>>>12)%16]+i._hexChars[(e>>>8)%16]+i._hexChars[(e>>>4)%16]+i._hexChars[e%16]},_hex:function(e,t,r){for(var n,o=i._hex16(t)+": ",s="",a=t%16;a;a--)o+="  ",s+=" ",a%4==0&&(o+=" ");for(a=t%16;r;t++,r--)n=e[t],o+=i._hexChars[n>>>4]+i._hexChars[n%16],s+=n<32||127<n?".":String.fromCharCode(n),++a%16==0?(Console.write(o+" "+s),o=i._hex16(t+1)+": ",s=""):a%4==0&&(o+=" ");for(a=16-a%16;a;a--)a%4==0&&(o+=" "),o+="  ";Console.write(o+" "+s)},_log:function(e){},debug:!1,_end:null});i._init()},function(e,t){var r,n,o,i,s,a,l;i=window.trUPP=window.trUPP||{},s=Shr.Dialogs.UniversalPicker,a="https://d25wcz1jocbade.cloudfront.net/"+Shr.AS.getEnv()+"/pmc-momentdb/client_app.js?q=",l=i.Promise,i.momentDB=new s.Folder(void 0,{id:"momentDB",_pendingCallerList:[],getAllMoments:function(e){return this._getContents(!0,null,null,null,e,null)},getRecentMoments:function(e){return this._recentMoments=!0,this._getContents(!0,null,null,{},e,null)},getMonthMoments:function(e,t,r,n){return this._getContents(!1,e,t,r,n,null)},getMomentsData:function(e,t,r){return this._getContents(!1,null,null,t,r,e)},clearMoments:function(){o=null},_clearPendingCallerList:function(){window.setTimeout(function(){for(;0<this._pendingCallerList.length;)this._pendingCallerList.pop()()}.bind(this),0)},_getContents:function(e,t,r,i,s,a){return new l(function(l,c){o?this._onMomentsLoaded(e,t,r,i,s,null,a,l,c):n?this._pendingCallerList.push(l):(n=!0,this._loadScript().then(function(n){this._onMomentsLoaded(e,t,r,i,s,n,a,l,c)}.bind(this),function(){n=!1,this._clearPendingCallerList(),c()}.bind(this)))}.bind(this))},_onMomentsLoaded:function(e,t,r,n,i,s,a,l,c){o||this._sendMoments(!0,s,i,null,null,c),e?this._sendMoments(!0,o,i,null,l,c):t&&r?this._getMonthMoments(t,r).then(function(e){this._sendMoments(!1,e,i,n,l,c)}.bind(this),c):a&&0<a.length&&this._getMomentsData(a).then(function(e){this._sendMoments(!1,e,i,n,l,c)}.bind(this),c)},_sendMoments:function(e,t,r,i,s,a){try{var l;l=e?(o||(o=this._parseItems(t,r),n=!1,this._clearPendingCallerList()),o):this._parseItems(t,r,i),s&&s(l)}catch(e){window&&window.trUPP&&window.trUPP.Timing&&window.trUPP.Timing.recordInfo("upp_exception",{ex_message:e.message,ex_stack:e.stack}),a()}},_loadScript:function(){return new l(function(e,t){if(r||window.MomentDbClient)window.setTimeout(function(){this._loadMoments(e,t)}.bind(this),0);else{var n=Date.now();Shr.ScriptManager.batchLoad([a+Math.floor(Date.now()/1e3)],{async:!0,cb:function(o){r=o.success&&0<o.success.length,s.Log.metric("momentDB_scriptLoad",Date.now()-n,r?200:400),i.Timing.recordTime("momentDB_scriptLoad",Date.now()-n),r?window.setTimeout(function(){this._loadMoments(e,t)}.bind(this),50):t()}.bind(this)})}}.bind(this))},_client:null,_getClient:function(e){try{if(!this._client){var t={env:Shr.AS.getEnv()};window.momentLoaderClient?window.momentLoaderClient.setRequestParams(t):(window.momentLoaderClientSingleton=new window.MomentDbClient(t),window.momentLoaderClient=window.momentLoaderClientSingleton.getInstance()),this._client=window.momentLoaderClient}}catch(t){window&&window.trUPP&&window.trUPP.Timing&&window.trUPP.Timing.recordInfo("upp_exception",{ex_message:t.message,ex_stack:t.stack}),this._client=null,e()}return this._client},_parseItems:function(e,t,r){var n,o,i=[];return e&&e.moments&&e.moments.some(function(e){try{e.hidden||(n={id:e.uid,title:e.caption_text,upload_date:1e3*e.upload_date,date:1e3*e.moment_date,rating:e.rating,width:e.width,height:e.height,data:e,created_at_timestamp:1e3*e.moment_date,owner:e.owner||Shr.U.id,location:["nxgen://",e.owner||Shr.U.id,e.uid||e.id].join("/"),effects_modified_date:1e3*e.effects_modified_date,enhanced:e.enhanced,hidden:e.hidden,item_type:e.item_type,moment_type:e.moment_type},o=Object.extend(new t(n),r),i.push(o))}catch(e){window&&window.trUPP&&window.trUPP.Timing&&window.trUPP.Timing.recordInfo("upp_exception",{ex_message:e.message,ex_stack:e.stack})}}),i},_loadMoments:function(e,t){try{this._getClient(t)&&this._getClient().loadMoments({oauthToken:Shr.U.oauthToken,lifeUid:Shr.U.lifeUid},e,t)}catch(e){window&&window.trUPP&&window.trUPP.Timing&&window.trUPP.Timing.recordInfo("upp_exception",{ex_message:e.message,ex_stack:e.stack}),t()}},_getMonthMoments:function(e,t){return new l(function(r,n){try{this._getClient(n)&&this._getClient().filterMoments({attribute:"moment_date",isRange:1,values:[e,t]},r,n)}catch(r){n()}}.bind(this))},_getMomentsData:function(e){return new l(function(t,r){try{this._getClient(r)&&this._getClient().filterMoments({attribute:"uid",isRange:0,values:e},t,r)}catch(t){window&&window.trUPP&&window.trUPP.Timing&&window.trUPP.Timing.recordInfo("upp_exception",{ex_message:t.message,ex_stack:t.stack}),r()}}.bind(this))}})},function(e,t){var r=window.trUPP=window.trUPP||{};r.Heimdall=r.Heimdall||{},Object.extend(r.Heimdall,{Item:Object.extend(function(e){this._uppItem=e},{prototype:{get date(){return this._uppItem.date},get id(){return this._uppItem.id},get width(){return this._uppItem.width},get height(){return this._uppItem.height},get selected(){return this._uppItem.selected},get disabled(){return this._uppItem.disabled},get created_at_timestamp(){return this._uppItem.created_at_timestamp},get effects_modified_date(){return this._uppItem.created_at_timestamp},get upload_date(){return this._uppItem.upload_date},get rating(){return this._uppItem.rating},get src(){return function(e,t){var r=this._uppItem.getThumbnailUrl.bind(this._uppItem);try{return r(e,t)}catch(e){return r(157)}}.bind(this)}}})}),Object.extend(r.Heimdall,{ProgressItem:Object.extend(function(e){r.Heimdall.Item.call(this,e)},{prototype:Object.create(r.Heimdall.Item.prototype)})}),Object.defineProperty(r.Heimdall.ProgressItem.prototype,"selected",{get:function(){return!1}}),Object.defineProperty(r.Heimdall.ProgressItem.prototype,"progress",{get:function(){return parseInt(100*this._uppItem.progress)}}),Object.defineProperty(r.Heimdall.ProgressItem.prototype,"moment_type",{get:function(){return this._uppItem.isVideo&&this._uppItem.isVideo()?"video":"image"}})},function(e,t,r){var n=Shr.Dialogs.UniversalPicker,o=r(0)("shrUP","trUPP");n._root2=new n.Folder(void 0,{id:"_root2",type:n.Folder.Type.root,title:"${root2.title}",contentClassName:o._root2,getContents:function(){var e=Shr.Array.findByProperty(n._root.folders,"id",n._deviceVsMyComputer),t=n.trUPPDlgEnabled();return n._root2._logShowtime(),Shr.U.id?n._root2._goToRoot():e&&e.requiresSignin?(n._signin._noBB=!0,this._isSignin=t?this._isSignin:n._signin._isSignin,t?(this._isSignin=void 0===this._isSignin||this._isSignin,this._isSignin?n._signin.onclick():n._signup.onclick()):n._signin.onclick()):(this.pending=this._formatContent(),n._logsmith(n._logsmithMetricName(["_root2","display"].join(".")),Date.now()-n._openedTime),this._displayTime=Date.now()),!1},_formatContent:function(){var e="",t=Shr.Array.findByProperty(n._root.folders,"id",n._deviceVsMyComputer),r="device"==n._deviceVsMyComputer?t.formatTitle(!1,!0):"",o=("device"==n._deviceVsMyComputer?"${root2.option1.device}":"${root2.option1.computer}").localize(n),i="${root2.option1.text}".localize(n,[o]);return e+=Shr.Html.formatTag("div",{className:"device"==n._deviceVsMyComputer?n._sources.myComputer.className:"",onclick:Shr.EB.on("click",function(e){var t,r=!0,o=Shr.Event.getEvent();return n._logsmith(n._logsmithMetricName(["_root2","upload"].join(".")),Date.now()-this._displayTime),"device"==n._deviceVsMyComputer?(r=e.lastChild==(o.target||o.srcElement),window.trUPP.Log.logOmnitureClick(n._deviceVsMyComputer)):((t=Shr.Array.findByProperty(n._root.folders,"id",n._deviceVsMyComputer))&&(t.onclick(),Shr.U.useNewAuth&&Shr.U.status===Shr.U.Status.signedOut&&window.setTimeout(function(){Shr.MyComputerDS._onClick.call(Shr.Dialogs.UniversalPicker._folder,null,"file")},100)),r=!1),r}.bind(this))},Shr.Html.formatTag("span",{},i)+Shr.Html.formatTag("ol")+Shr.Button.format("${root2.option1.button}",{onclick:Shr.EB.on("click",function(e,t){return e.parentNode.onclick.call(e.parentNode,t)})})+r),delete n._signin._next,this._isSignin=n._signin._isSignin,n._signin._isSignin=!0,n._signin.getContents(),e+=Shr.Html.formatTag("div",{},n._signin.pending),!n.trUPPDlgEnabled()&&Shr.Dom.onContentReady("signin-form",function(){var e=document.querySelector("#signin-form .signin-footer-cont");e&&(e.innerHTML=n._dsListMarkup())}),e},_logShowtime:function(){n._openedTime||(n._logSelectionTime=n._openedTime=Date.now()),n.context.showtime&&(n._logsmith(n._logsmithMetricName("showtime"),n._openedTime-n.context.showtime),delete n.context.showtime)},_goToRoot:function(){n._stack=[{folder:n._folder=n._root,skip:!0}],n.refresh(n._folder)},onblur:function(){n._signin._isSignin=this._isSignin,Shr.L.tryToCall(n._signin.onblur&&n._signin.onblur())}})},function(e,t,r){var n=Shr.Dialogs.UniversalPicker,o=r(0)("shrUP","trUPP");n._root=new n.Folder(n._root2,{id:"_root",type:n.Folder.Type.root,title:"${sources}",folders:void 0,init:function(e){delete this.folders},getContents:function(){var e,t=n.context.sources||{};if(void 0===this.folders){if(Shr.U.id&&void 0===Shr.U.migrated)return Shr.U.status=Shr.U.Status.unknown,(Shr.Score||Shr.C).getUserInfo(function(){var e,t=document.getElementById(n._dlgId);t&&Shr.Dom.getChildByClass(t,o._snapSrcMenu),Shr.U.migrated=!!Shr.U.migrated,(e=n._sources.thisLife)&&(e.hide=!0),Shr.ClassToggle.toggle(t,o._nonMigrated,!Shr.U.migrated),n.refresh(this)}.bind(this)),!1;this.folders=[],"device"===n._deviceVsMyComputer&&n._sources&&n._sources.mobiledevice&&delete n._sources.mobiledevice,Shr.L.forEach(n._sources,function(e,t){n._isHidden(e)||this.folders.push(this._makeSource(t,e))}.bind(this)),Shr.L.forEach(t,function(e,t){t in n._sources||n.isDisabled(t)||e.hide||(this.folders.push(new n.Source(t,e)),Shr.StyleManager.renderStyle(e))}.bind(this)),Shr.L.forEach(this.folders,function(e){Shr.L.tryToCall(e.init.bind(e),n.context)}),(e=Shr.Array.findByProperty(this.folders,"id","sfly"))&&!e.folders?e.getContents(!0,function(){new n.View.Event("datasourceListReady",this.folders)}.bind(this)):new n.View.Event("datasourceListReady",this.folders),1!=this.folders.length||n.context.showSourceList||(window.setTimeout.originalValue||window.setTimeout)(function(){try{n._stack.pop(),Shr.L.tryToCall(n.Source.prototype.onclick.bind(this.folders[0]))}catch(e){Console.write("_root.getContents exception: "+e.message),e.stack&&Console.write(e.stack)}}.bind(this),0)}if(n._folder==this)if(n._setSrcClassName(!1),delete n._currentSrc,n._folder==this&&n._showStatus)n._root2._logShowtime(),n._import.init(n.context),n.refresh(n._folder=n._import);else if(n._folder==this){if(!Shr.U.id&&n._redirectToRoot2)return window.setTimeout(function(){n.refresh(n._folder=n._root2)},0),!1;n._root2._logShowtime(),n._autoUploads.length?(this.folders[0].autoUploads=n._autoUploads,this.folders[0].onclick()):"myComputer"==n._deviceVsMyComputer?n._signedInOnRoot2?this.folders[1].onclick():this.folders[0].onclick():(e||(e=Shr.Array.findByProperty(this.folders,"id","sfly")),e?(e.folders&&e.folders[0].onclick(),new n.View.Event("expandSidebar")):this.folders[0].onclick())}return!0},albums:[],items:[],getSortChoices:function(){return{}},onblur:function(){var e=Shr.Array.findByProperty(n._root.folders,"id","sfly");e&&e._savedOnclick&&(e.onclick=e._savedOnclick,delete e._savedOnclick)},_makeSource:function(e,t){var r=Object.extend({},new n.Source(e,t)),i=n.context.sources||{};return Object.merge(r,i[e]||{}),Shr.StyleManager.renderStyle(r),r.requiresSignin&&(r.className=[r.className||"",o._requiresSignin].join(" ")),r}})},function(e,t,r){var n=Shr.Dialogs.UniversalPicker,o=r(0)("shrUP","trUPP");n._import=new n.Folder(void 0,{id:"_xfer",type:n.Folder.Type.importing,title:"",noSelect:!0,noZoom:!0,init:function(e){this._state=n.Sink.state.init,this._closePending=!1,this.title="${importing.title}".localize(n),this.header="",this.buttons=[],Shr.L.forEach(this._buttons,function(e){this.buttons.push({text:e.text.localize(n),atts:{onclick:this._onClickHandlerFor(e.onclick),className:e.className}})}.bind(this))},getContents:function(){var e=!1,t=this._statusResults(),r=t.done.length+t.error.length+t.wait.length+t.xfer.length+t.cancel.length;if(this._state!=n.Sink.state.init||n._showStatus||(this.items=[],this._sinks=[],this._inProgress=[],this._retrying=!1,this._count=0,Shr.L.forEach(n._selection,function(e){e.autoSelect=!1,this.items.push(e),-1==Shr.Array.indexOf(this._sinks,e.sink)&&this._sinks.push(e.sink),this._count++,e.state!=n.Sink.state.wait&&e.state!=n.Sink.state.xfer||e.size&&this._inProgress.push(e)}.bind(this)),this._state=n.Sink.state.xfer,Shr.L.forEach(this._sinks,function(e){e.start(this._refresh.bind(this))}.bind(this)),Shr.ClassToggle.toggle(Shr.Dom.getChildByClass(document,o._dialog),o._detail,!1),Shr.Event.addEventListener(window,"beforeunload",this.__onBeforeUnload=this._onBeforeUnload.bind(this)),n._selection.index=n._selections.length,n._selections.push(n._selection),n._dispatchEvent(n.EventType.start,t),function(){var e={device:{event:"event89",source:"local"},myComputer:{event:"event89",source:"local"},sfly_timeline:{event:"event90",source:"allPhotos"},sfly_recentUploads:{event:"event91",source:"recentUploads"},sfly_albums:{event:"event92",source:"albums"},sites:{event:"event93",source:"sites"},stockphotos:{event:"event94",source:"stockphotos"},fb:{event:"event95",source:"fb"},instagram:{event:"event96",source:"instagram"},flickr:{event:"event97",source:"flickr"},google:{event:"event98",source:"google"},_end:null},t=function(e){-1==o.indexOf(e)&&o.push(e)},r=function(e){-1==i.indexOf(e)&&i.push(e),s[e]?s[e]=s[e]+1:s[e]=1},o=["event99"],i=[],s={};try{n._selection.forEach(function(n){switch(n.source.id){case"sfly":n.path.match(/^sfly\/recentUploads/)?(t(e.sfly_recentUploads.event),r(e.sfly_recentUploads.source)):n.path.match(/^sfly\/folders/)?(t(e.sfly_albums.event),r(e.sfly_albums.source)):(t(e.sfly_timeline.event),r(e.sfly_timeline.source));break;case"myComputer":case"device":case"stockphotos":case"sites":case"fb":case"instagram":case"flickr":case"google":t(e[n.source.id].event),r(e[n.source.id].source)}}),window.trUPP.Log.logAddClick({events:o,sources:i,selection:n._selection,sourcesCounts:s}),n._addClickTracked=!0}catch(e){}}()),Shr.ClassToggle.toggle(Shr.Dom.getChildByClass(document,o._dialog),o._error,!1),t.done.length&&t.state==n.Sink.state.done){if(n._utilities.localStorage.getItem("Shr.Dialogs.UniversalPicker.confirmClose")&&!window.confirm("Close?"))return!1;window.setTimeout(this._close.bind(this,t),0)}else n.context.backgroundImport&&n.newBgUpload&&!n._showStatus||t.done.length+t.error.length+t.cancel.length!=r?n._showStatus||!n.context.backgroundImport&&!n.newBgUpload?(this.title="${importing.title}".localize(n),this.header="",this.pending=this._formatContent()):n.context.ok?(n.context.ok.type=n.context.ok.type||n.Folder.Type.ok,n.refresh(n._folder=n.context.ok)):(n.isOpen=!1,Shr.Dialog.close(n.context.did,Shr.Dialog.reason.ok)):(this.title="${importing.error.title}".localize(n),this.header=this._formatContent(),this.items=t.error.concat(t.cancel),Shr.ClassToggle.toggle(Shr.Dom.getChildByClass(document,o._dialog),o._error,!0),e=!0);return e},onblur:function(){this.__onBeforeUnload&&(Shr.Event.removeEventListener(window,"beforeunload",this.__onBeforeUnload),delete this.__onBeforeUnload)},getSortChoices:function(){return{}},_state:n.Sink&&n.Sink.state?n.Sink.state.init:void 0,_progressBarId:Shr.Dom.getUniqueId(),_progressBarTimer:void 0,_progressBarTimerInterval:333,_formatContent:function(){var e=this._statusResults(),t=!(e.wait.length||e.xfer.length),r=(e.done.length,e.error.length+e.cancel.length),i=r?[]:[o._overlay],s={},a=(this._retrying?"${retrying.itemName}":"${importing.itemName}").localize(n),l=1==this._count?this._retrying?"${retrying.verb.singular}":"${importing.verb.singular}":this._retrying?"${retrying.verb.plural}":"${importing.verb.plural}",c=Shr.Html.formatTag("div",{},(this._retrying?"${retrying.text}":"${importing.text}").localize(n,[new Number(this._count).toCount(a),l.localize(n)]));return t&&r?(n._showStatus&&e.length&&(this._count=e.length),i.push(o._error),c=Shr.Html.formatTag("div",{},(this._retrying?"${retrying.error.text}":"${importing.error.text}").localize(n,[e.error.length+e.cancel.length,this._count])),c+=Shr.Button.format("${importing.error.retry}".localize(n),{onclick:this._onRetry.bind(this,e),className:"sflyButton-quaternary",tabindex:"0"}),c+=Shr.Button.format("${importing.error.skip}".localize(n),{onclick:this._onSkip.bind(this,e),tabindex:"0"})):(i.push(o._busy),this._inProgress.length&&(i.push(o._progress),!this._progressBarTimer&&this._inProgress.length&&(this._progressBarTimer=window.setTimeout(function(){var e=Shr.Dom.get(this._progressBarId);e&&(e.style.width=this._getProgress()+"%"),this._statusResults().state!=n.Sink.state.xfer?(delete this._progressBarTimer,n.refresh(this)):this._progressBarTimer=window.setTimeout(arguments.callee.bind(this),this._progressBarTimerInterval)}.bind(this),this._progressBarTimerInterval)),s.width=this._getProgress()+"%"),c+=Shr.Html.formatTag("div",{className:o._progressBar},Shr.Html.formatTag("div",{className:o._overlay,id:this._progressBarId,style:s})),c+=Shr.Button.format("${cancel}".localize(n),{className:"sflyButton-quaternary",onclick:this._onCancel.bind(this),tabindex:"0"})),Shr.Html.formatTag("div",{className:i},c)},_getProgress:function(){var e=0,t=0;return Shr.L.forEach(this._inProgress,function(r){e+=r.size,t+=Math.round(r.size*(r.progress||0))}),Math.round(100*(e?t/e:0))},_updateItem:function(e){-1!=Shr.Array.indexOf(this._inProgress,e)&&(e.state!=n.Sink.state.done&&e.state!=n.Sink.state.error||(e.progress=1)),n._dispatchEvent(n.EventType.itemUpdate,e,e.batchIndex),n.context.backgroundImport||e.state==n.Sink.state.xfer||n.refresh(this)},_close:function(e){var t=[],r=[];if(!this._closePending){if(this._closePending=!0,e=e||this._results(),Shr.L.forEach(e.done,function(e){void 0===e.type?(e.type=n.Item.type.sfly,t.push(e.mPath)):e.type!=n.Item.type.sfly&&e.type!=n.Item.type.stockphoto||t.push(e.mPath||e.id),r.push({type:e.type,title:e.title,text:e.text,date:e.date,width:e.width,height:e.height,aspectRatio:e.aspectRatio,orientation:e.orientation,rotation:e.rotation,source:e._source,id:e.id||e.mPath,mPath:e.mPath,getThumbnailUrl:e.getThumbnailUrl.bind(e),data:e.data,path:e.path})}),!n._showStatus&&(window.setTimeout(n._dispatchEvent.bind(n,n.EventType.done,e),0),!n.context.backgroundImport)){if(n.context.ok)return n.context.ok.type=n.context.ok.type||n.Folder.Type.ok,void n.refresh(n._folder=n.context.ok);Shr.L.tryToCall(n.context.onOk,n.context,t,r)}n.isOpen=!1,window.trUPP.Dialog.close(n.context.did,Shr.Dialog.reason.ok)}},_cancel:function(){Shr.L.forEach(this._sinks,function(e){try{e.cancel()}catch(e){}}),Shr.L.forEach(n._selections,function(e){e._cancelled=!0}),n._cancel()},_closePending:!1,_onCancel:function(e){this._closePending=!0,Shr.C.message(Object.extend(n._popupContext(),{title:"${cancelConfirm.title}".localize(n),body:"${cancelConfirm.text}".localize(n),buttons:[{title:"${cancelConfirm.cancel}".localize(n),result:Shr.Dialog.reason.cancel},{title:"${cancelConfirm.ok}".localize(n),result:Shr.Dialog.reason.ok}],buttonsStyle:{"text-align":"right"},onClose:function(e,t){return this._closePending=!1,t==Shr.Dialog.reason.ok&&this._cancel(),window.setTimeout(n.refresh.bind(n,this),100),!0}.bind(this)}))},_onPause:function(e){var t=Shr.Dom.getParentByClass(e,o._dialog);Shr.L.forEach(this._sinks,function(e){try{e.pause()}catch(e){}}),Shr.ClassToggle.toggle(t,o._paused,!0)},_onResume:function(e){var t=Shr.Dom.getParentByClass(e,o._dialog);Shr.L.forEach(this._sinks,function(e){try{e.resume()}catch(e){}}),Shr.ClassToggle.toggle(t,o._paused,!1)},_onSkip:function(e){n._showStatus?n._cancel():this._close()},_retrying:!1,_onRetry:function(e){this._retrying=!0,this._inProgress=[],this._count=0,n._showStatus&&(n._selection=this.items,n._selection.forEach(function(e){e.batchIndex=n._selections.length}),delete n._showStatus),Shr.L.forEach(n._selection,function(e){e.state!=n.Sink.state.error&&e.state!=n.Sink.state.cancel||!e.retry||(Shr.L.tryToCall(e.retry.bind(e)),this._count++,e.size&&this._inProgress.push(e))}.bind(this)),n.refresh(this)},_results:function(e){var t=e||n._selection,r=t?t.length:0,o={wait:[],cancel:[],done:[],xfer:[],error:[],state:n.Sink.state.xfer,length:r};return Shr.L.forEach(t,function(e,t){e.index=t,e.state==n.Sink.state.wait?o.wait.push(e):e.state==n.Sink.state.cancel?o.cancel.push(e):e.state==n.Sink.state.done?o.done.push(e):e.state==n.Sink.state.xfer?o.xfer.push(e):e.state==n.Sink.state.error&&o.error.push(e)}),o.done.length==r?o.state=n.Sink.state.done:o.done.length+o.error.length+o.cancel.length==r&&(o.state=o.error.length?n.Sink.state.error:n.Sink.state.cancel),o.index=Shr.Array.indexOf(n._selections,e),-1==o.index&&(o.index=n._selections.length),o._started=t&&t._started,o._done=t&&t._done,o._failed=t&&t._failed,o._closed=t&&t._closed,o},_statusResults:function(){var e=this._results();return n._showStatus&&(e=[],n._selections.forEach(function(t,r){-1!=n._showStatus.indexOf(r)&&(e=e.concat(t))}),e=this._results(e)),e},_refresh:function(){n.refresh(this)},_onClickHandlerFor:function(e){var t=e+"Click";return this[t]||(this[t]=Shr.EB.on("click",this[e].bind(this))+";return false")},_onBeforeUnload:function(){var e,t=this._results();return 0<n._selection.length-t.done.length&&(e="${navigateWarning.text}".localize(n)),e},__onBeforeUnload:void 0,_end:null})},function(e,t,r){var n=Shr.Dialogs.UniversalPicker,o=r(0)("shrUP","trUPP");n._signin_old=new n.Folder(void 0,{id:"signin",_container:Shr.Dom.getUniqueId(),_isSignin:!0,getContents:function(){return this._setTitle(),this.pending=Shr.Html.formatTag("div",{id:this._container,className:o._signin}),Shr.Dom.onContentReady(this._container,function(){var e;Shr.Dialog.renderInline(this._isSignin?"SignIn":"SignUp",{container:this._container,newTerms:!0,altTagName:"div",formTarget:"dlg-${did}-target".substitute(n.context),newDlgTitle:!0,showColon:!0,hideCms:!0,noEmail:!0,noCid:!0,args:{outputFormat:"postMessage",subdomain:window.location.protocol+"//"+window.location.hostname.replace(/\.shutterfly\.com$/i,"")+(window.location.port?":"+window.location.port:""),version:"2"},tableHeaderRow:(e="",e=Shr.Html.formatTag("div",{},"${signin.signinTitle}".localize(n)),e+=Shr.Html.formatTag("div",{},"${signin.siContext}".localize(n)),e=Shr.Html.formatTag("div",{className:"siHeader"},e)),renderButtons:function(e,t){var r,i=Date.now();this._isSignin=t,Shr.ClassToggle.toggle(this._container,o._signup,!this._isSignin),this._displayTime=i,this._setTitle(),e(Shr.Button.format((t?"${signin.signinButton}":"${signin.signupButton}").localize(n),{onclick:this._onSubmit.bind(this),tabindex:"0"})),t?(r=Shr.Html.formatTag("a",{className:"needsclick",onclick:function(e){var t=document.querySelector(".signin-join-link A");t&&t.click()}},"${signin.signup}".localize(n)),e(Shr.Html.formatTag("div",{},Shr.Html.formatTag("span",{},"${signin.signinSwitch}".localize(n))+r))):(r=Shr.Html.formatTag("a",{className:"needsclick",onclick:function(e){var t=document.querySelector(".signup-signin A");t&&t.click()}},"${signin.signin}".localize(n)),e(Shr.Html.formatTag("div",{},Shr.Html.formatTag("span",{},"${signin.signupSwitch}".localize(n))+r))),Shr.Dom.onContentReady(this._isSignin?"signInButtons":"su-title",function(e,t){this._isSignin?(t=document.querySelector("#"+t.id),(t=Shr.Dom.getParentByTag(t,"TD"))&&t.setAttribute("colspan",2)):Shr.L.forEach(document.querySelectorAll(".shrUPSI .signup-form TR.password + TR + TR .input-v-text, .shrUPSI .signup-form TR.password + TR + TR + TR .input-v-text"),function(e){e.setAttribute("colspan",2)})}.bind(this))}.bind(this),onLoadComplete:function(e){var t=Shr.Dom.get("dlg-${did}-form".substitute(e));this.c=e,Shr.Dialog.updateTitle(e.did,(this._isSignin?"${signin.signinTitle}":"${signin.signupTitle}").localize(n),e),this._isSignin?Shr.C.forgotPassword=Shr.C.forgotPassword||function(e){return["https:/",Shr.AS.www,"secure","password_forgot.jsp"].join("/")}:(Shr.ClassToggle.toggle(Shr.Dom.getChildByClass(t,"signup-table"),"signup-table",!1),Shr.ClassToggle.toggle(Shr.Dom.getChildByClass(t,"dlgShowWrap"),"dlgShowWrap",!1)),Shr.L.forEach(t.getElementsByTagName("a"),function(e){var t;e.getAttribute("href")||(t=Shr.Dom.getComputedStyle(e,"textDecoration"),e.removeAttribute("href"),delete e.href,e.style.cursor="pointer",e.style.textDocration=t),e.setAttribute("tabindex","0")}),this._removeKeyUpHandler(),this._form=t,Shr.Event.addEventListener(this._form,"keyup",this.__onKeyup=this._onKeyup.bind(this)),Shr.L.forEach(t.getElementsByTagName("input"),function(e){e.setAttribute("tabindex","0"),"firstName"==e.name&&e.setAttribute("placeholder","${signin.firstName}".localize(n)),"lastName"==e.name&&e.setAttribute("placeholder","${signin.lastName}".localize(n)),"userName"==e.name&&e.setAttribute("placeholder","${signin.Email}".localize(n)),"userName2"==e.name&&e.setAttribute("placeholder","${signin.confirmEmail}".localize(n)),"password"==e.name&&e.setAttribute("placeholder",(this._isSignin?"${signin.Password}":"${signin.signupPassword}").localize(n)),"password2"==e.id&&e.setAttribute("placeholder","${signin.confirmPassword}".localize(n))}.bind(this))}.bind(this),onSwitch:function(){n._folder!=this?(n._logsmith(n._logsmithMetricName(["_root2","signup"].join(".")),Date.now()-this._displayTime),this.onblur(),this._isSignin=!1,n.refresh(n._folder=this)):(n._logsmith(n._logsmithMetricName([this._isSignin?"signin":"signup","switch"].join(".")),Date.now()-this._displayTime),!n._wideLayout&&this._isSignin&&n._redirectToRoot2&&n.refresh(n._folder=n._root2))}.bind(this),forgotPasswordTarget:"_blank",renderInlineTitle:function(e){},signupText:"${signin.signinSwitch}".localize(n),signinText:"${signin.signupSwitch}".localize(n),emailMe:"${signin.signupEmailMe}".localize(n),signInCallback:function(e){}})}.bind(this)),this._noBB&&Shr.ClassToggle.toggle(n._dlgId,o._noBB,!0),!1},onblur:function(){this._removeKeyUpHandler(),Shr.Dialog.context=n.context,Shr.ClassToggle.toggle(n._dlgId,o._noBB,!1)},_removeKeyUpHandler:function(){Shr.Event.removeEventListener(this._form,"keyup",this.__onKeyup),delete this.__onKeyup},_setTitle:function(){this.title=(this._isSignin?"${signin.signinTitle}":"${signin.signupTitle}").localize(n)},_state:Shr.U.id?3:0,_onSubmit:function(e){var t,r=Shr.Dom.getParentByTag(e,"FORM"),i=!1;r&&(this._form=r,n._logsmith(n._logsmithMetricName([this._isSignin?"signin":"signup","submit"].join(".")),Date.now()-this._displayTime),n._folder==n._root2&&n._logsmith(n._logsmithMetricName(["_root2","signin"].join(".")),Date.now()-this._displayTime),this._isSignin?i=Shr.Dialog.context.dialog.onSubmit():(t=new Shr.ValidationContext(r),Shr.Dialog.context.dialog.onValidate(t,r.elements,Shr.Dialog.context),(i=!t.errors.length)||Shr.Dialog.context.dialog.renderValidationError({vc:t})),i?(this._isSignin?(Shr.Dom.setProperty(Shr.Dom.get("signInWaitWheel"),"src",Shr.ImgSrc.blank),Shr.ClassToggle.toggle("signin-form",o._busy,!0)):(Shr.Dom.setProperty(Shr.Dom.getChildByClass(e.parentNode,"wait-wheel"),"src",Shr.ImgSrc.blank),Shr.ClassToggle.toggle(Shr.Dom.getParentByClass(e,"signup-form"),o._busy,!0)),this._state=1,Shr.Event.addEventListener(window,"message",this.__onMessage=this._onMessage.bind(this),!1),this._start=Date.now(),r.submit()):n._logsmith(n._logsmithMetricName([this._isSignin?"signin":"signup","submitErrors"].join(".")),t.errors.length))},_onKeyup:function(e){return e=e||window.event||{},("INPUT"==document.activeElement.tagName&&"checkbox"!=document.activeElement.type||Shr.Dom.hasClass(document.activeElement,"sflyButton"))&&13==e.keyCode?(Shr.Event.stop(e),this._onSubmit(e.target),!1):(13==e.keyCode&&document.activeElement.click(),!0)},__onKeyup:void 0,_onMessage:function(e){var t,r=Date.now()-this._start;e=e||window.event,Shr.Dialog.context.dialog.formAction.startsWith(e.origin)&&e.source==document.getElementById(this._form.target).contentWindow&&(Shr.Event.removeEventListener(window,"message",this.__onMessage,!1),delete this.__onMessage,t=window.JSON.parse(e.data),Shr.U.status=Shr.U.Status.signedOut,1==t.returnCode?(Shr.U.id=Shr.U.uid=Shr.U.un=Shr.U.userId=Shr.U.userName=t.uid,this._state=3,Shr.U.status=Shr.U.Status.signedIn,Shr.U.displayName=Shr.U.dn=Shr.U.userDisplayName="${firstName} ${lastName}".substitute(t),Shr.U.email=t.email,Shr.U.firstName=t.firstName,Shr.U.lastName=t.lastName,Shr.U.oauthToken=t.oauthToken,Shr.U.oauthV2AccessToken=t.oauthV2AccessToken,Shr.U.oflyTicket=t.oflyToken,Shr.U.migrated=t.migrated,n.Log.logMigrationStatus(),Shr.L.tryToCall(n.context.onSignin,n.context,t),Shr.ClassToggle.toggle(Shr.Dom.getParentByClass(this._container,o._dialog),o._anonymous,!1),Shr.ClassToggle.toggle(n._dlgId,o._nonMigrated,!Shr.U.migrated),delete n._root.header,this._next?(n._stack.pop(),n._snappedSrc=this._snappedSrc,this._next.onclick(void 0,!0),delete n._snappedSrc,delete this._next):(n._stack=n._stack.slice(0,2),n._onBack()),n._folder!=this&&(n._signedInOnRoot2=!0)):-99==t.returnCode?(n.Source.alert((this._isSignin?"${signin.signinError}":"${signin.signupError}").localize(n)),window.trUPP.Timing.recordSessionEvents({event:"signIn/signUp",err:t.returnCode,session_method:"onMessage"})):(this._isSignin?(Shr.ClassToggle.toggle("signin-form",o._busy,!1),window.trUPP.Timing.recordSessionEvents({event:"signIn",err:t.returnCode,session_method:"onMessage"})):(Shr.ClassToggle.toggle(Shr.Dom.getChildByClass(document.body,"signup-form"),o._busy,!1),window.trUPP.Timing.recordSessionEvents({event:"signUp",err:t.returnCode,session_method:"onMessage"})),Shr.Dialog.context.dialog.onResponse({result:t.returnCode},Shr.Dialog.context)),n._logsmith(n._logsmithMetricName(n._logsmithAPIStatusMetricName(this._isSignin?"nonVisualSignin":"nonVisualSignup",parseInt(t.returnCode)||-666)),r))},__onMessage:void 0})},function(e,t){var r;(r=window.trUPP=window.trUPP||{}).Dialog={show:function(e,t){r.Timing.startTimer("upp-load-time"),r.Timing.startTimer("upp-open-time");var n,o,i=r&&r.Dialogs&&r.Dialogs[e]||window.Shr&&window.Shr.Dialogs&&window.Shr.Dialogs[e],s=this._dialogContainer;return i&&(this._dialogContainer||((s=document.createElement("DIV")).id=this._dialogContainerId,document.body.appendChild(s)),(n=document.createElement("DIV")).id="trUPP-dlg-"+this._nextDialogId,i.className&&n.classList.add(i.className),n.style.zIndex=this.zIndex++,t.bypass&&"trUPPAlert"!=i.className&&(n.style.display="none"),(t=t||{}).dialog=i,t.did=this._nextDialogId++,t.labelsContext=t.labelsContext?"context."+t.labelsContext+".":"",i.context=t,window.trUPP.Timing.setEventTimestamp("showTimestamp"),function(){var e;if(!r.Dialog._stylesInjected){r.Dialog._stylesInjected=!0,(e=document.createElement("style")).innerHTML=r.Dialog._formatStyle();try{document.querySelector("head").appendChild(e)}catch(e){}}}(),i.formatContent&&(o=i.formatContent(t),t.renderError||(n.innerHTML=o,s.appendChild(n),this._openDialogContexts[t.did]=t))),t&&t.onLoadComplete&&t.onLoadComplete(t),i},close:function(e,t){var r=this._dialogContainer,n=r&&r.querySelector("#trUPP-dlg-"+e),o=this._openDialogContexts[e]||{},i=o.dialog||{},s=!0;if(o.result=t,i&&i.onClose)try{s=i.onClose(o,t)}catch(e){}i&&s&&delete this._openDialogContexts[e],n&&window.setTimeout(r.removeChild.bind(r,n),0),1===t?trUPP.Timing.endTimer("upp-open-time",{action:"Add",path:Shr.Dialogs.UniversalPicker._logsmithUPPVer.split("_").pop()}):0===t?trUPP.Timing.endTimer("upp-open-time",{action:"Cancel",path:Shr.Dialogs.UniversalPicker._logsmithUPPVer.split("_").pop()}):trUPP.Timing.endTimer("upp-open-time",{action:"Close",path:Shr.Dialogs.UniversalPicker._logsmithUPPVer.split("_").pop()})},isOpen:function(){return 0<Object.keys(this._openDialogContexts).length},reason:{cancel:0,ok:1,close:-2},zIndex:100,get context(){return Object.keys(this._openDialogContexts).map(function(e){return this._openDialogContexts[e]},this).pop()},openDialogs:function(){return Object.keys(this._openDialogContexts).map(function(e){return this._openDialogContexts[e]},this).map(function(e){return e.dialog}).reverse()},_dialogContainerId:"trUPPDialogs",get _dialogContainer(){return document.getElementById(this._dialogContainerId)},_nextDialogId:0,_openDialogContexts:{},getDlgProperty:function(e,t,r){return t&&e in t&&t[e]||r},_formatStyle:function(){return["/* trUPP.Dialog */","#trUPPDialogs > DIV {position: fixed; top: 5%; bottom: 5%; left: 5%; right: 5%; background-color: #fff;}","#trUPPDialogs > DIV > * {z-index: 2; background-color: #fff; position: absolute;}","#trUPPDialogs > DIV:before {","content: '';","position: fixed;","top: 0;","bottom: 0;","left: 0;","right: 0;","z-index: 1;","background-color: #464646;","opacity: 0.5;","}","#trUPPDialogs > DIV > SECTION {","}","SECTION.shrUPBin {","height: 150px;","bottom: 0;","top: auto;","width: 100%","}","SECTION.shrUPSidebar {","left: 0;","width: 150px;","}","SECTION.shrUPNavBar, SECTION.shrUPSearch, SECTION.shrUPContent {","right: 0;","width: auto;","}","SECTION.shrUPNavBar, SECTION.shrUPSearch {","top: 0;","bottom: auto;","}","SECTION.shrUPContent {","top: 50px;","bottom: 150px;","}","@media screen and (max-width: 767px) {","/* Medium and smaller expand to cover entire browser window. */","#trUPPDialogs > DIV {","top: 0;","bottom: 0;","left: 0;","right: 0;","}","}","@media screen and (max-height: 480px) {","/* Medium and smaller expand to cover entire browser window. */","#trUPPDialogs > DIV {","top: 0;","bottom: 0;","left: 0;","right: 0;","}","}","@media screen and (max-width: 479px) {","/* XSmall collapses sidebar to hamburger and has shortened version of bin. */","SECTION.shrUPSidebar {","right: 10px;","top: 10px;","width: 40px;","height: 40px;","z-index: 3;","left: auto;","overflow: hidden;","}","SECTION.shrUPBin {","height: 50px;","}","SECTION.shrUPNavBar, SECTION.shrUPSearch, SECTION.shrUPContent {","left: 0;","}","SECTION.shrUPContent {","bottom: 50px;","}","}",""].join("\n")},_end:null},r.Feature&&(new r.Feature("Dialog",!0),r.Feature.Dialog&&Shr.Score&&"Shr"in window&&(window.trUPP.Dialogs=window.trUPP.Dialogs||{},window.trUPP.Dialogs.UniversalPicker=window.Shr.Dialogs.UniversalPicker,window.Shr.Dialog=window.trUPP.Dialog))},function(e,t){var r,n,o,i,s,a,l,c,d,h,u;n=window.trUPP=window.trUPP||{},o=n&&n.util||Shr,i=Shr.Dialogs.UniversalPicker,s="shrNonVisualSignInResFrame",c=(a="shrUP")+(l="SignIn")+"-Id",d={_signIn:a+l,_form:a+l+"-form",_title:a+l+"-title",_remember:a+l+"-remember",_uName:a+l+"-username",_pwd:a+l+"-pwd",_forgot:a+l+"-forgot",_actions:a+l+"-actions",_dontHaveAcc:a+l+"-dontHaveAcc",_error:a+l+"-error",_valError:a+l+"-valError",_show:a+l+"-show",_spinner:a+l+"-spinner",_submit:a+l+"-submit",_dsList:a+l+"-dsList",_ip2:a+l+"-ip2"},h=["https:/",Shr.AS.www,"nonVisualSignin","start.sfly"].join("/"),u=["https:/",Shr.AS.www,"secure","password_forgot.jsp"].join("/"),n.SignIn=new i.Folder(void 0,{id:"signin",L10N:{signin:"Sign in",signup:"Sign up",signinTitle:"Sign in to Shutterfly",signinForgotPW:"Forgot password?",signinRemember:"Remember my email address",signinError:"Something's not right. Please check your email or password, and try again.",signInValHeader:"Please correct the following errors, then resubmit the form:",signinValEmail:"Enter a valid email address.",signinValPwd:"Enter your password.",email:"Email",password:"Password",dontHaveAcc:"Don't have an account?",signinToAccess:"Sign in to access your photos"},_isSignin:!0,_container:void 0,renderStyle:function(e){e(this._formatStyle())},getContents:function(){var e,t=function(){Shr.Dom.onContentReady(c,this._onContentReady.bind(this))}.bind(this);return"evalUseNewAuth"in window&&!("useNewAuth"in Shr.U)?(e=this.getUppExt().folder,window.evalUseNewAuth().then(function(t){Shr.U.useNewAuth=t,Shr.U.useNewAuth?Shr.Score.getUserInfo(function(){i.refresh(e)}):i.refresh(e)}.bind(this)).catch(function(e){window.trUPP.Timing.recordSessionEvents({event:"evalUseNewAuth",err:e,session_method:"trupp_signin getContents"})})):(this.pending?Shr.U.useNewAuth&&t():(r||(r=this.getUppExt()),Shr.StyleManager.renderStyle(this),Shr.U.useNewAuth?this.pending=this._getIP2MarkUp():this.pending=this._getMarkUp(),t()),window.trUPP.Log.logSignInLoad()),!1},onblur:function(){r||(r=this.getUppExt()),Shr.U.useNewAuth,Shr.ClassToggle.toggle(r.dlgId,r.classNames.noBB,!1),this._form&&Shr.Event.removeEventListener(this._form,"keyup",this.__onKeyup),delete this.__onKeyup},_getMarkUp:function(){var e,t,n,o=(e={outputFormat:"postMessage",subdomain:window.location.protocol+"//"+window.location.hostname.replace(/\.shutterfly\.com$/i,"")+(window.location.port?":"+window.location.port:""),version:"2"},t=Object.keys(e),n="",t.forEach(function(t){n+=Shr.Html.formatTag("input",{type:"hidden",name:t,value:e[t]})}),n),a=function(e,t,r,n){return Shr.Html.formatTag("input",Object.extend({type:e,name:t,placeholder:r,autocomplete:"off",tabindex:"0"},n?{value:n}:{}))},l=Shr.Html.formatTag("div",{className:d._title},"${signinTitle}".localize(this)),p=Shr.Html.formatTag("div",{className:d._error},"${signinError}".localize(this)),m=Shr.Html.formatTag("div",{className:d._valError}),g=a("email","userName","${email}".localize(this),Shr.Sfly.getEmail()),f=Shr.Html.formatTag("div",{className:d._remember},Shr.Html.formatTag("input",{type:"checkbox",name:"rememberUserName",checked:!0,tabindex:"0"})+Shr.Html.formatTag("span",{},"${signinRemember}".localize(this))),_=a("password","password","${password}".localize(this)),S=Shr.Html.formatTag("div",{},g+f+_),b=Shr.Html.formatTag("a",{className:d._forgot,target:"_blank",href:u},"${signinForgotPW}".localize(this)),y=Shr.Button.format("${signin}".localize(this),{onclick:this._onSubmit.bind(this),tabindex:"0"}),P=Shr.Html.formatTag("span",{},"${dontHaveAcc}".localize(this)),v=Shr.Html.formatTag("a",{className:"needsclick",onclick:function(e){new i.View.Event("showSignUp",this._next),delete this._next}.bind(this)},"${signup}".localize(this)),w=Shr.Html.formatTag("span",{className:d._spinner},""),x=document.getElementById(s),U=Shr.Html.formatTag("div",{className:d._dsList},r.dsListMarkup),T="";return this.__frame=x||Shr.Dom.create("iframe",document.body,{id:s,name:s,src:"about:blank",style:"display: none;"}),T=o+l+p+m+S+b+Shr.Html.formatTag("div",{className:d._dontHaveAcc},P+v)+Shr.Html.formatTag("div",{className:d._actions},y+w),Shr.Html.formatTag("div",{className:d._signIn,id:c},Shr.Html.formatTag("form",{method:"post",className:d._form,action:h,target:s},Shr.Html.formatTag("div",{},T))+U)},_getIP2MarkUp:function(){var e=Shr.Html.formatTag("div",{className:d._title},"${signinTitle}".localize(this)),t=Shr.Button.format("${signinToAccess}".localize(this),{onclick:this._onAccessPhotos.bind(this),tabindex:"0"}),n=Shr.Html.formatTag("span",{className:d._spinner},""),o=Shr.Html.formatTag("div",{className:d._dsList},r.dsListMarkup),i="";return i=e+Shr.Html.formatTag("div",{className:d._actions},t+n),Shr.Html.formatTag("div",{className:d._signIn+" "+d._ip2,id:c},Shr.Html.formatTag("div",{},i)+o)},_getSflyAuthMarkup:function(){return Shr.Html.formatTag("signin",{id:c,"use-modal":"false",show:n.SignIn._isSignin?"signin":"signout","use-dc":"false"})},_sflyAuthListener:function(e){"Auth:UserStatusChange"==e.type?Shr.Score.setUserInfo(e.detail,n.SignIn._onSigninOrSignup.bind(n.SignIn,Shr.U)):"Auth:ScreenChange"==e.type&&(n.SignIn._isSignin="signin"==e.detail.mode)},_onContentReady:function(){try{Shr.U.useNewAuth?(document.addEventListener("Auth:UserStatusChange",this._sflyAuthListener),document.addEventListener("Auth:ScreenChange",this._sflyAuthListener),window.$sflyAuth.redigest()):(this._container=document.querySelector("."+d._signIn),this._form=this._container.getElementsByTagName("FORM")[0],Shr.Event.addEventListener(this._form,"keyup",this.__onKeyup=this._onKeyup.bind(this)))}catch(e){}},_onSubmit:function(e){var t,r=Shr.Dom.getParentByTag(e,"FORM");this._clearErrMsg(),r&&(t=new Shr.ValidationContext(r),this._onValidate(t,r.elements),t.errors.length?this._showErrMsg(d._valError,t.errors):(this._state=1,this._container&&this._container.classList.add(d._submit),Shr.Event.addEventListener(window,"message",this.__onMessage=this._onMessage.bind(this),!1),this._start=Date.now(),r.submit()))},_onMessage:function(e){var t,r=Date.now()-this._start;e=e||window.event,this._form.action.startsWith(e.origin)&&e.source==document.getElementById(this._form.target).contentWindow&&(Shr.Event.removeEventListener(window,"message",this.__onMessage,!1),delete this.__onMessage,t=window.JSON.parse(e.data),Shr.U.status=Shr.U.Status.signedOut,1==t.returnCode?(Shr.U.id=Shr.U.uid=Shr.U.un=Shr.U.userId=Shr.U.userName=t.uid,this._state=3,Shr.U.status=Shr.U.Status.signedIn,Shr.U.displayName=Shr.U.dn=Shr.U.userDisplayName="${firstName} ${lastName}".substitute(t),Shr.U.email=t.email,Shr.U.firstName=t.firstName,Shr.U.lastName=t.lastName,Shr.U.oauthToken=t.oauthToken,Shr.U.oauthV2AccessToken=t.oauthV2AccessToken,Shr.U.oflyTicket=t.oflyToken,Shr.U.migrated=t.migrated,this._onSigninOrSignup(t)):(this._showErrMsg(d._error),window.trUPP.Timing.recordSessionEvents({event:"signIn",err:t.returnCode,session_method:"trupp signin _onMessage"})),i.Log.metric("nonVisualSignin",r,parseInt(t.returnCode)||-666),n.Timing.recordTime("nonVisualSignin",r))},_onSigninOrSignup:function(e){i.Log.logMigrationStatus(),n.Log.updateSessionInfo(),Shr.L.tryToCall(Shr.Dialog.context.onSignin,Shr.Dialog.context,e),Shr.ClassToggle.toggle(r.dlg,r.classNames.anonymous,!1),Shr.ClassToggle.toggle(r.dlg,r.classNames.nonMigrated,!Shr.U.migrated),this._next?(r.stack=[r.stack[0]],this._next.onclick(void 0,!0),delete this._next):(r.stack=r.stack.slice(0,2),r.onBack()),r.folder,i._startOptimizely()},_onKeyup:function(e){return e=e||window.event||{},("INPUT"==document.activeElement.tagName&&"checkbox"!=document.activeElement.type||Shr.Dom.hasClass(document.activeElement,"sflyButton"))&&13==e.keyCode?(Shr.Event.stop(e),this._onSubmit(e.target),!1):(13==e.keyCode&&document.activeElement.click(),!0)},_onValidate:function(e,t){e.validateRequired("Email",t.userName,"${signinValEmail}".localize(this)),e.validateRequired("Password",t.password,"${signinValPwd}".localize(this))},_clearErrMsg:function(){var e=document.querySelector("."+d._error),t=document.querySelector("."+d._valError);e&&e.classList.remove(d._show),t&&t.classList.remove(d._show)},_showErrMsg:function(e,t){var r=document.querySelector("."+e);if(this._container.classList.remove(d._submit),t){var n="",o=(t.forEach(function(e){n+=Shr.Html.formatTag("li",{},e)}),n);r.innerHTML="${signInValHeader}".localize(this)+Shr.Html.formatTag("ul",{},o)}i.Log.metric(["signin","submitErrors"].join("."),t&&0<t.length?t.length:1),t?window.trUPP.Log.logSignInError([t]):window.trUPP.Log.logSignInError([this.L10N.signinError]),r&&r.classList.add(d._show)},_onAccessPhotos:function(e){var t=i._selectedSrc||"sfly";i.context.onAccessPhotos||(i.context.onAccessPhotos=function(e){console.log("NOTE: Creation paths should be passing onAccessPhotos function in context")}),Shr.L.tryToCall(i.context.onAccessPhotos,t,"cp_upp")},_formatStyle:function(){return[".shrUPSignIn a {color: #1aaeba; cursor: pointer;}",".shrUPSignIn * {font-weight: 200; box-sizing: border-box;}",".shrUPSignIn form > div {width: 280px; margin: 0 auto; text-align: left;}",".shrUPSignIn .shrUPSignIn-title {margin:25px 0px; font-size: 18px; color: #444;}",".shrUPRoot2 .shrUPSignIn .shrUPSignIn-title {margin-top: 0px;}",".shrUPSignIn INPUT[type=email], .shrUPSignIn INPUT[type=password] {width: 100%; height: 24px; margin: 10px 0; line-height: 24px; border: 1px solid rgb(238, 238, 238); border-radius: 0px !important; box-shadow: none;}",".shrUPSignIn INPUT[type=checkbox] {margin-right: 5px;}",".shrUPSignIn .shrUPSignIn-actions {margin-top: 15px;}",".shrUPSignIn .shrUPSignIn-actions A {height: 32px !important;}",".shrUPSignIn .shrUPSignIn-actions .shrUPSignIn-spinner {display: none;}",".shrUPSignIn .shrUPSignIn-actions .sflyButton {padding: 10px 15px 10px 15px;}",".shrUPSignIn.shrUPSignIn-submit .shrUPSignIn-actions .sflyButton {display: none;}",".shrUPSignIn.shrUPSignIn-submit .shrUPSignIn-actions .shrUPSignIn-spinner {display: block;}",".shrUPSignIn .shrUPSignIn-dontHaveAcc {float: right; margin: 24px 0 0 10px;}",".shrUPSignIn .shrUPSignIn-dontHaveAcc .needsclick {margin-left: 10px;}",".shrUPSignIn .shrUPSignIn-dontHaveAcc .needsclick:hover {text-decoration: underline; margin-left: 10px;}",".shrUPSignIn .shrUPSignIn-forgot:hover {text-decoration: underline;}",".shrUPSignIn .shrUPSignIn-dsList {display: none; margin-top: 30px;}",".shrUPSignIn .shrUPSignIn-dsList OL LI {margin-bottom: 10px; list-style: none;display: inline-block;width: 30px;height: 28px;margin-right: 5px;}",".shrUPSignIn .shrUPSignIn-dsList OL LI.shrUPSrc_myComputer {display: none;}",".shrUPRoot2 .shrUPSignIn .shrUPSignIn-dsList {display: block;}",".shrUPNarrow .shrUPRoot2 .shrUPSignIn form .shrUPSignIn-title {text-align: center; padding-top: 20px;}",".shrUPSignIn .shrUPSignIn-error {display: none;}",".shrUPSignIn .shrUPSignIn-error.shrUPSignIn-show {display: block;}",".shrUPSignIn .shrUPSignIn-valError {display: none;}",".shrUPSignIn .shrUPSignIn-valError.shrUPSignIn-show {display: block;}",".shrUPSignIn .shrUPSignIn-valError UL {color: #cc0000;}",".shrUPSignIn .shrUPSignIn-valError LI {background-image: none;}",".shrUPSignIn .shrUPSignIn-spinner {display: block; position: relative; width: 40px; height: 40px; background-size: contain; ${0} }".substitute([Shr.Style.formatBackground({file:o.IURL("universalpicker/smooth_spinner_orange.gif"),file2x:o.IURL("universalpicker/smooth_spinner_orange@2x.gif"),width:"40px"})]),".shrUPSignIn.shrUPSignIn-ip2 {text-align: center; display: flex; justify-content: center; align-items: center; width: 100%; height: 100%;}",".shrUPRoot2 .shrUPSignIn.shrUPSignIn-ip2 {display: block;}",".shrUPSignIn.shrUPSignIn-ip2 .shrUPSignIn-actions A {height: auto !important;}",".shrUPSignIn.shrUPSignIn-ip2 .shrUPSignIn-actions .sflyButton {padding: 12px 24px 12px 24px}",".shrUPSignIn.shrUPSignIn-ip2 .shrUPSignIn-title {margin:0 0 70px; font-weight: 400}",".shrUPSignIn.shrUPSignIn-ip2 .shrUPSignIn-dsList OL {padding: 0; margin-top: 60px}",".shrUPNarrow .shrUPRoot2 .shrUPSignIn.shrUPSignIn-ip2 .shrUPSignIn-title {padding-top: 14px; margin-bottom: 30px}",".shrUPNarrow .shrUPRoot2 .shrUPSignIn.shrUPSignIn-ip2 .shrUPSignIn-actions {margin-top: 0}",".shrUPNarrow .shrUPRoot2 .shrUPSignIn.shrUPSignIn-ip2 .shrUPSignIn-dsList {margin-top: 10px;}",".shrUPNarrow .shrUPRoot2 .shrUPSignIn.shrUPSignIn-ip2 .shrUPSignIn-dsList OL { margin-top: 30px}",".shrUPNarrow .shrUPRoot2 .shrUPSignIn.shrUPSignIn-ip2 .shrUPSignIn-dsList OL LI {}"].join("\n")}})},function(e,t){var r,n,o,i,s,a,l,c,d,h;n=window.trUPP=window.trUPP||{},o=n&&n.util||Shr,i=Shr.Dialogs.UniversalPicker,s="shrNonVisualSignUpResFrame",c=(a="shrUP")+(l="SignUp")+"-Id",d={_signUp:a+l,_form:a+l+"-form",_title:a+l+"-title",_error:a+l+"-error",_actions:a+l+"-actions",_valError:a+l+"-valError",_spinner:a+l+"-spinner",_text:a+l+"-text",_alreadyMember:a+l+"-alreadyMember",_show:a+l+"-show",_submit:a+l+"-submit"},h=["https:/",Shr.AS.www,"nonVisualSignup","start.sfly"].join("/"),n.SignUp=new i.Folder(void 0,{id:"signup",L10N:{signin:"Sign in",signup:"Sign up",signupTitle:"Sign up to Shutterfly",signUpValError:"Please correct the following errors, then resubmit the form:",firstName:"First Name",lastName:"Last Name",email:"Email",confirmEmail:"Confirm Email",password:"Password (6-10 characters - no spaces)",confirmPassword:"Confirm Password",termsText:"Terms of Use",privacyText:"Privacy Policy",alreadyMember:"Already a member?",signUpText:"By clicking Sign up, you agree to Shutterfly's<br>${0} and ${1}.",signupValFName:"Enter a first name for this account.",signupValLName:"Enter a last name for this account.",signupValidEmail:"Enter a valid email address.",signupEmailMismatch:"The email you entered doesn't match. Please try again.",signupPasswordLen:"Enter a password from ${min} to ${max} characters long with no spaces.",signupPasswordValMismatch:"The two passwords you entered did not match. Please re-enter your password.",signupErrCodeMinus1:"This email address already exists in our system - please use another.",signupErrCodeMinus2:"One of more field values were not specified.  All fields are required.",signupErrCodeDefault:"An error occured while attempting to sign up.  Please try again."},renderStyle:function(e){e(this._formatStyle())},_container:void 0,getContents:function(){return this.pending||(r||(r=this.getUppExt()),Shr.StyleManager.renderStyle(this),this.pending=this._getMarkUp()),Shr.Dom.onContentReady(c,this._onContentReady.bind(this)),window.trUPP.Log.logSignUpLoad(),!1},onblur:function(){r||(r=this.getUppExt()),Shr.ClassToggle.toggle(r.dlgId,r.classNames.noBB,!1),this._form&&Shr.Event.removeEventListener(this._form,"keyup",this.__onKeyup),delete this.__onKeyup},_getMarkUp:function(){var e=function(){var e,t,r={outputFormat:"postMessage",subdomain:window.location.protocol+"//"+window.location.hostname.replace(/\.shutterfly\.com$/i,"")+(window.location.port?":"+window.location.port:""),version:"2"},n=Shr.A.pids[Shr.S.category];Shr.S.our3?(t="OUR3",e="SHR"):n?(t=n,e="SHR"):Shr.Sfly.pid&&(t=Shr.Sfly.pid,e=Shr.Sfly.psid),t&&Object.extend(r,{pid:t}),e&&Object.extend(r,{psid:e});var o=Object.keys(r),i="";return o.forEach(function(e){i+=Shr.Html.formatTag("input",{type:"hidden",name:e,value:r[e]})}),i}(),t=function(e,t,r,n){return Shr.Html.formatTag("input",Object.extend({name:t,placeholder:r,autocomplete:"off",tabindex:"0"},e?{type:e}:{},n?{maxLength:n}:{}))},r=Shr.Html.formatTag("div",{className:d._title},"${signupTitle}".localize(this)),n=Shr.Html.formatTag("div",{className:d._error}),o=Shr.Html.formatTag("div",{className:d._valError}),a=t("","firstName","${firstName}".localize(this),16),l=t("","lastName","${lastName}".localize(this),16),u=t("email","userName","${email}".localize(this)),p=t("email","userName2","${confirmEmail}".localize(this)),m=t("password","password","${password}".localize(this)),g=t("password","password2","${confirmPassword}".localize(this)),f=Shr.Html.formatTag("div",{},a+l+u+p+m+g),_=Shr.Html.formatTag("a",{target:"_blank",href:"http://shutterfly-inc.com/terms.html"},"${termsText}".localize(this)),S=Shr.Html.formatTag("a",{target:"_blank",href:"http://shutterfly-inc.com/privacy.html"},"${privacyText}".localize(this)),b=Shr.Html.formatTag("div",{className:d._text},"${signUpText}".localize(this).substitute([_,S])),y=Shr.Button.format("${signup}".localize(this),{onclick:this._onSubmit.bind(this),tabindex:"0"}),P=Shr.Html.formatTag("span",{className:d._spinner},""),v=Shr.Html.formatTag("span",{},"${alreadyMember}".localize(this)),w=Shr.Html.formatTag("a",{onclick:function(e){new i.View.Event("showSignIn",this._next),delete this._next}.bind(this)},"${signin}".localize(this)),x=document.getElementById(s),U=e+r+n+o+f+b+Shr.Html.formatTag("div",{className:d._alreadyMember},v+w)+Shr.Html.formatTag("div",{className:d._actions},y+P);return this.__frame=x||Shr.Dom.create("iframe",document.body,{id:s,name:s,src:"about:blank",style:"display: none;"}),Shr.Html.formatTag("div",{className:d._signUp,id:c},Shr.Html.formatTag("form",{method:"post",className:d._form,action:h,target:s},Shr.Html.formatTag("div",{},U)))},_onContentReady:function(){try{this._container=document.querySelector("."+d._signUp),this._form=this._container.getElementsByTagName("FORM")[0],Shr.Event.addEventListener(this._form,"keyup",this.__onKeyup=this._onKeyup.bind(this))}catch(e){}},_onSubmit:function(e){var t,r=Shr.Dom.getParentByTag(e,"FORM");this._clearErrMsg(),r&&(t=new Shr.ValidationContext(r),this._onValidate(t,r.elements),t.errors.length?this._showErrMsg(d._valError,t.errors):(this._state=1,this._container&&this._container.classList.add(d._submit),Shr.Event.addEventListener(window,"message",this.__onMessage=this._onMessage.bind(this),!1),this._start=Date.now(),r.submit()))},_onMessage:function(e){var t,o=Date.now()-this._start;if(e=e||window.event,this._form.action.startsWith(e.origin)&&e.source==document.getElementById(this._form.target).contentWindow){if(Shr.Event.removeEventListener(window,"message",this.__onMessage,!1),delete this.__onMessage,t=window.JSON.parse(e.data),Shr.U.status=Shr.U.Status.signedOut,1==t.returnCode)Shr.U.id=Shr.U.uid=Shr.U.un=Shr.U.userId=Shr.U.userName=t.uid,this._state=3,Shr.U.status=Shr.U.Status.signedIn,Shr.U.displayName=Shr.U.dn=Shr.U.userDisplayName="${firstName} ${lastName}".substitute(t),Shr.U.email=t.email,Shr.U.firstName=t.firstName,Shr.U.lastName=t.lastName,Shr.U.oauthToken=t.oauthToken,Shr.U.oauthV2AccessToken=t.oauthV2AccessToken,Shr.U.oflyTicket=t.oflyToken,Shr.U.migrated=t.migrated,i.Log.logMigrationStatus(),n.Log.updateSessionInfo(),Shr.L.tryToCall(Shr.Dialog.context.onSignin,Shr.Dialog.context,t),Shr.ClassToggle.toggle(r.dlg,r.classNames.anonymous,!1),Shr.ClassToggle.toggle(r.dlg,r.classNames.nonMigrated,!Shr.U.migrated),i._startOptimizely(),this._next?(r.stack=[r.stack[0]],this._next.onclick(void 0,!0),delete this._next):(r.stack=r.stack.slice(0,2),r.onBack());else{var s="";switch(t.returnCode){case-1:s="${signupErrCodeMinus1}".localize(this);break;case-2:s="${signupErrCodeMinus2}".localize(this);break;case-3:Shr.N.reload();break;default:s="${signupErrCodeDefault}".localize(this)}this._showErrMsg(d._error,s,!0),window.trUPP.Timing.recordSessionEvents({event:"signUp",err:t.returnCode,session_method:"trupp signup _onMessage"})}i.Log.metric("nonVisualSignup",o,parseInt(t.returnCode)||-666),n.Timing.recordTime("nonVisualSignup",o)}},_onKeyup:function(e){return e=e||window.event||{},("INPUT"==document.activeElement.tagName&&"checkbox"!=document.activeElement.type||Shr.Dom.hasClass(document.activeElement,"sflyButton"))&&13==e.keyCode?(Shr.Event.stop(e),this._onSubmit(e.target),!1):(13==e.keyCode&&document.activeElement.click(),!0)},_onValidate:function(e,t){e.validateRequired("First name",t.firstName,"${signupValFName}".localize(this)),e.validateRequired("Last name",t.lastName,"${signupValLName}".localize(this)),Shr.Sfly.validateEmail(t.userName.value)||e.addError("${signupValidEmail}".localize(this),t.userName),t.userName.value!=t.userName2.value&&e.addError("${signupEmailMismatch}".localize(this),t.userName2),e.validateLength("Password",t.password,10,6,"${signupPasswordLen}".localize(this)),t.password.value!=t.password2.value&&e.addError("${signupPasswordValMismatch}".localize(this),t.password)},_clearErrMsg:function(){var e=document.querySelector("."+d._error),t=document.querySelector("."+d._valError);e&&e.classList.remove(d._show),t&&t.classList.remove(d._show)},_showErrMsg:function(e,t,r){var n=document.querySelector("."+e);if(this._container.classList.remove(d._submit),t){var o="",s=!r&&(t.forEach(function(e){o+=Shr.Html.formatTag("li",{},e)}),o);n.innerHTML=r?t:"${signUpValError}".localize(this)+Shr.Html.formatTag("ul",{},s)}i.Log.metric(["signup","submitErrors"].join("."),t&&0<t.length?t.length:1),window.trUPP.Log.logSignUpError([t]),n&&n.classList.add(d._show)},_formatStyle:function(){return[".shrUPSignUp a {color: #1aaeba; cursor: pointer;}",".shrUPSignUp a:hover {text-decoration: underline;}",".shrUPSignUp * {font-weight: 200; box-sizing: border-box;}",".shrUPSignUp form > div {width: 280px; margin: 0 auto;}",".shrUPSignUp .shrUPSignUp-title {margin: 25px 0; font-size: 18px; color: #444;}",".shrUPSignUp INPUT {width: 100%; height: 24px; margin: 2px 0 !important; padding: 0px 30px 0 7px !important; line-height: 24px; border: 1px solid rgb(238, 238, 238) !important; border-radius: 0px !important; box-shadow: none !important; outline: none;}",".shrUPSignUp .shrUPSignUp-text {margin: 15px 0;}",".shrUPSignUp .shrUPSignUp-actions .shrUPSignUp-spinner {display: none;}",".shrUPSignUp.shrUPSignUp-submit .shrUPSignUp-actions .sflyButton {display: none;}",".shrUPSignUp.shrUPSignUp-submit .shrUPSignUp-actions .shrUPSignUp-spinner {display: block;}",".shrUPSignUp .shrUPSignUp-alreadyMember {float: right; margin: 9px 0 0 10px;}",".shrUPSignUp .shrUPSignUp-alreadyMember A {margin-left: 10px;}",".shrUPSignUp .shrUPSignUp-alreadyMember A:hover {text-decoration: underline}",".shrUPSignUp .shrUPSignUp-error {display: none;}",".shrUPSignUp .shrUPSignUp-error.shrUPSignUp-show {display: block;}",".shrUPSignUp .shrUPSignUp-valError {display: none;}",".shrUPSignUp .shrUPSignUp-valError.shrUPSignUp-show {display: block;}",".shrUPSignUp .shrUPSignUp-valError UL {color: #cc0000;}",".shrUPSignUp .shrUPSignUp-spinner {display: block; position: relative; width: 40px; height: 40px; background-size: contain; ${0} }".substitute([Shr.Style.formatBackground({file:o.IURL("universalpicker/smooth_spinner_orange.gif"),file2x:o.IURL("universalpicker/smooth_spinner_orange@2x.gif"),width:"40px"})])].join("\n")}})},function(e,t,r){var n=Shr.Dialogs.UniversalPicker,o=r(0)("shrUP","trUPP"),i=Shr.DURL;n.View={start:function(){var e=[],t={bin:o._bin,navbar:o._navbar,sidebar:o._sidebar,content:o._content,vt:o._content,zoom2:o._zoom,search:o._search,bgToast:o._bgToast};this._started=!0,this._defaultWidgetsLoaded=!1,this._widgets=[],this._queue=[],this._dlg=document.getElementById(n._dlgId),Shr.ClassToggle.toggle(this._dlg,o._newPP,!0),"vt"in n.View.widgets||(n.View.widgets.vt=i("newpp_vt.js")),"zoom2"in n.View.widgets||(n.View.widgets.zoom2=i("newpp_zoom2.js")),"search"in n.View.widgets||(n.View.widgets.search=i("newpp_search.js")),Shr.L.forEach(n.View.widgets,function(t,r){e.push("Shr.Dialogs.UniversalPicker.View.widgets."+r)}),function(){Shr.ScriptManager.batchLoad(n._utilities._toScriptUrlList(e),{async:!0,cb:function(){Shr.L.forEach(n.View.widgets,function(e,r){var o;try{r in t&&(o=n.View._dlg.querySelector("."+t[r])),n.View.addWidget(e,o)}catch(e){window&&window.trUPP&&window.trUPP.Timing&&window.trUPP.Timing.recordInfo("upp_exception",{ex_message:e.message,ex_stack:e.stack})}}),this._defaultWidgetsLoaded=!0}.bind(this)})}.call(this),delete n.View._state._signin,this._continue()},getContentProperty:function(e){var t=n.View._getContent();return t&&t[e]},addWidget:function(e,t){if(-1==Shr.Array.indexOf(n.View._widgets,e)){e.context=e.context||{},Object.merge(e.context,{L10N:Object.merge({},n.context.L10N&&n.context.L10N.widgets&&n.context.L10N.widgets[e.id])});try{e.init(t,n._getUppExt())}catch(e){window&&window.trUPP&&window.trUPP.Timing&&window.trUPP.Timing.recordInfo("upp_exception",{ex_message:e.message,ex_stack:e.stack}),n._logsmith(n._logsmithMetricName(["View","addWidget"._wodget.id||"unknown","init","error"].join(".")),Date.now()-n._openedTime)}finally{n.View._widgets.push(e),Shr.StyleManager.renderStyle(e)}}},_focusFirstItemLastEvent:!1,_update:function(){var e;try{if(n._folder!=n.View._state._folder&&(new n.View.Event("folderChange",n._folder),n.View._state._folder=n._folder),function(){var e,t,r=function(e,t){return e.width!=t.width||e.height!=t.height};try{e={width:document.documentElement.clientWidth,height:document.documentElement.clientHeight},r((t=n.View._state._size)._new,e)?(t._new=e,t._timestamp=Date.now()):r(t._old,t._new)&&Date.now()>t._timestamp+t._delay&&(new n.View.Event("resize",Object.extend({},t._new),Object.extend({},t._old)),t._old=t._new)}catch(e){window&&window.trUPP&&window.trUPP.Timing&&window.trUPP.Timing.recordInfo("upp_exception",{ex_message:e.message,ex_stack:e.stack}),n._logsmith(n._logsmithMetricName(["View","Event","update","resize","error"].join(".")),Date.now()-n._openedTime)}}(),n.View._defaultWidgetsLoaded&&n.View._queue.length){do{if(e=n.View._queue.shift(),n.context.bypass&&"focusFirstItem"==e.type&&"myComputer"==e.args[0].id&&(n.View._focusFirstItemLastEvent=!0),n.context.bypass&&n.View._focusFirstItemLastEvent&&(n.View._focusFirstItemLastEvent=!1,window.setTimeout(n._onDone,250)),e.type in n.View.Event)try{n.View.Event[e.type].apply(e,e.args)}catch(t){window&&window.trUPP&&window.trUPP.Timing&&window.trUPP.Timing.recordInfo("upp_exception",{ex_message:t.message,ex_stack:t.stack}),n._logsmith(n._logsmithMetricName(["View","Event",e.type,"default","error"].join(".")),Date.now()-n._openedTime)}Shr.L.forEach(n.View._widgets,function(t){if(e.type in(t.Event||{}))try{t.Event[e.type].apply(e,e.args)}catch(r){n._logsmith(n._logsmithMetricName(["View","Event",e.type,t.id||"unknown","error"].join(".")),Date.now()-n._openedTime)}})}while(n.View._queue.length);new n.View.Event("update")}}catch(e){window&&window.trUPP&&window.trUPP.Timing&&window.trUPP.Timing.recordInfo("upp_exception",{ex_message:e.message,ex_stack:e.stack})}finally{n.isOpen&&n.View._continue()}},_getContent:function(){return n.View._dlg&&n.View._dlg.querySelector("."+o._folderContent)},_continue:function(){window.requestAnimationFrame(n.View._update)},_started:!1,_queue:[],_widgets:[],_state:{_folder:null,_source:{},_size:{_old:{width:0,height:0},_new:{width:0,height:0},_delay:250,_timestamp:Date.now()}},widgets:{navbar:i("newpp_navbar.js"),sidebar:i("newpp_sidebar.js"),bin:i("newpp_bin.js"),zoom:i("newpp_zoom.js"),content:i("newpp_content.js")},localStorage:function(e,t){t=t||"setItem",e=e||"http://site.blaw.dev.shutterfly.com",n._utilities.localStorage[t]("Shr.Dialogs.UniversalPicker",[e,"shr/c/dialogs/universalpicker.js"].join("/")),Shr.L.forEach(["navbar","sidebar","bin","zoom","content","vt","zoom2","search"],function(r){n._utilities.localStorage[t]("Shr.Dialogs.UniversalPicker.View.widgets."+r,[e,"shr/c/dialogs/newpp_"+r+".js"].join("/"))}),-1!=e.indexOf("shallin")&&n.View._changeStaticAndImageBaseUrls(e)},_changeStaticAndImageBaseUrls:function(e){try{if(!e)return;e.indexOf("//"),[e,"shr/images/"].join("/")}catch(e){Console.write("Error setting urls: "+e.message)}},setScoreUrl:function(e){var t="dist/score.js";try{n._utilities.localStorage.setItem("Shr.Score.truPP.src",[e,t].join("/")),n._utilities.localStorage.setItem("Shr.Score.trUPP.src",[e,t].join("/"));var r=-1==e.indexOf("//");Shr.AS.staticServer=r?e:e.split("//")[1],n._utilities.localStorage.setItem("Shr.AS.staticServer",Shr.AS.staticServer);var o=[e,"dist/assets/"].join("/");Shr.A.imagesBase=r?[window.location.protocol,o].join("//"):o,n._utilities.localStorage.setItem("Shr.A.imagesBase",Shr.A.imagesBase),n._utilities.localStorage.setItem("truPPLocalDebuging","true"),n._utilities.localStorage.setItem("Shr.Score.truPP","true"),n._utilities.localStorage.setItem("Shr.Score.trUPP","true"),n._utilities.localStorage.setItem("Shr.A.codeBase",e+"/dist/")}catch(e){}}}},function(e,t,r){var n=Shr.Dialogs.UniversalPicker,o=r(0)("shrUP","trUPP");n.View.Event=Object.extend(function(e){n.View._started&&(this.type=e,this.args=Array.prototype.slice.call(arguments,1),"folderClick"==e&&this.args.push({scrollTop:n.View.getContentProperty("scrollTop")}),n.View._queue.push(this))},{folderChange:function(e){var t,r=function(e){return-1!=(n._root.folders||[]).indexOf(e)};e.type==n.Folder.Type.source&&"myComputer"==e.id&&n.View._expandSidebar&&(window.setTimeout(function(){new n.View.Event("expandSidebar")},100),delete n.View._expandSidebar),t=function(e){do{if(e&&r(e))return e.id;if(e.parent&&r(e.parent)&&e.parent.id==n._sources.sfly.id)return[n._sources.sfly.id,e.id].join("_");e=e.parent}while(e);return""}(e),n.View._state._source.id!=t&&(n.View._state._source={id:t,_openTime:Date.now(),_selectionTime:void 0})},titleChange:function(e){},showSignUp:function(e){n._root2._isSignin=!1,n._stack=[n._stack[0]],n._signup._next=e,n._signup.onclick()},showSignIn:function(e){n._root2._isSignin=!0,n._stack=[n._stack[0]],n._signin._next=e,n._signin.onclick()},refresh:function(e,t){var r=n.View._dlg;e==n._folder&&(Shr.ClassToggle.toggle(r,o._xfer,e.type==n.Folder.Type.importing),Shr.ClassToggle.toggle(r,o._import,e.type==n.Folder.Type.importing),Shr.ClassToggle.toggle(r,o._done,e.type==n.Folder.Type.done),Shr.ClassToggle.toggle(r,o._ok,e.type==n.Folder.Type.ok)),!Shr.U.lifeUid&&Shr.U.id&&Shr.U.getIdToken().then(function(e){n._sources.sfly.getContents(e,!0)}).catch(function(e){}),Shr.U.lifetouch&&Shr.ClassToggle.toggle(r,o._hideLifetouch,!1)},update:Object.extend(function(){var e=n.View._state._signin=n.View._state._signin||{_status:Shr.U.status,_time:0,_polling:!1};if(Shr.Score&&!n.isPhotosWebClient){if(Shr.U.useNewAuth)return;Date.now()-e._time>n.View.Event.update.signinTimeoutInterval&&(e._time=Date.now(),(Shr.U.status==Shr.U.Status.signedIn||Shr.U.id)&&(Shr.U.status=Shr.U.Status.unknown,Shr.Score.getUserInfo(function(t){t&&(n._logsmith(n._logsmithMetricName(["keepAlive",t.status].join(".")),Date.now()-e._time),t.status!=Shr.U.Status.signedIn&&(e._status=Shr.U.status=t.status,t.status==Shr.U.Status.signedOut&&(["id","uid","userId","un","userName","displayName","userDisplayName","firstName","lastName","oauthToken","oauthV2AccessToken","oflyTicket","migrated"].forEach(function(e){delete Shr.U[e]}),Shr.L.tryToCall(n.context.onSignout,n.context,t),n._clearSelection(),Shr.ClassToggle.toggle(n.View._dlg,o._anonymous,!0),n.refresh(n._folder=n._root))))})))}},{signinTimeoutInterval:n._utilities.localStorage.getItem("Shr.Dialogs.UniversalPicker.View.Event.update.signinTimeoutInterval")||12e5}),folderClick:function(e,t,r){Object.extend(e,r)},back:function(e){window.setTimeout(function(){var t=n.View._getContent();t&&"scrollTop"in e&&Object.extend(t,{scrollTop:e.scrollTop})},100)},open:function(){},close:function(){window.setTimeout(function(){n.View._widgets=[]},0)},newPPZoomView:function(e){n.View._newPPZoomView=e},datasourceListReady:function(e){},promisesAvailable:function(){this._promisesAvailable=!0},selectionChange:function(e,t,r,o){var i;t&&!n.View._state._source._selectionTime&&(n.View._state._source._selectionTime=Date.now(),i=["selection",n.View._state._source.id,n.vt&&n._folder.useVerticalTimeline?"VT":"nonVT"].join("."),n._logsmith(n._logsmithMetricName(i),n.View._state._source._selectionTime-n.View._state._source._openTime))},folderContent:function(e,t){var r=t&&t.lastChild;e==n._folder&&r&&r.classList.contains(o._folderContent)&&r.parentNode.removeChild(r)},resize:function(e,t){try{var r=Shr.WindowEx.hasWidth(481)&&Shr.WindowEx.hasHeight(481),i=r&&!Shr.WindowEx.hasWidth(769),s=r!==n._wideLayout,a=document.querySelector("."+o._dialog);i?a.classList.add(o._medium):a.classList.remove(o._medium),s&&(n._wideLayout=r,n._wideLayout?(a.classList.remove(o._narrow),a.classList.add(o._wide)):(a.classList.remove(o._wide),a.classList.add(o._narrow)),new n.View.Event("layoutChange",{newDim:e,_oldDim:t,_isWide:n._wideLayout}),n.Log.metric(["upp","layoutChange",n._wideLayout?"wide":"narrow"].join("."),Date.now()))}catch(e){}},launchNewZoom:function(e,t){var r;e&&e.items&&0<e.items.length&&-1!=t&&(r=n.View._dlg.querySelector("."+o._zoom))?(r.classList.remove(o._disabled),e.addZoomClass&&n.View._dlg.classList.add(e.addZoomClass),n._newZoomView||n.Log.metric(["zoom_widget","zoomIn"].join("."),Date.now()),n._newZoomView=!0,n._zoomedIndex=t,n._zoomedFolder=e,new n.View.Event("newZoomIn",e.items,t)):new n.View.Event("newZoomOut")},newZoomNext:function(e){n._zoomedIndex=e,n._newZoomView&&(n._zoomedFolder,n._folder),n.Log.metric(["zoom_widget","zoomNext"].join("."),Date.now())},newZoomPrev:function(e){n._zoomedIndex=e,n._newZoomView&&(n._zoomedFolder,n._folder),n.Log.metric(["zoom_widget","zoomPrev"].join("."),Date.now())},newZoomSelectionChange:function(e,t,r){n._newZoomView&&n._zoomedFolder===n._folder&&n._onSelect(t,e),r?n._zoomedIndex=e:n.Log.metric(["zoom_widget","zoomSelectionChange",t?"select":"unselect"].join("."),Date.now())},newZoomOut:function(e){var t=n.View._dlg.querySelector("."+o._zoom);t&&t.classList.add(o._disabled),n._zoomedFolder&&n._zoomedFolder.addZoomClass&&n.View._dlg.classList.remove(n._zoomedFolder.addZoomClass),n._newZoomView&&n.Log.metric(["zoom_widget","zoomOut"].join("."),Date.now()),n._folder===n._zoomedFolder&&!n._folder.useVerticalTimeline&&n._folder.items&&0<n._folder.items.length&&void 0!==e&&0<=e&&e<n._folder.items.length&&n.Grid._bringElementInViewport(e),n._newZoomView=!1,n._zoomedFolder=null,n._zoomedIndex=-1}})},function(e,t,r){!function(){var e,t=Shr.Dialogs.UniversalPicker,n=r(0)("shrUP","trUPP");Shr.DURL,t._newGrid=!0,t.Grid={format:function(e,r){var o,i,s=(r.className||"").split(" ");return n._loading,e=Object.extend({},e),r=Object.extend({},r),s.push(t.Grid._className._grid),e.noSelect&&s.push(n._noSelect),e.noCrop&&s.push(n._noCrop),e.noZoom&&s.push(n._noZoom),r.id=r.id||Shr.Dom.getUniqueId(),Shr.StyleManager.renderStyle(t.Grid),i=Shr.Array.map(e.items||[],function(e){return e.separator&&"formatContent"in e?e.formatContent():t.Item.prototype.formatContent.apply(e)}).join(""),r.className=s,o=Shr.Html.formatTag("ol",r,i),Shr.Dom.onContentReady(r.id,t.Grid._onReady.bind(t.Grid,e,r,Date.now())),o},add:function(e,r,n,o){try{var i,s,a=Shr.Dom.get(t._dlgId).getElementsByClassName(t.Grid._className._grid)[0];a&&t._folder==r&&(n=n||r.items.length-1,a._opts.items[a._opts.items.length-1].separator&&a._opts.items.pop(),s=[].concat(t._selection),e.forEach(function(e){o||a._opts.items.push(e),n&&(t._verifyAndSelectItem(e,n,s),n++),i=a.appendChild(document.createElement("li")),Shr.Dom.replaceNode(i,e.formatContent()),a._opts._list=a.getElementsByTagName("li"),a._opts._list[a._opts._list.length-1]._item=e}))}catch(e){return!1}return!0},renderStyle:function(e){t.Grid._styleParams.thumbnailSize=t._wideLayout?"160px":"98px",e(t.Grid._formatStyle())},_isZoomed:function(){return Shr.Dom.hasClass(Shr.Dom.get(t._dlgId),n._detail)},_onClick:function(e){this._opts._click=Date.now();var r,n,o,i=t.Grid._isZoom(this,e),s=t.Grid._isZoomed(),a=s?this:t.Grid._elementFromPoint(this,e),l=s&&this.getElementsByClassName(t.Grid._className._zoomed)[0],c=s&&t.Grid._isPrev(this,e),d=s&&!c&&t.Grid._isNext(this,e),h=Shr.Dom.hasClass(s?l:a&&a.parentNode,t.Grid._className._disabled),u=Shr.Event.getEvent(e),p=!this._opts.singleSelect&&u.shiftKey&&-1!=this._opts._anchor,m=u.ctrlKey;return e.target||(e.target=e.srcElement),a?this._opts.noSelect?s?i?this._opts._updateInfo._zoomMode=t.Grid._zoomMode._zoomOut:(c||d)&&(this._opts._updateInfo._zoomMode=c?t.Grid._zoomMode._zoomPrevious:t.Grid._zoomMode._zoomNext):t.useZoom2?t._loadNewZoom(this._opts._list,a):(this._opts._updateInfo._zoomIndex=Array.prototype.indexOf.call(this._opts._list,a.parentNode),this._opts._updateInfo._zoomMode=t.Grid._zoomMode._zoomIn):s?c||d?this._opts._updateInfo._zoomMode=c?t.Grid._zoomMode._zoomPrevious:t.Grid._zoomMode._zoomNext:i?this._opts._updateInfo._zoomMode=t.Grid._zoomMode._zoomOut:!h&&e.target&&e.target.tagName.match(/IMG|DIV/)&&(r=l.querySelector("IMG"),n=parseInt(Shr.Dom.getComputedStyle(r,"paddingTop")),o=parseInt(Shr.Dom.getComputedStyle(r,"paddingLeft")),e.offsetX>=r.clientLeft+o&&e.offsetX<r.clientLeft+o+r.width&&e.offsetY>=r.clientTop+n&&e.offsetY<r.clientTop+n+r.height&&t.Grid._selectItem(this,r.parentNode)):i?t.useZoom2?t._loadNewZoom(this._opts._list,a):(this._opts._updateInfo._zoomIndex=Array.prototype.indexOf.call(this._opts._list,a.parentNode),this._opts._updateInfo._zoomMode=t.Grid._zoomMode._zoomIn):h||t.Grid._selectItem(this,a,p,m):Console.write("No _elementFromPoint"),!1},_onTouchStart:function(e){var t=e.changedTouches[0];this._opts._touchStart={t:Date.now(),x:t.clientX,y:t.clientY}},_thresholdX:25,_onTouchEnd:function(e){var r=e.changedTouches[0],n=this._opts,o=n._touchStart,i=n._updateInfo,s=(Date.now(),o.t,r.clientX-o.x);return r.clientY,o.y,!!(t.Grid._isZoomed()&&Math.abs(s)>t.Grid._thresholdX)&&(i._zoomMode=s<0?t.Grid._zoomMode._zoomNext:t.Grid._zoomMode._zoomPrevious,Shr.Event.stop(e),!0)},_onTouchMove:function(e){e.changedTouches[0],this._opts._touchMove=Date.now()},_updateTouchEventTiming:function(e){var t=e._opts||{},r=t._touchStart||0,n=t._touchEnd||r,o=t._touchMove||r,i=t._click||0,s=i-n;e.parentNode.setAttribute("debug","start: ${0} end: ${1} move: ${2} click: ${3} lag: ${4}".substitute([r%1e4,n%1e4,o%1e4,i%1e4,s]))},_zoomMode:{_zoomIn:0,_zoomOut:1,_zoomPrevious:2,_zoomNext:3},_selectItem:function(e,r,o,i){var s,a=e&&e._opts||{_anchor:-1},l="number"==typeof r&&a?a._list[r]:"DIV"==r.tagName?r.parentNode:r,c=Shr.Dom.hasClass(l,n._shrSelected),d=e?Shr.Array.indexOf(e._opts._list,l):-1,h=[d];if(-1!=d){if(o&&(c=!1,-1!=a._anchor))for(h=[],s=Math.min(d,a._anchor);s<=Math.max(d,a._anchor);s++)a.items[s].separator||a.items[s].selected||a.items[s].disabled||h.push(s);h.length&&Shr.L.tryToCall(e._opts.onSelect,!c,Shr.Array.map(h,function(r){return t.Grid._realIndex(e,r)}))&&(a._anchor=d,Shr.L.forEach(h,function(e){var t=a._list[e];Shr.ClassToggle.toggle(t,n._loading,!1)}))}},_onMouseMove:function(e){var r=t.Grid._isZoom(this,e),o=t.Grid._isZoomed(),i=o&&t.Grid._isPrev(this,e),s=o&&!i&&t.Grid._isNext(this,e),a=(Shr.Dom.getChildByClass(this,n._zoomHover),t.Grid._elementFromPoint(this,e));return Shr.ClassToggle.toggle(this,t.Grid._className._prevHover,i),Shr.ClassToggle.toggle(this,t.Grid._className._nextHover,s),Shr.ClassToggle.toggle(a.parentNode,t.Grid._className._zoomHover,r),!0},_onMouseDown:function(e){return t.Grid._isZoom(this,e),!1},_onMouseUp:function(){return!1},_bringElementInViewport:function(e){try{var r=document.querySelector("."+n._folderContent),o=r.querySelector("."+t.Grid._className._grid),i=this._realIndex(o,e),s=Math.round(r.scrollTop),a=Math.min(o.scrollHeight,r.clientHeight),l=o.children[i];d=-1,(c=l).offsetTop+c.offsetHeight>s+a?d=r.scrollTop+26+(c.offsetTop+c.offsetHeight)-(s+a):c.offsetTop<s&&(d=c.offsetTop+26),-1!==d&&window.setTimeout(function(){r.scrollTop=d},0)}catch(e){}var c,d},_onScroll:function(e){return this._opts._scrollTop=Math.round((e.target||e.srcElement).scrollTop),!0},_onLoad:function(){return!1},_elementFromPoint:function(e,t){for(var r=document.elementFromPoint(t.clientX,t.clientY);r&&r!=e&&"DIV"!=r.tagName;)r=r.parentNode;return r&&"DIV"==r.tagName&&r},_isZoom:function(e,r,n){var o,i,s,a,l=!1,c=(e._opts,t.Grid._elementFromPoint(e,r)),d=t.Grid._isZoomed();return c&&(o=c.getBoundingClientRect(),i=d?28:19,s=Math.round(o.right-r.clientX-i),a=Math.round(r.clientY-o.top-i),l=Math.sqrt(s*s+a*a)<=(Shr.B.isTouch?22:12.5)),l},_isPrev:function(e,t){var r=e.getBoundingClientRect(),n=e.clientWidth-25,o=Math.round(e.clientHeight/2),i=Math.round(r.right-t.clientX-n),s=Math.round(t.clientY-r.top-o);return Math.sqrt(i*i+s*s)<=(Shr.B.isTouch?22:12.5)},_isNext:function(e,t){var r=e.getBoundingClientRect(),n=Math.round(e.clientHeight/2),o=Math.round(r.right-t.clientX-23),i=Math.round(t.clientY-r.top-n);return Math.sqrt(o*o+i*i)<=(Shr.B.isTouch?22:12.5)},_img:Object.extend(document.createElement("img"),{src:Shr.ImgSrc.blank2}),_realIndex:function(e,t){var r=0;return Shr.L.forEach(e&&e._opts&&e._opts.items,function(e,n){return e.separator&&r++,n<t}),t-r},_gridIndex:function(e,t){for(var r=-1,n=0;r-n<t;)r++,e&&e._opts&&e._opts.items[r]&&e._opts.items[r].separator&&n++;return r},_selectionChanged:function(e,r){t.Grid._selectionChanges=t.Grid._selectionChanges.concat(Shr.Array.map(r,function(r){return t.Grid._gridIndex(e,r)}))},_update:function(e){var r,o,i,s,a,l,c,d,h=window._opts=this._opts||{},u=h._updateInfo||{},p=!1,m=function(){for(var e=this.parentNode&&this.parentNode.parentNode;e&&e.scrollHeight<=e.clientHeight&&e.parentNode&&e!=document.body;)e=e.parentNode;return e||{scrollTop:0,clientHeight:0,scrollHeight:0,parentNode:{scrollHeight:0}}}.bind(this)(),g=Math.round(m.scrollTop),f=Math.max(0,g-m.clientHeight),_=Math.min(m.scrollHeight,g+2*m.clientHeight)||m.parentNode&&m.parentNode.scrollHeight||m.parentNode&&m.parentNode.clientHeight||Number.MAX_VALUE,S=h._visible||[],b=function(e){return t.isOpen&&!e._item.separator&&e.offsetTop+e.clientHeight>=f&&e.offsetTop<_},y=function(e,r){var o,i,s;return r&&e&&e._item&&(i=e._item.getThumbnailUrl(this.clientWidth,this.clientHeight,function(t){i!=t&&y(e,r)},!0)),(o=e._item.getThumbnailUrl(parseInt(t.Grid._styleParams.thumbnailSize)))||(o=Shr.ImgSrc.blank2,e._item.getThumbnailUrl(parseInt(t.Grid._styleParams.thumbnailSize),parseInt(t.Grid._styleParams.thumbnailSize),function(){y(e,r)})),e.firstChild.firstChild?((T=e.firstChild.firstChild).src=o,r&&i!=o?(e._item.aspectRatio||e._item.width&&e._item.height,window.setTimeout(function(){Object.extend(T,{onload:function(){T.style.height="auto"},src:i})},0)):r?(T.style.width="",T.style.height=""):Shr.Dom.setStyle(T,{width:"",height:""})):(e.firstChild.appendChild(T=Object.extend(t.Grid._img.cloneNode(),{onload:function(){window.trUPP.Timing.getEventFlag("firstPhoto")||window.trUPP.Timing.logAlbumLoad(t._folder),e._item.width||e._item.height||(e._item.aspectRatio=this.height?this.width/this.height:1)},src:i||o})),e._item.tooltip&&T.setAttribute("title",e._item.tooltip),e._item.rating&&((s=document.createElement("span")).className=t.Grid._className._rating,e.firstChild.appendChild(s))),Shr.ClassToggle.toggle(e.firstChild.firstChild,n._empty,!1),e}.bind(this),P=function(){var e=[this.clientWidth,this.clientHeight].join("x"),t=e!=u._lastSize;return u._lastSize=e,t}.bind(this),v=function(e){Shr.Dom.setStyle(e.parentNode,{width:"",height:"",marginTop:""})},w=0,x=h._list||[],U=(Date.now(),"_zoomIndex"in u&&x[u._zoomIndex]),T=U&&U.getElementsByTagName("IMG")[0];try{if(u._zoomMode==t.Grid._zoomMode._zoomPrevious||u._zoomMode==t.Grid._zoomMode._zoomNext){for(p=!0,r=u._zoomIndex,o=U;a=u._zoomMode==t.Grid._zoomMode._zoomNext?(r=r+1>=x.length?0:r+1)+1:(r=r-1<0?x.length-1:r-1)-1,(o=h._list[r])._item.separator;);r!=u._zoomIndex&&(Shr.ClassToggle.toggle(U,t.Grid._className._zoomed,!1),y(U,!1),0<=a&&a<x.length&&!x[a]._item.separator&&y(x[a],!1),v(U.getElementsByTagName("IMG")[0]),T=(U=o).getElementsByTagName("IMG")[0],u._zoomIndex=r,u._zoomMode=t.Grid._zoomMode._zoomIn)}if(u._zoomMode==t.Grid._zoomMode._zoomIn?(h&&Shr.L.tryToCall(h.onZoom,this,t.Grid._realIndex(this,u._zoomIndex),!0,p),Shr.ClassToggle.toggle(U,t.Grid._className._zoomed,!0),y(U,!0),u._lastPos=-1,u._lastSize=""):u._zoomMode==t.Grid._zoomMode._zoomOut&&(v(T),Shr.ClassToggle.toggle(U,t.Grid._className._zoomed,!1),h&&Shr.L.tryToCall(h.onZoom,this,t.Grid._realIndex(this,u._zoomIndex),!1),y(U,!1)),delete u._zoomMode,i=t.Grid._isZoomed(),s=P(),i)T&&s&&y(U,!0),d=((c=(l=T).parentNode).parentNode.parentNode.clientHeight-l.clientHeight)/2,parseFloat(c.style.width)!=l.clientWidth&&(c.style.width=l.clientWidth+"px"),parseFloat(c.style.height)!=l.clientHeight&&(c.style.height=l.clientHeight+"px"),parseFloat(c.style.marginTop)!=d&&(c.style.marginTop=d+"px");else if(g!=h._updateInfo._lastPos||s){for(h._updateInfo._lastPos=g,h._visible=[],Shr.L.forEach(S,function(e){var r;e._item.separator||(b(e)?h._visible.push(e):Shr.Array.remove(h._visible,(r=e,Shr.Dom.replaceNode(r.firstChild.firstChild,t.Grid._img.cloneNode()),r)))}.bind(this)),w=0;x[w]&&(x[w]._item.separator||!b(x[w])&&!x[w].separator&&-1==h._visible.indexOf(x[w]));)w++;for(;w<x.length&&(x[w]._item.separator||b(x[w]));)x[w]._item.separator||-1!=h._visible.indexOf(x[w])||h._visible.push(y(x[w])),w++}for(w=0;w<t.Grid._selectionChanges.length;w++)-1!=t.Grid._selectionChanges[w]&&Shr.ClassToggle.toggle(h._list[t.Grid._selectionChanges[w]],n._shrSelected,!!h._list[t.Grid._selectionChanges[w]]._item.selected);t.Grid._selectionChanges=[]}catch(e){}finally{t.isOpen&&(t.Grid._animationFrame=window.requestAnimationFrame(t.Grid._update.bind(this)))}},_onReady:function(e,r,o){var i=Shr.Dom.get(r.id);Shr.Event.addEventListener(i,"mousemove",t.Grid._onMouseMove.bind(i)),Shr.Event.addEventListener(i,"mousedown",t.Grid._onMouseDown.bind(i)),Shr.Event.addEventListener(i,"mouseup",t.Grid._onMouseUp.bind(i)),Shr.Event.addEventListener(i,"load",t.Grid._onLoad.bind(i),!0),Shr.Event.addEventListener(i,"click",t.Grid._onClick.bind(i)),Shr.Event.addEventListener(i,"touchstart",t.Grid._onTouchStart.bind(i)),Shr.Event.addEventListener(i,"touchend",t.Grid._onTouchEnd.bind(i)),Shr.Event.addEventListener(i,"touchmove",t.Grid._onTouchMove.bind(i)),i._opts=e,i._opts._anchor=-1,t.Grid._img.className=n._empty,i._opts._list=i.getElementsByTagName("li"),i._opts._updateInfo={},t.Grid._selectionChanges=[],Shr.L.forEach(i._opts._list,function(t,r){t._item=e.items[r]}),i._opts._scrollTop=0,t.useNewViewEngine||(t.Grid._animationFrame&&window.cancelAnimationFrame(t.Grid._animationFrame),t.Grid._animationFrame=window.requestAnimationFrame(t.Grid._update.bind(i))),Shr.L.tryToCall(i._opts.onLoad,i)},_className:(e={_grid:"shrUPG"},Object.extend(e,{_zoomHover:e._grid+"ZH",_prevHover:e._grid+"PH",_nextHover:e._grid+"NH",_zoomed:e._grid+"Zoomed",_zoomingIn:e._grid+"ZoomingIn",_zoomingOut:e._grid+"ZoomingOut",_mode:{2:e._grid+"ZoomPrev",3:e._grid+"ZoomNext"},_rating:e._grid+"Rating",_disabled:"shrDisabled",_separator:"shrSeparator"})),_styleParams:{thumbnailSize:"160px",thumbnailSpacing:"4px",color:{border:"#d2d9e0"},bg:{}},_selectionChanges:[],_formatStyle:function(){var e=[".shrUPG {list-style: none; padding: 0; line-height: normal; font-size: 0;}",".shrUPG {margin-left: 0;}",".shrUPG {-webkit-user-select: none;}",".shrUPG LI {display: inline-block;}",".shrUPG LI {width: ${0}; height: ${0};}".substitute([Shr.Style.add(t.Grid._styleParams.thumbnailSize,"2px")]),".shrUPG LI {line-height: ${thumbnailSize};}",".shrUPG LI {margin: ${thumbnailSpacing};}",".shrUPG LI {text-align: center;}",".shrUPG LI > DIV {display: inline-block; position: relative;}",".shrUPG LI > DIV {line-height: normal; vertical-align: middle;}",".shrUPG LI:focus {outline: none;}",".shrUPG LI:focus > DIV, .shrUPG LI > DIV:hover {box-shadow: 0 0 0 2px #FFF, 0 0 0 4px ${color.border};}",".shrUPG LI IMG {width: auto; height: auto;}",".shrUPG LI IMG {vertical-align: middle;}",".shrUPG LI IMG {max-width: ${thumbnailSize}; max-height: ${thumbnailSize};}",".shrUPG LI IMG {border: 1px solid ${color.border};}",".shrUPG LI DIV:empty {width: 100%; height: 100%;}",".shrUPG LI DIV:empty {background-color: #efefef;}",".shrUPG LI IMG {background-color: #eee;}",'.shrUPG LI IMG[src="${0}"] {width: ${1}; height: ${1};}'.substitute([Shr.ImgSrc.blank2,t.Grid._styleParams.thumbnailSize]),".shrUPG LI IMG.shrEmpty {width: 100%; height: 100%;}",".shrUPG LI > DIV:before, .shrUPG LI > DIV:after {content: ''; display: block; width: 25px; height: 25px;}",".shrUPG LI > DIV:before, .shrUPG LI > DIV:after {position: absolute; top: 7px;}",".shrUPG LI > DIV:before, .shrUPG LI > DIV:after {${bg.desktop};}",".shrUPG LI > DIV:before {top: 5px; right: 2px;}",".shrUPDetail .shrUPG LI > DIV:before {top: 6px; right: 5px;}",".shrUPG LI > DIV:before {background-position: 0 0;}",".shrUPG LI.shrUPGZH > DIV:before {background-position: 0 -50px;}",".shrUPDetail .shrUPG LI > DIV:before {background-position: 0 -100px;}",".shrUPDetail .shrUPG LI.shrUPGZH > DIV:before {background-position: 0 -150px;}",".shrUPG LI > DIV:after {left: 7px;}",".shrUPG LI > DIV:after {background-position: -50px 0;}",".shrUPG LI.shrSelected > DIV:after {background-position: -50px -149px;}",".shrUPG LI > DIV:hover:after {background-position: -50px -50px;}",".shrUPG LI.shrSelected > DIV:hover:after {background-position: -50px -149px;}",".shrUPG LI.shrDisabled > DIV:after, .shrUPG LI.shrDisabled > DIV:before {display: none;}",".shrUPG LI.shrSelected > DIV:after, .shrUPG LI.shrSelected > DIV:before {display: block;}",".shrUPDetail .shrUPG {height: 100%;}",".shrUPDetail .shrUPG {background-color: #3d3d3d;}",".shrUPDetail .shrUPG LI {display: none; margin: 0;}",".shrUPDetail .shrUPG LI.shrUPGZoomed {display: inline-block; width: 100%;}",".shrUPDetail .shrUPG LI.shrUPGZoomed DIV {position: static; margin: auto;}",".shrUPDetail .shrUPG LI.shrUPGZoomed DIV {box-shadow: none;}",".shrUPDetail .shrUPG LI.shrUPGZoomed DIV {text-align: left;}",".shrUPDetail .shrUPG LI.shrUPGZoomed DIV:before, .shrUPDetail .shrUPG LI.shrUPGZoomed:not(.shrDisabled) DIV:after {position: relative; display: inline-block; z-index: 2;}",".shrUPDetail .shrUPG LI.shrUPGZoomed DIV:before {float: right;}",".shrUPDetail .shrUPG LI.shrUPGZoomed IMG {position: absolute; top: 0; bottom: 0; left: 0; right:0;}",".shrUPDetail .shrUPG LI.shrUPGZoomed IMG {max-height: 100%; max-width: 100%;}",".shrUPDetail .shrUPG LI.shrUPGZoomed IMG {margin: auto;}",".shrUPDetail .shrUPG LI.shrUPGZoomed DIV, .shrUPDetail .shrUPG LI.shrUPGZoomed IMG {box-sizing: border-box; padding: 10px; border: none; background: none;}",".shrUPDetail .shrUPG:hover:before, .shrUPDetail .shrUPG:hover:after, .shrUPDetail.shrUPTouch .shrUPG:before, .shrUPDetail.shrUPTouch .shrUPG:after {content: ''; display: block; z-index: 2;}",".shrUPDetail .shrUPG:hover:before, .shrUPDetail .shrUPG:hover:after, .shrUPDetail.shrUPTouch .shrUPG:before, .shrUPDetail.shrUPTouch .shrUPG:after {width: 30px; height: 30px;}",".shrUPDetail .shrUPG:hover:before, .shrUPDetail .shrUPG:hover:after, .shrUPDetail.shrUPTouch .shrUPG:before, .shrUPDetail.shrUPTouch .shrUPG:after {position: absolute; top: 50%; margin-top: -15px;}",".shrUPDetail .shrUPG:hover:before, .shrUPDetail .shrUPG:hover:after, .shrUPDetail.shrUPTouch .shrUPG:before, .shrUPDetail.shrUPTouch .shrUPG:after {${bg.desktop};}",".shrUPDetail .shrUPG:before {left: 10px; background-position: -150px 0;}",".shrUPDetail .shrUPGPH:before {background-position: -150px -50px;}",".shrUPDetail .shrUPG:after {right: 10px; background-position: -200px 0;}",".shrUPDetail .shrUPGNH:after {background-position: -200px -50px;}",".shrUPG > LI.shrDisabled DIV {${0};}".substitute([Shr.Style.formatOpacity(.5)]),".shrUPG > LI.shrDisabled DIV {cursor: default;}",".shrUPG > LI.shrDisabled DIV:hover {box-shadow: none;}",".shrUPGRating {position: absolute; display: block; bottom: 6px; left: 6px; height: 16px;}",".shrUPGRating {${bg.desktop}; background-position: -100px -200px; width: 20px;}",".shrUPNarrow .shrUPG LI {border: 1px solid #e6e6e6;}",".shrUPNarrow .shrUPG LI {margin: 2px;}",".shrUPNarrow:not(.shrUPDetail) .shrUPG LI {width: 100px; height: 100px; line-height: normal;}",".shrUPNarrow:not(.shrUPDetail) .shrUPG LI DIV {width: 100%; height: 100%;}",".shrUPNarrow:not(.shrUPDetail) .shrUPG LI DIV IMG {width: 102px; height: 102px; object-fit: cover;}",".shrUPNarrow .shrUPG LI DIV {box-shadow: none !important;}",".shrUPNarrow .shrUPG LI.shrUPGZoomed {border: none;}",".shrUPNarrow .shrUPG LI.shrUPGZoomed {background-image: none !important;}",".shrUPNarrow .shrUPG LI.shrUPGZoomed DIV, .shrUPNarrow .shrUPG LI.shrUPGZoomed IMG {padding: 5px;}",Shr.B.isIE?"":".shrUPGZoomed > DIV {width: 100%; height: 100%;}",Shr.B.isIE?"":".shrUPGZoomed > DIV IMG {height: 100%; object-fit: contain;}",".shrUPGrid:before {content: attr(debug) !important; display: block !important; position: absolute; top: -25px; left: -25px; background-color: pink; font-size: 12px; line-height: normal;}",".shrUPGrid:before {position: fixed; top: 0; left: 0; z-index: 2;}",".shrUPDetail .shrUPGrid:before, .shrUPNarrow .shrUPGrid:before {top: 0; left: 0; z-index: 2;}",".shrUP:before {content: attr(debug) !important; display: block !important; position: absolute; top: 0; left: 0; background-color: cyan; font-size: 12px; line-height: normal; z-index: 3;}",""],r=window.trUPP&&window.trUPP.util||Shr;return Shr.B.isIE&&Shr.B.ieVersion<9&&(e=e.concat([".shrUPG LI > DIV:before {content: none;}",""])),t.Grid._styleParams.bg.desktop=Shr.Style.formatBackground({url:r.IURL("universalpicker/desktopicons.png"),url2x:r.IURL("universalpicker/desktopicons@2x.png"),width:"350px"}),e.join("\n").substitute(t.Grid._styleParams)}}}()},function(e,t){try{if(Shr.ScriptManager.throwIfOverridden("Shr.Dialogs.UniversalPicker.View.widgets.navbar"),!Shr.Dialogs.UniversalPicker.View)throw{message:"deferred because local UPP override needs to load first"};Shr.Dialogs.UniversalPicker.View.widgets.navbar=(n={},o=Shr.Dialogs.UniversalPicker,i={_navbar:null,_sortWrap:"shrUPNBSortWrap",_backWrap:"shrUPNBBackWrap",_titleWrap:"shrUPNBTitleWrap",_checkWrap:"shrUPNBCheckWrap",_disableSelect:"shrUPNBDisableSelect",_title:"shrUPNBTitle",_select:"shrUPNBSelect",_selectAll:"shrUPNBSelectAll",_selectNone:"shrUPNBSelectNone",_checkMark:"shrUPNBCheckMark",_count:"shrUPNBCount"},s=null,n.L10N={},Object.extend(n,{id:"newpp_navbar",init:function(e,t){s=e,r=t,i._navbar=r.classNames.navbar,new o.View.Event("renderNavBar")},renderStyle:function(e){e(this._formatStyle())},Event:{renderNavBar:function(){Shr.Dom.set(s,n._formatNavBar({text:n._formatTitle(r.folder).localize(o),back:{onclick:Shr.EB.on("click",n._onBack)+"return false;"},sort:n._formatSortWidget(r.folder)||"",select:n._formatSelectAllNone(r.folder)})),n._setRoot(r.folder)},refresh:function(e){e===r.folder&&(n._setRoot(e),n._updateTitle(),n._updateSortWidget(),n._updateSelectWidget())},selectionChange:function(){Shr.Dom.set(Shr.Dom.getChildByClass(s,i._select),n._formatSelectAllNone(r.folder))},titleChange:function(e,t){n._updateTitle(e,t)},flashInfoBox:function(e){e?n._showInfoBox(!1):(n._showInfoBox(!0),window.setTimeout(function(){n._showInfoBox(!1)},2e3))}}}),Object.extend(n,{_formatNavBar:function(e){var t=Object.extend({},e),r=t.back?Shr.BackButton.format(Object.extend({tabindex:"100",title:Shr.Html.formatTag("span",{},"Back")},t.back)):"";return Shr.Html.formatTag("div",{className:i._sortWrap,noDrag:!0},t.sort)+Shr.Html.formatTag("div",{className:i._backWrap},r)+Shr.Html.formatTag("div",{className:i._titleWrap},Shr.Html.formatTag("span",{className:i._title},t.text||"")+Shr.Html.formatTag("span",{className:i._select},t.select))},_isSelectedFolder:function(e){return e&&e.type==o.Folder.Type.selected},_updateTitle:function(e,t){var a=n._formatTitle(t||r.folder).localize(o)||"";e=Shr.Dom.getChildByClass(s,i._title),Shr.Dom.set(e,a)},_formatTitle:function(e){var t=Shr.Html.truncateText(e.formatTitle?e.formatTitle(!0):o.Folder.prototype.formatTitle.call(e,!0),25,"..."),a=s.querySelector("."+i._title),l="";return t=/^\s+$/.test(t)?"&nbsp;":t,e.info&&(l=Shr.Html.formatTag("span",{className:[r.classNames.snapSrc,r.classNames.info,r.classNames.arrow,r.classNames.arrowS]})),a&&Object.extend(a,{onclick:e.info?function(e){return n._infoBoxOpen=n._showInfoBox(!n._infoBoxOpen||void 0),!1}:null,onmouseover:e.info?function(e){e.currentTarget.classList.add(r.classNames.selected)}:null,onmouseout:e.info?function(e){n._infoBoxOpen||e.currentTarget.classList.remove(r.classNames.selected)}:null}),t+l},_formatSortWidget:function(e){var t=e&&e.getSortChoices&&e.getSortChoices(),n=e&&(1<Shr.Array.getLength(e.items)||1<Shr.Array.getLength(e.albums)||1<Shr.Array.getLength(e.folders)),i="";return!Shr.L.isNullOrEmptyObject(t)&&n&&(i="${sortBy}".localize(o),i=Shr.Html.formatTag("span",{className:r.classNames.sort},i+Shr.Arrow.format({dir:"s",w:6,h:6})+Shr.Html.formatSelect2("",e.sortOrder,t,{onchange:function(t){return Shr.L.forEach(e&&["folders","albums","items"],function(r){1<Shr.Array.getLength(e[r])&&(e[r]=Shr.Array.sortByProperty(e[r],t.value))}),e.sortOrder=t.value,o.refresh(e),!1}}))),i},_updateSortWidget:function(){Shr.Dom.set(Shr.Dom.getChildByClass(s,i._sortWrap),n._formatSortWidget(r.folder)||"")},_updateSelectWidget:function(){Shr.Dom.set(Shr.Dom.getChildByClass(s,i._select),n._formatSelectAllNone(r.folder))},_formatSelectAllNone:function(e){var t="";return r.canSelectAll(e)&&!n._isSelectedFolder(e)&&(t=e.onlyShowCountNoSelect?Shr.Html.formatTag("div",{className:[i._checkWrap,i._disableSelect]},Shr.Html.formatTag("span",{className:i._count},e.count)):Shr.Html.formatTag("div",{className:[i._checkWrap,r.allSelected(e)?i._selectNone:i._selectAll],onclick:n._toggleSelection,"data-test-key":"shrUP-selectAll"},Shr.Html.formatTag("div",{className:i._checkMark})+Shr.Html.formatTag("span",{className:i._count},e.count))),t},_toggleSelection:function(e){var t;if(e&&e.className)return-1!=e.className.indexOf(i._selectAll)?(t="all",r.onSelect(!0,-1)&&(e.className=e.className.replace(i._selectAll,i._selectNone))):-1!=e.className.indexOf(i._selectNone)&&(t="none",r.onSelect(!1,-1)&&(e.className=e.className.replace(i._selectNone,i._selectAll))),o.Log.metric(["newPP_navbar","onclick","select",t].join("."),0),!t&&void 0},_onBack:function(){r.onBack.apply(this,arguments),o.Log.metric(["newPP_navbar","onclick","back"].join("."),0)},_setRoot:function(e){Shr.ClassToggle.toggle(s,r.classNames.root,e==r.root||e==r.root2)},_formatInfoBox:function(e){var t=[Shr.Arrow.format({dir:"n",w:14,h:9}),Shr.Arrow.format({dir:"n",w:12,h:8})];return Shr.Html.formatTag("div",{className:[r.classNames.snapSrcMenu,r.classNames.infoBox,e?r.classNames.open:""]},t.join("")+(r.folder&&r.folder.info||"&nbsp;"))},_showInfoBox:function(e,t){var o,a,l,c=r.dlg,d=c&&Shr.Dom.getChildByClass(c,r.classNames.infoBox),h=s.querySelector("."+i._title),u={};return d||(c.insertAdjacentHTML("beforeend",n._formatInfoBox()),d=Shr.Dom.getChildByClass(c,r.classNames.infoBox)),(o=Shr.ClassToggle.toggle(d,r.classNames.open,e))?(h&&h.classList.add(r.classNames.selected),Shr.Dom.replaceNode(d,n._formatInfoBox(!0)),d=c&&Shr.Dom.getChildByClass(c,r.classNames.infoBox),t=t||Shr.Dom.getChildByClass(c,r.classNames.info),a=Shr.Dom.getPageBounds(t),l=c.getBoundingClientRect(),u.left=Math.round(a.x+a.width/2-d.clientWidth/2-l.left+(Shr.B.isTouch?1:2)),u.top=Shr.B.isTouch?40:Math.round(a.y+a.height/2-l.top+20),Shr.Dom.setStyle(d,{left:u.left-document.body.scrollLeft+"px",top:u.top-document.body.scrollTop+"px"}),n.__infoOnClick||(Shr.Event.addEventListener(document.body,"click",n.__infoOnClick=function(e){var t=r.dlg,o=t&&Shr.Dom.getChildByClass(t,r.classNames.infoBox),i=Shr.Dom.getChildByClass(t,r.classNames.info);n._infoBoxOpen&&e.target!=h&&e.target!=i&&e.target!=o&&e.target.parentNode!=o&&(delete n._infoBoxOpen,n._showInfoBox(!1))}),Shr.Event.addEventListener(c,"click",n.__infoOnClick))):h&&h.classList.remove(r.classNames.selected),o},_formatStyle:function(){var e=Object.merge({},r.styleProperties);return["/* newpp_navbar */",".shrUPnewPP.shrUPDetail .shrUPNavBar {display: none;}",".shrUPnewPP.shrUPWide.shrUPSrc_myComputer .shrUPNavBar {visibility: hidden;}",".shrUPnewPP.shrUPWide.shrUPSrc_myComputer .shrUPNavBar .shrUPNBSortWrap {display:none;}",".shrUPnewPP.shrUPNarrow .shrUPNavBar .shrUPNBSortWrap {display: none;}",".shrUPnewPP .shrUPNavBar .shrUPNBBackWrap {float: left;min-width: 65px; min-height: 100%;line-height: 47px;}",".shrUPnewPP.shrUPNarrow .shrUPNavBar .shrUPNBBackWrap {min-width: 30px;}",".shrUPnewPP .shrUPNavBar .shrUPNBBackWrap:hover, .shrUPnewPP .shrUPNavBar .shrUPNBBackWrap .shrBB:hover, .shrUPnewPP .shrUPNavBar .shrUPNBBackWrap:hover .shrBB {color: ${colors.2016.hover}; text-decoration: none;}",".shrUPnewPP .shrUPNavBar .shrUPNBBackWrap .shrBB::after { position:absolute; margin-left: -15px; top: 19px; background-image: none !important; content: ''; width: 8px; height: 8px; -moz-transform: rotate(45deg); -ms-transform: rotate(45deg); -webkit-transform: rotate(45deg); transform: rotate(45deg); display: block; border: 1px solid #4b525c; border-width: 0 0 2px 2px; border-right: 0px solid transparent;}",".shrUPnewPP .shrUPNavBar .shrUPNBBackWrap:hover .shrBB::after  {border-color: ${colors.2016.hover};}",".shrUPNarrow.shrUPnewPP .shrUPNavBar .shrUPNBBackWrap .shrBB span {display: none;}",".shrUPNarrow.shrUPnewPP .shrUPNavBar .shrUPNBBackWrap .shrBB::after {width: 12px; height: 12px; top:17px;}",".shrUPnewPP .shrUPNavBar .shrUPNBBackWrap .shrBB {outline: 0; cursor: pointer; color: ${colors.2016.content};margin-left: 16px; float:right; line-height: inherit;}",".shrUPRoot .shrUPNBBackWrap {visibility: hidden;}",".shrUPnewPP .shrUPNavBar .shrUPNBTitleWrap {text-align: center;height: 47px;line-height:47px;margin: 0 auto;width: calc(100% - 130px);}",".shrUPnewPP.shrUPNarrow .shrUPNavBar .shrUPNBTitleWrap {width: calc(100% - 60px);}",".shrUPnewPP .shrUPNavBar .shrUPNBTitleWrap .shrUPSnapSrc {display: none;}",".shrUPnewPP .shrUPNavBar .shrUPNBTitleWrap .shrUPSnapSrc.shrUPInfo {display: inline-block;background: none;border-width: 8px 5px 0 5px;margin-left: 8px;margin-top: 0px;}",".shrUPnewPP .shrUPNavBar .shrUPNBTitleWrap .shrUPNBTitle.shrSelected {color: #f05323; cursor: pointer;}",".shrUPnewPP .shrUPNavBar .shrUPNBTitleWrap .shrUPNBTitle.shrSelected .shrArrow {border-color: #f05323;}",".shrUPnewPP .shrUPNavBar .shrUPNBTitleWrap .shrUPNBTitle .shrArrow {width: 0;height: 0;border-style: solid;border-color: #999;}",".shrUPnewPP .shrUPNavBar .shrUPNBTitleWrap .shrUPNBTitle .shrArrowS {border-right-color: transparent !important;border-left-color: transparent !important;}",".shrUPnewPP .shrUPNavBar .shrUPNBSortWrap {float:right;min-width: 65px;min-height: 100%;}",".shrUPnewPP.shrUPNarrow .shrUPNavBar .shrUPNBSortWrap {min-width: 30px;}",".shrUPnewPP .shrUPNavBar .shrUPNBTitleWrap .shrUPNBSelect .shrUPNBCheckWrap {margin-left: 10px;position: relative; height: 21px; line-height: 21px; display: inline-block; padding: 0px 9px; color: ${colors.2016.content}; border: 1px solid ${colors.2016.content}; border-radius: 11px; cursor: pointer; text-shadow: none !important; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none;}",".shrUPnewPP .shrUPNavBar .shrUPNBTitleWrap .shrUPNBSelect .shrUPNBCheckWrap.shrUPNBSelectNone {border: 1px solid ${colors.2016.hover}; background-color: ${colors.2016.hover}; color: ${colors.2016.lightBG};}",".shrUPnewPP .shrUPNavBar .shrUPNBTitleWrap .shrUPNBSelect .shrUPNBCheckWrap:hover:not(.shrUPNBSelectNone):not(.shrUPNBDisableSelect) {color: ${colors.2016.hover}; border: 1px solid ${colors.2016.hover};}",".shrUPnewPP .shrUPNavBar .shrUPNBTitleWrap .shrUPNBSelect .shrUPNBCheckWrap .shrUPNBCheckMark {position: relative; display:inline-block; width: 12px; height: 16px; margin-right: 6px;}",".shrUPnewPP .shrUPNavBar .shrUPNBTitleWrap .shrUPNBSelect .shrUPNBCheckWrap .shrUPNBCheckMark::before, .shrUPnewPP .shrUPNavBar .shrUPNBSelect .shrUPNBCheckWrap .shrUPNBCheckMark::after {content: ''; position: absolute; background-color: ${colors.2016.content}; height: 2px;}",".shrUPnewPP .shrUPNavBar .shrUPNBTitleWrap .shrUPNBSelect .shrUPNBCheckWrap .shrUPNBCheckMark::before {width: 5px; left: 1px; bottom: 2px; -moz-transform: rotate(45deg); -ms-transform: rotate(45deg); -webkit-transform: rotate(45deg); transform: rotate(45deg);}",".shrUPnewPP .shrUPNavBar .shrUPNBTitleWrap .shrUPNBSelect .shrUPNBCheckWrap .shrUPNBCheckMark::after {width: 12px; left: 3px; bottom: 4px; -moz-transform: rotate(-45deg); -ms-transform: rotate(-45deg); -webkit-transform: rotate(-45deg); transform: rotate(-45deg);}",".shrUPnewPP .shrUPNavBar .shrUPNBTitleWrap .shrUPNBSelect .shrUPNBCheckWrap:hover:not(.shrUPNBSelectNone) .shrUPNBCheckMark::before, .shrUPnewPP .shrUPNavBar .shrUPNBSelect .shrUPNBCheckWrap:hover:not(.shrUPNBSelectNone) .shrUPNBCheckMark::after {background-color: ${colors.2016.hover};}",".shrUPnewPP .shrUPNavBar .shrUPNBTitleWrap .shrUPNBSelect .shrUPNBCheckWrap.shrUPNBSelectNone .shrUPNBCheckMark::before, .shrUPnewPP .shrUPNavBar .shrUPNBSelect .shrUPNBCheckWrap.shrUPNBSelectNone .shrUPNBCheckMark::after {background-color: ${colors.2016.lightBG};}",".shrUPnewPP .shrUPNavBar .shrUPNBTitleWrap .shrUPNBSelect .shrUPNBCheckWrap .shrUPNBCheckMark + .shrUPNBCount {letter-spacing: 0.1px;}",".shrUPnewPP .shrUPNavBar .shrUPNBTitleWrap .shrUPNBSelect .shrUPNBCheckWrap.shrUPNBDisableSelect {cursor: default;}",".shrUPnewPP .shrUPNavBar .shrUPNBSortWrap .shrUPSort {font-size: 12px; font-weight: normal; line-height: 47px; text-decoration: none;margin-right: 16px;}",".shrUPnewPP .shrUPNavBar .shrUPNBSortWrap .shrUPSort:hover {color: ${colors.2016.hover}}",".shrUPnewPP .shrUPNavBar .shrUPNBSortWrap .shrUPSort:hover .shrArrow {border-color: ${colors.2016.hover};}",".shrUPnewPP.shrUPInSidebar .shrUPNavBar .shrUPNBBackWrap {display: none;}",".shrUPnewPP.shrUPSel .shrUPNavBar .shrUPNBBackWrap {display: none;}",".shrUPnewPP.shrUPImport .shrUPNavBar .shrUPNBBackWrap, ",".shrUPnewPP.shrUPDone .shrUPNavBar .shrUPNBBackWrap, ",".shrUPnewPP.shrUPOk .shrUPNavBar .shrUPNBBackWrap, ",".shrUPnewPP.shrUPImport .shrUPNavBar .shrUPNBSortWrap, ",".shrUPnewPP.shrUPDone .shrUPNavBar .shrUPNBSortWrap, ",".shrUPnewPP.shrUPOk .shrUPNavBar .shrUPNBSortWrap {","display: none;","}",".shrUPnewPP .shrUPNavBar span {line-height: inherit; font-size: 14px;}",""].join("\n").substitute(e)}}),n)}catch(e){window&&window.trUPP&&window.trUPP.Timing&&window.trUPP.Timing.recordInfo("upp_exception",{ex_message:e.message,ex_stack:e.stack}),Console.write("Error loading newpp_navbar.js: "+e.message)}var r,n,o,i,s},function(e,t){try{if(Shr.ScriptManager.throwIfOverridden("Shr.Dialogs.UniversalPicker.View.widgets.sidebar"),!Shr.Dialogs.UniversalPicker.View)throw{message:"deferred because local UPP override needs to load first"};Shr.Dialogs.UniversalPicker.View.widgets.sidebar=(o={},i=Shr.Dialogs.UniversalPicker,s=!1,a=null,l={_feedback:"shrUPSidebarFeedback",_label:"shrUPSidebarLabel"},o.L10N={upload_label:"UPLOAD",sfly_label:"SHUTTERFLY",social_label:"SOCIAL SITES"},Object.extend(o,{id:"newpp_sidebar",init:function(e,t){s=!1,(a=e)._widget=this,r=t,o._renderSidebar(),n=n||a.querySelector(".shrUPSrc_sfly"),o._lastClick=Date.now()},renderStyle:function(e){e(this._formatStyle())},Event:{expandSidebar:function(){var e=!r.wideLayout;Shr.ClassToggle.toggle(a,r.classNames.open,!0),r.dlg&&r.dlg.classList.add(r.classNames.sidebarOpen),e&&a&&a.addEventListener("click",o._sidebarOnClick=function(e){this==(e.target||e.srcElement)&&new i.View.Event("collapseSidebar")})},collapseSidebar:function(){var e="shrUPClosing";a&&(a.scrollTop=0),Shr.ClassToggle.toggle(a,e,!0),r.dlg&&r.dlg.classList.remove(r.classNames.sidebarOpen),window.setTimeout(function(){Shr.ClassToggle.toggle(a,r.classNames.open,!1),Shr.ClassToggle.toggle(a,e,!1)},333),a&&o._sidebarOnClick&&(a.removeEventListener("click",o._sidebarOnClick),delete o._sidebarOnClick)},toggleHamburger:function(e){r.wideLayout||(e?a.classList.add(r.classNames.disabled):a.classList.remove(r.classNames.disabled))},datasourceListReady:function(){s=!0,o._renderSidebar(),n=n||a.querySelector(".shrUPSrc_sfly")},folderChange:function(e){var t,o=r.stack.length-2;for(Shr.ClassToggle.toggle(a,r.classNames.root,e==r.root||e==r.root2);0<o&&r.stack[o].skip;)o--;if(t=o<=0||r.stack[o].folder==r.myPhotos,Shr.ClassToggle.toggle(r.dlg,r.classNames.inSidebar,t),Shr.U.migrated)do{if(e&&e.parent&&r.myPhotos==e.parent&&-1!=(o=Shr.Array.indexOf(r.myPhotos.folders,e))){Shr.ClassToggle.select(n.getElementsByTagName("LI")[o]);break}e=e&&e.parent}while(e&&e!=r.root)},layoutChange:function(e){var t=a.classList.contains(r.classNames.open);e._isWide&&t&&new i.View.Event("collapseSidebar")}}}),Object.extend(o,{_renderSidebar:function(){a.innerHTML=o._formatSidebar(),n=a.querySelector(".shrUPSrc_sfly"),o.Event.folderChange(r.folder)},_formatSidebar:function(){var e=[],t="",n=!1,c=!1,d=function(){return Shr.Html.formatTag("li",{className:l._label,lId:"${sfly_label}".localize(this)},"${sfly_label}".localize(this))}.bind(this);return s&&(Shr.L.forEach(r.root.folders,function(t,s){var a,h=[o._sourceClassName(t)],u="",p="",m=!1;if("sites"==t.id)i.context.sources&&i.context.sources.sites&&i.context.sources.sites.site&&(t.data=o._sites=[i.context.sources.sites.site]),o._sites&&(t.data=o._sites,t.data.length||h.push(r.classNames.empty)),n||(u=d(),n=!0);else if("device"==t.id)h.push(t.className);else if("myComputer"==t.id)u=Shr.Html.formatTag("li",{className:l._label,lId:"${upload_label}".localize(this)},"${upload_label}".localize(this));else if(t==r.myPhotos)n||(u=d(),n=!0),p=this._formatMyPhotosList(),m=!0;else{if("email"==t.id)return;t.isSocialSite&&!c&&(c=!0,u=Shr.Html.formatTag("li",{className:l._label,lId:"${social_label}".localize(this)},"${social_label}".localize(this)))}a=("formatTitle"in t?t.formatTitle:i.Source.prototype.formatTitle).call(t,!1),u+=Shr.Html.formatTag("li",{className:h,sId:t.id},(m?"":a)+p),e.push(u)}.bind(this)),t=Shr.Html.formatTag("ol",{onclick:Shr.EB.on("click",function(e,t,n,s){var l=(s.target||s.srcElement).getAttribute("lId"),c=!r.wideLayout,d=function(){r.isZoomed()&&r.zoomOut(e)},h=function(e){i._selectedSrc=e};if(null===l){if(null!==(l=(s.target||s.srcElement).getAttribute("sId")))l=Shr.Array.findByProperty(r.sources,"id",l),r.dlg.classList.contains(o._sourceClassName(l))?c&&new i.View.Event("collapseSidebar"):(d(),r.stack=[r.stack[0]],(o._lastClickedFolder=l).onclick(),c&&Shr.ClassToggle.toggle(a,r.classNames.open),i.Log.metric(["newPP_sidebar","onclick",o._lastClickedFolder.id||"unknown"].join("."),Date.now()-o._lastClick),o._lastClick=Date.now()),h(l.id);else{if("INPUT"==(s.target||s.srcElement).tagName&&Shr.B.isTouch)return!1;null!==(l=(s.target||s.srcElement).getAttribute("fId"))?(l=Shr.Array.findByProperty(r.myPhotos.folders,"id",l),r.stack.splice(2,r.stack.length-2),d(),(l.onclick||i.Folder.prototype.onclick).call(o._lastClickedFolder=l),c&&Shr.ClassToggle.toggle(a,r.classNames.open),i.Log.metric(["newPP_sidebar","onclick","sfly",o._lastClickedFolder.id||"unknown"].join("."),Date.now()-o._lastClick),o._lastClick=Date.now(),h("sfly/"+l.id)):c&&s.clientY<=a.clientHeight&&s.clientX>=a.parentNode.clientWidth-a.clientWidth&&(a.classList.contains(r.classNames.open)?new i.View.Event("collapseSidebar"):new i.View.Event("expandSidebar"),i.Log.metric(["newPP_sidebar","onclick","plus"].join("."),Date.now()-o._lastClick),o._lastClick=Date.now())}return c&&null!==l&&(new i.View.Event("collapseSelectionBin"),new i.View.Event("collapseSidebar")),!0}})},e.join("")),t+=Shr.Html.formatTag("div",{className:l._feedback},r.feedback())),t},_formatMyPhotosList:function(){var e,t=[];return Shr.L.forEach(r.myPhotos&&r.myPhotos.folders,function(e){t.push(Shr.Html.formatTag("li",{class:[o._sourceClassName(e)],fId:e.id},this._formatTitle(e)))}.bind(this)),t.length&&(e=Shr.Html.formatTag("ol",{},t.join(""))),e},_formatTitle:function(e){return"formatTitle"in e?e.formatTitle(!1):i.Source.prototype.formatTitle.call(e,!1)},_sourceClassName:function(e){return[r.classNames.sources,e.id].join("_")},_formatStyle:function(){var e=window.trUPP,t=e&&e.util||Shr,r=Object.merge({},Shr.Style.parameters,{sprites:{menuIcons:t.IURL("universalpicker/sidebar_sprites.png"),menuIcons2x:t.IURL("universalpicker/sidebar_sprites@2x.png")}}),n={backgrounds:{tiles:Shr.Style.formatBackground({url:r.sprites.menuIcons,url2x:r.sprites.menuIcons2x,width:"264px"})}};return[".shrUPnewPP .shrUPSidebar * {font-weight: 200;}",".shrUPnewPP.shrUPNarrow.shrUPDetail .shrUPSidebar {display: none;}",".shrUPnewPP .shrUPSidebar {background-color: #FFF; border-radius: 4px 0 0 0; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; box-}",".shrUPSidebar OL {margin: 0; padding: 0;height: calc(100% - 24px); width: 100%;}",".shrUPWide .shrUPSidebar OL {height: 100%;}",".shrUPSidebar OL:last-child {height: 100%;margin-bottom: 0px !important;}",".shrUPnewPP .shrUPSidebar > .shrUPSidebarFeedback {display: none; position: absolute; left: auto; right: 0px; bottom: 0px; height: 24px; width: 0px; padding: 0; background-color: #fff;} ",".shrUPnewPP.shrUPNarrow .shrUPSidebar > .shrUPSidebarFeedback {display: block; transition: left 0.33s, width 0.33s;}",".shrUPnewPP.shrUPSidebarOpen.shrUPNarrow .shrUPSidebar > .shrUPSidebarFeedback {width: 200px;}",".shrUPnewPP .shrUPSidebar > .shrUPSidebarFeedback > .shrSCfb {position: relative; left: 0; right: auto; margin: 0; padding: 0 10px; font-size: 12px; font-weight: 400; color: #1aaeba; line-height: 24px;}",".shrUPnewPP .shrUPSidebar > .shrUPSidebarFeedback > .shrSCfb:before {content:none;}",".shrUPSidebar {overflow: hidden; transform: scale(1);}",".shrUPWide .shrUPSidebar > OL {direction: rtl;overflow-y: auto;}",".shrUPSidebar LI {text-align: left; direction: ltr; list-style: none;line-height: 45px; font-size: 14px;color: #58595b;position: relative; overflow: hidden;white-space: nowrap;cursor: pointer;margin-bottom:0px;font-stretch: normal;letter-spacing: normal;}",".shrUPSidebar > OL > LI:before, .shrUPSidebar > OL OL > LI:before {content:'';${backgrounds.tiles};width: 22px;height: 22px;display: inline-block;margin:0 14px 0 18px;vertical-align:middle;background-position: 22px 22px;}",".shrUPSidebar > OL > LI.shrDisabled > OL:before {position: absolute; content: ''; width: 100%; height: 100%; display: block; z-index: 2; background-color: rgba(255,255,255,0.5);}",".shrUPSidebar > OL > LI.shrDisabled > OL {position: relative; cursor: default;}",".shrUPSidebar > OL > LI.shrDisabled > OL > LI {color: #4b525c !important;}",".shrUPSidebar LI.shrUPSrc_myComputer:before {background-position: 0px 0}",".shrUPSidebar LI.shrUPSrc_mobiledevice:before {background-position: -220px 0}",".shrUPSidebar LI.shrUPSrc_device:before {background-position: 0px 0}",".shrUPSidebar LI.shrUPSrc_sfly:before {display: none;}",".shrUPSidebar LI.shrUPSrc_sfly {line-height: 0;}",".shrUPSidebar LI.shrUPSrc_sites:before {background-position: -110px 0}",".shrUPSidebar LI.shrUPSrc_stockphotos:before {background-position: -88px 0}",".shrUPSidebar LI.shrUPSrc_fb:before {background-position: -154px 0}",".shrUPSidebar LI.shrUPSrc_instagram:before {background-position: -176px 0}",".shrUPSidebar LI.shrUPSrc_flickr:before {background-position: -198px 0}",".shrUPSidebar LI.shrUPSrc_google:before {background-position: -132px 0}",".shrUPSidebar OL OL LI.shrUPSrc_recentUploads:before {background-position: -22px 0}",".shrUPSidebar OL OL LI.shrUPSrc_timeline:before {background-position: -44px 0}",".shrUPSidebar OL OL LI.shrUPSrc_Albums:before {background-position: -66px 0}",".shrUPSidebar OL OL LI.shrUPSrc_Lifetouch:before {background-position: -242px 0}",".shrUPSrc_myComputer .shrUPSidebar LI.shrUPSrc_myComputer:before, .shrUPSrc_myComputer .shrUPSidebar LI.shrUPSrc_myComputer:hover:before {background-position: 0px -44px}",".shrUPSrc_mobiledevice .shrUPSidebar LI.shrUPSrc_mobiledevice:before, .shrUPSrc_mobiledevice .shrUPSidebar LI.shrUPSrc_mobiledevice:hover:before {background-position: -220px -44px}",".shrUPSrc_device .shrUPSidebar LI.shrUPSrc_device:before, .shrUPSrc_device .shrUPSidebar LI.shrUPSrc_device:hover:before {background-position: -22px 0}",".shrUPSrc_sfly .shrUPSidebar LI.shrUPSrc_sfly:before {display: none;}",".shrUPSrc_sites .shrUPSidebar LI.shrUPSrc_sites:before, .shrUPSrc_sites .shrUPSidebar LI.shrUPSrc_sites:hover:before {background-position: -110px -44px}",".shrUPSrc_stockphotos .shrUPSidebar LI.shrUPSrc_stockphotos:before, .shrUPSrc_stockphotos .shrUPSidebar LI.shrUPSrc_stockphotos:hover:before {background-position: -88px -44px}",".shrUPSrc_fb .shrUPSidebar LI.shrUPSrc_fb:before, .shrUPSrc_fb .shrUPSidebar LI.shrUPSrc_fb:hover:before {background-position: -154px -44px}",".shrUPSrc_instagram .shrUPSidebar LI.shrUPSrc_instagram:before, .shrUPSrc_instagram .shrUPSidebar LI.shrUPSrc_instagram:hover:before {background-position: -176px -44px}",".shrUPSrc_flickr .shrUPSidebar LI.shrUPSrc_flickr:before, .shrUPSrc_flickr .shrUPSidebar LI.shrUPSrc_flickr:hover:before {background-position: -198px -44px}",".shrUPSrc_google .shrUPSidebar LI.shrUPSrc_google:before, .shrUPSrc_google .shrUPSidebar LI.shrUPSrc_google:hover:before {background-position: -132px -44px}",".shrUPSrc_recentUploads .shrUPSidebar OL OL LI.shrUPSrc_recentUploads:before, .shrUPSrc_recentUploads .shrUPSidebar OL OL LI.shrUPSrc_recentUploads:hover:before {background-position: -22px -44px}",".shrUPSrc_timeline .shrUPSidebar OL OL LI.shrUPSrc_timeline:before, .shrUPSrc_timeline .shrUPSidebar OL OL LI.shrUPSrc_timeline:hover:before {background-position: -44px -44px}",".shrUPSrc_Albums .shrUPSidebar OL OL LI.shrUPSrc_Albums:before, .shrUPSrc_Albums .shrUPSidebar OL OL LI.shrUPSrc_Albums:hover:before {background-position: -66px -44px}",".shrUPSrc_Lifetouch .shrUPSidebar OL OL LI.shrUPSrc_Lifetouch:before, .shrUPSrc_Lifetouch .shrUPSidebar OL OL LI.shrUPSrc_Lifetouch:hover:before {background-position: -242px -44px}",".shrUPSidebar LI.shrUPSrc_myComputer:hover:before {background-position: 0px -22px}",".shrUPSidebar LI.shrUPSrc_mobiledevice:hover:before {background-position: -220px -22px}",".shrUPSidebar LI.shrUPSrc_device:hover:before {background-position: 0px 0px}",".shrUPSidebar LI.shrUPSrc_sites:hover:before {background-position: -110px -22px}",".shrUPSidebar LI.shrUPSrc_stockphotos:hover:before {background-position: -88px -22px}",".shrUPSidebar LI.shrUPSrc_fb:hover:before {background-position: -154px -22px}",".shrUPSidebar LI.shrUPSrc_instagram:hover:before {background-position: -176px -22px}",".shrUPSidebar LI.shrUPSrc_flickr:hover:before {background-position: -192px -22px}",".shrUPSidebar LI.shrUPSrc_google:hover:before {background-position: -132px -22px}",".shrUPSidebar OL OL LI.shrUPSrc_recentUploads:hover:before {background-position: -22px -22px}",".shrUPSidebar OL OL LI.shrUPSrc_timeline:hover:before {background-position: -44px -22px}",".shrUPSidebar OL OL LI.shrUPSrc_Albums:hover:before {background-position: -66px -22px}",".shrUPSidebar OL OL LI.shrUPSrc_Lifetouch:hover:before {background-position: -242px -22px}",".shrUPSidebar .shrUPSnapSrc {display: none;}",".shrUPSidebar .shrUPSidebarLabel {cursor: default; text-align:center; line-height: 20px !important; margin: 10px 0; background-color: #ebedf0; font-size:12px;letter-spacing: 4px;color: #929497;}",".shrUPSidebar .shrUPSidebarLabel:before {display: none;}",".shrUPSidebar .shrUPSidebarLabel:nth-of-type(1) {margin-top: 0}",".shrUPSidebar .shrUPSrc_sfly > OL {height: auto;}",".shrUPSrc_myComputer .shrUPSidebar .shrUPSrc_myComputer,",".shrUPSrc_recentUploads .shrUPSidebar .shrUPSrc_recentUploads,",".shrUPSrc_timeline .shrUPSidebar .shrUPSrc_timeline,",".shrUPSrc_Albums .shrUPSidebar .shrUPSrc_Albums,",".shrUPSrc_Lifetouch .shrUPSidebar .shrUPSrc_Lifetouch,",".shrUPSrc_sites .shrUPSidebar .shrUPSrc_sites,",".shrUPSrc_stockphotos .shrUPSidebar .shrUPSrc_stockphotos,",".shrUPSrc_fb .shrUPSidebar .shrUPSrc_fb,",".shrUPSrc_instagram .shrUPSidebar .shrUPSrc_instagram,",".shrUPSrc_flickr .shrUPSidebar .shrUPSrc_flickr,",".shrUPSrc_google .shrUPSidebar .shrUPSrc_google,",".shrUPSrc_mobiledevice .shrUPSidebar .shrUPSrc_mobiledevice","{background-color: #2d3137 !important; color: #fff;}",".shrUPNarrow .shrUPSidebar LI:after {display: none !important;}",".shrUPSrc_sfly .shrUPSidebar .shrUPSrc_sfly.shrUPSrc_sfly_migrated:after {display: none;}",".shrUPnewPP.shrUPSrc_sfly:not(.shrUPNonMigrated) .shrUPSidebar .shrUPSrc_sfly {border-bottom: none;}",".shrUPSidebar > OL > LI.shrEmpty, .shrUPSidebar > OL > LI.shrUPSrc_email {display: none;}",".shrUPNarrow .shrUPSidebar > OL {margin-top: 44px; position: absolute; top: 1px; left: auto; right: 0; bottom: 24px; width: 0px; height: auto; background-color: #fff; overflow-x: hidden; overflow-y: auto;}",".shrUPNarrow .shrUPSidebar.shrOpen {background-color: #FFF; width: 100%; height: 100%;}",".shrUPNarrow .shrUPSidebar > OL > LI {width: 100%;}",".shrUPNarrow .shrUPSidebar:not(.shrOpen) > OL > LI {display: none;}",".shrUPNarrow .shrUPSidebar > OL:before {content: '|||'; display: block; position: fixed; top: 0; right: 0; width: 44px; height: 44px;font-size: 25px; font-weight: lighter; line-height: 35px; text-align: center; transform: rotate(90deg); cursor: pointer;}",".shrUPNarrow.shrUPSidebarOpen .shrUPSidebar > OL:before { color: #f05323; }",".shrUPNarrow .shrUPSidebar {right: 0; left: auto; height: 44px; width: 44px; z-index: 200; box-shadow: none;}",".shrUPNarrow .shrUPSidebar {right: 0; left: auto; height: 44px; width: 44px; z-index: 210; box-shadow: none;}",".shrUPNarrow .shrUPSidebar.shrDisabled {z-index: 200;}",".shrUPNarrow .shrUPSidebar:before {content: ''; position: absolute; top: 44px; bottom: 0; left: 0; right: 0; opacity: 0; background: #888;}",".shrUPNarrow .shrUPSidebar OL:before {line-height: 40px;}",".shrUPNarrow .shrUPSidebar:not(.shrOpen) {overflow-y: hidden;}",".shrUPNarrow .shrUPSidebar.shrOpen {background: none;}",".shrUPNarrow .shrUPSidebar.shrOpen:before {opacity: 0.5;}",".shrUPnewPP.shrUPSidebarOpen.shrUPNarrow .shrUPSidebar > OL {width: 200px;}",".shrUPNarrow .shrUPSidebar.shrUPClosing:before {opacity: 0;}",".shrUPNarrow .shrUPSidebar:before {transition: opacity 0.33s;}",".shrUPNarrow .shrUPSidebar > OL:before {z-index: -2; transition: transform 0.33s;}",".shrUPNarrow .shrUPSidebar > OL {transition: left 0.33s, width 0.33s;}",""].join("\n").substitute(Object.merge(r,n))}}),o)}catch(e){window&&window.trUPP&&window.trUPP.Timing&&window.trUPP.Timing.recordInfo("upp_exception",{ex_message:e.message,ex_stack:e.stack}),Console.write("Error loading newpp_sidebar.js: "+e.message)}var r,n,o,i,s,a,l},function(e,t){try{if(Shr.ScriptManager.throwIfOverridden("Shr.Dialogs.UniversalPicker.View.widgets.bin"),!Shr.Dialogs.UniversalPicker.View)throw{message:"deferred because local UPP override needs to load first"};Shr.Dialogs.UniversalPicker.View.widgets.bin=(n={},o=Shr.Dialogs.UniversalPicker,i=window.trUPP,s=i&&i.util||Shr,a="shrUPBinDone",d=c=null,h=!(l={_bin:null,_removeAll:"shrUPBinRemoveAll",_selectPhotos:"shrUPBinSelectPhotos",_photosSelected:"shrUPBinPhotosSelected",_maxPhotosSelected:"shrUPBinMaxPhotosSelected",_maxPhotos:"shrUPBinMaxPhotos",_feedback:"shrUPBinFeedback",_footerButtons:"shrUPBinFooterButtons",_quaternaryButton:"sflyButton-quaternary",_footerSelected:"shrUPBinFooterSelected",_downArrow:"shrUPBinDownArrow",_downArrowToggle:"shrUPBinDownArrowToggle",_remove:"shrUPBinRemove",_detail:"shrUPBinDetail",_zoom:"shrUP"+"newPPZoom",_video:"shrUPVideo",_binZoom:"shrUPZoom-Bin"}),n.L10N={itemsSelected:"${0} items selected",photosSelected:"${0} photos selected",pipe:"| ",maxPhotosText:"Maximum ${0} ",removeAll:"Cancel",selectMaxPhotosText:"Select a maximum of ${0} ",selectPhotosText:"Select photos"},Object.extend(n,{id:"newpp_bin",init:function(e,t){c=e,r=t,l._bin=r.classNames.bin,h=!1,new o.View.Event("renderBin")},renderStyle:function(e){e(this._formatStyle())},Event:{renderBin:function(){var e,t,i="";Shr.Dom.addClass(c,r.classNames.empty),e=Shr.Html.formatTag("a",{className:l._removeAll,onclick:function(){n._removeAll()}},"${removeAll}".localize(n)),e+=n._formatDoneCancelButton(),o.context.singleSelect||(i=Shr.Html.formatTag("div",{className:l._photosSelected},"0"),i+=Shr.Html.formatTag("a",{className:[l._downArrow,l._downArrowToggle].join(" "),onclick:n._onDownArrowClick}),i+=Shr.Html.formatTag("span",{className:l._maxPhotos},n._getMaxSelectablePhotosText())),i+=Shr.Html.formatTag("div",{},e),i+=Shr.Html.formatTag("div",{className:l._feedback},r.feedback()),t=Shr.Html.formatTag("div",{className:r.classNames.empty},"${photosSelected}".localize(n,[0])),t+=Shr.Html.formatTag("OL",{onclick:Shr.B.isTouch?function(e,t,r,n){for(var o=n.target||n.srcElement;"LI"!=o.tagName&&"OL"!=o.tagName;)o=o.parentNode;"LI"==o.tagName&&Shr.ClassToggle.select(o)}:void 0}),t+=Shr.Html.formatTag("FOOTER",{className:r.classNames.overlay},i),Shr.Dom.set(c,t),d=c.getElementsByTagName("OL")[0]},selectionChange:function(e,t,i,s){c&&(r.wideLayout&&(d&&o.context.singleSelect&&o.context.singleSelectToggleSelection&&Shr.L.forEach(d.children,function(e){d.removeChild(e)}),Shr.L.forEach(e,function(e){t?n._addSelectedImageToBin(e):n._removeSelectedImageFromBin(e)}),s&&new o.View.Event("zoomOut")),n._updateSelectionCount(i),n._updateDoneCancelButton(i),n._showOrHideBinElements(i),n._scrollToTheRight(t,s))},removeImageFromBin:function(e){e&&(r.onSelect(!1,e.item),e.zoomed&&!o.useZoom2&&new o.View.Event("zoomOut",e,n._resetScroll),o.Log.metric(["newpp_bin","remove"].join("."),d&&d.children&&d.children.length||0),n._scrollPosition--)},update:function(){if(!n._zoomView&&r.wideLayout){var e=n._getCurrentScrollPosition();n._scrollPosition!=e&&(n._scrollPosition=e,n._showElementsInViewport())}},collapseSelectionBin:function(){if(c){var e=c.querySelector("."+l._downArrow);e&&!e.classList.contains(l._downArrowToggle)&&n._onDownArrowClick(e)}},newZoomSelectionChange:function(e,t,o){n._zoomedFolder&&n._zoomedFolder===r.zoomedFolder&&(o?n._highlightTheWrapper(null,e):t||n._removeItemFromBin(e))},newZoomNext:function(e){n._zoomedFolder&&n._zoomedFolder===r.zoomedFolder&&n._updateSibling(e)},newZoomPrev:function(e){n._zoomedFolder&&n._zoomedFolder===r.zoomedFolder&&n._updateSibling(e)},newZoomOut:function(){n._zoomedFolder&&n._zoomedFolder===r.zoomedFolder&&n._removeHighLightFromTray(),n._zoomedFolder=null},close:function(){h||(o.Log.metric(["newpp_bin","esc"].join("."),d&&d.childNodes.length||0,void 0,"count"),h=!0)},layoutChange:function(e){e._isWide&&new o.View.Event("collapseSelectionBin"),r.selection&&0<r.selection.length&&(n._clearBinWithoutSelectionUpdate(),n.Event.selectionChange(r.selection,!0,r.selection))}}}),Object.extend(n,{_scrollPosition:-1,_getMaxSelectablePhotosText:function(e){var t=o.L10N.photo.localize(o),i=parseInt(o.context.maxCount)||-1,s=e?Shr.Array.getLength(e):0,a=n._getMaxSelectableCount();return 300<i&&(i=-1),0==s&&r.wideLayout?(-1==i?"${selectPhotosText}":"${selectMaxPhotosText}").localize(n,[new Number(a).toCount(t)]):-1==i?"":(r.wideLayout?"${pipe}${maxPhotosText}":"${maxPhotosText}").localize(n,[new Number(a).toCount(t)])},_getMaxSelectableCount:function(){var e=o.context,t=parseInt(e.maxCount)||-1,n=parseInt(e.currentCount)||0,i=parseInt(r.prevCount)||0;return e.singleSelect?1:t-n-i},_addSelectedImageToBin:function(e){var t,r,i,s=Object.extend(document.createElement("LI"));s.item=e,s.zoomed=!1,s.selectionTime=Date.now(),s.isZoomedImage=!1,d.appendChild(s),r=Shr.Html.formatTag("div",{onclick:function(){o.useZoom2?n._loadNewZoom(s):(n._zoomView=!s.zoomed||n._zoomView,o.Log.metric(["newpp_bin","zoomIn"].join("."),Date.now()),new o.View.Event(s.zoomed?"zoomOut":"zoomIn",s,n._resetScroll))}},Shr.Html.formatTag("a",{onclick:function(){o.useZoom2&&n._zoomedFolder?-1!==(i=n._getItemsAndIndex(s)).index&&n._removeItemFromBin(i.index):new o.View.Event("removeImageFromBin",s)},className:l._remove})),t=n._createImage(e,s),Shr.Dom.set(s,r),s.insertBefore(t,s.childNodes[0]),n._scrollPosition=-1},_createImage:function(e,t){var o=new Image,i=r.gridThumbnailSize;return o.onerror=function(e){e.onload=e.onerror=void 0,e.src=Shr.ImgSrc.blank2}.bind(null,o),o.dataset.src=e.getThumbnailUrl(i,i,function(e){t.getElementsByTagName("IMG")[0].dataset.src=e,n._scrollPosition=-1})||"",o.src=Shr.ImgSrc.blank2,e.isVideo()&&(o.dataset.video=!0),o},_setImgWidth:function(e,t){t.width&&t.height?e.style.width=Math.round(t.width/t.height*80)+"px":t.aspectRatio&&(e.style.width=Math.round(80*t.aspectRatio)+"px")},_removeSelectedImageFromBin:function(e){var t=Shr.Array.findByProperty(d.children,"item",e);t&&(d.removeChild(t),n._scrollPosition=-1)},_clearBinWithoutSelectionUpdate:function(){for(;d&&d.children&&0<d.children.length;)d.removeChild(d.children[0]);n._scrollPosition=-1},_updateSelectionCount:function(e){var t,o,i=Shr.Array.getLength(e),s=e.find(function(e){return e.isVideo()}),a=n._getMaxSelectableCount(),c=n._getMaxSelectablePhotosText(e);t=Shr.Dom.getChildByClass(r.dlg,l._photosSelected),o=Shr.Dom.getChildByClass(r.dlg,l._maxPhotos),t&&(Shr.Dom.set(t,r.wideLayout?"${0}".substitute([s?"${itemsSelected}":"${photosSelected}"]).localize(n,[i]):i),Shr.ClassToggle.toggle(t,l._maxPhotosSelected,i==a)),o&&Shr.Dom.set(o,c)},_formatDoneCancelButton:function(e){window.trUPP.Timing.endTimer("upp-load-time",{path:Shr.Dialogs.UniversalPicker._logsmithUPPVer.split("_").pop()});var t=!Shr.Array.getLength(e),i=t?l._quaternaryButton:"",s=o.context.labelsContext,c=s?"${"+s+"done}":o.L10N.done,d=(t?o.L10N.cancel:c).localize(o);return Shr.Button.format(d,{className:i,id:a,onclick:function(){n._zoomedFolder&&new o.View.Event("newZoomOut"),o.Log.metric(["newpp_bin",t?"cancel":"add"].join("."),Shr.Array.getLength(e),void 0,"count"),h=!0,window.setTimeout(r.onDone(),1e3)}})},_updateDoneCancelButton:function(e){var t=document.getElementById(a);t&&Shr.Dom.replaceNode(t,n._formatDoneCancelButton(e))},_showOrHideBinElements:function(e){var t=!Shr.Array.getLength(e),n=Shr.Dom.getChildrenByTag(c,"FOOTER");Shr.ClassToggle.toggle(c,r.classNames.empty,t),Shr.ClassToggle.toggle(n,l._footerSelected,!t)},_onDownArrowClick:function(e){var t=Shr.Dom.hasClass(e,l._downArrowToggle);Shr.ClassToggle.toggle(e,l._downArrowToggle,!t),r.showAllOrSelected(!t),t&&(n._showSelectedTime=Date.now()),o.Log.metric(["newpp_bin","downArrowClick",t?"show":"hide"].join("."),t?0:Date.now()-(n._showSelectedTime||0))},_scrollToTheRight:function(e,t){if(e&&d){var r=t?n._scrollPosition+1:d.scrollWidth;window.setTimeout(function(){d.scrollLeft=r},10)}},_getCurrentScrollPosition:function(){return d?d.scrollLeft:0},_showElementsInViewport:function(){if(d){var e=Math.round(d.scrollLeft),t=Math.max(0,e-d.clientWidth),r=Math.min(d.scrollWidth,e+2*d.clientWidth);Shr.L.forEach(d.children,function(e){var n;(n=e).offsetLeft+n.offsetWidth>t&&n.offsetLeft<r?function(e){e.item;var t=e.getElementsByTagName("IMG")[0];t&&t.src==Shr.ImgSrc.blank2&&!e.isZoomedImage&&t.dataset.src&&(t.src=t.dataset.src),t&&t.dataset.video&&t.classList.add(l._video),e.isZoomedImage=!1}(e):e.getElementsByTagName("IMG")[0].src=Shr.ImgSrc.blank2})}},_removeAll:function(){r.wideLayout&&(Shr.L.forEach(d.children,function(e){r.onSelect(!1,e.item)}),o.Log.metric(["newpp_bin","removeAll"].join("."),d.children?d.children.length:0)),n._zoomedFolder&&new o.View.Event("newZoomOut"),h=!0,window.setTimeout(r.onDone(),1e3)},_resetScroll:function(e){e&&!e.zoomed&&(d.scrollLeft=n._scrollPosition+1,n._zoomView=!1,n._scrollPosition=0)},_getItemsAndIndex:function(e,t){var n=[],o=-1;if(d&&d.children)for(var i=0;i<d.children.length;i++)d.children[i]===e&&(o=i),t&&d.children[i].classList.remove(r.classNames.selected),n.push(d.children[i].item);return{items:n,index:o}},_getLIfromIndex:function(e,t){var r;try{d&&d.children&&d.children.length>e&&(r=d.children[e]),t&&!r&&d&&d.children&&0<d.children.length&&(r=d.children[d.children.length-1])}catch(e){}return r},_removeItemFromBin:function(e){var t=n._getLIfromIndex(e);t&&new o.View.Event("removeImageFromBin",t)},_removeHighLightFromTray:function(){n._getItemsAndIndex(null,!0)},_highlightTheWrapper:function(e,t){e||(e=n._getLIfromIndex(t)),n._removeHighLightFromTray(),e&&e.classList.add(r.classNames.selected)},_loadNewZoom:function(e,t){var r;!e&&"undefined"!==t&&0<=t&&(e=n._getLIfromIndex(t,!0)),e&&(r=n._getItemsAndIndex(e)),e?(n._zoomedFolder=new o.Folder(this,{id:"selection_bin",removeIfItemUnselected:!0,addZoomClass:l._binZoom,items:r.items}),n._highlightTheWrapper(e),n._bringElementInViewport(r.index),new o.View.Event("launchNewZoom",n._zoomedFolder,r.index,!0)):new o.View.Event("newZoomOut")},_updateSibling:function(e){n._highlightTheWrapper(null,e),n._bringElementInViewport(e)},_bringElementInViewport:function(e){if(d){var t,r,o=Math.round(d.scrollLeft),i=Math.min(d.scrollWidth,d.clientWidth),s=n._getLIfromIndex(e);r=-1,(t=s).offsetLeft+t.offsetWidth>o+i?r=d.scrollLeft+1+(t.offsetLeft+t.offsetWidth)-(o+i):t.offsetLeft<o&&(r=t.offsetLeft),-1!==r&&window.setTimeout(function(){d.scrollLeft=r},0)}},_zoomView:!1,_zoomedFolder:null,_formatStyle:function(){return r.styleProperties.sprites.desktop,r.styleProperties.sprites.desktop2x,[".shrUPnewPP.shrUPNarrow.shrUPDetail .shrUPBin {display: none;}",".shrUPnewPP .shrUPBin {user-select: none; background-color: #f9f9f9; border-top: 1px #d8d8d8 solid; border-radius: 0 0 4px 4px;}",".shrUPBin OL {position:relative; height:75px; margin: 8px 16px; padding-left: 0px; width:auto; overflow-x:auto; overflow-y:hidden; white-space: nowrap;-webkit-overflow-scrolling:touch;}",".shrUPBin LI {position:relative;margin-right:6px;display:inline}",".shrUPBin LI:last-child {margin-right: 0;}",".shrUPBin LI:hover > div {display:inline;}",".shrUPBin LI:hover > div+div {display: none;}",".shrUPBin LI > img {width: auto; height:64px;}",".shrUPBin LI > img.shrUPVideo {width: 88px; height: 64px; padding: 24px 33px; background-color: #58595b;}",'.shrUPBin LI IMG[src="${0}"] {width: ${1}; height: ${2};}'.substitute([Shr.ImgSrc.blank2,"107px","80px"]),'.shrUPBin LI IMG[src="${0}"] + div {display: none;}'.substitute([Shr.ImgSrc.blank2]),".shrUPBin LI > div {display: none;width: 100%;height: 74px;position: absolute;left: 0; cursor: pointer;}",".shrUPBin LI > div > a.shrUPBinRemove {display: block; position: absolute; cursor: pointer;left: 8px;top: 8px;background: transparent;height:25px;width: 25px;}",".shrUPBin LI > div > a.shrUPBinRemove:before, .shrUPBin LI > div > a.shrUPBinRemove:hover:before {background-position: -50px -149px;}",".shrUPBin LI > div > a.shrUPBinRemove:before {display: block; content: ''; width: 25px; height: 25px; ${0}}".substitute([Shr.Style.formatBackground({url:s.IURL("universalpicker/desktopicons.png"),url2x:s.IURL("universalpicker/desktopicons@2x.png"),width:"350px"})]),".shrUPBin FOOTER > div {display:inline;float:right;margin-right:16px;padding-bottom:8px;}",".shrUPNarrow .shrUPBin FOOTER > div:not(.shrUPBinPhotosSelected) {margin-top: 4px;padding-bottom: 0px;}",".shrUPBin span {font-size: 14px;font-style: normal;font-stretch: normal;}",".shrUPBin > FOOTER > .shrUPBinFeedback {display: block; position: relative; left: 0; right: auto; width: auto; margin: 0; padding: 0; box-sizing: border-box; float: none; clear: both; background-color: #fff; border-top: 1px solid #dcdee1;}",".shrUPnewPP.shrUPZoom-Bin .shrUPBin > FOOTER > .shrUPBinFeedback {border-top-color: transparent; background-color: inherit;}",".shrUPBin > FOOTER > .shrUPBinFeedback > .shrSCfb {position: relative; left: 0; right: auto; margin: 0; width: auto; padding: 0 10px; line-height: 20px; font-size: 12px; font-weight: 400; color: #1aaeba;}",".shrUPBin > FOOTER > .shrUPBinFeedback > .shrSCfb:before {display: none;}",".shrUPBin > FOOTER > .shrUPBinFeedback > .shrSCfb:hover {text-decoration: underline;}",".shrUPNarrow .shrUPBin > FOOTER > .shrUPBinFeedback {display: none;}",".shrUPTouch .shrUPBin LI:hover > div {display: none;}",".shrUPTouch .shrUPBin LI.shrSelected > div {display: inline;}",".shrUPBinPhotosSelected {display: inline; margin-left: 10px; margin-right: 8px !important;color: #58595b;line-height: 32px;float:left !important;font-size: 14px;}",".shrUPBinPhotosSelected.shrUPBinMaxPhotosSelected {color: #c11111;}",".shrUPBinMaxPhotos {display: inline;color: #c6c7c9;line-height: 32px;float:left;}",".shrUPBinRemoveAll {cursor: pointer;border-style:none;width:62px; height:20px;font-size: 13px;font-weight: 300;font-style: normal;font-stretch: normal;line-height: 20px;text-align: left;color: #1aaeba; margin-right:20px;margin-bottom:15px;border-radius: 4px;text-decoration:none;}",".shrUPBinRemoveAll:hover {color: #1aaeb; text-decoration: underline;}",".shrUPBinRemoveAll:active {color:#138f99;}",".shrUPBinDownArrow {display:none;}",".shrUPBin FOOTER {top: auto;}",".shrUPNarrow .shrUPBin FOOTER {top: 0;}",".shrUPBin:not(.shrEmpty) .shrEmpty, .shrUPnewPP.shrUPNarrow .shrUPBin .shrEmpty {display: none;}",".shrUPBin.shrEmpty > OL, .shrUPnewPP:not(.shrUPNarrow) .shrUPBin.shrEmpty .shrUPBinPhotosSelected, .shrUPnewPP:not(.shrUPNarrow) .shrUPBin.shrEmpty .shrUPBinMaxPhotos, .shrUPBin.shrEmpty .shrUPBinRemoveAll {display: none;}",".shrUPBin.shrEmpty div.shrEmpty {text-align: center;margin-top: 45px;font-size: 16px;color: #4b525c}",".shrUPNarrow .shrUPBin OL {display:none;}",".shrUPNarrow .shrUPBinRemoveAll {display:none;}",".shrUPNarrow .shrUPBinMaxPhotos {color: #58595b; font-size: 12px;line-height: 40px;float:none;}",".shrUPNarrow .shrUPBinPhotosSelected {min-width: 38px;height: 23px; line-height: 23px; display: inline; text-align: center; padding-bottom: 0px;margin-top: 7px;margin-right:7px;border-radius: 70px; cursor: pointer; text-shadow: none !important; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none;}",".shrUPNarrow .shrUPBin.shrEmpty .shrUPBinPhotosSelected {margin-left: 12px; border: 1px solid #58595b; color: #58595b; background-color: #f9f9f9;}",".shrUPNarrow .shrUPBin:not(.shrEmpty) .shrUPBinPhotosSelected {margin-left: 12px; background-color: #f05323; border: 1px solid #ffffff; color: #fff;}",".shrUPNarrow.shrUPSel .shrUPBin:not(.shrEmpty) .shrUPBinPhotosSelected {background-color: #ffffff; color: #f05323;}",".shrUPNarrow .shrUPBinFooterSelected .shrUPBinDownArrow {display: inline-block;margin-right: 8px;margin-top: 16px;height: 0;width: 0;border-left: 8px solid transparent;border-right: 8px solid transparent;border-bottom: 8px solid #fff;border-top-width: 0px;}",".shrUPNarrow .shrUPBinFooterSelected .shrUPBinDownArrow.shrUPBinDownArrowToggle {border-left: 8px solid transparent; border-right: 8px solid transparent; border-top: 8px solid #fff; border-bottom-width: 0;}",".shrUPNarrow .shrUPBinFooterSelected {background-color:#f05323;}",".shrUPNarrow.shrUPSel .shrEmpty .shrUPBinDownArrow {display:inline-block;border-left: 8px solid transparent; border-right: 8px solid transparent; border-bottom: 8px solid #58595b; border-top-width: 0;}",".shrUPNarrow #shrUPBinDone {margin-right: -4px; padding: 9px 24px 9px 24px; color: #58595b; border: solid 1px #c6c7c9; background-color: white;}",".shrUPNarrow #shrUPBinDone:hover {color: #f05323; border: solid 1px #f05323;}",".shrUPNarrow #shrUPBinDone:not(.sflyButton-quaternary):hover {background-color: #F1EED8; border-color: #F1EED8;}",".shrUPNarrow #shrUPBinDone:not(.sflyButton-quaternary) {color: #f05323; background-color: #fcdcd3; border: 1px solid #fcdcd3;}",".shrUPNarrow .shrUPBinFooterSelected .shrUPBinMaxPhotos {color: #ffffff;}",".shrUPBin LI IMG {vertical-align: top; background-color: #eee; box-sizing: border-box;}",Shr.B.isIE?'.shrUPBin LI IMG:not([src="${0}"]) {width: auto;}'.substitute([Shr.ImgSrc.blank2]):"",".shrUPBin LI {transition: border 0.1s;}",".shrUP.shrUPZoom-Bin .shrUPBin LI {transition: initial;}",".shrUPBin LI.shrSelected {border: 1px solid transparent;}",".shrUP.shrUPZoom-Bin .shrUPBin LI.shrSelected img {border: 2px solid #f05323;}",".shrUP.shrUPZoom-Bin .shrUPBin {background-color: #2d3137;}",".shrUP.shrUPZoom-Bin .shrUPBin .shrUPBinPhotosSelected {color: #c6c7c9;}",".shrUP.shrUPZoom-Bin .shrUPBin OL {overflow-x:hidden;}",".shrUP.shrUPZoom-Bin .shrUPBin OL:hover {overflow-x:auto;}",".shrUP.shrUPZoom-Bin .shrUPBin FOOTER .shrUPBinRemoveAll {color: #1aaeba;}",".shrUP.shrUPZoom-Bin .shrUPBin FOOTER .shrUPBinRemoveAll:hover {text-decoration: underline;}",".shrUP.shrUPZoom-Bin .shrUPBin FOOTER .shrUPBinRemoveAll:active {color:#138f99;}",".shrUP.shrUPZoom-Bin .shrUPBin FOOTER #shrUPBinDone {background-color: white; background-color: #818284;}",".shrUP.shrUPZoom-Bin .shrUPBin FOOTER #shrUPBinDone:hover {color: #f05323; background-color: #cdcdce;}",".shrUP.shrUPZoom-Bin .shrUPBin FOOTER #shrUPBinDone:active {background-color:rgba(255, 255, 255, 0.35);border: solid 1px #dddfe1;}",".shrUP.shrUPZoom-Bin .shrUPBin ::-webkit-scrollbar {background: transparent;height:10px;}",".shrUP.shrUPZoom-Bin .shrUPBin ::-webkit-scrollbar-thumb {background-color: #080808;border-radius: 10px;}",".shrUP.shrUPZoom-Bin .shrUPBin ::-webkit-scrollbar-thumb:hover {background-color: #080808;border-radius: 10px;}",""].join("\n")}}),n)}catch(e){window&&window.trUPP&&window.trUPP.Timing&&window.trUPP.Timing.recordInfo("upp_exception",{ex_message:e.message,ex_stack:e.stack}),Console.write("Error loading newpp_bin.js: "+e.message)}var r,n,o,i,s,a,l,c,d,h},function(e,t){try{if(Shr.ScriptManager.throwIfOverridden("Shr.Dialogs.UniversalPicker.View.widgets.zoom"),!Shr.Dialogs.UniversalPicker.View)throw{message:"deferred because local UPP override needs to load first"};Shr.Dialogs.UniversalPicker.View.widgets.zoom=(n={},o=Shr.Dialogs.UniversalPicker,a={_detail:(i="shrUP")+(s="newPPZoom")+"Detail",_zoom:i+s,_zoomed:i+"newPPZoomed",_previous:i+s+"Prev",_next:i+s+"Next",_status:i+s+"Status",_zoomOut:i+s+"Out"},n.L10N={pending:"Loading...",error:"We were unable to access your photo at this time."},Object.extend(n,{id:"newpp_zoom",init:function(e,t){r=t,new o.View.Event("renderZoomView"),document.body.addEventListener("keyup",n._onKeyUp)},renderStyle:function(e){e(this._formatStyle())},Event:{renderZoomView:function(){var e,t;r.dlg.querySelector("a."+a._previous)||(e=document.createElement("a"),t=document.createElement("a"),e.classList.add(a._previous),t.classList.add(a._next),e.onclick=function(){new o.View.Event("zoomPrev")},t.onclick=function(){new o.View.Event("zoomNext")},r.dlg.appendChild(e),r.dlg.appendChild(t))},removeZoomView:function(){var e=document.querySelector("a."+a._previous),t=document.querySelector("a."+a._next);r.dlg.classList.remove(a._detail),e&&r.dlg.removeChild(e),t&&r.dlg.removeChild(t)},newPP:function(e){new o.View.Event(e?"renderZoomView":"removeZoomView")},zoomIn:function(e,t){e&&e.parentNode&&(n._touchOptions={},e.parentNode.addEventListener("touchstart",n._onTouchStart),e.parentNode.addEventListener("touchend",n._onTouchEnd),e.parentNode.addEventListener("touchmove",n._onTouchMove)),n._zoom(e,t)},zoomOut:function(e,t){var r=e?e.parentNode:n._zoomedElement?n._zoomedElement.parentNode:void 0;r&&(r.removeEventListener("touchstart",n._onTouchStart),r.removeEventListener("touchend",n._onTouchEnd),r.removeEventListener("touchmove",n._onTouchMove)),n._zoom(e,t)},zoomPrev:function(){n._zoomSibling(!1)},zoomNext:function(){n._zoomSibling(!0)}}}),Object.extend(n,{_zoom:function(e,t){n._toggleZoom(e),t&&t.call(null,e),e?(n._log(e.zoomed?"zoomIn":"zoomOut",e.selectionTime),new o.View.Event("newPPZoomView",e.zoomed)):new o.View.Event("newPPZoomView",!1)},_zoomSibling:function(e){if(n._zoomedElement){var t=e?n._zoomedElement.nextSibling:n._zoomedElement.previousSibling;t&&(n._toggleZoom(n._zoomedElement,!0),n._toggleZoom(t),n._log(e?"zoomNext":"zoomPrev",t.selectionTime))}},_toggleZoom:function(e,t){if(!e)return r.dlg.classList.remove(a._detail),void(n._zoomedElement&&(n._zoomedElement.classList.remove(a._zoomed),n._zoomedElement.zoomed=!n._zoomedElement.zoomed,n._zoomedElement.classList.add(a._zoomOut),window.setTimeout(function(){n._zoomedElement&&n._zoomedElement.classList&&n._zoomedElement.classList.remove(a._zoomOut),n._zoomedElement=null},1)));if(r.dlg.classList.toggle(a._detail,!e.zoomed),e.classList.toggle(a._zoomed,!e.zoomed),e.zoomed)e.classList.add(a._zoomOut),window.setTimeout(function(){e&&e.classList&&e.classList.remove(a._zoomOut)},1),n._zoomedElement=null;else{var o=function(e){if(e){var t=e.getElementsByTagName("IMG")[0];t.src==Shr.ImgSrc.blank2||""==t.src||null==t.src?n._addStatusMessage(e,n.L10N.pending):n._removeStatusMessage(e),n._createImage(e,e.parentNode.clientWidth,e.parentNode.clientHeight)}};o(n._zoomedElement=e),o(e.nextSibling),o(e.previousSibling)}if(e.zoomed=!e.zoomed,!t){var i=document.querySelector("."+a._previous),s=document.querySelector("."+a._next),l="disabled";e.previousSibling?i.removeAttribute(l):i.setAttribute(l,l),e.nextSibling?s.removeAttribute(l):s.setAttribute(l,l)}},_createImage:function(e,t,r){var o=new Image,i=e.getElementsByTagName("IMG")[0];return o.onerror=function(){o.onload=o.onerror=void 0,o.src=Shr.ImgSrc.blank2,n._addStatusMessage(e,n.L10N.error)},o.onload=function(){i&&o&&Shr.Dom.replaceNode(i,o),e.isZoomedImage=!0,n._removeStatusMessage(e)},o.src=e.item.getThumbnailUrl(t,r,function(t){e.getElementsByTagName("IMG")[0].src=t,n._removeStatusMessage(e)})||Shr.ImgSrc.blank2,o},_addStatusMessage:function(e,t){var r=e.querySelector("div+div");r||(r=document.createElement("div"),e.appendChild(r)),r.innerHTML=t,e.classList.add(a._status)},_removeStatusMessage:function(e){e.classList.remove(a._status);var t=e.querySelector("div+div");t&&e.removeChild(t)},_log:function(e,t){o.Log.metric(["newpp_bin",e].join("."),Date.now()-(t||0)),o.Timing.recordTime(["newpp_bin",e].join("."),Date.now()-(t||0))},_onKeyUp:function(e){return!n._zoomedElement||(r=e,-1==(t=9==e.keyCode?e.shiftKey?-1:1:37==e.keyCode?-1:39==e.keyCode?1:0)?new o.View.Event("zoomPrev"):1==t?new o.View.Event("zoomNext"):32==r.keyCode&&new o.View.Event("removeImageFromBin",n._zoomedElement),!0);var t,r},_onTouchStart:function(e){var t=e.changedTouches[0];n._touchOptions._touchStart={t:Date.now(),x:t.clientX,y:t.clientY}},_thresholdX:25,_onTouchEnd:function(e){var t=e.changedTouches[0],r=n._touchOptions._touchStart,i=(Date.now(),r.t,t.clientX-r.x);return t.clientY,r.y,!!(n._zoomedElement&&Math.abs(i)>n._thresholdX)&&(i<0?new o.View.Event("zoomNext"):new o.View.Event("zoomPrev"),Shr.Event.stop(e),!0)},_onTouchMove:function(e){n._touchOptions._touchMove=Date.now()},_formatStyle:function(){var e=window.trUPP,t=e&&e.util||Shr,r=Object.merge({},Shr.Style.parameters,{bg:{desktop:Shr.Style.formatBackground({url:t.IURL("universalpicker/desktopicons.png"),url2x:t.IURL("universalpicker/desktopicons@2x.png"),width:"350px"})}});return["a.shrUPnewPPZoom {${bg.desktop};background-position: 0 0;cursor: pointer;position: absolute;top: 5px; right: 2px;display: block; width: 25px; height: 25px;}","a.shrUPnewPPZoom:hover {background-position: 0 -50px;}",".shrUPnewPPZoomDetail.shrUPnewPP .shrUPBin {height: 100% !important;background: #4b525c;border-top: 0;border-radius: 4px;}",".shrUPnewPPZoomDetail.shrUPnewPP .shrUPSidebar, .shrUPnewPPZoomDetail.shrUPnewPP .shrUPnewPPHdrWrap, .shrUPnewPPZoomDetail.shrUPnewPP .shrUPFC {visibility: hidden;}",".shrUPnewPPZoomDetail.shrUPnewPP .shrUPBin OL {height: 100%; width: 100%; margin: 0; padding: 0;overflow-x: hidden;}",".shrUPnewPPZoomDetail.shrUPnewPP LI, .shrUPnewPPZoomDetail.shrUPnewPP .shrUPBin footer,.shrUPnewPPZoomDetail.shrUPnewPP .shrUPBin .shrEmpty {display: none;}",".shrUPnewPPZoomDetail.shrUPnewPP LI.shrUPnewPPZoomed {display: block;width: 100%;height: calc(100% - 48px);margin: 24px auto;}",".shrUPnewPPZoomDetail.shrUPnewPP LI.shrUPnewPPZoomed > img {height: auto;width: auto;max-height: 100%;max-width: 100%;box-sizing: border-box;position: absolute;top: 0;bottom: 0;left: 0;right: 0;margin: auto;}",".shrUPnewPPZoomDetail.shrUPnewPP LI.shrUPnewPPZoomed > div {display: inline;background-color: transparent;height: 100%;}",".shrUPnewPPZoomDetail.shrUPnewPP LI.shrUPnewPPZoomed > div a.shrUPBinRemove {${bg.desktop};margin: 0;border-radius: 0;background-color: transparent;display: block;width: 25px;height: 25px;top: 7px;left: 45px;background-position: -50px -149px;}",".shrUPnewPPZoomDetail.shrUPnewPP LI.shrUPnewPPZoomed > div a.shrUPBinRemove:before {display: none;}",".shrUPnewPPZoomDetail.shrUPnewPP LI.shrUPnewPPZoomed > div a.shrUPnewPPZoom {top: 6px; right: 45px;background-position: 0 -100px;}",".shrUPnewPPZoomDetail.shrUPnewPP LI.shrUPnewPPZoomed > div a.shrUPnewPPZoom:hover {background-position: 0 -149px;}",".shrUPnewPP LI.shrUPnewPPZoomOut:hover > div {display: none;}","a.shrUPnewPPZoomPrev, a.shrUPnewPPZoomNext {display: none;}",".shrUPnewPPZoomDetail a.shrUPnewPPZoomPrev, .shrUPnewPPZoomDetail a.shrUPnewPPZoomNext {display: inline;cursor: pointer;position: absolute; top: calc(50% - 30px);background: transparent;height:60px;width: 30px;z-index:2;}",".shrUPnewPPZoomDetail a.shrUPnewPPZoomPrev {left: 42px;}",".shrUPnewPPZoomDetail a.shrUPnewPPZoomNext {right: 44px;padding-right: 10px;}",".shrUPnewPPZoomDetail a.shrUPnewPPZoomPrev:before, .shrUPnewPPZoomDetail a.shrUPnewPPZoomNext:before {display: inline-block;background: transparent;content:' ';border-width: 3px 3px 0 0; border-style: solid;border-color: #fcfcfc;border-left-color: transparent;border-bottom-color: transparent;width: 30px; height: 30px;}",".shrUPnewPPZoomDetail a.shrUPnewPPZoomPrev:before {margin: 12px 0 0 10px;-moz-transform: rotate(225deg);-ms-transform: rotate(225deg);-webkit-transform: rotate(225deg);transform: rotate(225deg);}",".shrUPnewPPZoomDetail a.shrUPnewPPZoomNext:before {margin: 12px 10px 0 0;-moz-transform: rotate(45deg);-ms-transform: rotate(45deg);-webkit-transform: rotate(45deg);transform: rotate(45deg);}",".shrUPnewPPZoomDetail a.shrUPnewPPZoomPrev[disabled=disabled]:before, .shrUPnewPPZoomDetail a.shrUPnewPPZoomNext[disabled=disabled]:before {border-color:#92959b;border-left-color: transparent;border-bottom-color: transparent;}",".shrUPnewPPZoomDetail LI.shrUPnewPPZoomStatus div+div {font-size: 16px;color: #C6C7C9;margin: auto;position: absolute; top: calc(50% - 12px);text-align: center;width: 100%;height: 20px !important; line-height:20px;}",".shrUPnewPPZoomDetail LI.shrUPnewPPZoomStatus img {display: none;}",""].join("\n").substitute(r)}}),n)}catch(e){window&&window.trUPP&&window.trUPP.Timing&&window.trUPP.Timing.recordInfo("upp_exception",{ex_message:e.message,ex_stack:e.stack}),Console.write("Error loading newpp_zoom.js: "+e.message)}var r,n,o,i,s,a},function(e,t,r){try{if(Shr.ScriptManager.throwIfOverridden("Shr.Dialogs.UniversalPicker.View.widgets.zoom2"),!Shr.Dialogs.UniversalPicker.View)throw{message:"deferred because local UPP override needs to load first"};Shr.Dialogs.UniversalPicker.View.widgets.zoom2=(a=Shr.Dialogs.UniversalPicker,l=window.trUPP,c=l&&l.util||Shr,m=d=null,g=!(p={_zoom:null,_slideshow:(h="shrUP")+(u="Zoom")+"-Slideshow",_slides:h+u+"-Slides",_controls:h+u+"-Controls",_showSelectionBin:h+u+"-Bin",_glideNext:h+u+"-glide-next",_glidePrev:h+u+"-glide-prev",_ieObjectFit:h+u+"-ie-object-fit",_video:h+u+"-Video"}),f=r(4),_=r(73),S=r(77),b={L10N:{}},Object.extend(b,{id:"newpp_zoom2",init:function(e,t){n=t,d=e,o=b._getSlideshowComponent(),i=b._getSlideComponent(),s=b._getControlsComponent()},renderStyle:function(e){e(this._formatStyle())},Event:{newZoomIn:function(e,t){var r;0<=t&&e.length>t?(r={data:e,currIndex:t},g=!!n.zoomedFolder.removeIfItemUnselected,m=_.render(f.createElement(o,r),d)):new a.View.Event("newZoomOut")},newZoomOut:function(){_.unmountComponentAtNode(d),m=null,g=!1},selectionChange:function(e,t,r,o){var i,s,l,c,d=-1;if(m&&1===e.length){c=n.zoomedFolder&&n.zoomedFolder.removeIfItemUnselected;for(var h=0;h<m.state.data.length;h++)if(m.state.data[h].id===e[0].id){d=h;break}m.state.currIndex!==d&&(l=m.state.data[m.state.currIndex]),m._isValidIndex(d)&&(i=m.state.data,c&&!t?(i.splice(d,1),s=l?i.indexOf(l):m._getNextVisibleIndex(i,d),m.imageLoadState=new Array(i.length)):(i[d].selected=t,s=l?i.indexOf(l):d),-1!==s?(c&&new a.View.Event("newZoomSelectionChange",s,null,!0),m.setState({data:i,currIndex:s,animate:0})):new a.View.Event("newZoomOut"))}}}}),Object.extend(b,{_getSlideshowComponent:function(){return S({getInitialState:function(){return this.imageLoadState=new Array(this.props.data.length),this.touchOptions={},this.animationInprogress=!1,{data:this.props.data,currIndex:this.props.currIndex,animate:0}},componentWillReceiveProps:function(e){this.imageLoadState=new Array(e.data.length),this.setState({data:e.data,currIndex:e.currIndex,animate:0})},componentDidMount:function(){d&&(d.addEventListener("touchstart",this._onTouchStart),d.addEventListener("touchend",this._onTouchEnd),d.addEventListener("touchmove",this._onTouchMove),document.body.addEventListener("keyup",this._onKeyUp))},componentWillUnmount:function(){d&&(d.removeEventListener("touchstart",this._onTouchStart),d.removeEventListener("touchend",this._onTouchEnd),d.removeEventListener("touchmove",this._onTouchMove),document.body.removeEventListener("keyup",this._onKeyUp))},componentDidUpdate:function(){},render:function(){var e;return this._isValidIndex(this.state.currIndex)?(this._loadCurrNextPrevSlide(this.state.currIndex),e=this.state.data[this.state.currIndex],f.createElement("div",{className:p._slideshow},f.createElement(i,{animate:this.state.animate,getThumbnail:this._getThumb,slides:[this._getSlides(this.state.currIndex-1),this._getSlides(this.state.currIndex),this._getSlides(this.state.currIndex+1)]}),f.createElement(s,{currIndex:this.state.currIndex,isSelected:e.selected,isDisabled:e.disabled,siblings:{hasNext:this._isValidIndex(this.state.currIndex+1),hasPrev:this._isValidIndex(this.state.currIndex-1)},fn:{nextSlide:this._nextSlide,prevSlide:this._prevSlide,close:this._closeSlideshow,toggleSelection:this._toggleSelection}}))):(new a.View.Event("newZoomOut"),"")},_isValidIndex:function(e){return 0<=e&&this.state.data.length>e},_loadCurrNextPrevSlide:function(e){this._createImage(e,!0),this._createImage(e+1,!1),this._createImage(e+1,!0),this._createImage(e-1,!1),this._createImage(e-1,!0),this._createImage(e+2,!1),this._createImage(e+2,!0),this._createImage(e-2,!1),this._createImage(e-2,!0)},_createImage:function(e,t){var r,n,o=new Image;this._isValidIndex(e)&&(r=this.state.data[e],!t&&r.smallThumbLoaded||t&&r.largeThumbLoaded||this._isThumbAlreadyAsked(e,t)||(o.onerror=function(e,t){}.bind(this,e,t),o.onload=function(t,r){r?t.largeThumbLoaded=!0:t.smallThumbLoaded=!0,e===this.state.currIndex&&m&&this.setState({data:this.state.data})}.bind(this,r,t,e),n=r&&(t?this._getLargeThumb(r,o):this._getSmallThumb(r)),r.source&&r.source.dataSourceType==a.Source.DataSourceType.upload&&t||(o.src=n)))},_isThumbAlreadyAsked:function(e,t){var r=!1;return this.imageLoadState&&!this.imageLoadState[e]&&(this.imageLoadState[e]={}),t?(r=!!this.imageLoadState[e].lThumbAsked)||(this.imageLoadState[e].lThumbAsked=!0):(r=!!this.imageLoadState[e].sThumbAsked)||(this.imageLoadState[e].sThumbAsked=!0),r},_closeSlideshow:function(){new a.View.Event("newZoomOut",this.state.currIndex,g)},_nextSlide:function(){this._toggleSlides(!0)},_prevSlide:function(){this._toggleSlides(!1)},_toggleSlides:function(e){var t=e?this.state.currIndex+1:this.state.currIndex-1;return!!this._isValidIndex(t)&&!this.animationInprogress&&(this.animationInprogress=!0,this.setState({animate:e?1:-1}),window.setTimeout(function(){this.setState({currIndex:t,animate:0}),this.animationInprogress=!1,new a.View.Event(e?"newZoomNext":"newZoomPrev",t)}.bind(this),300),!0)},_toggleSelection:function(){var e=this.state.currIndex,t=this.state.data[e];!t.disabled&&new a.View.Event("newZoomSelectionChange",e,!t.selected)},_getSlides:function(e){return this._isValidIndex(e)?this.state.data[e]:null},_getThumb:function(e){return e.largeThumbLoaded?this._getLargeThumb(e):this._getSmallThumb(e)},_getLargeThumb:function(e,t){return e.getThumbnailUrl(d.parentNode.clientWidth,d.parentNode.clientHeight,function(e){t&&(t.src=e)})},_getSmallThumb:function(e){var t=n.gridThumbnailSize;return e.getThumbnailUrl(t,t)},_onTouchStart:function(e){var t=e.changedTouches[0];this.touchOptions._touchStart={t:Date.now(),x:t.clientX,y:t.clientY}},_onTouchEnd:function(e){var t=e.changedTouches[0],r=this.touchOptions._touchStart,n=(Date.now(),r.t,t.clientX-r.x);return t.clientY,r.y,25<Math.abs(n)&&(n<0?this._nextSlide():this._prevSlide(),e.preventDefault(),!0)},_onTouchMove:function(e){this.touchOptions._touchMove=Date.now()},_onKeyUp:function(e){if(!m)return!0;var t=37==e.keyCode?-1:39==e.keyCode?1:0;return function(e,t){-1==e?this._prevSlide():1==e?this._nextSlide():32==t.keyCode?this._toggleSelection():27==t.keyCode&&this._closeSlideshow()}.bind(this)(t,e),!0},_getNextVisibleIndex:function(e,t){var r;try{r=0===e.length?-1:e.length>t?t:t-1}catch(e){r=-1}return r}})},_getSlideComponent:function(){return S({render:function(){var e,t=this.props,r=this.props.slides.map(function(r,n){var o=r&&t.getThumbnail(r);return e={key:n.toString()},Shr.B.isIE&&Object.extend(e,{className:p._ieObjectFit,style:{backgroundImage:"url("+o+")"}}),r&&r.isVideo&&r.isVideo()&&(e.className?e.className+=" "+p._video:Object.extend(e,{className:p._video})),f.createElement("div",e,o?f.createElement("img",{src:o}):"")}),n=[p._slides];return 1===this.props.animate?n.push(p._glideNext):-1===this.props.animate&&n.push(p._glidePrev),f.createElement("div",{className:n.join(" ")},r)}})},_getControlsComponent:function(){return S({render:function(){var e={},t={},r={onClick:this.props.fn.toggleSelection};return this.props.siblings.hasPrev?e.onClick=this.props.fn.prevSlide:e.className=n.classNames.disabled,this.props.siblings.hasNext?t.onClick=this.props.fn.nextSlide:t.className=n.classNames.disabled,this.props.isSelected?r.className=n.classNames.selected:this.props.isDisabled&&(r.className=n.classNames.disabled),f.createElement("div",{className:p._controls},f.createElement("div",e),f.createElement("div",t),f.createElement("div",r),f.createElement("div",{onClick:this.props.fn.close}))}})},_formatStyle:function(){return[".shrUPZoom.shrDisabled {display: none;}",".shrUPZoom {position: absolute;width: 100%;height: 100%;top: 0px;background-color: rgba(45, 49, 55, 0.95);z-index: 400;overflow:hidden;}",".shrUPZoom .shrUPZoom-Slides {position: absolute;width: 300%; height: calc(100% - 12px);margin: 6px 0px; margin-left:-100%;}",".shrUPZoom .shrUPZoom-Slides.shrUPZoom-glide-next {-webkit-transition: .3s ease-in-out;-moz-transition: .3s ease-in-out;-ms-transition: .3s ease-in-out;-o-transition: .3s ease-in-out;transition: .3s ease-in-out;margin-left: -200%;}",".shrUPZoom .shrUPZoom-Slides.shrUPZoom-glide-prev {-webkit-transition: .3s ease-in-out;-moz-transition: .3s ease-in-out;-ms-transition: .3s ease-in-out;-o-transition: .3s ease-in-out;transition: .3s ease-in-out;margin-left: 0px;}",".shrUPZoom .shrUPZoom-Slides.shrUPZoom-glide-next div:nth-child(2), .shrUPZoom .shrUPZoom-Slides.shrUPZoom-glide-prev div:nth-child(2){-webkit-animation: fadeOut .3s;-moz-animation: fadeOut .3s;-ms-animation: fadeOut .3s;-o-animation: fadeOut .3s;animation: fadeOut .3s;}","@-moz-keyframes fadeOut {/* Firefox < 16 */from { opacity: 1; }to   { opacity: 0; }}","@-webkit-keyframes fadeOut {/* Safari and Chrome */from {opacity:1;}to {opacity:0;}}","@-ms-keyframes fadeOut {/* Internet Explorer */from { opacity: 1; }to   { opacity: 0; }}","@-o-keyframes fadeOut {/* Opera < 12.1 */from { opacity: 1; }to   { opacity: 0; }}","@keyframes fadeOut {from { opacity: 1; }to   { opacity: 0; }}",".shrUPZoom .shrUPZoom-Slides div {position: relative; display: inline-block; width: calc(33.333% - 12px);height: 100%;margin: 0 6px;}",".shrUPZoom .shrUPZoom-Slides div img {position: absolute; object-fit: contain;height: 100%;width: 100%;}",".shrUPZoom .shrUPZoom-Slides div.shrUPZoom-Video img {height: 29px; width: 40px; left: 50%; top: 50%; transform: translate(-50%, -50%); margin-top: -30px;}",".shrUPZoom .shrUPZoom-Slides div.shrUPZoom-Video:before {content: ''; position: absolute; width: 100%; height: 100%; background-color: #58595b;}",".shrUPZoom .shrUPZoom-Slides div.shrUPZoom-Video:after {content: 'Videos can not be viewed at this time'; display: block; position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%); margin-top: 30px; color: #ebedf0; font-size: 13px;}",".shrUPZoom .shrUPZoom-Slides div.shrUPZoom-ie-object-fit {background-size: contain;background-position: center center;background-repeat: no-repeat;}",".shrUPZoom .shrUPZoom-Slides div.shrUPZoom-ie-object-fit img {opacity:0;}",".shrUPZoom .shrUPZoom-Controls {position: absolute;height: 100%;width: 100%;}",".shrUPZoom .shrUPZoom-Controls div {position: absolute;}",".shrUPZoom .shrUPZoom-Controls div:nth-child(1), .shrUPZoom .shrUPZoom-Controls div:nth-child(2) {display: inline;cursor: pointer;top: calc(50% - 30px);background: transparent;height:60px;width: 30px;}",".shrUPZoom .shrUPZoom-Controls div:nth-child(1) {left: 42px;}",".shrUPZoom .shrUPZoom-Controls div:nth-child(2) {right: 42px; padding-right: 10px;}",".shrUPZoom .shrUPZoom-Controls div:nth-child(1):before, .shrUPZoom .shrUPZoom-Controls div:nth-child(2):before {display: inline-block;background: transparent;content:' ';border-width: 3px 3px 0 0; border-style: solid;border-color: #fcfcfc;border-left-color: transparent;border-bottom-color: transparent;width: 30px; height: 30px;}",".shrUPZoom .shrUPZoom-Controls div:nth-child(1):before {margin: 12px 0 0 10px;-moz-transform: rotate(225deg);-ms-transform: rotate(225deg);-webkit-transform: rotate(225deg);transform: rotate(225deg);}",".shrUPZoom .shrUPZoom-Controls div:nth-child(2):before {margin: 12px 10px 0 0;-moz-transform: rotate(45deg);-ms-transform: rotate(45deg);-webkit-transform: rotate(45deg);transform: rotate(45deg);}",".shrUPZoom .shrUPZoom-Controls div:nth-child(1).shrDisabled:before, .shrUPZoom .shrUPZoom-Controls div:nth-child(2).shrDisabled:before {border-color:#92959b;border-left-color: transparent;border-bottom-color: transparent;}",".shrUPZoom .shrUPZoom-Controls div:nth-child(1).shrDisabled, .shrUPZoom .shrUPZoom-Controls div:nth-child(2).shrDisabled {cursor: default;}",".shrUPZoom .shrUPZoom-Controls div:nth-child(3), .shrUPZoom .shrUPZoom-Controls div:nth-child(4) {display: inline;cursor: pointer;top: 25px;background: transparent;height:25px;width: 25px;}",".shrUPZoom .shrUPZoom-Controls div:nth-child(3) {left: 42px;}",".shrUPZoom .shrUPZoom-Controls div:nth-child(4) {right: 42px;}",".shrUPZoom .shrUPZoom-Controls div:nth-child(3):before {background-position: -50px 0;}",".shrUPZoom .shrUPZoom-Controls div:nth-child(3).shrSelected:before, .shrUPZoom .shrUPZoom-Controls div:nth-child(3).shrSelected:hover:before {background-position: -50px -149px;}",".shrUPZoom .shrUPZoom-Controls div:nth-child(3):hover:before {background-position: -50px -50px;}",".shrUPZoom .shrUPZoom-Controls div:nth-child(3):before {display: block; content: ''; width: 25px; height: 25px; ${0}}".substitute([Shr.Style.formatBackground({url:c.IURL("universalpicker/desktopicons.png"),url2x:c.IURL("universalpicker/desktopicons@2x.png"),width:"350px"})]),".shrUPZoom .shrUPZoom-Controls div:nth-child(3).shrDisabled {display: none;}",".shrUPZoom .shrUPZoom-Controls div:nth-child(4):before {display: block; content: ''; width: 25px; height: 25px; ${0}}".substitute([Shr.Style.formatBackground({url:c.IURL("universalpicker/desktopicons.png"),url2x:c.IURL("universalpicker/desktopicons@2x.png"),width:"350px"})]),".shrUPZoom .shrUPZoom-Controls div:nth-child(4):before {background-position: 0 -100px;}",".shrUPZoom .shrUPZoom-Controls div:nth-child(4):hover:before {background-position: 0 -150px;}",".shrUP.shrUPZoom-Bin .shrUPZoom {height: calc(100% - 150px);}",".shrUP.shrUPZoom-Bin.shrUPNarrow .shrUPZoom {height: 100%;}"].join("\n")},_getZoomComponentInstance:function(){return m}}),b)}catch(e){window&&window.trUPP&&window.trUPP.Timing&&window.trUPP.Timing.recordInfo("upp_exception",{ex_message:e.message,ex_stack:e.stack}),Console.write("Error loading newpp_zoom2.js: "+e.message)}var n,o,i,s,a,l,c,d,h,u,p,m,g,f,_,S,b},function(e,t,r){"use strict";
/** @license React v16.7.0
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=r(5),o="function"==typeof Symbol&&Symbol.for,i=o?Symbol.for("react.element"):60103,s=o?Symbol.for("react.portal"):60106,a=o?Symbol.for("react.fragment"):60107,l=o?Symbol.for("react.strict_mode"):60108,c=o?Symbol.for("react.profiler"):60114,d=o?Symbol.for("react.provider"):60109,h=o?Symbol.for("react.context"):60110,u=o?Symbol.for("react.concurrent_mode"):60111,p=o?Symbol.for("react.forward_ref"):60112,m=o?Symbol.for("react.suspense"):60113,g=o?Symbol.for("react.memo"):60115,f=o?Symbol.for("react.lazy"):60116,_="function"==typeof Symbol&&Symbol.iterator;function S(e){for(var t=arguments.length-1,r="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=0;n<t;n++)r+="&args[]="+encodeURIComponent(arguments[n+1]);!function(e,t,r,n,o,i,s,a){if(!e){if((e=void 0)===t)e=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[r,void 0,void 0,void 0,void 0,void 0],c=0;(e=Error(t.replace(/%s/g,function(){return l[c++]}))).name="Invariant Violation"}throw e.framesToPop=1,e}}(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",r)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y={};function P(e,t,r){this.props=e,this.context=t,this.refs=y,this.updater=r||b}function v(){}function w(e,t,r){this.props=e,this.context=t,this.refs=y,this.updater=r||b}P.prototype.isReactComponent={},P.prototype.setState=function(e,t){"object"!=typeof e&&"function"!=typeof e&&null!=e&&S("85"),this.updater.enqueueSetState(this,e,t,"setState")},P.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=P.prototype;var x=w.prototype=new v;x.constructor=w,n(x,P.prototype),x.isPureReactComponent=!0;var U={current:null,currentDispatcher:null},T=Object.prototype.hasOwnProperty,k={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,r){var n=void 0,o={},s=null,a=null;if(null!=t)for(n in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(s=""+t.key),t)T.call(t,n)&&!k.hasOwnProperty(n)&&(o[n]=t[n]);var l=arguments.length-2;if(1===l)o.children=r;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];o.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps)void 0===o[n]&&(o[n]=l[n]);return{$$typeof:i,type:e,key:s,ref:a,props:o,_owner:U.current}}function I(e){return"object"==typeof e&&null!==e&&e.$$typeof===i}var D=/\/+/g,E=[];function L(e,t,r,n){if(E.length){var o=E.pop();return o.result=e,o.keyPrefix=t,o.func=r,o.context=n,o.count=0,o}return{result:e,keyPrefix:t,func:r,context:n,count:0}}function N(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,E.length<10&&E.push(e)}function A(e,t,r){return null==e?0:function e(t,r,n,o){var a=typeof t;"undefined"!==a&&"boolean"!==a||(t=null);var l=!1;if(null===t)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case i:case s:l=!0}}if(l)return n(o,t,""===r?"."+B(t,0):r),1;if(l=0,r=""===r?".":r+":",Array.isArray(t))for(var c=0;c<t.length;c++){var d=r+B(a=t[c],c);l+=e(a,d,n,o)}else if("function"==typeof(d=null===t||"object"!=typeof t?null:"function"==typeof(d=_&&t[_]||t["@@iterator"])?d:null))for(t=d.call(t),c=0;!(a=t.next()).done;)l+=e(a=a.value,d=r+B(a,c++),n,o);else"object"===a&&S("31","[object Object]"==(n=""+t)?"object with keys {"+Object.keys(t).join(", ")+"}":n,"");return l}(e,"",t,r)}function B(e,t){return"object"==typeof e&&null!==e&&null!=e.key?(r=e.key,n={"=":"=0",":":"=2"},"$"+(""+r).replace(/[=:]/g,function(e){return n[e]})):t.toString(36);var r,n}function M(e,t){e.func.call(e.context,t,e.count++)}function O(e,t,r){var n,o,s=e.result,a=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?F(e,s,r,function(e){return e}):null!=e&&(I(e)&&(o=a+(!(n=e).key||t&&t.key===e.key?"":(""+e.key).replace(D,"$&/")+"/")+r,e={$$typeof:i,type:n.type,key:o,ref:n.ref,props:n.props,_owner:n._owner}),s.push(e))}function F(e,t,r,n,o){var i="";null!=r&&(i=(""+r).replace(D,"$&/")+"/"),A(e,O,t=L(t,i,n,o)),N(t)}var j={Children:{map:function(e,t,r){if(null==e)return e;var n=[];return F(e,n,null,t,r),n},forEach:function(e,t,r){if(null==e)return e;A(e,M,t=L(null,null,t,r)),N(t)},count:function(e){return A(e,function(){return null},null)},toArray:function(e){var t=[];return F(e,t,null,function(e){return e}),t},only:function(e){return I(e)||S("143"),e}},createRef:function(){return{current:null}},Component:P,PureComponent:w,createContext:function(e,t){return void 0===t&&(t=null),(e={$$typeof:h,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:d,_context:e},e.Consumer=e},forwardRef:function(e){return{$$typeof:p,render:e}},lazy:function(e){return{$$typeof:f,_ctor:e,_status:-1,_result:null}},memo:function(e,t){return{$$typeof:g,type:e,compare:void 0===t?null:t}},Fragment:a,StrictMode:l,Suspense:m,createElement:C,cloneElement:function(e,t,r){null==e&&S("267",e);var o=void 0,s=n({},e.props),a=e.key,l=e.ref,c=e._owner;if(null!=t){void 0!==t.ref&&(l=t.ref,c=U.current),void 0!==t.key&&(a=""+t.key);var d=void 0;for(o in e.type&&e.type.defaultProps&&(d=e.type.defaultProps),t)T.call(t,o)&&!k.hasOwnProperty(o)&&(s[o]=void 0===t[o]&&void 0!==d?d[o]:t[o])}if(1==(o=arguments.length-2))s.children=r;else if(1<o){d=Array(o);for(var h=0;h<o;h++)d[h]=arguments[h+2];s.children=d}return{$$typeof:i,type:e.type,key:a,ref:l,props:s,_owner:c}},createFactory:function(e){var t=C.bind(null,e);return t.type=e,t},isValidElement:I,version:"16.7.0",unstable_ConcurrentMode:u,unstable_Profiler:c,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentOwner:U,assign:n}};e.exports=j.default||j},function(e,t,r){"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=r(74)},function(e,t,r){"use strict";
/** @license React v16.7.0
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=r(4),o=r(5),i=r(75);function s(e){for(var t=arguments.length-1,r="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=0;n<t;n++)r+="&args[]="+encodeURIComponent(arguments[n+1]);!function(e,t,r,n,o,i,s,a){if(!e){if((e=void 0)===t)e=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[r,void 0,void 0,void 0,void 0,void 0],c=0;(e=Error(t.replace(/%s/g,function(){return l[c++]}))).name="Invariant Violation"}throw e.framesToPop=1,e}}(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",r)}n||s("227");var a=!1,l=null,c=!1,d=null,h={onError:function(e){a=!0,l=e}};function u(e,t,r,n,o,i,s,c,d){a=!1,l=null,function(e,t,r,n,o,i,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(e){this.onError(e)}}.apply(h,arguments)}var p=null,m={};function g(){if(p)for(var e in m){var t=m[e],r=p.indexOf(e);if(-1<r||s("96",e),!_[r])for(var n in t.extractEvents||s("97",e),r=(_[r]=t).eventTypes){var o=void 0,i=r[n],a=t,l=n;S.hasOwnProperty(l)&&s("99",l);var c=(S[l]=i).phasedRegistrationNames;if(c){for(o in c)c.hasOwnProperty(o)&&f(c[o],a,l);o=!0}else o=!!i.registrationName&&(f(i.registrationName,a,l),!0);o||s("98",n,e)}}}function f(e,t,r){b[e]&&s("100",e),b[e]=t,y[e]=t.eventTypes[r].dependencies}var _=[],S={},b={},y={},P=null,v=null,w=null;function x(e,t,r){var n=e.type||"unknown-event";e.currentTarget=w(r),function(e,t,r,n,o,i,h,p,m){if(u.apply(this,arguments),a){if(a){var g=l;a=!1,l=null}else s("198"),g=void 0;c||(c=!0,d=g)}}(n,t,void 0,e),e.currentTarget=null}function U(e,t){return null==t&&s("30"),null==e?t:Array.isArray(e)?(Array.isArray(t)?e.push.apply(e,t):e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function T(e,t,r){Array.isArray(e)?e.forEach(t,r):e&&t.call(r,e)}var k=null;function C(e){if(e){var t=e._dispatchListeners,r=e._dispatchInstances;if(Array.isArray(t))for(var n=0;n<t.length&&!e.isPropagationStopped();n++)x(e,t[n],r[n]);else t&&x(e,t,r);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}var I={injectEventPluginOrder:function(e){p&&s("101"),p=Array.prototype.slice.call(e),g()},injectEventPluginsByName:function(e){var t,r=!1;for(t in e)if(e.hasOwnProperty(t)){var n=e[t];m.hasOwnProperty(t)&&m[t]===n||(m[t]&&s("102",t),m[t]=n,r=!0)}r&&g()}};function D(e,t){var r=e.stateNode;if(!r)return null;var n=P(r);if(!n)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}return e?null:(r&&"function"!=typeof r&&s("231",t,typeof r),r)}function E(e){if(null!==e&&(k=U(k,e)),e=k,k=null,e&&(T(e,C),k&&s("95"),c))throw e=d,c=!1,d=null,e}var L=Math.random().toString(36).slice(2),N="__reactInternalInstance$"+L,A="__reactEventHandlers$"+L;function B(e){if(e[N])return e[N];for(;!e[N];){if(!e.parentNode)return null;e=e.parentNode}return 5===(e=e[N]).tag||6===e.tag?e:null}function M(e){return!(e=e[N])||5!==e.tag&&6!==e.tag?null:e}function O(e){if(5===e.tag||6===e.tag)return e.stateNode;s("33")}function F(e){return e[A]||null}function j(e){for(;(e=e.return)&&5!==e.tag;);return e||null}function R(e,t,r){(t=D(e,r.dispatchConfig.phasedRegistrationNames[t]))&&(r._dispatchListeners=U(r._dispatchListeners,t),r._dispatchInstances=U(r._dispatchInstances,e))}function z(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,r=[];t;)r.push(t),t=j(t);for(t=r.length;0<t--;)R(r[t],"captured",e);for(t=0;t<r.length;t++)R(r[t],"bubbled",e)}}function $(e,t,r){e&&r&&r.dispatchConfig.registrationName&&(t=D(e,r.dispatchConfig.registrationName))&&(r._dispatchListeners=U(r._dispatchListeners,t),r._dispatchInstances=U(r._dispatchInstances,e))}function H(e){e&&e.dispatchConfig.registrationName&&$(e._targetInst,null,e)}function W(e){T(e,z)}var V=!("undefined"==typeof window||!window.document||!window.document.createElement);function q(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var G={animationend:q("Animation","AnimationEnd"),animationiteration:q("Animation","AnimationIteration"),animationstart:q("Animation","AnimationStart"),transitionend:q("Transition","TransitionEnd")},Z={},Y={};function X(e){if(Z[e])return Z[e];if(!G[e])return e;var t,r=G[e];for(t in r)if(r.hasOwnProperty(t)&&t in Y)return Z[e]=r[t];return e}V&&(Y=document.createElement("div").style,"AnimationEvent"in window||(delete G.animationend.animation,delete G.animationiteration.animation,delete G.animationstart.animation),"TransitionEvent"in window||delete G.transitionend.transition);var K=X("animationend"),J=X("animationiteration"),Q=X("animationstart"),ee=X("transitionend"),te="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),re=null,ne=null,oe=null;function ie(){if(oe)return oe;var e,t,r=ne,n=r.length,o="value"in re?re.value:re.textContent,i=o.length;for(e=0;e<n&&r[e]===o[e];e++);var s=n-e;for(t=1;t<=s&&r[n-t]===o[i-t];t++);return oe=o.slice(e,1<t?1-t:void 0)}function se(){return!0}function ae(){return!1}function le(e,t,r,n){for(var o in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=r,e=this.constructor.Interface)e.hasOwnProperty(o)&&((t=e[o])?this[o]=t(r):"target"===o?this.target=n:this[o]=r[o]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?se:ae,this.isPropagationStopped=ae,this}function ce(e,t,r,n){if(this.eventPool.length){var o=this.eventPool.pop();return this.call(o,e,t,r,n),o}return new this(e,t,r,n)}function de(e){e instanceof this||s("279"),e.destructor(),this.eventPool.length<10&&this.eventPool.push(e)}function he(e){e.eventPool=[],e.getPooled=ce,e.release=de}o(le.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=se)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=se)},persist:function(){this.isPersistent=se},isPersistent:ae,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=ae,this._dispatchInstances=this._dispatchListeners=null}}),le.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},le.extend=function(e){function t(){}function r(){return n.apply(this,arguments)}var n=this;t.prototype=n.prototype;var i=new t;return o(i,r.prototype),((r.prototype=i).constructor=r).Interface=o({},n.Interface,e),r.extend=n.extend,he(r),r},he(le);var ue=le.extend({data:null}),pe=le.extend({data:null}),me=[9,13,27,32],ge=V&&"CompositionEvent"in window,fe=null;V&&"documentMode"in document&&(fe=document.documentMode);var _e=V&&"TextEvent"in window&&!fe,Se=V&&(!ge||fe&&8<fe&&fe<=11),be=String.fromCharCode(32),ye={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},Pe=!1;function ve(e,t){switch(e){case"keyup":return-1!==me.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function we(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var xe=!1,Ue={eventTypes:ye,extractEvents:function(e,t,r,n){var o=void 0,i=void 0;if(ge)e:{switch(e){case"compositionstart":o=ye.compositionStart;break e;case"compositionend":o=ye.compositionEnd;break e;case"compositionupdate":o=ye.compositionUpdate;break e}o=void 0}else xe?ve(e,r)&&(o=ye.compositionEnd):"keydown"===e&&229===r.keyCode&&(o=ye.compositionStart);return i=o?(Se&&"ko"!==r.locale&&(xe||o!==ye.compositionStart?o===ye.compositionEnd&&xe&&(i=ie()):(ne="value"in(re=n)?re.value:re.textContent,xe=!0)),o=ue.getPooled(o,t,r,n),i?o.data=i:null!==(i=we(r))&&(o.data=i),W(o),o):null,(e=_e?function(e,t){switch(e){case"compositionend":return we(t);case"keypress":return 32!==t.which?null:(Pe=!0,be);case"textInput":return(e=t.data)===be&&Pe?null:e;default:return null}}(e,r):function(e,t){if(xe)return"compositionend"===e||!ge&&ve(e,t)?(e=ie(),oe=ne=re=null,xe=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Se&&"ko"!==t.locale?null:t.data;default:return null}}(e,r))?((t=pe.getPooled(ye.beforeInput,t,r,n)).data=e,W(t)):t=null,null===i?t:null===t?i:[i,t]}},Te=null,ke=null,Ce=null;function Ie(e){if(e=v(e)){"function"!=typeof Te&&s("280");var t=P(e.stateNode);Te(e.stateNode,e.type,t)}}function De(e){ke?Ce?Ce.push(e):Ce=[e]:ke=e}function Ee(){if(ke){var e=ke,t=Ce;if(Ce=ke=null,Ie(e),t)for(e=0;e<t.length;e++)Ie(t[e])}}function Le(e,t){return e(t)}function Ne(e,t,r){return e(t,r)}function Ae(){}var Be=!1;function Me(e,t){if(Be)return e(t);Be=!0;try{return Le(e,t)}finally{Be=!1,(null!==ke||null!==Ce)&&(Ae(),Ee())}}var Oe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fe(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Oe[e.type]:"textarea"===t}function je(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function Re(e){if(!V)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"==typeof t[e]),t}function ze(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function $e(e){e._valueTracker||(e._valueTracker=function(e){var t=ze(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==r&&"function"==typeof r.get&&"function"==typeof r.set){var o=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(e){n=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function He(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=ze(e)?e.checked?"true":"false":e.value),(e=n)!==r&&(t.setValue(e),!0)}var We=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ve=/^(.*)[\\\/]/,qe="function"==typeof Symbol&&Symbol.for,Ge=qe?Symbol.for("react.element"):60103,Ze=qe?Symbol.for("react.portal"):60106,Ye=qe?Symbol.for("react.fragment"):60107,Xe=qe?Symbol.for("react.strict_mode"):60108,Ke=qe?Symbol.for("react.profiler"):60114,Je=qe?Symbol.for("react.provider"):60109,Qe=qe?Symbol.for("react.context"):60110,et=qe?Symbol.for("react.concurrent_mode"):60111,tt=qe?Symbol.for("react.forward_ref"):60112,rt=qe?Symbol.for("react.suspense"):60113,nt=qe?Symbol.for("react.memo"):60115,ot=qe?Symbol.for("react.lazy"):60116,it="function"==typeof Symbol&&Symbol.iterator;function st(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=it&&e[it]||e["@@iterator"])?e:null}function at(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case et:return"ConcurrentMode";case Ye:return"Fragment";case Ze:return"Portal";case Ke:return"Profiler";case Xe:return"StrictMode";case rt:return"Suspense"}if("object"==typeof e)switch(e.$$typeof){case Qe:return"Context.Consumer";case Je:return"Context.Provider";case tt:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case nt:return at(e.type);case ot:if(e=1===e._status?e._result:null)return at(e)}return null}function lt(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var r="";break e;default:var n=e._debugOwner,o=e._debugSource,i=at(e.type);r=null,n&&(r=at(n.type)),n=i,i="",o?i=" (at "+o.fileName.replace(Ve,"")+":"+o.lineNumber+")":r&&(i=" (created by "+r+")"),r="\n    in "+(n||"Unknown")+i}t+=r,e=e.return}while(e);return t}var ct=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,dt=Object.prototype.hasOwnProperty,ht={},ut={};function pt(e,t,r,n,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=o,this.mustUseProperty=r,this.propertyName=e,this.type=t}var mt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){mt[e]=new pt(e,0,!1,e,null)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];mt[t]=new pt(t,1,!1,e[1],null)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){mt[e]=new pt(e,2,!1,e.toLowerCase(),null)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){mt[e]=new pt(e,2,!1,e,null)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){mt[e]=new pt(e,3,!1,e.toLowerCase(),null)}),["checked","multiple","muted","selected"].forEach(function(e){mt[e]=new pt(e,3,!0,e,null)}),["capture","download"].forEach(function(e){mt[e]=new pt(e,4,!1,e,null)}),["cols","rows","size","span"].forEach(function(e){mt[e]=new pt(e,6,!1,e,null)}),["rowSpan","start"].forEach(function(e){mt[e]=new pt(e,5,!1,e.toLowerCase(),null)});var gt=/[\-:]([a-z])/g;function ft(e){return e[1].toUpperCase()}function _t(e,t,r,n){var o,i=mt.hasOwnProperty(t)?mt[t]:null;(null!==i?0===i.type:!n&&2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1]))||(function(e,t,r,n){if(null==t||function(e,t,r,n){if(null!==r&&0===r.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==r?!r.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,r,n))return!0;if(n)return!1;if(null!==r)switch(r.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||t<1}return!1}(t,r,i,n)&&(r=null),n||null===i?(o=t,(dt.call(ut,o)||!dt.call(ht,o)&&(ct.test(o)?ut[o]=!0:!(ht[o]=!0)))&&(null===r?e.removeAttribute(t):e.setAttribute(t,""+r))):i.mustUseProperty?e[i.propertyName]=null===r?3!==i.type&&"":r:(t=i.attributeName,n=i.attributeNamespace,null===r?e.removeAttribute(t):(r=3===(i=i.type)||4===i&&!0===r?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}function St(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function bt(e,t){var r=t.checked;return o({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:e._wrapperState.initialChecked})}function yt(e,t){var r=null==t.defaultValue?"":t.defaultValue,n=null!=t.checked?t.checked:t.defaultChecked;r=St(null!=t.value?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Pt(e,t){null!=(t=t.checked)&&_t(e,"checked",t,!1)}function vt(e,t){Pt(e,t);var r=St(t.value),n=t.type;if(null!=r)"number"===n?(0===r&&""===e.value||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if("submit"===n||"reset"===n)return void e.removeAttribute("value");t.hasOwnProperty("value")?xt(e,t.type,r):t.hasOwnProperty("defaultValue")&&xt(e,t.type,St(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function wt(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!("submit"!==n&&"reset"!==n||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}""!==(r=e.name)&&(e.name=""),e.defaultChecked=!e.defaultChecked,e.defaultChecked=!!e._wrapperState.initialChecked,""!==r&&(e.name=r)}function xt(e,t,r){"number"===t&&e.ownerDocument.activeElement===e||(null==r?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(gt,ft);mt[t]=new pt(t,1,!1,e,null)}),"xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(gt,ft);mt[t]=new pt(t,1,!1,e,"http://www.w3.org/1999/xlink")}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(gt,ft);mt[t]=new pt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace")}),mt.tabIndex=new pt("tabIndex",1,!1,"tabindex",null);var Ut={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function Tt(e,t,r){return(e=le.getPooled(Ut.change,e,t,r)).type="change",De(r),W(e),e}var kt=null,Ct=null;function It(e){E(e)}function Dt(e){if(He(O(e)))return e}function Et(e,t){if("change"===e)return t}var Lt=!1;function Nt(){kt&&(kt.detachEvent("onpropertychange",At),Ct=kt=null)}function At(e){"value"===e.propertyName&&Dt(Ct)&&Me(It,e=Tt(Ct,e,je(e)))}function Bt(e,t,r){"focus"===e?(Nt(),Ct=r,(kt=t).attachEvent("onpropertychange",At)):"blur"===e&&Nt()}function Mt(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Dt(Ct)}function Ot(e,t){if("click"===e)return Dt(t)}function Ft(e,t){if("input"===e||"change"===e)return Dt(t)}V&&(Lt=Re("input")&&(!document.documentMode||9<document.documentMode));var jt={eventTypes:Ut,_isInputEventSupported:Lt,extractEvents:function(e,t,r,n){var o=t?O(t):window,i=void 0,s=void 0,a=o.nodeName&&o.nodeName.toLowerCase();if("select"===a||"input"===a&&"file"===o.type?i=Et:Fe(o)?Lt?i=Ft:(i=Mt,s=Bt):(a=o.nodeName)&&"input"===a.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(i=Ot),i&&(i=i(e,t)))return Tt(i,r,n);s&&s(e,o,t),"blur"===e&&(e=o._wrapperState)&&e.controlled&&"number"===o.type&&xt(o,"number",o.value)}},Rt=le.extend({view:null,detail:null}),zt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $t(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=zt[e])&&!!t[e]}function Ht(){return $t}var Wt=0,Vt=0,qt=!1,Gt=!1,Zt=Rt.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Ht,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=Wt;return Wt=e.screenX,qt?"mousemove"===e.type?e.screenX-t:0:(qt=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Vt;return Vt=e.screenY,Gt?"mousemove"===e.type?e.screenY-t:0:(Gt=!0,0)}}),Yt=Zt.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Xt={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Kt={eventTypes:Xt,extractEvents:function(e,t,r,n){var o="mouseover"===e||"pointerover"===e,i="mouseout"===e||"pointerout"===e;if(o&&(r.relatedTarget||r.fromElement)||!i&&!o)return null;if(o=n.window===n?n:(o=n.ownerDocument)?o.defaultView||o.parentWindow:window,i?(i=t,t=(t=r.relatedTarget||r.toElement)?B(t):null):i=null,i===t)return null;var s=void 0,a=void 0,l=void 0,c=void 0;"mouseout"===e||"mouseover"===e?(s=Zt,a=Xt.mouseLeave,l=Xt.mouseEnter,c="mouse"):"pointerout"!==e&&"pointerover"!==e||(s=Yt,a=Xt.pointerLeave,l=Xt.pointerEnter,c="pointer");var d=null==i?o:O(i);if(o=null==t?o:O(t),(e=s.getPooled(a,i,r,n)).type=c+"leave",e.target=d,e.relatedTarget=o,(r=s.getPooled(l,t,r,n)).type=c+"enter",r.target=o,r.relatedTarget=d,n=t,i&&n)e:{for(o=n,c=0,s=t=i;s;s=j(s))c++;for(s=0,l=o;l;l=j(l))s++;for(;0<c-s;)t=j(t),c--;for(;0<s-c;)o=j(o),s--;for(;c--;){if(t===o||t===o.alternate)break e;t=j(t),o=j(o)}t=null}else t=null;for(o=t,t=[];i&&i!==o&&(null===(c=i.alternate)||c!==o);)t.push(i),i=j(i);for(i=[];n&&n!==o&&(null===(c=n.alternate)||c!==o);)i.push(n),n=j(n);for(n=0;n<t.length;n++)$(t[n],"bubbled",e);for(n=i.length;0<n--;)$(i[n],"captured",r);return[e,r]}},Jt=Object.prototype.hasOwnProperty;function Qt(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function er(e,t){if(Qt(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++)if(!Jt.call(t,r[n])||!Qt(e[r[n]],t[r[n]]))return!1;return!0}function tr(e){var t=e;if(e.alternate)for(;t.return;)t=t.return;else{if(0!=(2&t.effectTag))return 1;for(;t.return;)if(0!=(2&(t=t.return).effectTag))return 1}return 3===t.tag?2:3}function rr(e){2!==tr(e)&&s("188")}function nr(e){if(!(e=function(e){var t=e.alternate;if(!t)return 3===(t=tr(e))&&s("188"),1===t?null:e;for(var r=e,n=t;;){var o=r.return,i=o?o.alternate:null;if(!o||!i)break;if(o.child===i.child){for(var a=o.child;a;){if(a===r)return rr(o),e;if(a===n)return rr(o),t;a=a.sibling}s("188")}if(r.return!==n.return)r=o,n=i;else{a=!1;for(var l=o.child;l;){if(l===r){a=!0,r=o,n=i;break}if(l===n){a=!0,n=o,r=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===r){a=!0,r=i,n=o;break}if(l===n){a=!0,n=i,r=o;break}l=l.sibling}a||s("189")}}r.alternate!==n&&s("190")}return 3!==r.tag&&s("188"),r.stateNode.current===r?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t=(t.child.return=t).child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}var or=le.extend({animationName:null,elapsedTime:null,pseudoElement:null}),ir=le.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),sr=Rt.extend({relatedTarget:null});function ar(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var lr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dr=Rt.extend({key:function(e){if(e.key){var t=lr[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=ar(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?cr[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Ht,charCode:function(e){return"keypress"===e.type?ar(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?ar(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),hr=Zt.extend({dataTransfer:null}),ur=Rt.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Ht}),pr=le.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),mr=Zt.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),gr=[["abort","abort"],[K,"animationEnd"],[J,"animationIteration"],[Q,"animationStart"],["canplay","canPlay"],["canplaythrough","canPlayThrough"],["drag","drag"],["dragenter","dragEnter"],["dragexit","dragExit"],["dragleave","dragLeave"],["dragover","dragOver"],["durationchange","durationChange"],["emptied","emptied"],["encrypted","encrypted"],["ended","ended"],["error","error"],["gotpointercapture","gotPointerCapture"],["load","load"],["loadeddata","loadedData"],["loadedmetadata","loadedMetadata"],["loadstart","loadStart"],["lostpointercapture","lostPointerCapture"],["mousemove","mouseMove"],["mouseout","mouseOut"],["mouseover","mouseOver"],["playing","playing"],["pointermove","pointerMove"],["pointerout","pointerOut"],["pointerover","pointerOver"],["progress","progress"],["scroll","scroll"],["seeking","seeking"],["stalled","stalled"],["suspend","suspend"],["timeupdate","timeUpdate"],["toggle","toggle"],["touchmove","touchMove"],[ee,"transitionEnd"],["waiting","waiting"],["wheel","wheel"]],fr={},_r={};function Sr(e,t){var r=e[0],n="on"+((e=e[1])[0].toUpperCase()+e.slice(1));t={phasedRegistrationNames:{bubbled:n,captured:n+"Capture"},dependencies:[r],isInteractive:t},fr[e]=t,_r[r]=t}[["blur","blur"],["cancel","cancel"],["click","click"],["close","close"],["contextmenu","contextMenu"],["copy","copy"],["cut","cut"],["auxclick","auxClick"],["dblclick","doubleClick"],["dragend","dragEnd"],["dragstart","dragStart"],["drop","drop"],["focus","focus"],["input","input"],["invalid","invalid"],["keydown","keyDown"],["keypress","keyPress"],["keyup","keyUp"],["mousedown","mouseDown"],["mouseup","mouseUp"],["paste","paste"],["pause","pause"],["play","play"],["pointercancel","pointerCancel"],["pointerdown","pointerDown"],["pointerup","pointerUp"],["ratechange","rateChange"],["reset","reset"],["seeked","seeked"],["submit","submit"],["touchcancel","touchCancel"],["touchend","touchEnd"],["touchstart","touchStart"],["volumechange","volumeChange"]].forEach(function(e){Sr(e,!0)}),gr.forEach(function(e){Sr(e,!1)});var br={eventTypes:fr,isInteractiveTopLevelEventType:function(e){return void 0!==(e=_r[e])&&!0===e.isInteractive},extractEvents:function(e,t,r,n){var o=_r[e];if(!o)return null;switch(e){case"keypress":if(0===ar(r))return null;case"keydown":case"keyup":e=dr;break;case"blur":case"focus":e=sr;break;case"click":if(2===r.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=Zt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=hr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=ur;break;case K:case J:case Q:e=or;break;case ee:e=pr;break;case"scroll":e=Rt;break;case"wheel":e=mr;break;case"copy":case"cut":case"paste":e=ir;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=Yt;break;default:e=le}return W(t=e.getPooled(o,t,r,n)),t}},yr=br.isInteractiveTopLevelEventType,Pr=[];function vr(e){var t=e.targetInst,r=t;do{if(!r){e.ancestors.push(r);break}var n;for(n=r;n.return;)n=n.return;if(!(n=3!==n.tag?null:n.stateNode.containerInfo))break;e.ancestors.push(r),r=B(n)}while(r);for(r=0;r<e.ancestors.length;r++){t=e.ancestors[r];var o=je(e.nativeEvent);n=e.topLevelType;for(var i=e.nativeEvent,s=null,a=0;a<_.length;a++){var l=_[a];l&&(l=l.extractEvents(n,t,i,o))&&(s=U(s,l))}E(s)}}var wr=!0;function xr(e,t){if(!t)return null;var r=(yr(e)?Tr:kr).bind(null,e);t.addEventListener(e,r,!1)}function Ur(e,t){if(!t)return null;var r=(yr(e)?Tr:kr).bind(null,e);t.addEventListener(e,r,!0)}function Tr(e,t){Ne(kr,e,t)}function kr(e,t){if(wr){var r=je(t);if(null===(r=B(r))||"number"!=typeof r.tag||2===tr(r)||(r=null),Pr.length){var n=Pr.pop();n.topLevelType=e,n.nativeEvent=t,n.targetInst=r,e=n}else e={topLevelType:e,nativeEvent:t,targetInst:r,ancestors:[]};try{Me(vr,e)}finally{e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,Pr.length<10&&Pr.push(e)}}}var Cr={},Ir=0,Dr="_reactListenersID"+(""+Math.random()).slice(2);function Er(e){return Object.prototype.hasOwnProperty.call(e,Dr)||(e[Dr]=Ir++,Cr[e[Dr]]={}),Cr[e[Dr]]}function Lr(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Nr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ar(e,t){var r,n=Nr(e);for(e=0;n;){if(3===n.nodeType){if(r=e+n.textContent.length,e<=t&&t<=r)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Nr(n)}}function Br(){for(var e=window,t=Lr();t instanceof e.HTMLIFrameElement;){try{e=t.contentDocument.defaultView}catch(e){break}t=Lr(e.document)}return t}function Mr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var Or=V&&"documentMode"in document&&document.documentMode<=11,Fr={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},jr=null,Rr=null,zr=null,$r=!1;function Hr(e,t){var r=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return $r||null==jr||jr!==Lr(r)?null:(r="selectionStart"in(r=jr)&&Mr(r)?{start:r.selectionStart,end:r.selectionEnd}:{anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},zr&&er(zr,r)?null:(zr=r,(e=le.getPooled(Fr.select,Rr,e,t)).type="select",e.target=jr,W(e),e))}var Wr={eventTypes:Fr,extractEvents:function(e,t,r,n){var o,i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;if(!(o=!i)){e:{i=Er(i),o=y.onSelect;for(var s=0;s<o.length;s++){var a=o[s];if(!i.hasOwnProperty(a)||!i[a]){i=!1;break e}}i=!0}o=!i}if(o)return null;switch(i=t?O(t):window,e){case"focus":(Fe(i)||"true"===i.contentEditable)&&(jr=i,Rr=t,zr=null);break;case"blur":zr=Rr=jr=null;break;case"mousedown":$r=!0;break;case"contextmenu":case"mouseup":case"dragend":return $r=!1,Hr(r,n);case"selectionchange":if(Or)break;case"keydown":case"keyup":return Hr(r,n)}return null}};function Vr(e,t){var r,i;return e=o({children:void 0},t),r=t.children,i="",n.Children.forEach(r,function(e){null!=e&&(i+=e)}),(t=i)&&(e.children=t),e}function qr(e,t,r,n){if(e=e.options,t){t={};for(var o=0;o<r.length;o++)t["$"+r[o]]=!0;for(r=0;r<e.length;r++)o=t.hasOwnProperty("$"+e[r].value),e[r].selected!==o&&(e[r].selected=o),o&&n&&(e[r].defaultSelected=!0)}else{for(r=""+St(r),t=null,o=0;o<e.length;o++){if(e[o].value===r)return e[o].selected=!0,void(n&&(e[o].defaultSelected=!0));null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function Gr(e,t){return null!=t.dangerouslySetInnerHTML&&s("91"),o({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Zr(e,t){var r=t.value;null==r&&(r=t.defaultValue,null!=(t=t.children)&&(null!=r&&s("92"),Array.isArray(t)&&(t.length<=1||s("93"),t=t[0]),r=t),null==r&&(r="")),e._wrapperState={initialValue:St(r)}}function Yr(e,t){var r=St(t.value),n=St(t.defaultValue);null!=r&&((r=""+r)!==e.value&&(e.value=r),null==t.defaultValue&&e.defaultValue!==r&&(e.defaultValue=r)),null!=n&&(e.defaultValue=""+n)}function Xr(e){var t=e.textContent;t===e._wrapperState.initialValue&&(e.value=t)}I.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),P=F,v=M,w=O,I.injectEventPluginsByName({SimpleEventPlugin:br,EnterLeaveEventPlugin:Kt,ChangeEventPlugin:jt,SelectEventPlugin:Wr,BeforeInputEventPlugin:Ue});var Kr={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function Jr(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Qr(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?Jr(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var en,tn=void 0,rn=(en=function(e,t){if(e.namespaceURI!==Kr.svg||"innerHTML"in e)e.innerHTML=t;else{for((tn=tn||document.createElement("div")).innerHTML="<svg>"+t+"</svg>",t=tn.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,r,n){MSApp.execUnsafeLocalFunction(function(){return en(e,t)})}:en);function nn(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}var on={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},sn=["Webkit","ms","Moz","O"];function an(e,t,r){return null==t||"boolean"==typeof t||""===t?"":r||"number"!=typeof t||0===t||on.hasOwnProperty(e)&&on[e]?(""+t).trim():t+"px"}function ln(e,t){for(var r in e=e.style,t)if(t.hasOwnProperty(r)){var n=0===r.indexOf("--"),o=an(r,t[r],n);"float"===r&&(r="cssFloat"),n?e.setProperty(r,o):e[r]=o}}Object.keys(on).forEach(function(e){sn.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),on[t]=on[e]})});var cn=o({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function dn(e,t){t&&(cn[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML)&&s("137",e,""),null!=t.dangerouslySetInnerHTML&&(null!=t.children&&s("60"),"object"==typeof t.dangerouslySetInnerHTML&&"__html"in t.dangerouslySetInnerHTML||s("61")),null!=t.style&&"object"!=typeof t.style&&s("62",""))}function hn(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function un(e,t){var r=Er(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=y[t];for(var n=0;n<t.length;n++){var o=t[n];if(!r.hasOwnProperty(o)||!r[o]){switch(o){case"scroll":Ur("scroll",e);break;case"focus":case"blur":Ur("focus",e),Ur("blur",e),r.blur=!0,r.focus=!0;break;case"cancel":case"close":Re(o)&&Ur(o,e);break;case"invalid":case"submit":case"reset":break;default:-1===te.indexOf(o)&&xr(o,e)}r[o]=!0}}}function pn(){}var mn=null,gn=null;function fn(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function _n(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Sn="function"==typeof setTimeout?setTimeout:void 0,bn="function"==typeof clearTimeout?clearTimeout:void 0;function yn(e){for(e=e.nextSibling;e&&1!==e.nodeType&&3!==e.nodeType;)e=e.nextSibling;return e}function Pn(e){for(e=e.firstChild;e&&1!==e.nodeType&&3!==e.nodeType;)e=e.nextSibling;return e}new Set;var vn=[],wn=-1;function xn(e){wn<0||(e.current=vn[wn],vn[wn]=null,wn--)}function Un(e,t){vn[++wn]=e.current,e.current=t}var Tn={},kn={current:Tn},Cn={current:!1},In=Tn;function Dn(e,t){var r=e.type.contextTypes;if(!r)return Tn;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var o,i={};for(o in r)i[o]=t[o];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function En(e){return null!=e.childContextTypes}function Ln(e){xn(Cn),xn(kn)}function Nn(e){xn(Cn),xn(kn)}function An(e,t,r){kn.current!==Tn&&s("168"),Un(kn,t),Un(Cn,r)}function Bn(e,t,r){var n=e.stateNode;if(e=t.childContextTypes,"function"!=typeof n.getChildContext)return r;for(var i in n=n.getChildContext())i in e||s("108",at(t)||"Unknown",i);return o({},r,n)}function Mn(e){var t=e.stateNode;return t=t&&t.__reactInternalMemoizedMergedChildContext||Tn,In=kn.current,Un(kn,t),Un(Cn,Cn.current),!0}function On(e,t,r){var n=e.stateNode;n||s("169"),r?(t=Bn(e,t,In),n.__reactInternalMemoizedMergedChildContext=t,xn(Cn),xn(kn),Un(kn,t)):xn(Cn),Un(Cn,r)}var Fn=null,jn=null;function Rn(e){return function(t){try{return e(t)}catch(t){}}}function zn(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.firstContextDependency=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function $n(e,t,r,n){return new zn(e,t,r,n)}function Hn(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Wn(e,t){var r=e.alternate;return null===r?((r=$n(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,(r.alternate=e).alternate=r):(r.pendingProps=t,r.effectTag=0,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null),r.childExpirationTime=e.childExpirationTime,r.expirationTime=e.expirationTime,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,r.firstContextDependency=e.firstContextDependency,r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Vn(e,t,r,n,o,i){var a=2;if("function"==typeof(n=e))Hn(e)&&(a=1);else if("string"==typeof e)a=5;else e:switch(e){case Ye:return qn(r.children,o,i,t);case et:return Gn(r,3|o,i,t);case Xe:return Gn(r,2|o,i,t);case Ke:return(e=$n(12,r,t,4|o)).elementType=Ke,e.type=Ke,e.expirationTime=i,e;case rt:return(e=$n(13,r,t,o)).elementType=rt,e.type=rt,e.expirationTime=i,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case Je:a=10;break e;case Qe:a=9;break e;case tt:a=11;break e;case nt:a=14;break e;case ot:a=16,n=null;break e}s("130",null==e?e:typeof e,"")}return(t=$n(a,r,t,o)).elementType=e,t.type=n,t.expirationTime=i,t}function qn(e,t,r,n){return(e=$n(7,e,n,t)).expirationTime=r,e}function Gn(e,t,r,n){return e=$n(8,e,n,t),t=0==(1&t)?Xe:et,e.elementType=t,e.type=t,e.expirationTime=r,e}function Zn(e,t,r){return(e=$n(6,e,null,t)).expirationTime=r,e}function Yn(e,t,r){return(t=$n(4,null!==e.children?e.children:[],e.key,t)).expirationTime=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Xn(e,t){e.didError=!1;var r=e.earliestPendingTime;0===r?e.earliestPendingTime=e.latestPendingTime=t:r<t?e.earliestPendingTime=t:e.latestPendingTime>t&&(e.latestPendingTime=t),Qn(t,e)}function Kn(e,t){e.didError=!1,e.latestPingedTime>=t&&(e.latestPingedTime=0);var r=e.earliestPendingTime,n=e.latestPendingTime;r===t?e.earliestPendingTime=n===t?e.latestPendingTime=0:n:n===t&&(e.latestPendingTime=r),r=e.earliestSuspendedTime,n=e.latestSuspendedTime,0===r?e.earliestSuspendedTime=e.latestSuspendedTime=t:r<t?e.earliestSuspendedTime=t:t<n&&(e.latestSuspendedTime=t),Qn(t,e)}function Jn(e,t){var r=e.earliestPendingTime;return t<r&&(t=r),t<(e=e.earliestSuspendedTime)&&(t=e),t}function Qn(e,t){var r=t.earliestSuspendedTime,n=t.latestSuspendedTime,o=t.earliestPendingTime,i=t.latestPingedTime;0===(o=0!==o?o:i)&&(0===e||n<e)&&(o=n),0!==(e=o)&&e<r&&(e=r),t.nextExpirationTimeToWorkOn=o,t.expirationTime=e}var eo=!1;function to(e){return{baseState:e,firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function ro(e){return{baseState:e.baseState,firstUpdate:e.firstUpdate,lastUpdate:e.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function no(e){return{expirationTime:e,tag:0,payload:null,callback:null,next:null,nextEffect:null}}function oo(e,t){null===e.lastUpdate?e.firstUpdate=e.lastUpdate=t:(e.lastUpdate.next=t,e.lastUpdate=t)}function io(e,t){var r=e.alternate;if(null===r){var n=e.updateQueue,o=null;null===n&&(n=e.updateQueue=to(e.memoizedState))}else n=e.updateQueue,o=r.updateQueue,null===n?null===o?(n=e.updateQueue=to(e.memoizedState),o=r.updateQueue=to(r.memoizedState)):n=e.updateQueue=ro(o):null===o&&(o=r.updateQueue=ro(n));null===o||n===o?oo(n,t):null===n.lastUpdate||null===o.lastUpdate?(oo(n,t),oo(o,t)):(oo(n,t),o.lastUpdate=t)}function so(e,t){var r=e.updateQueue;null===(r=null===r?e.updateQueue=to(e.memoizedState):ao(e,r)).lastCapturedUpdate?r.firstCapturedUpdate=r.lastCapturedUpdate=t:(r.lastCapturedUpdate.next=t,r.lastCapturedUpdate=t)}function ao(e,t){var r=e.alternate;return null!==r&&t===r.updateQueue&&(t=e.updateQueue=ro(t)),t}function lo(e,t,r,n,i,s){switch(r.tag){case 1:return"function"==typeof(e=r.payload)?e.call(s,n,i):e;case 3:e.effectTag=-2049&e.effectTag|64;case 0:if(null==(i="function"==typeof(e=r.payload)?e.call(s,n,i):e))break;return o({},n,i);case 2:eo=!0}return n}function co(e,t,r,n,o){eo=!1;for(var i=(t=ao(e,t)).baseState,s=null,a=0,l=t.firstUpdate,c=i;null!==l;){var d=l.expirationTime;d<o?(null===s&&(s=l,i=c),a<d&&(a=d)):(c=lo(e,0,l,c,r,n),null!==l.callback&&(e.effectTag|=32,(l.nextEffect=null)===t.lastEffect?t.firstEffect=t.lastEffect=l:(t.lastEffect.nextEffect=l,t.lastEffect=l))),l=l.next}for(d=null,l=t.firstCapturedUpdate;null!==l;){var h=l.expirationTime;h<o?(null===d&&(d=l,null===s&&(i=c)),a<h&&(a=h)):(c=lo(e,0,l,c,r,n),null!==l.callback&&(e.effectTag|=32,(l.nextEffect=null)===t.lastCapturedEffect?t.firstCapturedEffect=t.lastCapturedEffect=l:(t.lastCapturedEffect.nextEffect=l,t.lastCapturedEffect=l))),l=l.next}null===s&&(t.lastUpdate=null),null===d?t.lastCapturedUpdate=null:e.effectTag|=32,null===s&&null===d&&(i=c),t.baseState=i,t.firstUpdate=s,t.firstCapturedUpdate=d,e.expirationTime=a,e.memoizedState=c}function ho(e,t,r){null!==t.firstCapturedUpdate&&(null!==t.lastUpdate&&(t.lastUpdate.next=t.firstCapturedUpdate,t.lastUpdate=t.lastCapturedUpdate),t.firstCapturedUpdate=t.lastCapturedUpdate=null),uo(t.firstEffect,r),t.firstEffect=t.lastEffect=null,uo(t.firstCapturedEffect,r),t.firstCapturedEffect=t.lastCapturedEffect=null}function uo(e,t){for(;null!==e;){var r=e.callback;if(null!==r){e.callback=null;var n=t;"function"!=typeof r&&s("191",r),r.call(n)}e=e.nextEffect}}function po(e,t){return{value:e,source:t,stack:lt(t)}}var mo={current:null},go=null,fo=null,_o=null;function So(e,t){var r=e.type._context;Un(mo,r._currentValue),r._currentValue=t}function bo(e){var t=mo.current;xn(mo),e.type._context._currentValue=t}function yo(e){_o=fo=null,(go=e).firstContextDependency=null}function Po(e,t){return _o!==e&&!1!==t&&0!==t&&("number"==typeof t&&1073741823!==t||(_o=e,t=1073741823),t={context:e,observedBits:t,next:null},null===fo?(null===go&&s("293"),go.firstContextDependency=fo=t):fo=fo.next=t),e._currentValue}var vo={},wo={current:vo},xo={current:vo},Uo={current:vo};function To(e){return e===vo&&s("174"),e}function ko(e,t){Un(Uo,t),Un(xo,e),Un(wo,vo);var r=t.nodeType;switch(r){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Qr(null,"");break;default:t=Qr(t=(r=8===r?t.parentNode:t).namespaceURI||null,r=r.tagName)}xn(wo),Un(wo,t)}function Co(e){xn(wo),xn(xo),xn(Uo)}function Io(e){To(Uo.current);var t=To(wo.current),r=Qr(t,e.type);t!==r&&(Un(xo,e),Un(wo,r))}function Do(e){xo.current===e&&(xn(wo),xn(xo))}function Eo(e,t){if(e&&e.defaultProps)for(var r in t=o({},t),e=e.defaultProps)void 0===t[r]&&(t[r]=e[r]);return t}var Lo=We.ReactCurrentOwner,No=(new n.Component).refs;function Ao(e,t,r,n){r=null==(r=r(n,t=e.memoizedState))?t:o({},t,r),e.memoizedState=r,null!==(n=e.updateQueue)&&0===e.expirationTime&&(n.baseState=r)}var Bo={isMounted:function(e){return!!(e=e._reactInternalFiber)&&2===tr(e)},enqueueSetState:function(e,t,r){e=e._reactInternalFiber;var n=Us(),o=no(n=Ki(n,e));o.payload=t,null!=r&&(o.callback=r),qi(),io(e,o),es(e,n)},enqueueReplaceState:function(e,t,r){e=e._reactInternalFiber;var n=Us(),o=no(n=Ki(n,e));o.tag=1,o.payload=t,null!=r&&(o.callback=r),qi(),io(e,o),es(e,n)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var r=Us(),n=no(r=Ki(r,e));n.tag=2,null!=t&&(n.callback=t),qi(),io(e,n),es(e,r)}};function Mo(e,t,r,n,o,i,s){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,i,s):!(t.prototype&&t.prototype.isPureReactComponent&&er(r,n)&&er(o,i))}function Oo(e,t,r){var n=!1,o=Tn,i=t.contextType;return t=new t(r,i="object"==typeof i&&null!==i?Lo.currentDispatcher.readContext(i):(o=En(t)?In:kn.current,(n=null!=(n=t.contextTypes))?Dn(e,o):Tn)),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Bo,(e.stateNode=t)._reactInternalFiber=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=i),t}function Fo(e,t,r,n){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,n),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Bo.enqueueReplaceState(t,t.state,null)}function jo(e,t,r,n){var o=e.stateNode;o.props=r,o.state=e.memoizedState,o.refs=No;var i=t.contextType;o.context="object"==typeof i&&null!==i?Lo.currentDispatcher.readContext(i):Dn(e,i=En(t)?In:kn.current),null!==(i=e.updateQueue)&&(co(e,i,r,o,n),o.state=e.memoizedState),"function"==typeof(i=t.getDerivedStateFromProps)&&(Ao(e,t,i,r),o.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof o.getSnapshotBeforeUpdate||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||(t=o.state,"function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),t!==o.state&&Bo.enqueueReplaceState(o,o.state,null),null!==(i=e.updateQueue)&&(co(e,i,r,o,n),o.state=e.memoizedState)),"function"==typeof o.componentDidMount&&(e.effectTag|=4)}var Ro=Array.isArray;function zo(e,t,r){if(null!==(e=r.ref)&&"function"!=typeof e&&"object"!=typeof e){if(r._owner){r=r._owner;var n=void 0;r&&(1!==r.tag&&s("289"),n=r.stateNode),n||s("147",e);var o=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===o?t.ref:((t=function(e){var t=n.refs;t===No&&(t=n.refs={}),null===e?delete t[o]:t[o]=e})._stringRef=o,t)}"string"!=typeof e&&s("284"),r._owner||s("290",e)}return e}function $o(e,t){"textarea"!==e.type&&s("31","[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,"")}function Ho(e){function t(t,r){if(e){var n=t.lastEffect;null!==n?(n.nextEffect=r,t.lastEffect=r):t.firstEffect=t.lastEffect=r,r.nextEffect=null,r.effectTag=8}}function r(r,n){if(!e)return null;for(;null!==n;)t(r,n),n=n.sibling;return null}function n(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function o(e,t,r){return(e=Wn(e,t)).index=0,e.sibling=null,e}function i(t,r,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<r?(t.effectTag=2,r):n:(t.effectTag=2,r):r}function a(t){return e&&null===t.alternate&&(t.effectTag=2),t}function l(e,t,r,n){return null===t||6!==t.tag?(t=Zn(r,e.mode,n)).return=e:(t=o(t,r)).return=e,t}function c(e,t,r,n){return null!==t&&t.elementType===r.type?(n=o(t,r.props)).ref=zo(e,t,r):(n=Vn(r.type,r.key,r.props,null,e.mode,n)).ref=zo(e,t,r),n.return=e,n}function d(e,t,r,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?(t=Yn(r,e.mode,n)).return=e:(t=o(t,r.children||[])).return=e,t}function h(e,t,r,n,i){return null===t||7!==t.tag?(t=qn(r,e.mode,n,i)).return=e:(t=o(t,r)).return=e,t}function u(e,t,r){if("string"==typeof t||"number"==typeof t)return(t=Zn(""+t,e.mode,r)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case Ge:return(r=Vn(t.type,t.key,t.props,null,e.mode,r)).ref=zo(e,null,t),r.return=e,r;case Ze:return(t=Yn(t,e.mode,r)).return=e,t}if(Ro(t)||st(t))return(t=qn(t,e.mode,r,null)).return=e,t;$o(e,t)}return null}function p(e,t,r,n){var o=null!==t?t.key:null;if("string"==typeof r||"number"==typeof r)return null!==o?null:l(e,t,""+r,n);if("object"==typeof r&&null!==r){switch(r.$$typeof){case Ge:return r.key===o?r.type===Ye?h(e,t,r.props.children,n,o):c(e,t,r,n):null;case Ze:return r.key===o?d(e,t,r,n):null}if(Ro(r)||st(r))return null!==o?null:h(e,t,r,n,null);$o(e,r)}return null}function m(e,t,r,n,o){if("string"==typeof n||"number"==typeof n)return l(t,e=e.get(r)||null,""+n,o);if("object"==typeof n&&null!==n){switch(n.$$typeof){case Ge:return e=e.get(null===n.key?r:n.key)||null,n.type===Ye?h(t,e,n.props.children,o,n.key):c(t,e,n,o);case Ze:return d(t,e=e.get(null===n.key?r:n.key)||null,n,o)}if(Ro(n)||st(n))return h(t,e=e.get(r)||null,n,o,null);$o(t,n)}return null}return function(l,c,d,h){var g="object"==typeof d&&null!==d&&d.type===Ye&&null===d.key;g&&(d=d.props.children);var f="object"==typeof d&&null!==d;if(f)switch(d.$$typeof){case Ge:e:{for(f=d.key,g=c;null!==g;){if(g.key===f){if(7===g.tag?d.type===Ye:g.elementType===d.type){r(l,g.sibling),(c=o(g,d.type===Ye?d.props.children:d.props)).ref=zo(l,g,d),c.return=l,l=c;break e}r(l,g);break}t(l,g),g=g.sibling}l=d.type===Ye?((c=qn(d.props.children,l.mode,h,d.key)).return=l,c):((h=Vn(d.type,d.key,d.props,null,l.mode,h)).ref=zo(l,c,d),h.return=l,h)}return a(l);case Ze:e:{for(g=d.key;null!==c;){if(c.key===g){if(4===c.tag&&c.stateNode.containerInfo===d.containerInfo&&c.stateNode.implementation===d.implementation){r(l,c.sibling),(c=o(c,d.children||[])).return=l,l=c;break e}r(l,c);break}t(l,c),c=c.sibling}(c=Yn(d,l.mode,h)).return=l,l=c}return a(l)}if("string"==typeof d||"number"==typeof d)return d=""+d,a(((c=null!==c&&6===c.tag?(r(l,c.sibling),o(c,d)):(r(l,c),Zn(d,l.mode,h))).return=l,l=c));if(Ro(d))return function(o,s,a,l){for(var c=null,d=null,h=s,g=s=0,f=null;null!==h&&g<a.length;g++){h.index>g?(f=h,h=null):f=h.sibling;var _=p(o,h,a[g],l);if(null===_){null===h&&(h=f);break}e&&h&&null===_.alternate&&t(o,h),s=i(_,s,g),null===d?c=_:d.sibling=_,d=_,h=f}if(g===a.length)return r(o,h),c;if(null===h){for(;g<a.length;g++)(h=u(o,a[g],l))&&(s=i(h,s,g),null===d?c=h:d.sibling=h,d=h);return c}for(h=n(o,h);g<a.length;g++)(f=m(h,o,g,a[g],l))&&(e&&null!==f.alternate&&h.delete(null===f.key?g:f.key),s=i(f,s,g),null===d?c=f:d.sibling=f,d=f);return e&&h.forEach(function(e){return t(o,e)}),c}(l,c,d,h);if(st(d))return function(o,a,l,c){var d=st(l);"function"!=typeof d&&s("150"),null==(l=d.call(l))&&s("151");for(var h=d=null,g=a,f=a=0,_=null,S=l.next();null!==g&&!S.done;f++,S=l.next()){g.index>f?(_=g,g=null):_=g.sibling;var b=p(o,g,S.value,c);if(null===b){g||(g=_);break}e&&g&&null===b.alternate&&t(o,g),a=i(b,a,f),null===h?d=b:h.sibling=b,h=b,g=_}if(S.done)return r(o,g),d;if(null===g){for(;!S.done;f++,S=l.next())null!==(S=u(o,S.value,c))&&(a=i(S,a,f),null===h?d=S:h.sibling=S,h=S);return d}for(g=n(o,g);!S.done;f++,S=l.next())null!==(S=m(g,o,f,S.value,c))&&(e&&null!==S.alternate&&g.delete(null===S.key?f:S.key),a=i(S,a,f),null===h?d=S:h.sibling=S,h=S);return e&&g.forEach(function(e){return t(o,e)}),d}(l,c,d,h);if(f&&$o(l,d),void 0===d&&!g)switch(l.tag){case 1:case 0:s("152",(h=l.type).displayName||h.name||"Component")}return r(l,c)}}var Wo=Ho(!0),Vo=Ho(!1),qo=null,Go=null,Zo=!1;function Yo(e,t){var r=$n(5,null,null,0);r.elementType="DELETED",r.type="DELETED",r.stateNode=t,r.return=e,r.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=r,e.lastEffect=r):e.firstEffect=e.lastEffect=r}function Xo(e,t){switch(e.tag){case 5:var r=e.type;return null!==(t=1!==t.nodeType||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function Ko(e){if(Zo){var t=Go;if(t){var r=t;if(!Xo(e,t)){if(!(t=yn(r))||!Xo(e,t))return e.effectTag|=2,Zo=!1,void(qo=e);Yo(qo,r)}qo=e,Go=Pn(t)}else e.effectTag|=2,Zo=!1,qo=e}}function Jo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag;)e=e.return;qo=e}function Qo(e){if(e!==qo)return!1;if(!Zo)return Jo(e),!(Zo=!0);var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!_n(t,e.memoizedProps))for(t=Go;t;)Yo(e,t),t=yn(t);return Jo(e),Go=qo?yn(e.stateNode):null,!0}function ei(){Go=qo=null,Zo=!1}var ti=We.ReactCurrentOwner;function ri(e,t,r,n){t.child=null===e?Vo(t,null,r,n):Wo(t,e.child,r,n)}function ni(e,t,r,n,o){r=r.render;var i=t.ref;return yo(t),n=r(n,i),t.effectTag|=1,ri(e,t,n,o),t.child}function oi(e,t,r,n,o,i){if(null!==e)return s=e.child,o<i&&(o=s.memoizedProps,(r=null!==(r=r.compare)?r:er)(o,n)&&e.ref===t.ref)?ui(e,t,i):(t.effectTag|=1,(e=Wn(s,n)).ref=t.ref,(e.return=t).child=e);var s=r.type;return"function"!=typeof s||Hn(s)||void 0!==s.defaultProps||null!==r.compare||void 0!==r.defaultProps?((e=Vn(r.type,null,n,null,t.mode,i)).ref=t.ref,(e.return=t).child=e):(t.tag=15,t.type=s,ii(e,t,s,n,o,i))}function ii(e,t,r,n,o,i){return null!==e&&o<i&&er(e.memoizedProps,n)&&e.ref===t.ref?ui(e,t,i):ai(e,t,r,n,i)}function si(e,t){var r=t.ref;(null===e&&null!==r||null!==e&&e.ref!==r)&&(t.effectTag|=128)}function ai(e,t,r,n,o){var i=En(r)?In:kn.current;return i=Dn(t,i),yo(t),r=r(n,i),t.effectTag|=1,ri(e,t,r,o),t.child}function li(e,t,r,n,o){if(En(r)){var i=!0;Mn(t)}else i=!1;if(yo(t),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),Oo(t,r,n),jo(t,r,n,o),n=!0;else if(null===e){var s=t.stateNode,a=t.memoizedProps;s.props=a;var l=s.context,c=r.contextType;c="object"==typeof c&&null!==c?Lo.currentDispatcher.readContext(c):Dn(t,c=En(r)?In:kn.current);var d=r.getDerivedStateFromProps,h="function"==typeof d||"function"==typeof s.getSnapshotBeforeUpdate;h||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(a!==n||l!==c)&&Fo(t,s,n,c),eo=!1;var u=t.memoizedState;l=s.state=u;var p=t.updateQueue;null!==p&&(co(t,p,n,s,o),l=t.memoizedState),n=a!==n||u!==l||Cn.current||eo?("function"==typeof d&&(Ao(t,r,d,n),l=t.memoizedState),(a=eo||Mo(t,r,a,n,u,l,c))?(h||"function"!=typeof s.UNSAFE_componentWillMount&&"function"!=typeof s.componentWillMount||("function"==typeof s.componentWillMount&&s.componentWillMount(),"function"==typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"==typeof s.componentDidMount&&(t.effectTag|=4)):("function"==typeof s.componentDidMount&&(t.effectTag|=4),t.memoizedProps=n,t.memoizedState=l),s.props=n,s.state=l,s.context=c,a):("function"==typeof s.componentDidMount&&(t.effectTag|=4),!1)}else s=t.stateNode,a=t.memoizedProps,s.props=t.type===t.elementType?a:Eo(t.type,a),l=s.context,c="object"==typeof(c=r.contextType)&&null!==c?Lo.currentDispatcher.readContext(c):Dn(t,c=En(r)?In:kn.current),(h="function"==typeof(d=r.getDerivedStateFromProps)||"function"==typeof s.getSnapshotBeforeUpdate)||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(a!==n||l!==c)&&Fo(t,s,n,c),eo=!1,l=t.memoizedState,u=s.state=l,null!==(p=t.updateQueue)&&(co(t,p,n,s,o),u=t.memoizedState),n=a!==n||l!==u||Cn.current||eo?("function"==typeof d&&(Ao(t,r,d,n),u=t.memoizedState),(d=eo||Mo(t,r,a,n,l,u,c))?(h||"function"!=typeof s.UNSAFE_componentWillUpdate&&"function"!=typeof s.componentWillUpdate||("function"==typeof s.componentWillUpdate&&s.componentWillUpdate(n,u,c),"function"==typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(n,u,c)),"function"==typeof s.componentDidUpdate&&(t.effectTag|=4),"function"==typeof s.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!=typeof s.componentDidUpdate||a===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),"function"!=typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),t.memoizedProps=n,t.memoizedState=u),s.props=n,s.state=u,s.context=c,d):("function"!=typeof s.componentDidUpdate||a===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),"function"!=typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),!1);return ci(e,t,r,n,i,o)}function ci(e,t,r,n,o,i){si(e,t);var s=0!=(64&t.effectTag);if(!n&&!s)return o&&On(t,r,!1),ui(e,t,i);n=t.stateNode,ti.current=t;var a=s&&"function"!=typeof r.getDerivedStateFromError?null:n.render();return t.effectTag|=1,null!==e&&s?(t.child=Wo(t,e.child,null,i),t.child=Wo(t,null,a,i)):ri(e,t,a,i),t.memoizedState=n.state,o&&On(t,r,!0),t.child}function di(e){var t=e.stateNode;t.pendingContext?An(0,t.pendingContext,t.pendingContext!==t.context):t.context&&An(0,t.context,!1),ko(e,t.containerInfo)}function hi(e,t,r){var n=t.mode,o=t.pendingProps,i=t.memoizedState;if(0==(64&t.effectTag)){i=null;var s=!1}else i={timedOutAt:null!==i?i.timedOutAt:0},s=!0,t.effectTag&=-65;if(null===e)if(s){var a=o.fallback;e=qn(null,n,0,null),0==(1&t.mode)&&(e.child=null!==t.memoizedState?t.child.child:t.child),n=qn(a,n,r,null),e.sibling=n,(r=e).return=n.return=t}else r=n=Vo(t,null,o.children,r);else null!==e.memoizedState?(a=(n=e.child).sibling,s?(r=o.fallback,o=Wn(n,n.pendingProps),0==(1&t.mode)&&(s=null!==t.memoizedState?t.child.child:t.child)!==n.child&&(o.child=s),n=o.sibling=Wn(a,r,a.expirationTime),(r=o).childExpirationTime=0,r.return=n.return=t):r=n=Wo(t,n.child,o.children,r)):(a=e.child,s?(s=o.fallback,(o=qn(null,n,0,null)).child=a,0==(1&t.mode)&&(o.child=null!==t.memoizedState?t.child.child:t.child),(n=o.sibling=qn(s,n,r,null)).effectTag|=2,(r=o).childExpirationTime=0,r.return=n.return=t):n=r=Wo(t,a,o.children,r)),t.stateNode=e.stateNode;return t.memoizedState=i,t.child=r,n}function ui(e,t,r){if(null!==e&&(t.firstContextDependency=e.firstContextDependency),t.childExpirationTime<r)return null;if(null!==e&&t.child!==e.child&&s("153"),null!==t.child){for(r=Wn(e=t.child,e.pendingProps,e.expirationTime),(t.child=r).return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=Wn(e,e.pendingProps,e.expirationTime)).return=t;r.sibling=null}return t.child}function pi(e){e.effectTag|=4}var mi=void 0,gi=void 0,fi=void 0,_i=void 0;mi=function(e,t){for(var r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r=(r.child.return=r).child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},gi=function(){},fi=function(e,t,r,n,i){var s=e.memoizedProps;if(s!==n){var a=t.stateNode;switch(To(wo.current),e=null,r){case"input":s=bt(a,s),n=bt(a,n),e=[];break;case"option":s=Vr(a,s),n=Vr(a,n),e=[];break;case"select":s=o({},s,{value:void 0}),n=o({},n,{value:void 0}),e=[];break;case"textarea":s=Gr(a,s),n=Gr(a,n),e=[];break;default:"function"!=typeof s.onClick&&"function"==typeof n.onClick&&(a.onclick=pn)}dn(r,n),a=r=void 0;var l=null;for(r in s)if(!n.hasOwnProperty(r)&&s.hasOwnProperty(r)&&null!=s[r])if("style"===r){var c=s[r];for(a in c)c.hasOwnProperty(a)&&(l||(l={}),l[a]="")}else"dangerouslySetInnerHTML"!==r&&"children"!==r&&"suppressContentEditableWarning"!==r&&"suppressHydrationWarning"!==r&&"autoFocus"!==r&&(b.hasOwnProperty(r)?e||(e=[]):(e=e||[]).push(r,null));for(r in n){var d=n[r];if(c=null!=s?s[r]:void 0,n.hasOwnProperty(r)&&d!==c&&(null!=d||null!=c))if("style"===r)if(c){for(a in c)!c.hasOwnProperty(a)||d&&d.hasOwnProperty(a)||(l||(l={}),l[a]="");for(a in d)d.hasOwnProperty(a)&&c[a]!==d[a]&&(l||(l={}),l[a]=d[a])}else l||(e||(e=[]),e.push(r,l)),l=d;else"dangerouslySetInnerHTML"===r?(d=d?d.__html:void 0,c=c?c.__html:void 0,null!=d&&c!==d&&(e=e||[]).push(r,""+d)):"children"===r?c===d||"string"!=typeof d&&"number"!=typeof d||(e=e||[]).push(r,""+d):"suppressContentEditableWarning"!==r&&"suppressHydrationWarning"!==r&&(b.hasOwnProperty(r)?(null!=d&&un(i,r),e||c===d||(e=[])):(e=e||[]).push(r,d))}l&&(e=e||[]).push("style",l),i=e,(t.updateQueue=i)&&pi(t)}},_i=function(e,t,r,n){r!==n&&pi(t)};var Si="function"==typeof WeakSet?WeakSet:Set;function bi(e,t){var r=t.source,n=t.stack;null===n&&null!==r&&(n=lt(r)),null!==r&&at(r.type),t=t.value,null!==e&&1===e.tag&&at(e.type);try{console.error(t)}catch(e){setTimeout(function(){throw e})}}function yi(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){Xi(e,t)}else t.current=null}function Pi(e){switch("function"==typeof jn&&jn(e),e.tag){case 0:case 11:case 14:case 15:var t=e.updateQueue;if(null!==t&&null!==(t=t.lastEffect)){var r=t=t.next;do{var n=r.destroy;if(null!==n){var o=e;try{n()}catch(t){Xi(o,t)}}r=r.next}while(r!==t)}break;case 1:if(yi(e),"function"==typeof(t=e.stateNode).componentWillUnmount)try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(t){Xi(e,t)}break;case 5:yi(e);break;case 4:xi(e)}}function vi(e){return 5===e.tag||3===e.tag||4===e.tag}function wi(e){e:{for(var t=e.return;null!==t;){if(vi(t)){var r=t;break e}t=t.return}s("160"),r=void 0}var n=t=void 0;switch(r.tag){case 5:t=r.stateNode,n=!1;break;case 3:case 4:t=r.stateNode.containerInfo,n=!0;break;default:s("161")}16&r.effectTag&&(nn(t,""),r.effectTag&=-17);e:t:for(r=e;;){for(;null===r.sibling;){if(null===r.return||vi(r.return)){r=null;break e}r=r.return}for(r.sibling.return=r.return,r=r.sibling;5!==r.tag&&6!==r.tag;){if(2&r.effectTag)continue t;if(null===r.child||4===r.tag)continue t;r=(r.child.return=r).child}if(!(2&r.effectTag)){r=r.stateNode;break e}}for(var o=e;;){if(5===o.tag||6===o.tag)if(r)if(n){var i=t,a=o.stateNode,l=r;8===i.nodeType?i.parentNode.insertBefore(a,l):i.insertBefore(a,l)}else t.insertBefore(o.stateNode,r);else n?(a=t,l=o.stateNode,8===a.nodeType?(i=a.parentNode).insertBefore(l,a):(i=a).appendChild(l),null!=(a=a._reactRootContainer)||null!==i.onclick||(i.onclick=pn)):t.appendChild(o.stateNode);else if(4!==o.tag&&null!==o.child){o=(o.child.return=o).child;continue}if(o===e)break;for(;null===o.sibling;){if(null===o.return||o.return===e)return;o=o.return}o.sibling.return=o.return,o=o.sibling}}function xi(e){for(var t=e,r=!1,n=void 0,o=void 0;;){if(!r){r=t.return;e:for(;;){switch(null===r&&s("160"),r.tag){case 5:n=r.stateNode,o=!1;break e;case 3:case 4:n=r.stateNode.containerInfo,o=!0;break e}r=r.return}r=!0}if(5===t.tag||6===t.tag){e:for(var i=t,a=i;;)if(Pi(a),null!==a.child&&4!==a.tag)a.child.return=a,a=a.child;else{if(a===i)break;for(;null===a.sibling;){if(null===a.return||a.return===i)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}o?(i=n,a=t.stateNode,8===i.nodeType?i.parentNode.removeChild(a):i.removeChild(a)):n.removeChild(t.stateNode)}else if(4===t.tag?(n=t.stateNode.containerInfo,o=!0):Pi(t),null!==t.child){t=(t.child.return=t).child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return;4===(t=t.return).tag&&(r=!1)}t.sibling.return=t.return,t=t.sibling}}function Ui(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 1:break;case 5:var r=t.stateNode;if(null!=r){var n=t.memoizedProps;e=null!==e?e.memoizedProps:n;var o=t.type,i=t.updateQueue;(t.updateQueue=null)!==i&&function(e,t,r,n,o){e[A]=o,"input"===r&&"radio"===o.type&&null!=o.name&&Pt(e,o),hn(r,n),n=hn(r,o);for(var i=0;i<t.length;i+=2){var s=t[i],a=t[i+1];"style"===s?ln(e,a):"dangerouslySetInnerHTML"===s?rn(e,a):"children"===s?nn(e,a):_t(e,s,a,n)}switch(r){case"input":vt(e,o);break;case"textarea":Yr(e,o);break;case"select":t=e._wrapperState.wasMultiple,e._wrapperState.wasMultiple=!!o.multiple,null!=(r=o.value)?qr(e,!!o.multiple,r,!1):t!==!!o.multiple&&(null!=o.defaultValue?qr(e,!!o.multiple,o.defaultValue,!0):qr(e,!!o.multiple,o.multiple?[]:"",!1))}}(r,i,o,e,n)}break;case 6:null===t.stateNode&&s("162"),t.stateNode.nodeValue=t.memoizedProps;break;case 3:case 12:break;case 13:if(r=t.memoizedState,n=void 0,e=t,null===r?n=!1:(n=!0,e=t.child,0===r.timedOutAt&&(r.timedOutAt=Us())),null!==e&&function(e,t){for(var r=e;;){if(5===r.tag){var n=r.stateNode;if(t)n.style.display="none";else{n=r.stateNode;var o=r.memoizedProps.style;o=null!=o&&o.hasOwnProperty("display")?o.display:null,n.style.display=an("display",o)}}else if(6===r.tag)r.stateNode.nodeValue=t?"":r.memoizedProps;else{if(13===r.tag&&null!==r.memoizedState){(n=r.child.sibling).return=r,r=n;continue}if(null!==r.child){r=(r.child.return=r).child;continue}}if(r===e)break;for(;null===r.sibling;){if(null===r.return||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}}(e,n),null!==(r=t.updateQueue)){t.updateQueue=null;var a=t.stateNode;null===a&&(a=t.stateNode=new Si),r.forEach(function(e){var r=function(e,t){var r=e.stateNode;null!==r&&r.delete(t),null!==(e=Qi(e,t=Ki(t=Us(),e)))&&(Xn(e,t),0!==(t=e.expirationTime)&&Ts(e,t))}.bind(null,t,e);a.has(e)||(a.add(e),e.then(r,r))})}break;case 17:break;default:s("163")}}var Ti="function"==typeof WeakMap?WeakMap:Map;function ki(e,t,r){(r=no(r)).tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Bs(n),bi(e,t)},r}function Ci(e,t,r){(r=no(r)).tag=3;var n=e.type.getDerivedStateFromError;if("function"==typeof n){var o=t.value;r.payload=function(){return n(o)}}var i=e.stateNode;return null!==i&&"function"==typeof i.componentDidCatch&&(r.callback=function(){"function"!=typeof n&&(null===Wi?Wi=new Set([this]):Wi.add(this));var r=t.value,o=t.stack;bi(e,t),this.componentDidCatch(r,{componentStack:null!==o?o:""})}),r}function Ii(e){switch(e.tag){case 1:En(e.type)&&Ln();var t=e.effectTag;return 2048&t?(e.effectTag=-2049&t|64,e):null;case 3:return Co(),Nn(),0!=(64&(t=e.effectTag))&&s("285"),e.effectTag=-2049&t|64,e;case 5:return Do(e),null;case 13:return 2048&(t=e.effectTag)?(e.effectTag=-2049&t|64,e):null;case 4:return Co(),null;case 10:return bo(e),null;default:return null}}var Di={readContext:Po},Ei=We.ReactCurrentOwner,Li=1073741822,Ni=0,Ai=!1,Bi=null,Mi=null,Oi=0,Fi=-1,ji=!1,Ri=null,zi=!1,$i=null,Hi=null,Wi=null;function Vi(){if(null!==Bi)for(var e=Bi.return;null!==e;){var t=e;switch(t.tag){case 1:null!=t.type.childContextTypes&&Ln();break;case 3:Co(),Nn();break;case 5:Do(t);break;case 4:Co();break;case 10:bo(t)}e=e.return}Oi=0,ji=!(Fi=-1),Bi=Mi=null}function qi(){null!==Hi&&(i.unstable_cancelCallback($i),Hi())}function Gi(e){for(;;){var t=e.alternate,r=e.return,n=e.sibling;if(0==(1024&e.effectTag)){e:{var i=t,a=Oi,l=(t=Bi=e).pendingProps;switch(t.tag){case 2:case 16:break;case 15:case 0:break;case 1:En(t.type)&&Ln();break;case 3:Co(),Nn(),(l=t.stateNode).pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),null!==i&&null!==i.child||(Qo(t),t.effectTag&=-3),gi(t);break;case 5:Do(t);var c=To(Uo.current);if(a=t.type,null!==i&&null!=t.stateNode)fi(i,t,a,l,c),i.ref!==t.ref&&(t.effectTag|=128);else if(l){var d=To(wo.current);if(Qo(t)){i=(l=t).stateNode;var h=l.type,u=l.memoizedProps,p=c;switch(i[N]=l,i[A]=u,a=void 0,c=h){case"iframe":case"object":xr("load",i);break;case"video":case"audio":for(h=0;h<te.length;h++)xr(te[h],i);break;case"source":xr("error",i);break;case"img":case"image":case"link":xr("error",i),xr("load",i);break;case"form":xr("reset",i),xr("submit",i);break;case"details":xr("toggle",i);break;case"input":yt(i,u),xr("invalid",i),un(p,"onChange");break;case"select":i._wrapperState={wasMultiple:!!u.multiple},xr("invalid",i),un(p,"onChange");break;case"textarea":Zr(i,u),xr("invalid",i),un(p,"onChange")}for(a in dn(c,u),h=null,u)u.hasOwnProperty(a)&&(d=u[a],"children"===a?"string"==typeof d?i.textContent!==d&&(h=["children",d]):"number"==typeof d&&i.textContent!==""+d&&(h=["children",""+d]):b.hasOwnProperty(a)&&null!=d&&un(p,a));switch(c){case"input":$e(i),wt(i,u,!0);break;case"textarea":$e(i),Xr(i);break;case"select":case"option":break;default:"function"==typeof u.onClick&&(i.onclick=pn)}a=h,l.updateQueue=a,(l=null!==a)&&pi(t)}else{u=t,i=a,p=l,h=9===c.nodeType?c:c.ownerDocument,d===Kr.html&&(d=Jr(i)),d===Kr.html?"script"===i?((i=h.createElement("div")).innerHTML="<script><\/script>",h=i.removeChild(i.firstChild)):"string"==typeof p.is?h=h.createElement(i,{is:p.is}):(h=h.createElement(i),"select"===i&&p.multiple&&(h.multiple=!0)):h=h.createElementNS(d,i),(i=h)[N]=u,i[A]=l,mi(i,t,!1,!1),p=i;var m=c,g=hn(h=a,u=l);switch(h){case"iframe":case"object":xr("load",p),c=u;break;case"video":case"audio":for(c=0;c<te.length;c++)xr(te[c],p);c=u;break;case"source":xr("error",p),c=u;break;case"img":case"image":case"link":xr("error",p),xr("load",p),c=u;break;case"form":xr("reset",p),xr("submit",p),c=u;break;case"details":xr("toggle",p),c=u;break;case"input":yt(p,u),c=bt(p,u),xr("invalid",p),un(m,"onChange");break;case"option":c=Vr(p,u);break;case"select":p._wrapperState={wasMultiple:!!u.multiple},c=o({},u,{value:void 0}),xr("invalid",p),un(m,"onChange");break;case"textarea":Zr(p,u),c=Gr(p,u),xr("invalid",p),un(m,"onChange");break;default:c=u}dn(h,c),d=void 0;var f=h,_=p,S=c;for(d in S)if(S.hasOwnProperty(d)){var y=S[d];"style"===d?ln(_,y):"dangerouslySetInnerHTML"===d?null!=(y=y?y.__html:void 0)&&rn(_,y):"children"===d?"string"==typeof y?("textarea"!==f||""!==y)&&nn(_,y):"number"==typeof y&&nn(_,""+y):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(b.hasOwnProperty(d)?null!=y&&un(m,d):null!=y&&_t(_,d,y,g))}switch(h){case"input":$e(p),wt(p,u,!1);break;case"textarea":$e(p),Xr(p);break;case"option":null!=u.value&&p.setAttribute("value",""+St(u.value));break;case"select":(c=p).multiple=!!u.multiple,null!=(p=u.value)?qr(c,!!u.multiple,p,!1):null!=u.defaultValue&&qr(c,!!u.multiple,u.defaultValue,!0);break;default:"function"==typeof c.onClick&&(p.onclick=pn)}(l=fn(a,l))&&pi(t),t.stateNode=i}null!==t.ref&&(t.effectTag|=128)}else null===t.stateNode&&s("166");break;case 6:i&&null!=t.stateNode?_i(i,t,i.memoizedProps,l):("string"!=typeof l&&null===t.stateNode&&s("166"),i=To(Uo.current),To(wo.current),Qo(t)?(a=(l=t).stateNode,i=l.memoizedProps,a[N]=l,(l=a.nodeValue!==i)&&pi(t)):(a=t,(l=(9===i.nodeType?i:i.ownerDocument).createTextNode(l))[N]=t,a.stateNode=l));break;case 11:break;case 13:if(l=t.memoizedState,0!=(64&t.effectTag)){t.expirationTime=a,Bi=t;break e}l=null!==l,a=null!==i&&null!==i.memoizedState,null!==i&&!l&&a&&null!==(i=i.child.sibling)&&(c=t.firstEffect,i.nextEffect=null!==c?(t.firstEffect=i,c):(t.firstEffect=t.lastEffect=i,null),i.effectTag=8),(l!==a||0==(1&t.effectTag)&&l)&&(t.effectTag|=4);break;case 7:case 8:case 12:break;case 4:Co(),gi(t);break;case 10:bo(t);break;case 9:case 14:break;case 17:En(t.type)&&Ln();break;default:s("156")}Bi=null}if(t=e,1===Oi||1!==t.childExpirationTime){for(l=0,a=t.child;null!==a;)l<(i=a.expirationTime)&&(l=i),l<(c=a.childExpirationTime)&&(l=c),a=a.sibling;t.childExpirationTime=l}if(null!==Bi)return Bi;null!==r&&0==(1024&r.effectTag)&&(null===r.firstEffect&&(r.firstEffect=e.firstEffect),null!==e.lastEffect&&(null!==r.lastEffect&&(r.lastEffect.nextEffect=e.firstEffect),r.lastEffect=e.lastEffect),1<e.effectTag&&(null!==r.lastEffect?r.lastEffect.nextEffect=e:r.firstEffect=e,r.lastEffect=e))}else{if(null!==(e=Ii(e)))return e.effectTag&=1023,e;null!==r&&(r.firstEffect=r.lastEffect=null,r.effectTag|=1024)}if(null!==n)return n;if(null===r)break;e=r}return null}function Zi(e){var t=function(e,t,r){var n=t.expirationTime;if(null!==e&&e.memoizedProps===t.pendingProps&&!Cn.current&&n<r){switch(t.tag){case 3:di(t),ei();break;case 5:Io(t);break;case 1:En(t.type)&&Mn(t);break;case 4:ko(t,t.stateNode.containerInfo);break;case 10:So(t,t.memoizedProps.value);break;case 13:if(null!==t.memoizedState)return 0!==(n=t.child.childExpirationTime)&&r<=n?hi(e,t,r):null!==(t=ui(e,t,r))?t.sibling:null}return ui(e,t,r)}switch(t.expirationTime=0,t.tag){case 2:n=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps;var o=Dn(t,kn.current);if(yo(t),o=n(e,o),t.effectTag|=1,"object"==typeof o&&null!==o&&"function"==typeof o.render&&void 0===o.$$typeof){if(t.tag=1,En(n)){var i=!0;Mn(t)}else i=!1;t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null;var a=n.getDerivedStateFromProps;"function"==typeof a&&Ao(t,n,a,e),o.updater=Bo,jo((t.stateNode=o)._reactInternalFiber=t,n,e,r),t=ci(null,t,n,!0,i,r)}else t.tag=0,ri(null,t,o,r),t=t.child;return t;case 16:switch(o=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),i=t.pendingProps,e=function(e){var t=e._result;switch(e._status){case 1:return t;case 2:case 0:throw t;default:throw e._status=0,(t=(t=e._ctor)()).then(function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)},function(t){0===e._status&&(e._status=2,e._result=t)}),e._result=t}}(o),t.type=e,o=t.tag=function(e){if("function"==typeof e)return Hn(e)?1:0;if(null!=e){if((e=e.$$typeof)===tt)return 11;if(e===nt)return 14}return 2}(e),i=Eo(e,i),a=void 0,o){case 0:a=ai(null,t,e,i,r);break;case 1:a=li(null,t,e,i,r);break;case 11:a=ni(null,t,e,i,r);break;case 14:a=oi(null,t,e,Eo(e.type,i),n,r);break;default:s("306",e,"")}return a;case 0:return n=t.type,o=t.pendingProps,ai(e,t,n,o=t.elementType===n?o:Eo(n,o),r);case 1:return n=t.type,o=t.pendingProps,li(e,t,n,o=t.elementType===n?o:Eo(n,o),r);case 3:return di(t),null===(n=t.updateQueue)&&s("282"),o=null!==(o=t.memoizedState)?o.element:null,co(t,n,t.pendingProps,null,r),(n=t.memoizedState.element)===o?(ei(),ui(e,t,r)):(o=t.stateNode,(o=(null===e||null===e.child)&&o.hydrate)&&(Go=Pn(t.stateNode.containerInfo),qo=t,o=Zo=!0),o?(t.effectTag|=2,t.child=Vo(t,null,n,r)):(ri(e,t,n,r),ei()),t.child);case 5:return Io(t),null===e&&Ko(t),n=t.type,o=t.pendingProps,i=null!==e?e.memoizedProps:null,a=o.children,_n(n,o)?a=null:null!==i&&_n(n,i)&&(t.effectTag|=16),si(e,t),1!==r&&1&t.mode&&o.hidden?(t.expirationTime=1,null):(ri(e,t,a,r),t.child);case 6:return null===e&&Ko(t),null;case 13:return hi(e,t,r);case 4:return ko(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=Wo(t,null,n,r):ri(e,t,n,r),t.child;case 11:return n=t.type,o=t.pendingProps,ni(e,t,n,o=t.elementType===n?o:Eo(n,o),r);case 7:return ri(e,t,t.pendingProps,r),t.child;case 8:case 12:return ri(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,o=t.pendingProps,a=t.memoizedProps,So(t,i=o.value),null!==a){var l=a.value;if(0==(i=l===i&&(0!==l||1/l==1/i)||l!=l&&i!=i?0:0|("function"==typeof n._calculateChangedBits?n._calculateChangedBits(l,i):1073741823))){if(a.children===o.children&&!Cn.current){t=ui(e,t,r);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){if(null!==(l=a.firstContextDependency))do{if(l.context===n&&0!=(l.observedBits&i)){if(1===a.tag){var c=no(r);c.tag=2,io(a,c)}a.expirationTime<r&&(a.expirationTime=r),null!==(c=a.alternate)&&c.expirationTime<r&&(c.expirationTime=r);for(var d=a.return;null!==d;){if(c=d.alternate,d.childExpirationTime<r)d.childExpirationTime=r,null!==c&&c.childExpirationTime<r&&(c.childExpirationTime=r);else{if(!(null!==c&&c.childExpirationTime<r))break;c.childExpirationTime=r}d=d.return}}c=a.child,l=l.next}while(null!==l);else c=10===a.tag&&a.type===t.type?null:a.child;if(null!==c)c.return=a;else for(c=a;null!==c;){if(c===t){c=null;break}if(null!==(a=c.sibling)){a.return=c.return,c=a;break}c=c.return}a=c}}ri(e,t,o.children,r),t=t.child}return t;case 9:return o=t.type,n=(i=t.pendingProps).children,yo(t),n=n(o=Po(o,i.unstable_observedBits)),t.effectTag|=1,ri(e,t,n,r),t.child;case 14:return i=Eo(o=t.type,t.pendingProps),oi(e,t,o,i=Eo(o.type,i),n,r);case 15:return ii(e,t,t.type,t.pendingProps,n,r);case 17:return n=t.type,o=t.pendingProps,o=t.elementType===n?o:Eo(n,o),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,En(n)?(e=!0,Mn(t)):e=!1,yo(t),Oo(t,n,o),jo(t,n,o,r),ci(null,t,n,!0,e,r);default:s("156")}}(e.alternate,e,Oi);return e.memoizedProps=e.pendingProps,null===t&&(t=Gi(e)),Ei.current=null,t}function Yi(e,t){Ai&&s("243"),qi(),Ai=!0,Ei.currentDispatcher=Di;var r=e.nextExpirationTimeToWorkOn;r===Oi&&e===Mi&&null!==Bi||(Vi(),Oi=r,Bi=Wn((Mi=e).current,null),e.pendingCommitExpirationTime=0);for(var n=!1;;){try{if(t)for(;null!==Bi&&!Is();)Bi=Zi(Bi);else for(;null!==Bi;)Bi=Zi(Bi)}catch(t){if(_o=fo=go=null,null===Bi)n=!0,Bs(t);else{null===Bi&&s("271");var o=Bi,i=o.return;if(null!==i){e:{var a=e,l=i,c=o,d=t;if(i=Oi,c.effectTag|=1024,c.firstEffect=c.lastEffect=null,null!==d&&"object"==typeof d&&"function"==typeof d.then){var h=d;d=l;var u=-1,p=-1;do{if(13===d.tag){var m=d.alternate;if(null!==m&&null!==(m=m.memoizedState)){p=10*(1073741822-m.timedOutAt);break}"number"==typeof(m=d.pendingProps.maxDuration)&&(m<=0?u=0:(-1===u||m<u)&&(u=m))}d=d.return}while(null!==d);d=l;do{if((m=13===d.tag)&&(m=void 0!==d.memoizedProps.fallback&&null===d.memoizedState),m){if(null===(l=d.updateQueue)?d.updateQueue=new Set([h]):l.add(h),0==(1&d.mode)){d.effectTag|=64,c.effectTag&=-1957,1===c.tag&&(null===c.alternate?c.tag=17:((i=no(1073741823)).tag=2,io(c,i))),c.expirationTime=1073741823;break e}null===(c=a.pingCache)?(c=a.pingCache=new Ti,l=new Set,c.set(h,l)):void 0===(l=c.get(h))&&(l=new Set,c.set(h,l)),l.has(i)||(l.add(i),c=Ji.bind(null,a,h,i),h.then(c,c)),0<=(a=-1===u?1073741823:(-1===p&&(p=10*(1073741822-Jn(a,i))-5e3),p+u))&&Fi<a&&(Fi=a),d.effectTag|=2048,d.expirationTime=i;break e}d=d.return}while(null!==d);d=Error((at(c.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+lt(c))}ji=!0,d=po(d,c),a=l;do{switch(a.tag){case 3:a.effectTag|=2048,a.expirationTime=i,so(a,i=ki(a,d,i));break e;case 1:if(h=d,u=a.type,p=a.stateNode,0==(64&a.effectTag)&&("function"==typeof u.getDerivedStateFromError||null!==p&&"function"==typeof p.componentDidCatch&&(null===Wi||!Wi.has(p)))){a.effectTag|=2048,a.expirationTime=i,so(a,i=Ci(a,h,i));break e}}a=a.return}while(null!==a)}Bi=Gi(o);continue}n=!0,Bs(t)}}break}if(Ai=!1,_o=fo=go=Ei.currentDispatcher=null,n)Mi=null,e.finishedWork=null;else if(null!==Bi)e.finishedWork=null;else{if(null===(n=e.current.alternate)&&s("281"),Mi=null,ji){if(o=e.latestPendingTime,i=e.latestSuspendedTime,a=e.latestPingedTime,0!==o&&o<r||0!==i&&i<r||0!==a&&a<r)return Kn(e,r),void xs(e,n,r,e.expirationTime,-1);if(!e.didError&&t)return e.didError=!0,void xs(e,n,r=e.nextExpirationTimeToWorkOn=r,t=e.expirationTime=1073741823,-1)}t&&-1!==Fi?(Kn(e,r),(t=10*(1073741822-Jn(e,r)))<Fi&&(Fi=t),t=10*(1073741822-Us()),t=Fi-t,xs(e,n,r,e.expirationTime,t<0?0:t)):(e.pendingCommitExpirationTime=r,e.finishedWork=n)}}function Xi(e,t){for(var r=e.return;null!==r;){switch(r.tag){case 1:var n=r.stateNode;if("function"==typeof r.type.getDerivedStateFromError||"function"==typeof n.componentDidCatch&&(null===Wi||!Wi.has(n)))return io(r,e=Ci(r,e=po(t,e),1073741823)),void es(r,1073741823);break;case 3:return io(r,e=ki(r,e=po(t,e),1073741823)),void es(r,1073741823)}r=r.return}3===e.tag&&(io(e,r=ki(e,r=po(t,e),1073741823)),es(e,1073741823))}function Ki(e,t){return 0!==Ni?e=Ni:Ai?e=zi?1073741823:Oi:1&t.mode?(e=ms?1073741822-10*(1+((1073741822-e+15)/10|0)):1073741822-25*(1+((1073741822-e+500)/25|0)),null!==Mi&&e===Oi&&--e):e=1073741823,ms&&(0===cs||e<cs)&&(cs=e),e}function Ji(e,t,r){var n=e.pingCache;null!==n&&n.delete(t),null!==Mi&&Oi===r?Mi=null:(t=e.earliestSuspendedTime,n=e.latestSuspendedTime,0!==t&&r<=t&&n<=r&&(e.didError=!1,(0===(t=e.latestPingedTime)||r<t)&&(e.latestPingedTime=r),Qn(r,e),0!==(r=e.expirationTime)&&Ts(e,r)))}function Qi(e,t){e.expirationTime<t&&(e.expirationTime=t);var r=e.alternate;null!==r&&r.expirationTime<t&&(r.expirationTime=t);var n=e.return,o=null;if(null===n&&3===e.tag)o=e.stateNode;else for(;null!==n;){if(r=n.alternate,n.childExpirationTime<t&&(n.childExpirationTime=t),null!==r&&r.childExpirationTime<t&&(r.childExpirationTime=t),null===n.return&&3===n.tag){o=n.stateNode;break}n=n.return}return o}function es(e,t){null!==(e=Qi(e,t))&&(!Ai&&0!==Oi&&Oi<t&&Vi(),Xn(e,t),Ai&&!zi&&Mi===e||Ts(e,e.expirationTime),bs<ys&&(ys=0,s("185")))}function ts(e,t,r,n,o){var i=Ni;Ni=1073741823;try{return e(t,r,n,o)}finally{Ni=i}}var rs=null,ns=null,os=0,is=void 0,ss=!1,as=null,ls=0,cs=0,ds=!1,hs=null,us=!1,ps=!1,ms=!1,gs=null,fs=i.unstable_now(),_s=1073741822-(fs/10|0),Ss=_s,bs=50,ys=0,Ps=null;function vs(){_s=1073741822-((i.unstable_now()-fs)/10|0)}function ws(e,t){if(0!==os){if(t<os)return;null!==is&&i.unstable_cancelCallback(is)}os=t,e=i.unstable_now()-fs,is=i.unstable_scheduleCallback(Ds,{timeout:10*(1073741822-t)-e})}function xs(e,t,r,n,o){e.expirationTime=n,0!==o||Is()?0<o&&(e.timeoutHandle=Sn(function(e,t,r){e.pendingCommitExpirationTime=r,e.finishedWork=t,vs(),Ss=_s,Ls(e,r)}.bind(null,e,t,r),o)):(e.pendingCommitExpirationTime=r,e.finishedWork=t)}function Us(){return ss||(ks(),0!==ls&&1!==ls||(vs(),Ss=_s)),Ss}function Ts(e,t){null===e.nextScheduledRoot?(e.expirationTime=t,null===ns?(rs=ns=e,e.nextScheduledRoot=e):(ns=ns.nextScheduledRoot=e).nextScheduledRoot=rs):t>e.expirationTime&&(e.expirationTime=t),ss||(us?ps&&Ns(as=e,ls=1073741823,!1):1073741823===t?Es(1073741823,!1):ws(e,t))}function ks(){var e=0,t=null;if(null!==ns)for(var r=ns,n=rs;null!==n;){var o=n.expirationTime;if(0===o){if((null===r||null===ns)&&s("244"),n===n.nextScheduledRoot){rs=ns=n.nextScheduledRoot=null;break}if(n===rs)rs=o=n.nextScheduledRoot,ns.nextScheduledRoot=o,n.nextScheduledRoot=null;else{if(n===ns){(ns=r).nextScheduledRoot=rs,n.nextScheduledRoot=null;break}r.nextScheduledRoot=n.nextScheduledRoot,n.nextScheduledRoot=null}n=r.nextScheduledRoot}else{if(e<o&&(e=o,t=n),n===ns)break;if(1073741823===e)break;n=(r=n).nextScheduledRoot}}as=t,ls=e}var Cs=!1;function Is(){return!!Cs||!!i.unstable_shouldYield()&&(Cs=!0)}function Ds(){try{if(!Is()&&null!==rs){vs();var e=rs;do{var t=e.expirationTime;0!==t&&_s<=t&&(e.nextExpirationTimeToWorkOn=_s),e=e.nextScheduledRoot}while(e!==rs)}Es(0,!0)}finally{Cs=!1}}function Es(e,t){if(ks(),t)for(vs(),Ss=_s;null!==as&&0!==ls&&e<=ls&&!(Cs&&ls<_s);)Ns(as,ls,ls<_s),ks(),vs(),Ss=_s;else for(;null!==as&&0!==ls&&e<=ls;)Ns(as,ls,!1),ks();if(t&&(os=0,is=null),0!==ls&&ws(as,ls),ys=0,(Ps=null)!==gs)for(e=gs,gs=null,t=0;t<e.length;t++){var r=e[t];try{r._onComplete()}catch(e){ds||(ds=!0,hs=e)}}if(ds)throw e=hs,hs=null,ds=!1,e}function Ls(e,t){ss&&s("253"),Ns(as=e,ls=t,!1),Es(1073741823,!1)}function Ns(e,t,r){if(ss&&s("245"),ss=!0,r){var n=e.finishedWork;null!==n?As(e,n,t):(e.finishedWork=null,-1!==(n=e.timeoutHandle)&&(e.timeoutHandle=-1,bn(n)),Yi(e,r),null!==(n=e.finishedWork)&&(Is()?e.finishedWork=n:As(e,n,t)))}else null!==(n=e.finishedWork)?As(e,n,t):(e.finishedWork=null,-1!==(n=e.timeoutHandle)&&(e.timeoutHandle=-1,bn(n)),Yi(e,r),null!==(n=e.finishedWork)&&As(e,n,t));ss=!1}function As(e,t,r){var n=e.firstBatch;if(null!==n&&n._expirationTime>=r&&(null===gs?gs=[n]:gs.push(n),n._defer))return e.finishedWork=t,void(e.expirationTime=0);e.finishedWork=null,e===Ps?ys++:(Ps=e,ys=0),zi=Ai=!0,e.current===t&&s("177"),0===(r=e.pendingCommitExpirationTime)&&s("261"),e.pendingCommitExpirationTime=0,n=t.expirationTime;var o=t.childExpirationTime;if(n=n<o?o:n,e.didError=!1,0===n?(e.earliestPendingTime=0,e.latestPendingTime=0,e.earliestSuspendedTime=0,e.latestSuspendedTime=0,e.latestPingedTime=0):(n<e.latestPingedTime&&(e.latestPingedTime=0),0!==(o=e.latestPendingTime)&&(n<o?e.earliestPendingTime=e.latestPendingTime=0:e.earliestPendingTime>n&&(e.earliestPendingTime=e.latestPendingTime)),0===(o=e.earliestSuspendedTime)?Xn(e,n):n<e.latestSuspendedTime?(e.earliestSuspendedTime=0,e.latestSuspendedTime=0,e.latestPingedTime=0,Xn(e,n)):o<n&&Xn(e,n)),Qn(0,e),Ei.current=null,n=1<t.effectTag?null!==t.lastEffect?(t.lastEffect.nextEffect=t).firstEffect:t:t.firstEffect,mn=wr,Mr(o=Br())){if("selectionStart"in o)var i={start:o.selectionStart,end:o.selectionEnd};else e:{var a=(i=(i=o.ownerDocument)&&i.defaultView||window).getSelection&&i.getSelection();if(a&&0!==a.rangeCount){i=a.anchorNode;var l=a.anchorOffset,c=a.focusNode;a=a.focusOffset;try{i.nodeType,c.nodeType}catch(e){i=null;break e}var d=0,h=-1,u=-1,p=0,m=0,g=o,f=null;t:for(;;){for(var _;g!==i||0!==l&&3!==g.nodeType||(h=d+l),g!==c||0!==a&&3!==g.nodeType||(u=d+a),3===g.nodeType&&(d+=g.nodeValue.length),null!==(_=g.firstChild);)f=g,g=_;for(;;){if(g===o)break t;if(f===i&&++p===l&&(h=d),f===c&&++m===a&&(u=d),null!==(_=g.nextSibling))break;f=(g=f).parentNode}g=_}i=-1===h||-1===u?null:{start:h,end:u}}else i=null}i=i||{start:0,end:0}}else i=null;for(wr=!(gn={focusedElem:o,selectionRange:i}),Ri=n;null!==Ri;){o=!1,i=void 0;try{for(;null!==Ri;){if(256&Ri.effectTag)e:{var S=Ri.alternate;switch((l=Ri).tag){case 0:case 11:case 15:break e;case 1:if(256&l.effectTag&&null!==S){var b=S.memoizedProps,y=S.memoizedState,P=l.stateNode,v=P.getSnapshotBeforeUpdate(l.elementType===l.type?b:Eo(l.type,b),y);P.__reactInternalSnapshotBeforeUpdate=v}break e;case 3:case 5:case 6:case 4:case 17:break e;default:s("163")}}Ri=Ri.nextEffect}}catch(e){o=!0,i=e}o&&(null===Ri&&s("178"),Xi(Ri,i),null!==Ri&&(Ri=Ri.nextEffect))}for(Ri=n;null!==Ri;){S=!1,b=void 0;try{for(;null!==Ri;){var w=Ri.effectTag;if(16&w&&nn(Ri.stateNode,""),128&w){var x=Ri.alternate;if(null!==x){var U=x.ref;null!==U&&("function"==typeof U?U(null):U.current=null)}}switch(14&w){case 2:wi(Ri),Ri.effectTag&=-3;break;case 6:wi(Ri),Ri.effectTag&=-3,Ui(Ri.alternate,Ri);break;case 4:Ui(Ri.alternate,Ri);break;case 8:xi(y=Ri),y.return=null,y.child=null,y.memoizedState=null,y.updateQueue=null;var T=y.alternate;null!==T&&(T.return=null,T.child=null,T.memoizedState=null,T.updateQueue=null)}Ri=Ri.nextEffect}}catch(e){S=!0,b=e}S&&(null===Ri&&s("178"),Xi(Ri,b),null!==Ri&&(Ri=Ri.nextEffect))}if(U=gn,x=Br(),w=U.focusedElem,S=U.selectionRange,x!==w&&w&&w.ownerDocument&&function e(t,r){return!(!t||!r)&&(t===r||(!t||3!==t.nodeType)&&(r&&3===r.nodeType?e(t,r.parentNode):"contains"in t?t.contains(r):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(r))))}(w.ownerDocument.documentElement,w)){null!==S&&Mr(w)&&(x=S.start,void 0===(U=S.end)&&(U=x),"selectionStart"in w?(w.selectionStart=x,w.selectionEnd=Math.min(U,w.value.length)):(U=(x=w.ownerDocument||document)&&x.defaultView||window).getSelection&&(U=U.getSelection(),b=w.textContent.length,T=Math.min(S.start,b),S=void 0===S.end?T:Math.min(S.end,b),!U.extend&&S<T&&(b=S,S=T,T=b),b=Ar(w,T),y=Ar(w,S),b&&y&&(1!==U.rangeCount||U.anchorNode!==b.node||U.anchorOffset!==b.offset||U.focusNode!==y.node||U.focusOffset!==y.offset)&&((x=x.createRange()).setStart(b.node,b.offset),U.removeAllRanges(),S<T?(U.addRange(x),U.extend(y.node,y.offset)):(x.setEnd(y.node,y.offset),U.addRange(x))))),x=[];for(U=w;U=U.parentNode;)1===U.nodeType&&x.push({element:U,left:U.scrollLeft,top:U.scrollTop});for("function"==typeof w.focus&&w.focus(),w=0;w<x.length;w++)(U=x[w]).element.scrollLeft=U.left,U.element.scrollTop=U.top}for(wr=!!mn,mn=gn=null,e.current=t,Ri=n;null!==Ri;){n=!1,w=void 0;try{for(x=r;null!==Ri;){var k=Ri.effectTag;if(36&k){var C=Ri.alternate;switch(T=x,(U=Ri).tag){case 0:case 11:case 15:break;case 1:var I=U.stateNode;if(4&U.effectTag)if(null===C)I.componentDidMount();else{var D=U.elementType===U.type?C.memoizedProps:Eo(U.type,C.memoizedProps);I.componentDidUpdate(D,C.memoizedState,I.__reactInternalSnapshotBeforeUpdate)}var E=U.updateQueue;null!==E&&ho(0,E,I);break;case 3:var L=U.updateQueue;if(null!==L){if((S=null)!==U.child)switch(U.child.tag){case 5:S=U.child.stateNode;break;case 1:S=U.child.stateNode}ho(0,L,S)}break;case 5:var N=U.stateNode;null===C&&4&U.effectTag&&fn(U.type,U.memoizedProps)&&N.focus();break;case 6:case 4:case 12:case 13:case 17:break;default:s("163")}}if(128&k){var A=Ri.ref;if(null!==A){var B=Ri.stateNode;switch(Ri.tag){case 5:var M=B;break;default:M=B}"function"==typeof A?A(M):A.current=M}}Ri=Ri.nextEffect}}catch(e){n=!0,w=e}n&&(null===Ri&&s("178"),Xi(Ri,w),null!==Ri&&(Ri=Ri.nextEffect))}Ai=zi=!1,"function"==typeof Fn&&Fn(t.stateNode),0===(t=(k=t.expirationTime)<(t=t.childExpirationTime)?t:k)&&(Wi=null),e.expirationTime=t,e.finishedWork=null}function Bs(e){null===as&&s("246"),as.expirationTime=0,ds||(ds=!0,hs=e)}function Ms(e,t){if(us&&!ps){ps=!0;try{return e(t)}finally{ps=!1}}return e(t)}function Os(e,t,r,n,o){var i=t.current;e:if(r){t:{2===tr(r=r._reactInternalFiber)&&1===r.tag||s("170");var a=r;do{switch(a.tag){case 3:a=a.stateNode.context;break t;case 1:if(En(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break t}}a=a.return}while(null!==a);s("171"),a=void 0}if(1===r.tag){var l=r.type;if(En(l)){r=Bn(r,l,a);break e}}r=a}else r=Tn;return null===t.context?t.context=r:t.pendingContext=r,t=o,(o=no(n)).payload={element:e},null!==(t=void 0===t?null:t)&&(o.callback=t),qi(),io(i,o),es(i,n),n}function Fs(e,t,r,n){var o=t.current;return Os(e,t,r,o=Ki(Us(),o),n)}function js(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function Rs(e){var t=1073741822-25*(1+((1073741822-Us()+500)/25|0));Li<=t&&(t=Li-1),this._expirationTime=Li=t,this._root=e,this._callbacks=this._next=null,this._hasChildren=this._didComplete=!1,this._children=null,this._defer=!0}function zs(){this._callbacks=null,this._didCommit=!1,this._onCommit=this._onCommit.bind(this)}function $s(e,t,r){e={current:t=$n(3,null,null,t?3:0),containerInfo:e,pendingChildren:null,pingCache:null,earliestPendingTime:0,latestPendingTime:0,earliestSuspendedTime:0,latestSuspendedTime:0,latestPingedTime:0,didError:!1,pendingCommitExpirationTime:0,finishedWork:null,timeoutHandle:-1,context:null,pendingContext:null,hydrate:r,nextExpirationTimeToWorkOn:0,expirationTime:0,firstBatch:null,nextScheduledRoot:null},this._internalRoot=t.stateNode=e}function Hs(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Ws(e,t,r,n,o){Hs(r)||s("200");var i=r._reactRootContainer;if(i){if("function"==typeof o){var a=o;o=function(){var e=js(i._internalRoot);a.call(e)}}null!=e?i.legacy_renderSubtreeIntoContainer(e,t,o):i.render(t,o)}else{if(i=r._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var r;r=e.lastChild;)e.removeChild(r);return new $s(e,!1,t)}(r,n),"function"==typeof o){var l=o;o=function(){var e=js(i._internalRoot);l.call(e)}}Ms(function(){null!=e?i.legacy_renderSubtreeIntoContainer(e,t,o):i.render(t,o)})}return js(i._internalRoot)}function Vs(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return Hs(t)||s("200"),function(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:Ze,key:null==n?null:""+n,children:e,containerInfo:t,implementation:null}}(e,t,null,r)}Te=function(e,t,r){switch(t){case"input":if(vt(e,r),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var o=F(n);o||s("90"),He(n),vt(n,o)}}}break;case"textarea":Yr(e,r);break;case"select":null!=(t=r.value)&&qr(e,!!r.multiple,t,!1)}},Rs.prototype.render=function(e){this._defer||s("250"),this._hasChildren=!0,this._children=e;var t=this._root._internalRoot,r=this._expirationTime,n=new zs;return Os(e,t,null,r,n._onCommit),n},Rs.prototype.then=function(e){if(this._didComplete)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},Rs.prototype.commit=function(){var e=this._root._internalRoot,t=e.firstBatch;if(this._defer&&null!==t||s("251"),this._hasChildren){var r=this._expirationTime;if(t!==this){this._hasChildren&&(r=this._expirationTime=t._expirationTime,this.render(this._children));for(var n=null,o=t;o!==this;)o=(n=o)._next;null===n&&s("251"),n._next=o._next,this._next=t,e.firstBatch=this}this._defer=!1,Ls(e,r),t=this._next,(this._next=null)!==(t=e.firstBatch=t)&&t._hasChildren&&t.render(t._children)}else this._next=null,this._defer=!1},Rs.prototype._onComplete=function(){if(!this._didComplete){this._didComplete=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++)(0,e[t])()}},zs.prototype.then=function(e){if(this._didCommit)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},zs.prototype._onCommit=function(){if(!this._didCommit){this._didCommit=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++){var r=e[t];"function"!=typeof r&&s("191",r),r()}}},$s.prototype.render=function(e,t){var r=this._internalRoot,n=new zs;return null!==(t=void 0===t?null:t)&&n.then(t),Fs(e,r,null,n._onCommit),n},$s.prototype.unmount=function(e){var t=this._internalRoot,r=new zs;return null!==(e=void 0===e?null:e)&&r.then(e),Fs(null,t,null,r._onCommit),r},$s.prototype.legacy_renderSubtreeIntoContainer=function(e,t,r){var n=this._internalRoot,o=new zs;return null!==(r=void 0===r?null:r)&&o.then(r),Fs(t,n,e,o._onCommit),o},$s.prototype.createBatch=function(){var e=new Rs(this),t=e._expirationTime,r=this._internalRoot,n=r.firstBatch;if(null===n)(r.firstBatch=e)._next=null;else{for(r=null;null!==n&&n._expirationTime>=t;)n=(r=n)._next;e._next=n,null!==r&&(r._next=e)}return e},Ae=function(){ss||0===cs||(Es(cs,!1),cs=0)};var qs,Gs,Zs={createPortal:Vs,findDOMNode:function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;return void 0===t&&("function"==typeof e.render?s("188"):s("268",Object.keys(e))),null===(e=nr(t))?null:e.stateNode},hydrate:function(e,t,r){return Ws(null,e,t,!0,r)},render:function(e,t,r){return Ws(null,e,t,!1,r)},unstable_renderSubtreeIntoContainer:function(e,t,r,n){return(null==e||void 0===e._reactInternalFiber)&&s("38"),Ws(e,t,r,!1,n)},unmountComponentAtNode:function(e){return Hs(e)||s("40"),!!e._reactRootContainer&&(Ms(function(){Ws(null,null,e,!1,function(){e._reactRootContainer=null})}),!0)},unstable_createPortal:function(){return Vs.apply(void 0,arguments)},unstable_batchedUpdates:Le=function(e,t){var r=us;us=!0;try{return e(t)}finally{(us=r)||ss||Es(1073741823,!1)}},unstable_interactiveUpdates:Ne=function(e,t,r){if(ms)return e(t,r);us||ss||0===cs||(Es(cs,!1),cs=0);var n=ms,o=us;us=ms=!0;try{return e(t,r)}finally{ms=n,(us=o)||ss||Es(1073741823,!1)}},flushSync:function(e,t){ss&&s("187");var r=us;us=!0;try{return ts(e,t)}finally{us=r,Es(1073741823,!1)}},unstable_createRoot:function(e,t){return Hs(e)||s("299","unstable_createRoot"),new $s(e,!0,null!=t&&!0===t.hydrate)},unstable_flushControlled:function(e){var t=us;us=!0;try{ts(e)}finally{(us=t)||ss||Es(1073741823,!1)}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{Events:[M,O,F,I.injectEventPluginsByName,S,W,function(e){T(e,H)},De,Ee,kr,E]}};Gs=(qs={findFiberByHostInstance:B,bundleType:0,version:"16.7.0",rendererPackageName:"react-dom"}).findFiberByHostInstance,function(e){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!t.isDisabled&&t.supportsFiber)try{var r=t.inject(e);Fn=Rn(function(e){return t.onCommitFiberRoot(r,e)}),jn=Rn(function(e){return t.onCommitFiberUnmount(r,e)})}catch(e){}}}(o({},qs,{overrideProps:null,findHostInstanceByFiber:function(e){return null===(e=nr(e))?null:e.stateNode},findFiberByHostInstance:function(e){return Gs?Gs(e):null}}));var Ys=Zs;e.exports=Ys.default||Ys},function(e,t,r){"use strict";e.exports=r(76)},function(e,t,r){"use strict";(function(e){
/** @license React v0.12.0
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
Object.defineProperty(t,"__esModule",{value:!0});var r=null,n=!1,o=3,i=-1,s=-1,a=!1,l=!1;function c(){if(!a){var e=r.expirationTime;l?w():l=!0,v(u,e)}}function d(){var e=r,t=r.next;if(r===t)r=null;else{var n=r.previous;r=n.next=t,t.previous=n}e.next=e.previous=null,n=e.callback,t=e.expirationTime,e=e.priorityLevel;var i=o,a=s;o=e,s=t;try{var l=n()}finally{o=i,s=a}if("function"==typeof l)if(l={callback:l,priorityLevel:e,expirationTime:t,next:null,previous:null},null===r)r=l.next=l.previous=l;else{n=null,e=r;do{if(e.expirationTime>=t){n=e;break}e=e.next}while(e!==r);null===n?n=r:n===r&&(r=l,c()),(t=n.previous).next=n.previous=l,l.next=n,l.previous=t}}function h(){if(-1===i&&null!==r&&1===r.priorityLevel){a=!0;try{for(;d(),null!==r&&1===r.priorityLevel;);}finally{a=!1,null!==r?c():l=!1}}}function u(e){a=!0;var o=n;n=e;try{if(e)for(;null!==r;){var i=t.unstable_now();if(!(r.expirationTime<=i))break;for(;d(),null!==r&&r.expirationTime<=i;);}else if(null!==r)for(;d(),null!==r&&!x(););}finally{a=!1,n=o,null!==r?c():l=!1,h()}}var p,m,g=Date,f="function"==typeof setTimeout?setTimeout:void 0,_="function"==typeof clearTimeout?clearTimeout:void 0,S="function"==typeof requestAnimationFrame?requestAnimationFrame:void 0,b="function"==typeof cancelAnimationFrame?cancelAnimationFrame:void 0;function y(e){p=S(function(t){_(m),e(t)}),m=f(function(){b(p),e(t.unstable_now())},100)}if("object"==typeof performance&&"function"==typeof performance.now){var P=performance;t.unstable_now=function(){return P.now()}}else t.unstable_now=function(){return g.now()};var v,w,x,U=null;if("undefined"!=typeof window?U=window:void 0!==e&&(U=e),U&&U._schedMock){var T=U._schedMock;v=T[0],w=T[1],x=T[2],t.unstable_now=T[3]}else if("undefined"==typeof window||"function"!=typeof MessageChannel){var k=null,C=function(e){if(null!==k)try{k(e)}finally{k=null}};v=function(e){null!==k?setTimeout(v,0,e):(k=e,setTimeout(C,0,!1))},w=function(){k=null},x=function(){return!1}}else{"undefined"!=typeof console&&("function"!=typeof S&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof b&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"));var I=null,D=!1,E=-1,L=!1,N=!1,A=0,B=33,M=33;x=function(){return A<=t.unstable_now()};var O=new MessageChannel,F=O.port2;O.port1.onmessage=function(){D=!1;var e=I,r=E;I=null,E=-1;var n=t.unstable_now(),o=!1;if(A-n<=0){if(!(-1!==r&&r<=n))return L||(L=!0,y(j)),I=e,void(E=r);o=!0}if(null!==e){N=!0;try{e(o)}finally{N=!1}}};var j=function(e){if(null!==I){y(j);var t=e-A+M;t<M&&B<M?(t<8&&(t=8),M=t<B?B:t):B=t,A=e+M,D||(D=!0,F.postMessage(void 0))}else L=!1};v=function(e,t){I=e,E=t,N||t<0?F.postMessage(void 0):L||(L=!0,y(j))},w=function(){I=null,D=!1,E=-1}}t.unstable_ImmediatePriority=1,t.unstable_UserBlockingPriority=2,t.unstable_NormalPriority=3,t.unstable_IdlePriority=5,t.unstable_LowPriority=4,t.unstable_runWithPriority=function(e,r){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=o,s=i;o=e,i=t.unstable_now();try{return r()}finally{o=n,i=s,h()}},t.unstable_scheduleCallback=function(e,n){var s=-1!==i?i:t.unstable_now();if("object"==typeof n&&null!==n&&"number"==typeof n.timeout)n=s+n.timeout;else switch(o){case 1:n=s+-1;break;case 2:n=s+250;break;case 5:n=s+1073741823;break;case 4:n=s+1e4;break;default:n=s+5e3}if(e={callback:e,priorityLevel:o,expirationTime:n,next:null,previous:null},null===r)r=e.next=e.previous=e,c();else{s=null;var a=r;do{if(a.expirationTime>n){s=a;break}a=a.next}while(a!==r);null===s?s=r:s===r&&(r=e,c()),(n=s.previous).next=s.previous=e,e.next=s,e.previous=n}return e},t.unstable_cancelCallback=function(e){var t=e.next;if(null!==t){if(t===e)r=null;else{e===r&&(r=t);var n=e.previous;(n.next=t).previous=n}e.next=e.previous=null}},t.unstable_wrapCallback=function(e){var r=o;return function(){var n=o,s=i;o=r,i=t.unstable_now();try{return e.apply(this,arguments)}finally{o=n,i=s,h()}}},t.unstable_getCurrentPriorityLevel=function(){return o},t.unstable_shouldYield=function(){return!n&&(null!==r&&r.expirationTime<s||x())},t.unstable_continueExecution=function(){null!==r&&c()},t.unstable_pauseExecution=function(){},t.unstable_getFirstCallbackNode=function(){return r}}).call(this,r(3))},function(e,t,r){"use strict";var n=r(4),o=r(78);if(void 0===n)throw Error("create-react-class could not find the React object. If you are using script tags, make sure that React is being loaded before create-react-class.");var i=(new n.Component).updater;e.exports=o(n.Component,n.isValidElement,i)},function(e,t,r){"use strict";var n=r(5),o=r(79),i=r(80);e.exports=function(e,t,r){var s=[],a={mixins:"DEFINE_MANY",statics:"DEFINE_MANY",propTypes:"DEFINE_MANY",contextTypes:"DEFINE_MANY",childContextTypes:"DEFINE_MANY",getDefaultProps:"DEFINE_MANY_MERGED",getInitialState:"DEFINE_MANY_MERGED",getChildContext:"DEFINE_MANY_MERGED",render:"DEFINE_ONCE",componentWillMount:"DEFINE_MANY",componentDidMount:"DEFINE_MANY",componentWillReceiveProps:"DEFINE_MANY",shouldComponentUpdate:"DEFINE_ONCE",componentWillUpdate:"DEFINE_MANY",componentDidUpdate:"DEFINE_MANY",componentWillUnmount:"DEFINE_MANY",UNSAFE_componentWillMount:"DEFINE_MANY",UNSAFE_componentWillReceiveProps:"DEFINE_MANY",UNSAFE_componentWillUpdate:"DEFINE_MANY",updateComponent:"OVERRIDE_BASE"},l={getDerivedStateFromProps:"DEFINE_MANY_MERGED"},c={displayName:function(e,t){e.displayName=t},mixins:function(e,t){if(t)for(var r=0;r<t.length;r++)d(e,t[r])},childContextTypes:function(e,t){e.childContextTypes=n({},e.childContextTypes,t)},contextTypes:function(e,t){e.contextTypes=n({},e.contextTypes,t)},getDefaultProps:function(e,t){e.getDefaultProps?e.getDefaultProps=u(e.getDefaultProps,t):e.getDefaultProps=t},propTypes:function(e,t){e.propTypes=n({},e.propTypes,t)},statics:function(e,t){!function(e,t){if(t)for(var r in t){var n=t[r];if(t.hasOwnProperty(r)){if(i(!(r in c),'ReactClass: You are attempting to define a reserved property, `%s`, that shouldn\'t be on the "statics" key. Define it as an instance property instead; it will still be accessible on the constructor.',r),r in e){var o=l.hasOwnProperty(r)?l[r]:null;return i("DEFINE_MANY_MERGED"===o,"ReactClass: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",r),e[r]=u(e[r],n)}e[r]=n}}}(e,t)},autobind:function(){}};function d(e,r){if(r){i("function"!=typeof r,"ReactClass: You're attempting to use a component class or function as a mixin. Instead, just use a regular object."),i(!t(r),"ReactClass: You're attempting to use a component as a mixin. Instead, just use a regular object.");var n,o,s,l=e.prototype,d=l.__reactAutoBindPairs;for(var h in r.hasOwnProperty("mixins")&&c.mixins(e,r.mixins),r)if(r.hasOwnProperty(h)&&"mixins"!==h){var m=r[h],g=l.hasOwnProperty(h);if(n=g,o=h,s=a.hasOwnProperty(o)?a[o]:null,f.hasOwnProperty(o)&&i("OVERRIDE_BASE"===s,"ReactClassInterface: You are attempting to override `%s` from your class specification. Ensure that your method names do not overlap with React methods.",o),n&&i("DEFINE_MANY"===s||"DEFINE_MANY_MERGED"===s,"ReactClassInterface: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",o),c.hasOwnProperty(h))c[h](e,m);else{var _=a.hasOwnProperty(h);if("function"!=typeof m||_||g||!1===r.autobind)if(g){var S=a[h];i(_&&("DEFINE_MANY_MERGED"===S||"DEFINE_MANY"===S),"ReactClass: Unexpected spec policy %s for key %s when mixing in component specs.",S,h),"DEFINE_MANY_MERGED"===S?l[h]=u(l[h],m):"DEFINE_MANY"===S&&(l[h]=p(l[h],m))}else l[h]=m;else d.push(h,m),l[h]=m}}}}function h(e,t){for(var r in i(e&&t&&"object"==typeof e&&"object"==typeof t,"mergeIntoWithNoDuplicateKeys(): Cannot merge non-objects."),t)t.hasOwnProperty(r)&&(i(void 0===e[r],"mergeIntoWithNoDuplicateKeys(): Tried to merge two objects with the same key: `%s`. This conflict may be due to a mixin; in particular, this may be caused by two getInitialState() or getDefaultProps() methods returning objects with clashing keys.",r),e[r]=t[r]);return e}function u(e,t){return function(){var r=e.apply(this,arguments),n=t.apply(this,arguments);if(null==r)return n;if(null==n)return r;var o={};return h(o,r),h(o,n),o}}function p(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}var m={componentDidMount:function(){this.__isMounted=!0}},g={componentWillUnmount:function(){this.__isMounted=!1}},f={replaceState:function(e,t){this.updater.enqueueReplaceState(this,e,t)},isMounted:function(){return!!this.__isMounted}},_=function(){};return n(_.prototype,e.prototype,f),function(e){var t=function(e,n,s){this.__reactAutoBindPairs.length&&function(e){for(var t,r=e.__reactAutoBindPairs,n=0;n<r.length;n+=2){var o=r[n],i=r[n+1];e[o]=(t=e,i.bind(t))}}(this),this.props=e,this.context=n,this.refs=o,this.updater=s||r,this.state=null;var a=this.getInitialState?this.getInitialState():null;i("object"==typeof a&&!Array.isArray(a),"%s.getInitialState(): must return an object or null",t.displayName||"ReactCompositeComponent"),this.state=a};for(var n in t.prototype=new _,(t.prototype.constructor=t).prototype.__reactAutoBindPairs=[],s.forEach(d.bind(null,t)),d(t,m),d(t,e),d(t,g),t.getDefaultProps&&(t.defaultProps=t.getDefaultProps()),i(t.prototype.render,"createClass(...): Class specification must implement a `render` method."),a)t.prototype[n]||(t.prototype[n]=null);return t}}},function(e,t,r){"use strict";e.exports={}},function(e,t,r){"use strict";e.exports=function(e,t,r,n,o,i,s,a){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[r,n,o,i,s,a],d=0;(l=new Error(t.replace(/%s/g,function(){return c[d++]}))).name="Invariant Violation"}throw l.framesToPop=1,l}}},function(e,t){try{if(Shr.ScriptManager.throwIfOverridden("Shr.Dialogs.UniversalPicker.View.widgets.search"),!Shr.Dialogs.UniversalPicker.View)throw{message:"deferred because local UPP override needs to load first"};Shr.Dialogs.UniversalPicker.View.widgets.search=(l=Shr.Dialogs.UniversalPicker,c=window.trUPP&&window.trUPP.util,d={L10N:{}},Shr.ScriptManager.batchLoad(["https://d25wcz1jocbade.cloudfront.net/"+Shr.AS.getEnv()+"/pmc-search/output.js"],{cb:function(){}}),Object.extend(d,{id:"newpp_search",init:function(e,t){r=t,(n=e)&&n.appendChild(document.createElement("div"))},renderStyle:function(e){e(this._formatStyle())},Event:{showSearch:function(e){return!s&&(a||(a=d._getSearchHeight()),r.dlg&&r.dlg.classList.add(r.classNames.search_wgt),n&&n.classList.remove(r.classNames.disabled),e.noSelectAll&&(e.searchNoSelectAll=e.noSelectAll,e.noSelectAll=!1),s=e,d._showSearch(),!0)},hideSearch:function(e,t){(o||s)&&(s&&(s.originalItems&&(i=e?s.items:null,s.items=s.originalItems),void 0!==s.searchNoSelectAll&&(s.noSelectAll=s.searchNoSelectAll),delete s.searchNoSelectAll,delete s.originalItems),s=null,void 0!==t&&!t||!e?(o.unmount(),r.dlg&&r.dlg.classList.remove(r.classNames._search_wgt),n&&n.classList.add(r.classNames.disabled),n.children&&n.children[0]&&(n.children[0].innerHTML=""),o=null):r.wideLayout&&o.updateDisplayMode("closed"))},clearSearch:function(e){d._clearFilters(e)},folderClick:function(e,t){o&&s!==t&&new l.View.Event("hideSearch",t.useVerticalTimeline)},selectionChange:function(){d._updateSelection()},resize:function(){o&&s&&(a=d._getSearchHeight(),o.updateWidgetHeight&&o.updateWidgetHeight(a))},close:function(){new l.View.Event("hideSearch")}}}),Object.extend(d,{_showSearch:function(){try{if(o)i&&i.length&&(i=i.map(function(e){return e.id}),window.setTimeout(function(){d._updateSearchResults(i)},10));else if(window.VisualSearchUMD){var e=null;Shr.U.oauthToken&&!Shr.U.useNewAuth&&(e=Shr.U.oauthToken),(o=new window.VisualSearchUMD({config:{token:e,env:Shr.AS.getEnv(),lifeUid:Shr.U.lifeUid,ownerId:Shr.U.ownerId,container:n.children[0],fullWidthContainer:n,options:{fullWidgetHeight:a,hideIcons:["photos","videos"],disableVideos:!0}},callbacks:{momentOutput:d._searchResults,clearFilters:d._clearFilters,selectionPillClick:d._selectAll,trackingCallback:d._track,getMomentModel:d._getMomentModel}})).render(),window.setTimeout(function(){var e=d._getDates(s.items);o.updateDates(e)},10)}else new l.View.Event("hideSearch")}catch(e){new l.View.Event("hideSearch")}},_getMomentModel:function(e){try{var t=s.items.find(function(t){return t.id===e});return{attributes:{width:t.width,height:t.height}}}catch(t){return null}},_searchResults:function(e,t,n){o&&s&&(e?document.querySelector("."+r.classNames.content).classList.add(r.classNames.busy):("closed"===n?t&&t.length&&d._updateSearchResults(t):"hidden"===n&&d._clearFilters(),r.wideLayout||new l.View.Event("toggleHamburger","open"===n)))},_selectAll:function(){o&&s&&r.canSelectAll(s)&&r.onSelect(!r.allSelected(s),-1)},_clearFilters:function(e){if(o&&s&&s.originalItems){s.items=s.originalItems,delete s.originalItems;var t=d._getDates(s.items);o.resetFilters(),o.updateDisplayMode("hidden"),o.updateDates(t),e&&(s.scroll_to_date=e),s.onclick()}},_track:function(e){try{var t,r,n;e&&e.name&&(t=["search_widget",e.name].join("."),e.type&&(t=[t,e.type].join(".")),r=e.count||Date.now(),l.Log.metric(t,r),(n="search_window_opened"===e.name?"upp search initiate":e.type?"upp search filter:"+e.type:null)&&window.trUPP.Log.logOmnitureClick(n))}catch(e){}},_updateSearchResults:function(e){if(!s.originalItems&&(s.originalItems=s.items),(e=s&&s.originalItems.filter(function(t){return void 0!==e.find(function(e){return t.id===e})}))&&0<e.length){e.vtSorted=!0,s.items=e,s.onclick();var t=d._getDates(e);o.updateDates(t)}else d._clearFilters();d._updateSelection()},_updateSelection:function(){o&&s&&o.updateAllMomentsSelected(r.allSelected(s))},_getLocalVars:function(){return{searchContainer:n,vSearch:o,prevSearchItems:i,vSearchFolder:s}},_getSearchHeight:function(){return r.wideLayout?document.querySelector("."+r.classNames.sidebar).clientHeight:window.innerHeight},_formatStyle:function(){return[".shrUPSearch .visual-search-container.vs-closed.vs-mobile {width: calc(100% - 44px) !important;}",".shrUPSearch .visual-search-container.vs-open.vs-mobile {width: 100% !important;}",".shrUPSearch .visual-search-container.vs-closed  {width: calc(100% - 30px);}",".shrUPSearch .visual-search-container.vs-open {width: 100%; box-sizing: border-box; border-bottom: solid 1px #d8d8d8}",".shrUPSearch .visual-search-container.bp_xs.vs-hidden .vs-search-bar .vs-search-bar-items {position: relative; width: calc(100% - 59px);}"].join("\n")},_getDates:function(e){var t=c.groupBy(e,d._groupMonthTransform);return c.groupBy(Object.keys(t),d._groupYearTransform)},_groupMonthTransform:function(e){try{var t=e.data.moment_date;if(t){var r=new Date(1e3*t);return r.getUTCMonth()+" "+r.getUTCFullYear()}return""}catch(e){return""}},_groupYearTransform:function(e){try{return e.split(" ")[1]}catch(e){return""}}}),d)}catch(e){window&&window.trUPP&&window.trUPP.Timing&&window.trUPP.Timing.recordInfo("upp_exception",{ex_message:e.message,ex_stack:e.stack}),Console.write("Error loading newpp_search.js: "+e.message)}var r,n,o,i,s,a,l,c,d},function(e,t){try{if(Shr.ScriptManager.throwIfOverridden("Shr.Dialogs.UniversalPicker.View.widgets.vt"),!Shr.Dialogs.UniversalPicker.View)throw{message:"deferred because local UPP override needs to load first"};Shr.Dialogs.UniversalPicker.View.widgets.vt=(a={},l=window.trUPP=window.trUPP||{},c=Shr.Dialogs.UniversalPicker,d=-1,a.L10N={},window.PMCHeimdall||(Shr.ScriptManager.batchLoad([["https:/","d25wcz1jocbade.cloudfront.net",Shr.AS.getEnv(),"pmc-heimdall","app.js"].join("/")],{cb:function(){}}),Shr.StyleManager.renderStyleSheet(["https:/","d25wcz1jocbade.cloudfront.net",Shr.AS.getEnv(),"pmc-heimdall","main.css"].join("/"))),Object.extend(a,{id:"newpp_vt",init:function(e,t){r=e,n=t,o=o||c.View.widgets.content.Event.folderContent,delete c.View.widgets.content.Event.folderContent},renderStyle:function(e){e(this._formatStyle())},Event:{folderContent:function(e,t,r){var h,u,p,m;if(c.vt&&t&&c.isOpen&&e==n.folder&&e.useVerticalTimeline&&e.items&&e.items.length){if(s=e,d=-1,i=void 0,h=t.appendChild(document.createElement("div")),(r||[]).forEach(function(e){h.classList.add(e)}),m=a._getSortOrder(e),!e.items.vtSorted){if(e.items=a._sortItemsForVt(e.items,m),"recentUploads"===e.id){var g=new Date;g.setDate(g.getDate()-90);var f=g.valueOf(),_=0,S=e.items.filter(function(e){var t=!1;return(_<1e3||e.date>=f)&&(t=!0,_++),t});e.items=S}e.items.vtSorted=!0}if(u=e.items.map(function(e){return e.disabled=!1,n.verifyAndSelectItem(e),new l.Heimdall.Item(e)}),p={actionbar_options:{sections:{left:[{view:"date-summary"}]}},environment:Shr.AS.getEnv(),life_uid:Shr.U.id,layout:"VerticalTimeline",layout_options:{group_by_attr:m,sort_by_attr:m,object_id_attr:"id",lock_drawer:Shr.B.isTouch,moment_icons:{top:[{class:"favorite"},{class:"view",action:"view"}]}},clickCallback:a._clickCallback.bind(this),trackingCallback:a._trackingCallback.bind(this)},i=new window.PMCHeimdall(u,Object.extend(p,{container:h})),s.scroll_to_date){var b=s.scroll_to_date;delete s.scroll_to_date,window.setTimeout(function(){i.scrollToDate(b,!0)},250)}}if(i&&s==e&&c.useSearch&&s.useVisualSearch)new c.View.Event("showSearch",s);else{var y=s&&s.useVisualSearch;new c.View.Event("hideSearch",s,y)}i||o&&o.apply(this,arguments)},selectionChange:function(e,t){var r;s==n.folder&&(r=e.map(function(e){return{id:e.id,selected:t}}),i.updateObjects(r))},folderChange:function(e){s!==e&&(s=i=void 0)},folderClick:function(e){r&&r.classList.remove(n.classNames.busy)},newZoomIn:function(){i&&s&&i.disableScroll()},newZoomOut:function(e,t){var r;!t&&s==n.folder&&s.items&&0<s.items.length&&void 0!==e&&0<=e&&e<s.items.length&&(r=s.items[e])&&r.id&&i.scrollToObject(r.id),i&&s&&i.enableScroll()}},_getSortOrder:function(e){return e&&e.sortOrder&&e.sortOrder.split(" ")[0]||"created_at_timestamp"},_trackingCallback:function(e){try{var t,r;e&&e.name&&(t=["vt_widget",e.name].join("."),e.type&&(t=[t,e.type].join(".")),r=e.count||Date.now(),c.Log.metric(t,r),"firstPhoto"===e.name&&("timeline"==c._folder.id?l.Timing.endTimer("all-photos-load",{path:Shr.Dialogs.UniversalPicker._logsmithUPPVer.split("_").pop()}):"recentUploads"==c._folder.id&&l.Timing.endTimer("recent-uploads-load",{path:Shr.Dialogs.UniversalPicker._logsmithUPPVer.split("_").pop()})))}catch(e){}},_clickCallback:function(e,t,r){var o=0,i=[],l=!1;switch(t){case"click":case"select":e.forEach(function(e){var t=n.folder.items.findIndex(function(t){return t.id==e});-1!=t&&(o+=n.folder.items[t].selected?-1:1,i.push(t))}),1<i.length?(o==-1*i.length&&(l=!0),(o<1||c.Source.canSelect(o))&&i.forEach(function(e){var t=n.folder.items[e];!!t.selected!=l||t.disabled||n.onSelect(!l,e)})):n.folder.items[i[0]].disabled||a._selectItem(i[0],r.shiftKey,r.ctrlKey);break;case"select-date":var d=e[0],h=n.folder.items.findIndex(function(e){return e.id==d}),u=n.folder.items[h][a._getSortOrder(s)],p=new Date(u).toISOString().slice(0,10).replace(/-/g,"");new c.View.Event("clearSearch",p);break;case"view":e.forEach(function(e){var t=n.folder.items.findIndex(function(t){return t.id==e});new c.View.Event("launchNewZoom",n.folder,t)})}},_sortItemsForVt:function(e,t){var r,n,o=[];try{if(1===e.length)o=e;else for(n=e[e.length-1][t],o.push(e[e.length-1]),r=e.length-2;0<=r;r--)n==e[r][t]?e[r][t]+=1:n>e[r][t]&&(e[r][t]=n+1),n=e[r][t],o.unshift(e[r])}catch(e){o=[]}return o}}),Object.extend(a,{_selectItem:function(e,t,r){var o,i=s.items[e].selected,a=[e];if(t&&(i=!1,-1!=d))for(a=[],o=Math.min(e,d);o<=Math.max(e,d);o++)s.items[o].separator||s.items[o].selected||s.items[o].disabled||a.push(o);a.length&&Shr.L.tryToCall(n.onSelect,!i,a)&&(d=e)},_formatStyle:function(){var e=Object.merge({},Shr.Style.parameters,{});return["/* newpp_vt */",".shrUPWide.shrUPSrc_sfly:not(.shrUPWgt_search):not(.shrUPSrc_Lifetouch) .shrUPContent .shrUPFC.pmc-heimdall {top: -48px; height: calc(100% + 48px);}",".shrUPFC.pmc-heimdall {overflow: visible;}",Shr.B.isIE?".shrUPContent .pmc-heimdall .scrubber-container .tooltip {left: auto;}":"",""].join("\n").substitute(Object.merge(e,{}))}}),a)}catch(e){window&&window.trUPP&&window.trUPP.Timing&&window.trUPP.Timing.recordInfo("upp_exception",{ex_message:e.message,ex_stack:e.stack}),Console.write("Error loading newpp_vt.js: "+e.message)}var r,n,o,i,s,a,l,c,d},function(e,t){try{if(Shr.ScriptManager.throwIfOverridden("Shr.Dialogs.UniversalPicker.View.widgets.content"),!Shr.Dialogs.UniversalPicker.View)throw{message:"deferred because local UPP override needs to load first"};Shr.Dialogs.UniversalPicker.View.widgets.content=(o={},i=Shr.Dialogs.UniversalPicker,o.L10N={},Object.extend(o,{id:"newpp_content",init:function(e,t){(r=e)._widget=this,n=t,this.Event.refresh(n.folder)},renderStyle:function(e){e(this._formatStyle())},Event:{refresh:function(e){var t,s,a="",l="",c=e.type==i.Folder.Type.selected,d=[n.classNames.folderContent,n.classNames.overlay];Shr.U.getIdToken().then(function(h){if(i.isOpen&&e==n.folder)try{if(e.contentClassName&&d.push(e.contentClassName),e.error)a=n.Error.formatMessage("${error.sorry}",e.error,function(){n.Error.retry(e)});else if(e.getContents(h))if(t=(e.folders||[]).concat(e.albums||[]),(s=n.path&&n.path.pop())&&1<t.length)(s=Shr.Array.findByProperty(t,"id",s))?Shr.L.tryToCall((s.onclick||o.Folder.prototype.onclick).bind(s)):(n.path.length=0,i.refresh(e));else if(0<t.length&&e.empty||0===t.length&&0===(e.items||[]).length)a=e.empty?e.empty:Shr.Html.formatTag("div",{className:[n.classNames.empty,n.classNames.overlay]},e.isAlbum?"${emptyAlbum}":c?"${emptySelection}":"${emptyFolder}");else{if(!e.noSkip&&1==t.length)return n.stack[n.stack.length-1].skip=!0,void(t[0].onclick||i.Folder.prototype.onclick).apply(t[0]);new i.View.Event("folderContent",e,r,d)}else a=e.pending||Shr.Html.formatTag("div",{className:[n.classNames.busy,n.classNames.overlay]},"${pending}");a&&(a=Shr.Html.formatTag("div",{className:d},a)),l=e.header||"",i.context.formatHeader&&(l=Shr.L.tryToCall(i.context.formatHeader,e)),l&&(l=Shr.Html.formatTag("header",{className:n.classNames.header},l)),r.innerHTML=(l+a).localize(i)}catch(h){window&&window.trUPP&&window.trUPP.Timing&&window.trUPP.Timing.recordInfo("upp_exception",{ex_message:h.message,ex_stack:h.stack})}}.bind(this)).catch(function(e){window.trUPP.Timing.recordSessionEvents({event:"getIdToken",err:e,session_method:"newpp_content refresh"})})},folderContent:function(e,t,r){var o,s;n.folder==e&&t&&(s=t.appendChild(document.createElement("ol")),(r||[]).forEach(function(e){s.classList.add(e)}),o=e.formatContent||i.Folder.prototype.formatContent,s.innerHTML=o.call(e,{thumbnailSize:{w:n.gridThumbnailSize,h:n.gridThumbnailSize}},n.formatItems)),new i.View.Event("focusFirstItem",e)},focusFirstItem:function(e){}}}),Object.extend(o,{_formatStyle:function(){var e=window.trUPP&&window.trUPP.util||Shr,t=Object.merge({},Shr.Style.parameters,{backgrounds:{spinners:{onWhite:e.IURL("universalpicker/smooth_spinner.gif"),onWhite2x:e.IURL("universalpicker/smooth_spinner@2x.gif")}}});return["/* newpp_content */",".shrUPContent {position: absolute; left: 200px; overflow-y: auto;}",".shrUPWide.shrUPAnon .shrUPSidebar.shrUPRoot ~ .shrUPContent {left: 0;}",".shrUPContent .shrUPFC.shrOverlay {position: relative; width: auto; height: 100%; margin: 0; padding: 0 25px;}",".shrUPContent .shrUPFC.pmc-heimdall {position: relative;}",".shrUPContent .shrUPFC.shrOverlay .shrUpload {position:static; width: 97%; height: 97%; min-height: 250px; padding: 0; margin: 0;}",".shrUPNarrow .shrUPContent {left: 0; bottom: 40px}",".shrUPNarrow .shrUPContent.shrOverlay {padding: 0;}",".shrUPNarrow .shrUPContent .shrUPFC {width: 100%; margin: 0; padding: 0;}",".shrUPNarrow .shrUPContent LI:not(.shrUPTile) {padding-left: 0;}",".shrUPNarrow .shrUPContent LI.shrUPFolder > .shrUPStack {display: none;}",".shrUPNarrow .shrUPContent LI.shrUPAlbum > .shrUPStack > IMG {position: relative; display: inline-block; min-width: 44px; min-height: 44px;}",".shrUPNarrow .shrUPContent LI.shrUPAlbum > .shrUPStack:before, .shrUPNarrow .shrUPContent LI > .shrUPStack:after {display: none;}",".shrUPNarrow .shrUPContent LI.shrUPFolder > DIV:last-child, .shrUPNarrow .shrUPContent LI.shrUPAlbum > DIV:last-child {display: inline-block; margin: 0 0 0 10px; line-height: 46px; font-size: 20px; font-weight: normal; color: #595959;}",".shrUPNarrow .shrUPContent LI.shrUPFolder > DIV:last-child {margin: 0 0 0 45px;}",".shrUPNarrow .shrUPContent LI.shrUPFolder > DIV:last-child:not([data-itemCount='0']):after, .shrUPNarrow .shrUPContent LI.shrUPAlbum > DIV:last-child:not([data-itemCount='0']):after {content: '(' attr(data-itemCount) ')'; margin-left: 5px;}",".shrUPNarrow.shrUPAnon .shrUPNavBar {display: none;}",".shrUPNarrow.shrUPAnon .shrUPContent {top: 36px;}",".shrUPContent HEADER.shrUPHdr {text-align: right;}",".shrUPSrc_myComputer .shrUPContent HEADER {position: absolute; top: 0; left: 200px; right: 0;}",".shrUPNarrow.shrUPSrc_myComputer .shrUPContent HEADER {top: 45px; left: 0; right: 0; width: auto;}",".shrUPContent .shrUPFC > .shrEmpty:before, .shrUPFC > .shrBusy:before {content: ''; display: block; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);}",".shrUPInShareSites .shrUPContent HEADER {overflow: hidden; position: relative;}",".shrUPInShareSites .shrUPContent .shrUPFC.shrOverlay {height: calc(100% - 43px);}",".shrUPInShareSites.shrUPNarrow .shrUPContent .shrUPFC.shrOverlay {height: calc(100% - 35px);}",".shrUPInShareSites .shrUPContent .shrUPFC.shrOverlay:not(.pmc-heimdall) {padding:10px 0; height: calc(100% - 63px);}",".shrUPInShareSites.shrUPNarrow .shrUPContent .shrUPFC.shrOverlay:not(.pmc-heimdall) {height: calc(100% - 55px);}",".shrUPInShareSites.shrUPSrc_myComputer .shrUPContent HEADER {position: relative;}",".shrUPInShareSites.shrUPSrc_myComputer .shrUPContent {top: 0px;}",".shrUPInShareSites.shrUPSrc_myComputer .shrUPContent HEADER {width: calc(100% - 20px);left: 0;padding: 0;padding-right: 20px;}",".shrUPInShareSites.shrUPNarrow.shrUPSrc_myComputer .shrUPContent {top: 50px; overflow-x: hidden;}",".shrUPInShareSites.shrUPNarrow.shrUPSrc_myComputer .shrUPContent HEADER {top: 0px; padding: 6px 15px}",".shrUPImport .shrUPContent {overflow: auto;}",".shrUPImport .shrUPContent .shrUPFC {height: auto; margin-bottom: 0;}",".shrUPImport .shrUPContent .shrUPFC .shrBusy {margin-top: 55px;}",".shrUPWide.shrUPTouch .shrUPRoot + .shrUPContent {text-align: center;}",".shrUPContent.shrBusy:before {content: ''; display: block; position: absolute; top: 0; left: 0; right: 0; bottom: 0; background-color: #fff; ${0}; background-position: 50% 50%; border-bottom: 1px solid #d8d8d8; z-index: 5;".substitute([Shr.Style.formatBackground({file:t.backgrounds.spinners.onWhite,file2x:t.backgrounds.spinners.onWhite2x,width:"40px"})]),""].join("\n").substitute(Object.merge(t,{}))}}),o)}catch(e){window&&window.trUPP&&window.trUPP.Timing&&window.trUPP.Timing.recordInfo("upp_exception",{ex_message:e.message,ex_stack:e.stack}),Console.write("Error loading newpp_content.js: "+e.message)}var r,n,o,i},function(e,t){Shr.Dialogs.UniversalPicker._sources={myComputer:void 0,mobiledevice:void 0,sfly:void 0,stockphotos:void 0,sites:void 0,alacarte:void 0,google:void 0,fb:void 0,instagram:void 0,flickr:void 0}},function(e,t,r){var n=Shr.Dialogs.UniversalPicker,o=r(0)("shrUP","trUPP");n._sources.myComputer=("device"==n._deviceVsMyComputer?function(){var e,t=Shr.Dom.getUniqueId(),r=new n.Source("device",{className:"shrUPUPL",dataSourceType:n.Source.DataSourceType.upload,requiresSignin:!1,L10N:{library:"My Device",gallery:"Photo Gallery",_end:null},folders:[],albums:[],items:[]}),i=Shr.B.isIos&&8==Shr.UB.major,s=(i&&Shr.B.isSafari&&!Shr.B.isChrome&&Shr.B.isAndroid,i&&(window.navigator.userAgent.match(/ OS ([0-9_]*) /)[1]||"").split("_")),a=i&&"0"==s[1]&&(s[2]||"0")<2;return Object.extend(r,{init:function(t){this.title=(Shr.B.isIos?"${library}":"${gallery}").localize(this),this.items=[],e=this},onclick:function(r){var i=Shr.Event.getEvent();return i&&!e._afterSignin&&Shr.Dom.get(t)==(i.target||i.srcElement)?(Shr.ClassToggle.toggle(r,o._busy),!0):a?n.Source.prototype.onclick.apply(this,arguments):(e.requiresSignin&&!Shr.U.id?(e._afterSignin=!0,window.setTimeout(n.Source.prototype.onclick.bind(e),0)):e._afterSignin&&(delete e._afterSignin,n.back()),!1)},getContents:function(){return a?(this.error="${iOS8Bug}".localize(n),!1):(window.setTimeout(function(){n._onDone()}.bind(this),1e3),!0)},renderStyle:function(e){e(r._formatStyle())},formatTitle:function(i,s){var a=s?"":n.Folder.prototype.formatTitle.call(this,i),l={type:"file",id:t,name:t,accept:"image/jpeg",className:o._overlay,onchange:r._onChange.bind(this)};return i||e.requiresSignin&&!Shr.U.id||(n.context.singleSelect||(l.multiple="multiple"),Shr.B.isAndroid&&(l.accept="image/*"),n.context.enableVideos&&(l.accept=[l.accept,"video/*"].join(",")),a+=Shr.Html.formatTag("input",l)),a},Item:n.Html5Item,_end:null}),Object.extend(r,{_onChange:function(e){n._redirectToRoot2=!1,Shr.ClassToggle.toggle(Shr.Dom.getParentByClass(e,o._busy),o._busy,!1),n.Source.canSelect(Shr.Array.getLength(e&&e.files))&&(Shr.L.forEach(e.files,function(e,t){this.items.push(new n.Html5Item(e))}.bind(this)),Shr.L.tryToCall(n.Folder.prototype.onclick.bind(this),e))},_formatStyle:function(){var e=[".shrUPUPL INPUT {position: absolute; width: 100%; overflow: hidden; padding: 0; ${0};}".substitute([Shr.Style.formatOpacity(0)]),""];return a&&e.push(".shrUPSrc_device .shrError .sflyButton {visibility: hidden;}"),e.join("\n")},_end:null}),r}:function(){return new n.Source("myComputer",{uses:"Shr.MyComputerDS",title:"${title}",className:o._myComputer,dataSourceType:n.Source.DataSourceType.upload,requiresSignin:!1,init:function(e){this.isDevice?this.title=(Shr.B.isIos?"${device.library}":"${device.gallery}").localize(this):this.title=n._sources.myComputer.title.localize(this)},L10N:{title:"My Computer",device:{prompt:"Add from your device",library:"Photo Library",gallery:"Photo Gallery"}},isDevice:"device"==n._deviceVsMyComputer})})()},function(e,t,r){var n=Shr.Dialogs.UniversalPicker,o=r(0)("shrUP","trUPP");n._sources.mobiledevice=new n.Source("mobiledevice",{uses:"Shr.myDevicesDS",title:"${title}",className:o._mobiledevice,init:function(e){this.title=n._sources.mobiledevice.title.localize(this)},L10N:{title:"Mobile Device"}})},function(e,t,r){var n=Shr.Dialogs.UniversalPicker,o=r(0)("shrUP","trUPP");n._sources.sfly=new n.Source("sfly",{id:"sfly",L10N:{title:"Shutterfly"},uses:"Shr.ThisLifeDS",className:o._thisLife,init:function(){this.title="${title}".localize(this)}})},function(e,t){var r=Shr.Dialogs.UniversalPicker;r._sources.stockphotos=new r.Source("stockphotos",{uses:"Shr.stockphotosDS",hide:!0,dataSourceType:r.Source.DataSourceType.sfly,title:"${title}",className:"shrUPSP",init:function(e){this.title="${title}".localize(this)},L10N:{title:"Art Library"},renderStyle:function(e){e([".shrUPWide .shrUPFC > LI.shrUPTile.shrUPSP {background-position: 0 -2200px;}",""].join("\n"))}})},function(e,t,r){var n=Shr.Dialogs.UniversalPicker,o=r(0)("shrUP","trUPP");n._sources.sites=new n.Source("sites",{id:"sites",title:"${title}",className:o._sites,L10N:{title:"Share sites",sortChoices:{sites:{byRole:"By role (owner/member)",taggedPictures:"Tagged Pictures",featuredPictures:"Featured Pictures"},sitePages:{modifiedNewToOld:"Updated (new - old)",modifiedOldToNew:"Updated (old - new)"},siteAlbums:{dateTakenNewToOld:"Date taken (new-old)",dateTakenOldToNew:"Date taken (old-new)",uploadedNewToOld:"Date uploaded (new-old)",uploadedOldToNew:"Date uploaded (old-new)",index:"Default (album order)"}}},uses:"Shr.sitesDS",init:function(e){this.title=n._sources.sites.title.localize(this)}})},function(e,t){var r=Shr.Dialogs.UniversalPicker;r._sources.alacarte=new r.Source("alacarte",{uses:"Shr.alacarteDS",hide:!0,title:"${title}",className:"shrUPALC",init:function(e){this.title=r._sources.alacarte.title.localize(this)},L10N:{title:"Shared albums"},renderStyle:function(e){e([".shrUPALC:before {background-position: 0 -400px;}",""].join("\n"))}})},function(e,t){var r=Shr.Dialogs.UniversalPicker;r._sources.google=new r.Source("google",{uses:"Shr.googleDS",isSocialSite:!0,hide:!1,className:"shrUPGoog",title:"${title}",renderStyle:function(e){e([".shrUPWide .shrUPFC > LI.shrUPTile.shrUPGoog {background-position: 0 -2400px;}",""].join("\n"))},init:function(e){this.title=r._sources.google.title.localize(this)},L10N:{title:"Google Photos"}})},function(e,t,r){var n=Shr.Dialogs.UniversalPicker,o=r(0)("shrUP","trUPP");n._sources.fb=new n.Source("fb",{uses:"Shr.facebookDS",isSocialSite:!0,title:"${title}",className:o._fb,init:function(e){this.title=n._sources.fb.title.localize(this)},L10N:{title:"Facebook"}})},function(e,t,r){var n,o,i=Shr.Dialogs.UniversalPicker,s=r(0)("shrUP","trUPP");i._sources.instagram=(o={id:"instagram",isSocialSite:!0,dataSourceType:i.Source.DataSourceType.instagram,title:"Instagram",L10N:{title:"Instagram",connectToInstagram:"Instagram",authTitle:"Use photos from Instagram in your project",disabledPrompt:"Instagram is not currently available. <p>We are working with Instagram on this issue and appreciate your patience.</p>",authButton:"Connect",myPics:"My Photos",likedPics:"Photos I've Liked",signinErr:"Error signing in Instagram",disconnect:"Change Account",images:"the list of photos in this album",sortChoices:{dateTakenNewToOld:"Date taken (new-old)",dateTakenOldToNew:"Date taken (old-new)",likes:"Most liked",comments:"Most comments",ownerId:"By owner"}},timeout:20,limit:40,redirectUriBase:Shr.Static2Src.instagramResponse,documentDomain:"shutterfly.com",recentMediaUrl:"https://api.instagram.com/v1/users/self/media/recent?access_token=${accessToken}&count=${limit}&callback=",likedMediaUrl:"https://api.instagram.com/v1/users/self/media/liked?access_token=${accessToken}&count=${limit}&callback=",_defaultSortOrder:"created_time desc"},Object.extend(o,{accessTokenUrlBase:"/oauth/authorize/?client_id=033c2ff4b50e40c8aa8a5c70621e28f8&response_type=token&redirect_uri="+encodeURIComponent(o.redirectUriBase),forceLoginUrl:"https://instagram.com/accounts/logoutin/?force_classic_login=&next=",_localStorageKey:function(){return"".concat(Shr.U.id,"-instagram_access_token")},_getAccessToken:function(){return o._accessToken=o._accessToken||i._utilities.localStorage.getItem(o._localStorageKey()),o._accessToken},_setAccessToken:function(e){o.sourceAuth=o._accessToken=e,i._utilities.localStorage.setItem(o._localStorageKey(),e)},_clearAccessToken:function(){o.sourceAuth=o._accessToken=null,i._utilities.localStorage.removeItem(o._localStorageKey())},_getTitle:function(){return o._getAccessToken()?"${title}".localize(this):"${connectToInstagram}".localize(this)},_setTitle:function(){return o.title=this._getTitle(),i._getDataSource(o.id).title=o.title,o.title},_setConnectedInfo:function(){var e=Shr.Html.formatTag("a",{onclick:o.disconnect.bind(n)},"${disconnect}".localize(o));return this.info=o.info=e,i.refresh(n),this.info},disconnect:function(e){var t;o._clearAccessToken(),this.albums=o._resetAlbums(),this.info=o.info=null,i.View.Event("flashInfoBox",!0),t=Shr.B.isIE&&function(e,t){var r,n,a,l,c=t.id,d=document.getElementById(c),h=d&&Shr.Dom.create("iframe",d,{id:c=Shr.Dom.getUniqueId(),className:s._overlay,style:"width: 100%; height: 100%; border: none;"});h&&(d.style.position="relative",r=this._popupDimensions(),a=window.location.protocol+"//"+window.location.host,n=(o.redirectUriBase.match(/(^http[s]?:\/\/.*?\/)/)||"")[1],n+="shr/html/instagramconnect_iframe.html?",n+=["origin="+encodeURIComponent(a),"popupURL="+encodeURIComponent(o.forceLoginUrl)+o.accessTokenUrlBase,"width="+r.w,"height="+r.h,"top="+r.top,"left="+r.left].join("&"),Shr.Event.addEventListener(window,"message",l=function(e){var t,r=document.getElementById(c);e.source==(r&&r.contentWindow)&&((t=e.data&&window.JSON.parse(e.data))&&t.access_token?(o._setAccessToken(t.access_token),this.title=this._setTitle()):i.Source.alert("${signinErr}".localize(this)),Shr.Event.removeEventListener(window,"message",l,!1),i.refresh(this))}.bind(this),!1),h.src=n)}.bind(this),this.pending=i._formatAuthConnect(this._navigateToInstagramLoginPage.bind(this),t).localize(i._getDataSource(this.id)),i._folder=n,window.setTimeout(i.refresh(n),10),e&&Shr.Dom.hide(e.parentNode)},init:function(e){var t=this;(n=this).title=this._getTitle().localize(t),this.albums=o._resetAlbums(),Shr.L.forEach(this.albums,function(e){e.title=e.title.localize(t)}),Object.defineProperty(this,"sourceAuth",{get:function(){return o.sourceAuth}})},className:s._instagram,_resetAlbums:function(){return[new o.Album(this,{id:"myPics",title:"${title}".localize(this),query:o.recentMediaUrl,getSortChoices:function(){return{}}})]},onclick:function(){var e=!!o._getAccessToken();return!Shr.U.id||e||Shr.B.isIE||i.disableSourceInstagram||this._navigateToInstagramLoginPage(),i.Source.prototype.onclick.apply(this,arguments)},getContents:function(){var e=!!o._getAccessToken(),t=Shr.B.isIE&&function(e,t){var r,n,a,l,c=t.id,d=document.getElementById(c),h=d&&Shr.Dom.create("iframe",d,{id:c=Shr.Dom.getUniqueId(),className:s._overlay,style:"width: 100%; height: 100%; border: none;"});h&&(d.style.position="relative",r=this._popupDimensions(),a=window.location.protocol+"//"+window.location.host,n=(o.redirectUriBase.match(/(^http[s]?:\/\/.*?\/)/)||"")[1],n+="shr/html/instagramconnect_iframe.html?",n+=["origin="+encodeURIComponent(a),"popupURL="+encodeURIComponent(o.forceLoginUrl)+encodeURIComponent(encodeURIComponent(o.accessTokenUrlBase)),"width="+r.w,"height="+r.h,"top="+r.top,"left="+r.left].join("&"),Shr.Event.addEventListener(window,"message",l=function(e){var t,r=document.getElementById(c);e.source==(r&&r.contentWindow)&&((t=e.data&&window.JSON.parse(e.data))&&t.access_token?(o._setAccessToken(t.access_token),this.title=this._setTitle()):i.Source.alert("${signinErr}".localize(this)),Shr.Event.removeEventListener(window,"message",l,!1),i.refresh(this))}.bind(this),!1),h.src=n)}.bind(this);return e?(Shr.L.forEach(this.albums,function(e){e.info=o._setConnectedInfo()}),!0):(this.pending=i._formatAuthConnect(this._navigateToInstagramLoginPage.bind(this),t).localize(i._getDataSource(this.id)),!1)},_popupDimensions:function(){var e=Shr.Dom.getPageBounds(Shr.Dom.getChildByClass(document,s._dialog)),t=400,r=310,n=null!=window.screenLeft?window.screenLeft:window.screen.left,o=null!=window.screenTop?window.screenTop:window.screen.top,i=window.screenTop+e.y+e.height/2-r/2,a=window.screenLeft+e.x+e.width/2-t/2;return Shr.B.isIE?(t+=50,r+=50):(a=window.screen.width/2-t/2+n,i=window.screen.height/2-r/2+o),{w:t,h:r,top:i,left:a}},_navigateToInstagramLoginPage:function(e){Shr.B.isIE||function(){var e,t,r,n=this._popupDimensions();Shr.Event.addEventListener(window,"message",e=function(r){var n;r.source==t&&((n=r.data&&window.JSON.parse(r.data))&&n.access_token?(o._setAccessToken(n.access_token),this.title=this._setTitle()):i.Source.alert("${signinErr}".localize(this)),Shr.Event.removeEventListener(window,"message",e,!1),this.albums=o._resetAlbums(),i.refresh(this),t.close())}.bind(this),!1),r=o.forceLoginUrl+encodeURIComponent(o.accessTokenUrlBase)+encodeURIComponent(window.location.origin),t=window.openPopup(r,{target:"Instagram Login",width:n.w,height:n.h,top:n.top,left:n.left})}.bind(this)()},_getThumbnailUrl:function(e,t,r){var n;return t=t||3600,r=r||t,Shr.L.forEach(e.images,function(e){var o,i=e.width*e.height;n||(n=e),o=n.width*n.height,e.width>=t&&e.height>=r?i<o&&(n=e):o<i&&(n=e)}),n&&n.url},_getContents:function(e){e._pendingRequest||(e._pendingRequest=!0,i._ScriptManager.getJsonP(e._next,{noPageCache:!0,noBrowserCache:!0,onError:function(t){i.Error.log(e,e._next,{status:t&&t.response||"199"},"${error.text}".localize(i,["${images}".localize(i._getDataSource("instagram"))])),e._pendingRequest=!1,i.refresh(e)},cb:function(t){var r=0==e.items.length;if(e._pendingRequest=!1,t&&t.data)Shr.L.forEach(t.data,function(t){var n=t.caption&&t.caption.text?t.caption.text:"",s=new o.Item({title:n.substr(0,255),images:t.images,id:t.id,date:1e3*(t.created_time||0),width:(t.images.standard_resolution||{}).width,height:(t.images.standard_resolution||{}).height,created_time:t.created_time,likes:t.likes&&t.likes.count||0,comments:t.comments&&t.comments.count||0,ownerId:t.user&&t.user.id||0,data:t});"image"==t.type&&(s.location=o._getThumbnailUrl(t,Math.MAX_VALUE),e.items.push(s),r||i._folder!=e||i.Grid.add([s],e,e.items.length-1,!0))}),e._next=(t.pagination&&t.pagination.next_url||"").match(/([?&])(callback\=.*?)(&|$)/),e._next=(t.pagination&&t.pagination.next_url||"").replace(/[?&]callback\=.*?[&$]/,e._next?e._next[1]+e._next[3]:""),e._next=e._next.replace(/\?\&/,"?"),e._next=e._next.replace(/\&\&/,"&"),e._next&&(e._next+="&callback="),r&&i.refresh(e),i._folder==e&&e._next?window.setTimeout(function(){o._getContents(e)},50):e._next||(e.count=e.items.length,delete e.noCount,Shr.ClassToggle.toggle(Shr.Dom.getChildByClass(i._dlgId,s._folderContent),s._busy,!1));else{var n=t.meta.error_type;i.Error.log(e,e._next,{status:t&&t.meta&&t.meta.code||"199"},"${error.text}".localize(i,["${images}".localize(i._getDataSource("instagram"))])),"OAuthAccessTokenException"===n?o.disconnect():i.refresh(e)}},timeout:o.timeout,onTimeout:function(){i.Error.log(e,e._next,{status:408},"${error.text}".localize(i,["${images}".localize(i._getDataSource("instagram"))])),e._pendingRequest=!1,i.refresh(e)}}))},_handleResponseError:function(e,t){e.error&&"OAuthException"==e.error.type||e&&!e.error&&e.data||i.Source.alert("${resErr}".localize(this))},Album:Object.extend(function(e,t){i.Album.call(this,e,t)},{prototype:Object.extend({},i.Album.prototype,{noCount:!0,noSelectAll:!0,getContents:function(){var e=o._getAccessToken();return this.contentClassName=this._next?s._busy:"",!!(e&&this.items&&this._complete)||(this.items&&!this._next||(this.items=this.items||[],this._next=this.query.substitute({accessToken:e,limit:o.limit}),o._getContents(this)),this.items.length||!this._next)}})}),Item:Object.extend(function(e){i.Item.call(this,e)},{prototype:Object.extend({},i.Item.prototype,{getThumbnailUrl:function(e,t,r){return i.Item.returnThumbnailUrl(o._getThumbnailUrl(this,e,t),r)}})})}),o)},function(e,t,r){var n=Shr.Dialogs.UniversalPicker;r(0)("shrUP","trUPP"),n._sources.flickr=new n.Source("flickr",{uses:"Shr.flickrDS",isSocialSite:!0,hide:!0,title:"${title}",className:"shrUPFL",init:function(e){this.title=n._sources.flickr.title.localize(this)},L10N:{title:"Flickr"},renderStyle:function(e){e([".shrUPWide .shrUPFC > LI.shrUPTile.shrUPFL {background-position: 0 -1600px;}",""].join("\n"))},requiresPopup:!Shr.B.isIE&&{url:[window.location.protocol,"",Shr.AS.www,"upp","ds","connecting.html#${flickr.connecting}"].join("/"),target:"uppFlickr",width:875,height:875}})},function(e,t){var r=Shr.Dialogs.UniversalPicker;r.defaultSources=Object.toArray(r._sources,0,function(e,t){return t})},function(e,t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n=Shr.Dialogs.UniversalPicker;n.Sink=Object.extend(function(e){Object.extend(this,e)},{prototype:{init:function(e){},onItemSelected:function(e,t,r){return!1},onItemDeselected:function(e){return!0},start:function(e){},pause:function(){},resume:function(){},cancel:function(){},_cancelItem:function(e){e.state=n.Sink.state.cancel,n._setUploadImportErrorTooltip(e&&e._item),Shr.L.tryToCall(e._update),e._xhr&&e._xhr.abort()},cancelItem:function(e){this._cancelItem(e)},_canSelect:function(e){var t=!1;return(e.source.dataSourceType==n.Source.DataSourceType.facebook||e.source.dataSourceType==n.Source.DataSourceType.instagram||e.source.dataSourceType==n.Source.DataSourceType.flickr||e.source.dataSourceType==n.Source.DataSourceType.google||e.source.dataSourceType==n.Source.DataSourceType.sites||e.source.dataSourceType==n.Source.DataSourceType.sfly&&!e.mPath)&&(t=!0),t}},state:{init:0,done:100,wait:200,error:300,cancel:400,xfer:999},destinationFolderName:function(){return n.context&&n.context.destination&&n.context.destination.folderName||n._defaultFolderName()},destinationAlbumName:function(){return n.context&&n.context.destination&&n.context.destination.albumName||n._defaultAlbumName()},destinationAlbumId:function(){return n.context&&n.context.destination&&n.context.destination.albumId},_uniupHeaders:function(e,t,o){var i,s,a=e._xid,l={"SFLY-Application-Name":"UPP","SFLY-TransactionId":a,"X-SFLY-TransactionId":a,"X-OPENFLY-Authorization":o,"SFLY-Product-Category":n.context.category||0,"SFLY-Browser":Shr.B.isIE?"IE":Shr.B.isChrome?"CHROME":Shr.B.isSafari?"SAFARI":Shr.B.isGecko?"FIREFOX":"OTHER","SFLY-Experience-Type":(s=n._logsmithUPPVer[0],"WEBSITE-"+("1"==s?"PHONE":"2"==s?"TABLET":"COMPUTER"))};return t||(l["SFLY-Upload-Source"]="UPLOAD"),Shr.U.id&&(l["SFLY-User-Type"]=Shr.U.migrated?"SFLY":"LB"),e.item&&null!=r(e.item.batchIndex)&&(i=n._getSelectionGuid(n._selections[e.item.batchIndex]),l["SFLY-UPLOAD-SESSIONID"]=i),l}})},function(e,t){var r;Shr.Dialogs.UniversalPicker._defaultSinks.unshift(new(r=Shr.Dialogs.UniversalPicker).Sink({id:"videoUpload",onItemSelected:function(e){var t=!1;return e.location&&e.location.type&&e.location.type.match(/^video\/.*/)&&(t=!0,e.state=r.Sink.state.wait,this._queue.push(e),this._uppExt||(this._uppExt=e.source.getUppExt())),t},onItemDeselected:function(e){var t=this._queue.indexOf(e);-1!=t&&this._queue.splice(t,1)},start:function(){var e="upload.sessions";this._queue.length&&Shr.U.getIdToken().then(function(t){this._active=this._queue,this._queue=[],this._myPhotos=Shr.ThisLifeDS,this._myPhotos.api(e,[t,{channel:"THISLIFE",files:this._active.map(function(e){return{name:e.location.name,size:e.location.size,seedId:Shr.U.id,type:"BLOB",group:"VIDEO_SOURCE"}})}],function(t){var n=t.responseObj&&t.responseObj.result||{success:!1};200<=t.status&&t.status<300&&n.success?((n.payload&&n.payload.links||[]).forEach(function(e,t){this._active[t].data=e}.bind(this)),this._uploadVideos()):(this._result=n,this._xhr=t,this._active.forEach(function(n){n.state=r.Sink.state.error,t.status<200||300<t.status?(n._item._selItem._status=this._xhr.status,n._item._selItem._errorCode=this._xhr.statusText):(n._item._selItem._status=this._result.message,n._item._selItem._errorCode=-1),n._item._selItem._api=e,this._dispatchItemUpdateEvent(n)}.bind(this)),r.Error.log(void 0,this._myPhotos.apiUrl+e,t))}.bind(this))}.bind(this)).catch(function(e){window.trUPP.Timing.recordSessionEvents({event:"getIdToken",err:e,session_method:"videoUpload start"})})},cancel:function(){this._active.forEach(function(e){this.cancelItem(this._active)}.bind(this)),this._active=[]},cancelItem:function(e){(e=Array.isArray(e)?e:[e]).forEach(function(e){Shr.Array.remove(this._active,e),e.state=r.Sink.state.cancel,this._dispatchItemUpdateEvent(e)}.bind(this))},_queue:[],_myPhotos:void 0,_uploadVideos:function(){var e=this._active.shift(),t={};e&&Shr.U.getIdToken().then(function(n){Object.extend(t,{url:e.data.url,accept:"application/json",method:"POST",contentType:"multipart/form-data",args:new window.FormData,onprogress:this._onprogress.bind(this,e)}),t.args.append("Filename",e.location.name),t.args.append("policy",e.data.policy),t.args.append("signature",e.data.signature),t.args.append("AWSAccessKeyId",e.data.accessKey),t.args.append("key",e.data.key),t.args.append("acl",e.data.acl),t.args.append("success_action_status",201),t.args.append("file",e.location),e.state=r.Sink.state.xfer,this._dispatchItemUpdateEvent(e),r.API.SflyAjax.sendAjaxRequest(t,function(t){var o="saveVideo";if(201==t.status){t.responseXML;var i="";r.Sink.destinationAlbumId&&r.Sink.destinationAlbumId()&&(i=r.Sink.destinationAlbumId()),this._myPhotos.api(o,[n,{moment_date:e.location.lastModified/1e3,moment_type:"video",metadata_date:e.location.lastModified/1e3,uid:e.data.uid,source:"UPP",life_uid:this._myPhotos.life_uid,albumId:i},{key:e.data.key,name:e.location.name,size:e.location.size}],function(t){var n=t.responseObj&&t.responseObj.result||{success:!1};200<=t.status&&t.status<300&&n.success?(e.id=n.payload.moment_uid,e.mPath="Video:"+n.payload.moment_uid,e.state=r.Sink.state.done,this._dispatchItemUpdateEvent(e)):(e.mPath="Video:"+e.location.name,e.state=r.Sink.state.error,t.status<200||300<t.status?(e._item._selItem._status=t.status,e._item._selItem._errorCode=t.statusText):(e._item._selItem._status=n.message,e._item._selItem._errorCode=-1),e._item._selItem._api=o,this._dispatchItemUpdateEvent(e),r.Error.log(void 0,this._myPhotos.apiUrl+o,t))}.bind(this),{"SFLY-Application-Name":"UPP","SFLY-Application-Version":2,"SFLY-TransactionId":e.data.X_SFLY_TransactionId})}else e.state=r.Sink.state.error,e._item._selItem._status=t.status,e._item._selItem._errorCode=t.statusText,e._item._selItem._api="aws",this._dispatchItemUpdateEvent(e),r.Error.log(void 0,this._myPhotos.apiUrl+o,t);window.setTimeout(this._uploadVideos.bind(this),100)}.bind(this))}.bind(this)).catch(function(e){window.trUPP.Timing.recordSessionEvents({event:"getIdToken",err:e,session_method:"videoUpload _uploadVideos"})})},_onprogress:function(e,t){e.state!=r.Sink.state.error&&(e.state=r.Sink.state.xfer,e.progress=t.lengthComputable?(t.loaded||t.position)/(t.total||t.totalSize):NaN,this._dispatchItemUpdateEvent(e))},_dispatchItemUpdateEvent:function(e){this._uppExt&&this._uppExt.dispatchEvent(r.EventType.itemUpdate,e,e.batchIndex)}}))},function(e,t){var r=Shr.Dialogs.UniversalPicker,n=new r.Sink({id:"source",init:function(e){this._items=[]},onItemSelected:function(e,t,r){var n=!1;return e.source.isDataSink&&(n=e.source.onItemSelected(e,t))&&this._items.push(e),n},onItemDeselected:function(e){var t=e.source.onItemDeselected(e);return t&&Shr.Array.remove(this._items,e),t},start:function(e){this._applyToAllSources("start",e)},cancel:function(){this._applyToAllSources("cancel")},pause:function(){this._applyToAllSources("pause")},resume:function(){this._applyToAllSources("resume")},_applyToAllSources:function(e){var t=[];Shr.L.forEach(this._items,function(r,n){-1==Shr.Array.indexOf(t,n.source)&&n.source[e]&&(t.push(n.source),Shr.L.tryToApply(n.source[e].bind(n.source),r))}.bind(this,Array.prototype.slice.call(arguments,1)))}});r._defaultSinks.push(n)},function(e,t){var r=Shr.Dialogs.UniversalPicker,n=new r.Sink({id:"sfly",init:function(e){this._queue=[]},onItemSelected:function(e,t,n){var o=!1;return e.source&&e.source.dataSourceType==r.Source.DataSourceType.sfly&&e.mPath?o=!0:e.source&&e.source.dataSourceType==r.Source.DataSourceType.sfly&&r.superfly&&Shr.U.migrated&&e.location&&e.location.startsWith("nxgen:///")&&e.location.split("/")[3]==Shr.U.id&&(o=!0,e.mPath="Image:"+e.id),o&&this._queue.push(e),o},start:function(){this._queue.forEach(function(e){e.state=r.Sink.state.done,Shr.L.tryToCall(e._update)}),this._queue=[]}});r._defaultSinks.push(n)},function(e,t){var r=Shr.Dialogs.UniversalPicker,n=new r.Sink({id:"upload",init:function(e){this._queue=[],this._pending=[],void(this._nThreads=0)===this.maxThreads&&(this.maxThreads=this._maxThreads)},reinit:function(e){this._pending=[]},onItemSelected:function(e,t,n){var o,i=!1;return e.source.dataSourceType==r.Source.DataSourceType.upload&&(i=!0,"File"in window&&e.location instanceof window.File||e.location.flashData||(this.maxThreads=1),(e._item._selItem=e).state!=r.Sink.state.xfer&&e.state!=r.Sink.state.done&&(o=e.batchIndex<r._selections.length,this._queueUpload(e,t,o))),i},onItemDeselected:function(e){Shr.Array.removeByProperty(this._queue,"item",e),Shr.Array.removeByProperty(this._pending,"item",e)},start:function(e){this._queue=this._queue.concat(this._pending),this._pending=[],this._start()},cancel:function(){this._queue.forEach(function(e){var t=e.item;t.state=r.Sink.state.cancel,t.retry=this._retry.bind(this,e),r._setUploadImportErrorTooltip(e&&e.item&&e.item._item),Shr.L.tryToCall(t._update)}.bind(this)),this._queue=[]},cancelItem:function(e){this.onItemDeselected(e),this._cancelItem(e)},_queue:[],_pending:[],_nThreads:0,_maxThreads:2,_queueUpload:function(e,t,r,n){var o={item:e,update:t};e.progress=0,r?(n?this._queue.unshift(o):this._queue.push(o),this._start()):this._pending.push(o)},_setTimeout:function(e,t){e._timeout=window.setTimeout(this._onTimeout.bind(this,e,t),r._getTimeoutInterval(t))},_clearTimeout:function(e){window.clearTimeout(e._timeout),delete e._timeout},_onTimeout:function(e,t){e.item.timedOut=r._getTimeoutStatus(t),e._xhr.abort()},_start:function(){for(var e=Math.min(this._queue.length,this.maxThreads-this._nThreads);e;this._nThreads++,e--)window.setTimeout(this._doUpload.bind(this),100)},_html4Frame:void 0,_doUpload:function(){Shr.U.getIdToken().then(function(e){var t,n,o,i=Shr.URL,s=this._queue.shift(),a=s&&s.item&&s.item.source&&s.item.source.requiresSignin,l=Date.now(),c=s&&"File"in window&&s.item.location instanceof window.File,d=(!c&&s&&s.item.location.flashData,!r.isDisabled("uniup")),h=!Shr.U.id||!("syncUpload"in r.context)||r.context.syncUpload,u=d&&Shr.AS.uniup||Shr.AS.up,p=d&&Shr.AS.uniup?"https:/":"/",m=r.productCreation?"pc":"npc",g=h?["upload",m,"v1","user",Shr.U.id].join("/"):["services","shutterfly-upload",Shr.U.id,"images"].join("/"),f=!Shr.U.migrated||void 0===r.context.toTimelineOnly||!!r.context.toTimelineOnly,_={url:[p,u,g].join("/"),urlArgs:{uploadSource:"sfly"},onprogress:this._onProgress.bind(this,s,l)},S={IsAnonymousUpload:"true",IncludeIID:"true",PartnerID:"SFLY",PartnerSubID:"WEB"},b=!1;!Shr.U.id&&a||!Shr.U.id&&!a&&Shr.U.status===Shr.U.Status.signedIn?window.setTimeout(function(){this._onUploadComplete.call(this,s,l,_.url,{status:401})}.bind(this),500):(f||(r.Sink.destinationAlbumId()?_.urlArgs=Object.extend(_.urlArgs,{albumId:r.Sink.destinationAlbumId()}):_.urlArgs=Object.extend(_.urlArgs,{folderTitle:r.Sink.destinationFolderName(),albumName:r.Sink.destinationAlbumName()})),Shr.U.id||(_=Object.extend(_,{url:[p,u,["upload","v1","anon"].join("/")].join("/"),urlArgs:{}})),r.convertToJPEG&&(_.urlArgs.convertToJpg=!0),s?(c&&(s._xid=[r._transactionId(),r._uploadCount].join("-"),s.item._xid=s._xid,r._uploadCount++,Shr.B.isChrome?b=!s.item.location.size:Shr.B.isGecko&&function(){var e=new window.FileReader,t=s.item.location,r=(t.slice||t.mozSlice||t.webkitSlice||function(){}).call(t,0,1);try{Object.extend(e,{onloadend:function(e){}}).readAsArrayBuffer(r)}catch(e){b=!0}}()),c&&b?this._onUploadComplete.call(this,s,l,_.url,{status:-300}):c?(Object.extend(_,{accept:"application/json",method:"POST",contentType:"multipart/form-data",args:new window.FormData,headers:{}}),h&&(s._sync=!0,Shr.U.id&&(_.headers["X-OPENFLY-Authorization"]=e)),_.args.append(h?"file":"Image.Data",s.item.location),Object.extend(_.headers,r.Sink._uniupHeaders(s,!1,e)),o=r._SflyAjax.sendAjaxRequest(_,this._onUploadComplete.bind(this,s,l,_.url),"upload"),s.item._xhr=o,s.item.state=r.Sink.state.xfer,s.item.progress=0,Shr.L.tryToCall(s.item._update),o&&r.detectUploadTimeouts&&(s._xhr=o,this._setTimeout(s,"uploadInit"))):(this._html4Frame||(this._html4Frame=Shr.Dom.create("iframe",document.body,{name:Shr.Dom.getUniqueId(),src:"about:blank",style:"display: none;"})),s.item.location.name="Image.Data",Shr.U.id&&(delete S.IsAnonymousUpload,r.Sink.destinationAlbumId()?S["image.AlbumId"]=r.Sink.destinationAlbumId():(S["Image.FolderName"]=r.Sink.destinationFolderName(),S["Image.AlbumName"]=r.Sink.destinationAlbumName()),S.AuthenticationID=e),S.redirect=window.location.protocol+i("html/html4UploadResult.html"),Shr.Event.addEventListener(window,"message",n=function(e,o){var i;S.redirect.startsWith(o.origin)&&(1==(i=window.JSON.parse(o.data)).Success?(e.item.state=r.Sink.state.done,e.item.progress=1,Shr.U.id?(e.item.type=r.Item.type.sfly,e.item.id=decodeURIComponent(i.mspPath0)):(e.item.type=r.Item.type.anonymous,e.item.id=i.iid0),delete e.item.location):(e.item.state=r.Sink.state.error,e.item.retry=this._retry.bind(this,e),r.Error.log(null,t,{status:500+i.ErrCode})),Shr.Event.removeEventListener(window,"message",n,!1),Shr.L.tryToCall(e.update),window.setTimeout(this._doUpload.bind(this),100))}.bind(this,s),!1),s.item.start=Date.now(),t=["/",u,"UploadImage"].join("/"),Shr.N.submitForm("POST",t,S,{target:this._html4Frame.name},[s.item.location]),s.item.state=r.Sink.state.xfer,s.item.progress=0,Shr.L.tryToCall(s.item._update))):this._nThreads--)}.bind(this)).catch(function(e){window.trUPP.Timing.recordSessionEvents({event:"getIdToken",err:e,session_method:"upload _doUpload"})})},_onProgress:function(e,t,n){this._clearTimeout(e),e.item.state!=r.Sink.state.error&&(trUPP.UploadTimer.reportUploadData(n.loaded,Date.now()-t),e.item.state=r.Sink.state.xfer,e.item.progress=n.lengthComputable?(n.loaded||n.position)/(n.total||n.totalSize):NaN,r.detectUploadTimeouts&&this._setTimeout(e,1==e.item.progress?"uploadProcessing":"uploadProgress"),Shr.L.tryToCall(e.item._update))},retries:2,_onUploadComplete:function(e,t,n,o){var i,s,a,l,c,d=!1,h=(Date.now(),{});this._clearTimeout(e),h.transactionId=e._xid,200<=o.status&&o.status<300?(Shr.U.id?(i=Object.fromString(o.responseText),e._sync&&(c={numSuccess:1,numFailed:0},(l=i)?Object.extend(c,{albumId:null,mspAlbumPath:null,images:[{imageId:l.mediaId.toString(),locationSpec:l.locationSpec,plainMspImagePath:l.imagePath,mspImagePath:l.encodedImagePath,mspData:l.viewEditStateData,metadataURL:null,imageURL:(l.url||"").replace(/^http:/,""),width:l.width,height:l.height}]}):(c.numSuccess=0,c.numFailed=1,c.errCode=l.errorCode,c.errorDescription=l.errorDescription),i=c,e.item.sync=!0),i.errCode&&(h.errorCode=i.errCode)):e._sync?(i=Object.fromString(o.responseText),e.item.type=r.Item.type.anonymous,e.item.id=i.locationSpec,e.item.width=i.width,e.item.height=i.height,e.item.rotation=i.rotation,e.item.date=i.captureDate||i.uploadDate,e.item.data=i,i={numSuccess:1}):(i=o.responseText).match(/Success=1/)?(e.item.type=r.Item.type.anonymous,e.item.id=i.match(/iid0=(.*?)\</)[1],i={numSuccess:1}):(d=!0,s=i,i={numSucess:0},(a=s.match(/UploadServer=([0-9.]*)/))&&(h.serverIP=a[1]||"0.0.0.0"),(a=s.match(/ErrCode=([0-9]*)/))&&(h.errorCode=a[1]||"0")),i&&i.numSuccess?(e.item.state=r.Sink.state.done,e.item.mPath=Shr.U.id?i.images[0].plainMspImagePath:void 0,Shr.U.id?e.item.data=i.images[0]:e._sync&&(e.item.data=i),e.item.getThumbnailUrl=r.Html5Item.prototype.getThumbnailUrl,delete e.item._item._thumbnail,e.item._item._smallThumbnail&&(r._Html5ItemV2._URL.revokeObjectURL(e.item._item._smallThumbnail.toString()),delete e.item._item._smallThumbnail),e.item._item._bigThumbnail&&(r._Html5ItemV2._URL.revokeObjectURL(e.item._item._bigThumbnail.toString()),delete e.item._item._bigThumbnail),e.item._item._objectURL&&(r._Html5ItemV2._URL.revokeObjectURL(e.item._item._objectURL.toString()),delete e.item._item._objectURL),delete e.item.location):d=!0):400<=o.status&&o.status<600?(d=!0,401!=o.status||r.productCreation||r._refreshSession(),Shr.U.id&&(i=Object.fromString(o.responseText))&&i.errorCode&&(h.errorCode=i.errorCode)):0==o.status&&e.item.timedOut?(d=!0,o={status:e.item.timedOut},e.item.retries=0):0==o.status&&e.item.state==r.Sink.state.cancel?d=!1:-300==o.status?(d=!0,e.item.retries=0):d=!0,e.item.progress=1,d&&(e.item.state=r.Sink.state.error,e.item._status=200<=o.status&&o.status<300?parseFloat(["-200",h.errorCode].join(".")):o.status,e.item._errorCode=h.errorCode||-1,e.item.retry=this._retry.bind(this,e),r.Error.log(null,n,o),"retries"in e.item||(e.item.retries=this.retries),e.item.retries&&(1e3<=h.errorCode&&h.errorCode<2e3||502==o.status||503==o.status?e.item.retries=0:Shr.U.id||4!=h.errorCode&&13!=h.errorCode||(e.item.retries=0))),!e.item.timeTaken&&e.item.startTime&&(e.item.timeTaken=Date.now()-e.item.startTime),d&&e.item.retries?(e.item.retries--,e.item.retry()):(d&&(r._setUploadImportErrorTooltip(e&&e.item&&e.item._item,e.item._status,e.item._errorCode),e&&e.item&&401===e.item._status&&r&&r.context&&r.context.bgActions&&r.context.bgActions.onError&&r.context.bgActions.onError()),Shr.L.tryToCall(e.update)),r._logsmith(r._logsmithUploadMetricName(r._logsmithAPIStatusMetricName(Shr.U.id?"uploadSfly":e._sync?"uploadAnon":"uploadImage",o.status,200<=o.status&&o.status<300&&d,h.errorCode)),e.item.timeTaken||0,null,h),window.setTimeout(this._doUpload.bind(this),100)},_retry:function(e){e.item.state=r.Sink.state.wait,this._queueUpload(e.item,e.update,!0,!0)}});r._defaultSinks.push(n)},function(e,t){var r=Shr.Dialogs.UniversalPicker,n=new r.Sink({id:"mediaFetch",init:function(e){this._queue=[],this._threads=[]},onItemSelected:function(e,t,r){var n=this._canSelect(e);return n&&this._queueItem(e,t),n},onItemDeselected:function(e){e.selected=!1,Shr.Array.removeByProperty(this._queue,"item",e)},start:function(e){var t;this._queue.length&&this._threads.length<this.maxThreads&&((t={_queue:this._queue,_retryQueue:[],_retrying:!1})._handle=window.setTimeout(this._start.bind(this,t),100),this._threads.push(t),this._queue=[],delete this._retryHandle)},_queue:[],_queueItem:function(e,t){this._queue.push({item:e,update:t})},_mediaFetchRequest:Object.extend(function(e,t,n){this._sink=e,this._thread=t,this._request=new this._ajaxRequest(t,n),this._igPics=[],Shr.L.forEach(this._thread._queue,function(e){var t,n,o=e.item,i=o.source,s=i.dataSourceType==r.Source.DataSourceType.instagram;t=this._findRequestSource(i),o.selected&&(t||(t=this._addRequestSource(new this._requestDataSource(i))),o._xid=[r._mediaFetchTransactionId(),r._mediaFetchCount].join("-"),r._mediaFetchCount++,n=this._addRequestImage(t,o),s&&this._igPics.push({_item:o,_mfImage:n}),o.state=r.Sink.state.xfer,o.progress=NaN,Shr.L.tryToCall(e.update))}.bind(this))},{prototype:{_apiCountKey:"mediaFetch",_ajaxRequest:function(e,t){this.url=["https:","",Shr.AS.api,"media-fetch",Shr.U.id,"request"].join("/"),this.urlArgs={access_token:t},this.contentType="application/json",this.args={interactive:e._queue.length<=250,toHiddenFolder:!1,dataSources:[]},this.args.toFolderName=r.Sink.destinationFolderName()},_requestDataSource:function(e){this.dataSourceType=e.dataSourceType,this.forceReFetch=void 0!==r.context.forceReFetch&&r.context.forceReFetch,this.toAlbumName=r.Sink.destinationAlbumName(),this.images=[]},_findRequestSource:function(e){return Shr.Array.findByProperty(this._request.args.dataSources,"dataSourceType",e.dataSourceType)},_addRequestSource:function(e){return this._request.args.dataSources.push(e),e},_addRequestImage:function(e,t){var n=this._request.args.toHiddenFolder,o=e.dataSourceType==r.Source.DataSourceType.instagram,i=Object.extend({id:t._xid,title:n?"":t.title||"",description:n?"":t.description||"",hidden:!1,location:t.location},{followRedirect:!!o||void 0});return e.images.push(i),i},_send:function(){this._igPics.length?this._prepareInstagramPics():this._sendRequest()},_getRequestImageLocation:function(e){return e.location},_updateRequestImageLocation:function(e,t){e.location=t},_prepareInstagramPics:function(){var e=this._igPics&&this._igPics[0],t=window.trUPP.Promise,n=function(e){return e&&e._item.data.link+"media/?size=l"},o=function(e){return new t(function(t,r){try{var n,o,i;if((o=(n=this._getRequestImageLocation(e._mfImage)).match(/\/s(\d*)x\d*\//))&&parseInt(o[1])<1080){i=n.replace(/\/s\d*x\d*\//,"/s1080x1080/");var s=new Image;s.onerror=function(r){this._updateRequestImageLocation(e._mfImage,n),t()}.bind(this),s.onload=function(r){this._updateRequestImageLocation(e._mfImage,i),t()}.bind(this),s.src=i}else t()}catch(r){t()}}.bind(this))}.bind(this),i=n(e);if(this._thread._retrying){var s=[];(this._igPics||[]).forEach(function(e){s.push(o(e))}.bind(this)),t.all(s).then(function(){this._sendRequest()}.bind(this))}else e?r._SflyAjax.sendAjaxRequest({url:["https:","",Shr.AS.www,"upp","ds","instagram","testAccount.jsp"].join("/"),method:"POST",args:{media:i,access_token:Shr.U.oauthToken}},function(e){var r=!1,i=[];200<=e.status&&e.status<300&&(r=!0),Shr.L.forEach(this._igPics,function(e){r?this._updateRequestImageLocation(e._mfImage,n(e._item)):i.push(o(e))}.bind(this)),t.all(i).then(function(){this._sendRequest()}.bind(this))}.bind(this)):this._sendRequest()},_sendRequest:function(){this._request.args=window.JSON.stringify(this._request.args),this._setTimeout(),this._thread._started=Date.now(),this._thread._xhr=r._SflyAjax.sendAjaxRequest(this._request,function(e){this._thread._requestIds=[],this._clearTimeout(),r._logsmith(r._logsmithMetricName(r._logsmithAPIStatusMetricName(this._metricName("request"),e.status)),Date.now()-this._thread._started),200<=e.status&&e.status<300?(Shr.L.forEach(Object.fromString(e.responseText),function(e){this._thread._requestIds.push(e.split("/").pop())}.bind(this)),this._thread._n202s=Number.MAX_VALUE,this._thread._lastProgress=Date.now(),this._pollStatus()):(0==e.status&&this._thread._timedOut&&(e={status:this._thread._timedOut}),r.Error.log(null,this._request.url,e),Shr.L.forEach(this._thread._queue,function(t){t.item.state=r.Sink.state.error,r._setUploadImportErrorTooltip(t&&t.item&&t.item._item,e.status),t.item.retry=this._sink._retry.bind(this._sink,t),Shr.L.tryToCall(t.update)}.bind(this)),this._sink._killThread(this._thread))}.bind(this),this._apiCountKey)},_setTimeout:function(){r.detectUploadTimeouts&&(this._thread._timeout=window.setTimeout(function(){this._thread._timedOut=r._getTimeoutStatus("mediaFetchProcessing"),this._thread._xhr&&this._thread._xhr.abort()}.bind(this),r._getTimeoutInterval("mediaFetchProcessing")))},_clearTimeout:function(){r.detectUploadTimeouts&&(window.clearTimeout(this._thread._timeout),delete this._thread._timeout)},_defaultPollingInterval:1e3,_pollStatus:function(){Shr.U.getIdToken().then(function(e){this._thread._pollingInterval=void 0!==r.context.pollingInterval?r.context.pollingInterval:this._defaultPollingInterval,this._thread._handle=window.setTimeout(this._queryStatus.bind(this,e),this._thread._pollingInterval)}.bind(this)).catch(function(e){window.trUPP.Timing.recordSessionEvents({event:"getIdToken",err:e,session_method:"mediaFetch _pollStatus"})})},_getStatusRequestURL:function(){return["https:","",Shr.AS.api,"media-fetch",Shr.U.id,"request"].join("/")},_getStatusRequestURLArgs:function(e){return{access_token:e,requestIds:this._thread._requestIds.join(","),requestView:"detail",fileLocationView:"mspPath"}},_getStatusRequestHeaders:function(){return{}},_getStatusRequestStatuses:function(e){return e.status},_getStatusRequestDataSourceStatuses:function(e){return e.dataSources},_getStatusRequestImageStatuses:function(e){return e.images},_findItemForStatusRequestImageStatus:function(e,t){var r;return Shr.L.forEach(this._thread._queue,function(e){return e.item._xid==t.id&&(r=e),!r}),r},_getStatusRequestImageLocation:function(e){return e.location},_getStatusRequestDataSourceType:function(e){return e.dataSourceType},_statusIsPending:function(e){return 202==e.status},_getStatusRequestRequestID:function(e){return e.requestId},_queryStatus:function(e){var t=this._thread,n=this._getStatusRequestURL(),o={url:n,urlArgs:this._getStatusRequestURLArgs(e),accept:"application/json",method:"GET",headers:this._getStatusRequestHeaders(e)};this._setTimeout(),t._started=Date.now(),t._xhr=r._SflyAjax.sendAjaxRequest(o,function(e){r._logsmith(r._logsmithMetricName(r._logsmithAPIStatusMetricName(this._metricName("detail"),e.status)),Date.now()-t._started);var o,i=0,s=!1,a=function(e){s=!0,r.Error.log(null,n+"/detail",{status:e}),r._logsmith(r._logsmithMetricName(this._metricName("timeout")),e),Shr.L.forEach(t._queue,function(e){e.item.state==r.Sink.state.xfer&&(e.item.state=r.Sink.state.error,Shr.L.tryToCall(e.update))}.bind(this)),this._sink._killThread(this._thread)}.bind(this);this._clearTimeout(),200<=e.status&&e.status<300?(o=Object.fromString(e.responseText),Shr.L.forEach(this._getStatusRequestStatuses(o),function(e){var o=!0;s=e.status&&(e.status<200||300<=e.status),Shr.L.forEach(this._getStatusRequestDataSourceStatuses(e),function(t){Shr.L.forEach(this._getStatusRequestImageStatuses(t),function(a){var l,c=!0;(l=this._findItemForStatusRequestImageStatus(t,a))&&(200==a.statusCode&&this._getStatusRequestImageLocation(a)?(c=l.item.state!=r.Sink.state.done,!l.item.data&&(l.item.data={}),Object.extend(l.item.data,a),l.item.state=r.Sink.state.done,l.item.mPath=this._getStatusRequestImageLocation(a)):s||202!=a.statusCode?409==a.statusCode?(c=!0,a.imagePath="Image:"+a.mediaId.toString(),!l.item.data&&(l.item.data={}),Object.extend(l.item.data,a),l.item.state=r.Sink.state.done,l.item.mPath=this._getStatusRequestImageLocation(a)):l.item.state==r.Sink.state.xfer&&(l.item.state=r.Sink.state.error,r.Error.log(null,n+"/detail/image",{status:s?e.status:a.statusCode}),r._logsmith(r._logsmithMetricName(r._logsmithAPIStatusMetricName(this._metricName(["image",t.sourceType].join("_")),a.statusCode)),Date.now()-this._thread._started),this._thread._retrying||t.sourceType!=r.Source.DataSourceType.instagram||404!=a.statusCode?r._setUploadImportErrorTooltip(l&&l.item&&l.item._item,a.statusCode,a.errorCode):(this._thread._retryQueue.push(l),l.item.state=r.Sink.state.wait)):(i++,o=c=!1),c&&Shr.L.tryToCall(l.update))}.bind(this))}.bind(this)),this._statusIsPending(e)&&!o||Shr.Array.remove(t._requestIds,this._getStatusRequestRequestID(e)),r.detectUploadTimeouts&&(1==r._getTimeoutInterval("mediaFetchProgress")||Date.now()-t._lastProgress>r._getTimeoutInterval("mediaFetchProgress"))&&(1==r._getTimeoutInterval("mediaFetchProgress")||i>=t._n202s)&&a(r._getTimeoutStatus("mediaFetchProgress")),i<t._n202s&&(t._n202s=i,t._lastProgress=Date.now())}.bind(this)),t._requestIds.length&&!s?this._pollStatus():this._thread._retryQueue.length?(this._thread._retrying=!0,this._thread._queue=this._thread._retryQueue,this._thread._retryQueue=[],this._thread._handle=window.setTimeout(this._sink._start.bind(this._sink,this._thread),0)):this._sink._killThread(this._thread)):a(e.status)}.bind(this),this._apiCountKey)},_metricName:function(e){return["media_fetch",e].join("_")},end:null}}),_threads:[],maxThreads:Number.MAX_VALUE,_start:function(e){Shr.U.getIdToken().then(function(t){new this._mediaFetchRequest(this,e,t)._send()}.bind(this)).catch(function(e){window.trUPP.Timing.recordSessionEvents({event:"getIdToken",err:e,session_method:"mediaFetch _start"})})},_retryHandle:void 0,_retry:function(e){e.item.state=r.Sink.state.wait,this._queueItem(e.item,e.update),this._retryHandle||(this._retryHandle=window.setTimeout(this.start.bind(this,function(){}),100))},_killThread:function(e){if(e._handle)try{window.clearTimeout(e._handle)}catch(e){}delete e._handle,Shr.Array.remove(this._threads,e)}});r._defaultSinks.push(n),r._uniup_mediaFetch={_canSelect:function(e){var t=Shr.Array.findByProperty(r._defaultSinks,"id","mediaFetch")._canSelect(e);return t&&e.location&&e.location.startsWith("nxgen:")&&(t=!1),t},_mediaFetchRequest:Object.extend(function(e,t,n){var o=Shr.Array.findByProperty(r._defaultSinks,"id","mediaFetch");t._xid=[r._mediaFetchTransactionId(),r._mediaFetchCount].join("-"),r._mediaFetchCount++,o._mediaFetchRequest.apply(this,arguments)},{prototype:Object.extend({},Shr.Array.findByProperty(r._defaultSinks,"id","mediaFetch")._mediaFetchRequest.prototype,{_ajaxRequest:function(e,t){var n=!Shr.U.migrated||void 0===r.context.toTimelineOnly||!!r.context.toTimelineOnly,o=r.productCreation?"pc":"npc";this.url=["https:","",Shr.AS.uniup,"media-fetch","v1",o,"user",Shr.U.id,"images"].join("/"),this.contentType="application/json",this.args={hidden:!1,source:[],verifyDupe:!0},n||(r.Sink.destinationAlbumId()?this.args.destinationAlbumId=r.Sink.destinationAlbumId():(this.args.destinationFolderName=r.Sink.destinationFolderName(),this.args.destinationAlbumName=r.Sink.destinationAlbumName())),this.headers=Object.extend({},r.Sink._uniupHeaders(e,!0,t))},_findRequestSource:function(e){return e=new this._requestDataSource(e),Shr.Array.findByProperty(this._request.args.source,"sourceType",e.sourceType)},_addRequestSource:function(e){return this._request.args.source.push(e),e},_requestDataSource:function(e){this.sourceType=e.dataSourceType,this.sourceAuth=e.sourceAuth,this.image=[]},_addRequestImage:function(e,t){var n={id:t._xid,sourceId:t.id,name:t.title||"",sourceLocation:t.location};if(t.source.dataSourceType==r.Source.DataSourceType.google){var o=t.source.getUserId();null!=o&&(n.userId=o),t.parentId&&(n.albumId=t.parentId)}return e.image.push(n),n},_getRequestImageLocation:function(e){return e.sourceLocation},_updateRequestImageLocation:function(e,t){e.sourceLocation=t},_getStatusRequestURL:function(){return["https:","",Shr.AS.uniup,"media-fetch","v1","imagerequeststatus",this._thread._requestIds[0],""].join("/")},_getStatusRequestURLArgs:function(){return{fields:"*"}},_getStatusRequestHeaders:function(e){return Object.extend({"Content-Type":"application/json"},r.Sink._uniupHeaders(this._thread,!0,e))},_getStatusRequestStatuses:function(e){return[e]},_getStatusRequestDataSourceStatuses:function(e){return e.sourceStatus},_getStatusRequestImageStatuses:function(e){return e.imageStatus},_getStatusRequestImageLocation:function(e){return e.imagePath},_getStatusRequestDataSourceType:function(e){return e.sourceType},_statusIsPending:function(e){return!0},_getStatusRequestRequestID:function(e){return this._thread._requestIds[0]},_metricName:function(e){return["mediaFetch",e].join("_")},_end:null})})}},function(e,t){var r=Shr.Dialogs.UniversalPicker,n=new r.Sink({id:"bulkCopy",init:function(){this._queue=[]},onItemSelected:function(e,t){var r=this._canSelect(e);return r&&this._queue.push({_mediaId:this._mediaIdForLocation(e.location),_item:e,_update:t}),r},onItemDeselected:function(e){e.selected=!1,Shr.Array.removeByProperty(this._queue,"_item",e)},start:function(){Shr.U.getIdToken().then(function(e){var t={url:["https:/",Shr.AS.media||["media",Shr.AS.domain].join("."),"services","media",Shr.U.id,"copy","bulk"].join("/"),urlArgs:{access_token:e},method:"POST",contentType:"application/json",headers:{},args:[]};this._queue.length&&(this._queue.forEach(function(e){var n=e._item.location.split("/");t.args.push({mediaId:n.pop(),userId:n.pop()}),e._item.state=r.Sink.state.xfer,e._item.progress=NaN,Shr.L.tryToCall(e._update)}),t.args=window.JSON.stringify(t.args),this._startTime=Date.now(),r._SflyAjax.sendAjaxRequest(t,function(e){var t=Date.now()-this._startTime,n=this._queue.length;200<=e.status&&e.status<300?(window.JSON.parse(e.responseText).forEach(function(e){var t,n=Shr.Array.indexOfByProperty(this._queue,"_mediaId",e.mediaId);-1!=n&&((t=this._queue.splice(n,1)[0])._item.state=r.Sink.state.done,t._item.mPath=e.mspPath,Shr.L.tryToCall(t._update))}.bind(this)),r._logsmith(r._logsmithMetricName([this.id,"avgTime"].join(".")),t/n)):(this._queue.forEach(function(t){t._item.state=r.Sink.state.error,r._setUploadImportErrorTooltip(t&&t._item._item,e.status),Shr.L.tryToCall(t._update)}),this._queue=[],r._logsmith(r._logsmithMetricName([this.id,"failed"].join(".")),n,"count")),r._logsmith(r._logsmithMetricName([this.id,"status",e.status||"0"].join(".")),t)}.bind(this)),r._logsmith(r._logsmithMetricName([this.id,"request"].join(".")),this._queue.length,"count"))}.bind(this)).catch(function(e){window.trUPP.Timing.recordSessionEvents({event:"getIdToken",err:e,session_method:"bulkCopy start"})})},cancel:function(){this._queue&&this._queue[0]._item.state==r.Sink.state.xfer||(this._queue.forEach(function(e){e._item.state=r.Sink.state.cancel}),this._queue=[])},_mediaIdForLocation:function(e){return e.split("/").pop()},_canSelect:function(e){var t=r.Sink.prototype._canSelect.call(this,e);return t=!!(t&&e.location&&e.location.startsWith("nxgen:"))},_end:null});r._defaultSinks.push(n)},function(e,t){var r,n,o;Shr.alacarteDS=(n=Shr.Dialogs.UniversalPicker,o=new n.Folder({},{id:"alacarte",title:"${title}",dataSourceType:n.Source.DataSourceType.sfly,L10N:{title:"Shared Albums",sent:{title:"My shared albums",error:"We were unable to get the list of your shared albums."},received:{title:"Friends' shared albums",error:"We were unable to get the list of your friends' shared albums."},_end:null},init:function(e){(r=this).title="${title}".localize(this),this.folders=[new o.Folder("sent"),new o.Folder("received")]},renderStyle:function(e){e(o._formatStyle())},getSortChoices:function(){},Folder:Object.extend(function(e){this.id=e,this.title=("${"+e+".title}").localize(r),n.Folder.call(this,r)},{prototype:Object.extend({},n.Folder.prototype,{folders:[],items:[],getContents:function(){var e=!!this.albums;return e||this._more(0),e},_onOk:function(e,t){if(0==e)for(this.albums=[];this.albums.length<t.count;)this.albums.push(new o.Album(this,{id:this.albums.length+1,title:"&nbsp;",pending:this.albums.length>=Shr.Array.getLength(t.shares)}));Shr.L.forEach(t.shares,function(t,r){var i=this.albums[e+r]=new o.Album(this,t);0!=e&&n.refresh(this,i)}.bind(this)),t.more&&window.setTimeout(this._more.bind(this,e+t.shares.length),0)},_more:function(e){r._api(this,{list:this.id,type:"album",startIndex:e,pageSize:25},this._onOk.bind(this,e),0==e)},_errorMsg:function(){return"${"+this.id+".error}"}})}),Album:Object.extend(function(e,t){n.Album.apply(this,arguments)},{prototype:Object.extend({},n.Album.prototype,{folders:[],albums:[],getContents:function(){var e=!!this.items;return e||r._api(this,{list:"images",id:this.id},function(e){this.items=[],Shr.L.forEach(e.images,function(e){this.items.push(new o.Item(e))}.bind(this))}.bind(this),!0),e},getThumbnailUrl:function(e,t){var r;return this.thumbnail?(r=(this.thumbnail||"").split("/")[4],Shr.Sfly.formatImgSrc({shutterflyId:r},Math.max(e,t))):Shr.ImgSrc.blank2},_errorMsg:function(){return"${imagesError}"}})}),Item:Object.extend(function(e){this.location="share:///"+e.id,n.Item.apply(this,arguments)},{prototype:Object.extend({},n.Item.prototype,{getThumbnailUrl:function(e,t){return Shr.Sfly.formatImgSrc({shutterflyId:this.id},Math.max(e,t))}})}),_apiURL:["https:/",Shr.AS.www,"upp","ds","alacarte.jsp"].join("/"),_api:function(e,t,o,i){Shr.U.getIdToken().then(function(s){var a,l,c=this._apiURL+"?"+(a=t,l=[],Shr.L.forEach(Object.extend({access_token:s,contentType:"application/javascript"},a),function(e,t){l.push(t+"="+encodeURIComponent(e))}),l.push("bypassCache="+Date.now()),l.push("callback="),l.join("&"));n.API.ScriptManager.getJsonP(c,{cb:function(t){200<=t.status&&t.status<300?(Shr.L.tryToCall(o,t),i&&n.refresh(e)):this._onError(e,c,t)},onError:function(){r._onError(e,c,{status:503})},noPageCache:!0})}.bind(this)).catch(function(e){window.trUPP.Timing.recordSessionEvents({event:"getIdToken",err:e,session_method:"alacarte _api"})})},_onError:function(e,t,o){n.Error.log(e,t,o,e._errorMsg().localize(r)),n.refresh(e)},_formatStyle:function(){return""}}))},function(e,t){var r,n,o;Shr.facebookDS=(n={},o=Shr.Dialogs.UniversalPicker,"shrSelected","shrUPNBTitle",Object.extend(n,{dataSourceType:o.Source.DataSourceType.facebook,init:function(e){(r=this).title=n._getTitle(),Object.defineProperty(this,"sourceAuth",{get:function(){return n.sourceAuth}})},getContents:function(){return n.accessToken?this.folders||(this.folders=[new n.UserFolder(n,{id:"me",title:"${myPics}".localize(r),type:"folder",albums:[],folders:[],ready:!1,uName:"Me",_content:"${error.me}"})],this.folders.push(new o.Folder(n,{id:"friends",title:"${friendsPics}".localize(r),type:"folder",folders:[],_content:"${error.friends}",getContents:function(e){e&&e.thumbnailSize;var t=this.getContents;return this.folders=[],n._getContents(this,["me","friends"].join("/"),{fields:"name,first_name,last_name"},function(e){this.folders.push(new n.UserFolder(this,{id:e.id,title:e.name,first_name:e.first_name,last_name:e.last_name,data:e,_size:"large"}))}.bind(this),"${error.friends}",function(){this.folders.length?this.folders=Shr.Array.sortByProperty(this.folders,"first_name asc"):"declined"==(Shr.Array.findByProperty(n._permissions,"permission","user_friends")||{}).status?this.empty=n._formatPermission(this,"${permissions.friends}",function(){this.getContents=t}.bind(this)):delete this.empty}.bind(this)),!1},getSortChoices:function(){var e={};return Shr.L.forEach({"first_name asc":"${sortChoices.fnameAtoZ}","first_name desc":"${sortChoices.fnameZtoA}","last_name asc":"${sortChoices.lnameAtoZ}","last_name desc":"${sortChoices.lnameZtoA}"},function(t,n){e[n]=new String(t.localize(r))}),e}}))):n._connect(this),!!this.folders},L10N:{title:"Facebook",connect:"Continue With Facebook",connectPrompt:"Use photos from Facebook in your project",fbLoadError:"There was an error connecting to Facebook.  This may be because of an issue with Facebook Connect, or, because a browser extension like Ghostery may be blocking access to it.  Please check your browser extensions and try again.",myPics:"My Photos",disconnect:"Change Account",disabledPrompt:"Facebook is not currently available. <p>We are working with Facebook on this issue and appreciate your patience.</p>",friendsPics:"Friends Photos",groupPics:"My Group Photos",likedPics:"Recently Liked by Me",taggedPics:"Photos of ${0}",images:"the photos in this album",stuff:"the list of your Facebook photos and friends",error:{text:"There was an error getting ${0} from Facebook",me:"the list of your albums",friends:"the list of your friends",groups:"the list of your groups",liked:"the list of pictures you&#39;ve liked",photos:"this list of photos",albums:"the list of albums",tagged:"the list of tagged photos"},sortChoices:{titleAtoZ:"Title (A-Z)",titleZtoA:"Title (Z-A)",fullNameAtoZ:"Name (A-Z)",fullNameZtoA:"Name (Z-A)",fnameAtoZ:"First name (A-Z)",fnameZtoA:"First name (Z-A)",lnameAtoZ:"Last name (A-Z)",lnameZtoA:"Last name (Z-A)",createdNewestFirst:"Created date (newest to oldest)",createdOldestFirst:"Created date (oldest to newest)",modifiedNewestFirst:"Modified date (newest to oldest)",modifiedOldestFirst:"Modified date (oldest to newest)",dateTakenNewestFirst:"Date taken (newest to oldest)",dateTakenOldestFirst:"Date taken (oldest to newest)"},friendsInfo:"<div style='max-width:250px'><b>Note</b>: You will only see your friends who have authorized Shutterfly, Inc. to access their photos.</div>",permissions:{edit:"Edit permissions",photos:"You have not granted Shutterfly, Inc. permission to view your photos.",friends:"You have not granted Shutterfly, Inc. permission to access your list of friends."}},_end:null}),Object.extend(n,{_connect:function(e){Shr.FB&&Shr.FB.api?!n.accessToken&&Shr.EB.isOnClick?(this._fbUI(e),n._getLoginStatus(e)):e._requestedLoginStatus||n._getLoginStatus(e):Shr.FBC.load(function(){n._getLoginStatus(e)},{init:{version:"v2.9"}})},_fbUI:function(e){Shr.Cookie.deleteCookie("fblo_"+Shr.FBC.appId,"/",".shutterfly.com"),o.API.FB.login(function(t){t&&t.authResponse&&t.authResponse.accessToken&&(n.sourceAuth=n.accessToken=t.authResponse.accessToken,Shr.FBC.getUserId(),window.setTimeout(function(){n._getPermissions(),o.refresh(e)},0))},{scope:"user_photos,user_friends,email"})},_getLoginStatus:function(e){e._requestedLoginStatus||(e._requestedLoginStatus=!0,Shr.FBC.getUserId(function(t,r){"connected"==(r=r||{status:"unknown"}).status?(n.sourceAuth=n.accessToken=r.authResponse.accessToken,n._getPermissions(e)):(Shr.Cookie.deleteCookie("fblo_"+Shr.FBC.appId,"/",".shutterfly.com"),e.pending=n._formatConnect(e)),o.refresh(e)}))},_getPermissions:function(){o.API.FB.api("me/permissions","GET",{access_token:n.accessToken},function(e){e&&!e.error&&(n._permissions=e.data,n._getUserInfo())})},_setConnectedInfo:function(){},_getUserInfo:function(){n._user?n._setConnectedInfo():o.API.FB.api("/me","GET",{locale:"en_US",fields:"name, email",access_token:n.accessToken},function(e){e&&(n._user=e,n._setConnectedInfo())})},disconnect:function(e){Shr.FB.getLoginStatus(function(t){"connected"===t.status&&o.API.FB.logout(function(t){Shr.FBC.access_token=Shr.U.fbid=n.accessToken=void 0,r.folders=n.folders=null,r._requestedLoginStatus=!1,r.title=n._getTitle(),n._user=null,o.View.Event("flashInfoBox",!0);var i=document.getElementsByClassName("shrUPNBTitle")[0];r.pending=n._formatConnect(r),window.setTimeout(o.refresh.bind(o,r),10),r.info=n.info=void 0,r.activeTitle=n.activeTitle=null,Dom.removeClass(i,"shrSelected"),e&&Shr.Dom.hide(e.parentNode.parentNode)})})},_formatPermission:function(e,t,i){var s=Shr.Button.format("${permissions.edit}",{className:"sflyButton-tertiary"});return Shr.Html.formatTag("div",{className:"shrUPConnect",onclick:function(){o.API.FB.login(function(t){t&&t.authResponse&&t.authResponse.accessToken&&(n.sourceAuth=n.accessToken=t.authResponse.accessToken,n._getPermissions(),i&&i(),window.setTimeout(o.refresh.bind(o,e),0))}.bind(this),{scope:"user_photos,user_friends",auth_type:"rerequest"})}},Shr.Html.formatTag("div",{},t)+s).localize(r)},_error:function(e,t,r,n){var i=["https:/","graph.facebook.com",t].join("/"),s=[];r&&r.error?(r.error.type&&s.push(r.error.type),r.error.code&&s.push(r.error.code),r.error.error_subcode&&s.push(r.error.error_code)):s=["???"],o.Error.log(e,i,{status:s.join(".")},n)},_formatConnect:function(e){return Shr.Html.formatTag("div",{className:"shrUPConnect"},Shr.Html.formatTag("div",{},o.disableSourceFacebook?"${disabledPrompt}":"${connectPrompt}")+Shr.Html.formatTag("button",{className:"sflyButton-tertiary fb"+(o.disableSourceFacebook?" disabled":""),onclick:function(){n._fbUI(e)}},"${connect}")).localize(r)},_fqlSelectFromPhoto:"SELECT object_id, images, backdated_time, modified, created FROM photo WHERE ${0} LIMIT 100000",_defaultSortOrder:"date desc",criteria:{limit:"100000"},_getTitle:function(){return"${title}".localize(n)},_setTitle:function(){n.title=n._getTitle()},_end:null}),Object.extend(n,{_batchAPI:function(e,t){Shr.L.forEach(e,function(e){e.method=e.method||"GET"}),o.API.FB.api("/","POST",{batch:e,include_headers:!1},t)},_getAlbumThumbnailUrl:function(e,t,r){return[["https:/","graph.facebook.com",e.id,"picture"].join("/"),["type="+(e._size||"large"),"access_token="+n.accessToken].join("&")].join("?")},_getThumbnailUrl:function(e,t,r){var i="",s=(Shr.Array.getLength(e.images),{friends:{small:50,square:50,normal:100,large:200},albums:{album:50,thumbnail:50,square:50,normal:200}});return t=t||(e.isAlbum?"friends"==e.key?s.friends.large:s.albums.normal:3600),r=r||t,e.isAlbum?e.thumbnail?t<=s.friends.square&&r==t?i=e.thumbnail:Shr.L.forEach(Object.get(e.key,s)||s.albums,function(r,n){return i=e.thumbnail.replace(/type\=.*?(\&|$)/,"type="+n),!(t<=r)}):i=o.Album.prototype.getThumbnailUrl.apply(e,arguments):i=n._getBestFitImageFromArray(e,t,r),i},_getBestFitImageFromArray:function(e,t,r){var n,o,i,s=0,a=0;for(o=Shr.Array.getLength(e.images)-1;0<=o;o--){if((i=e.images[o]).width>=t&&i.height>=r){n=i.source;break}i.width*i.height>s*a&&(s=i.width,a=i.height,n=i.source)}return n},_getLocation:function(e){var t={source:Shr.ImgSrc.blank,width:0,height:0};return Shr.L.forEach(e&&e.images,function(e){var r=Math.max(e.width,e.height);r>t.width&&r>t.height&&(t=e)}),t.source},_limit:100,_next:function(e){var t={};return Shr.L.forEach(e.match(/\?(.*)$/)[1].split("&"),function(e){e=e.split("="),t[e[0]]=decodeURIComponent(e[1])}),delete t.access_token,t},_getContents:function(e,t,i,s,a,l){"limit"in i||(i.limit=n._limit),o.API.FB.api(t,i,function(i){i&&!i.error?(Shr.L.forEach(i.data,s),i.paging&&i.paging.next?window.setTimeout(function(){n._getContents(e,t,n._next(i.paging.next),s,a,l)},0):(e.getContents=function(){return!0},l&&l(),o.refresh(e))):n._error(e,t,i,"${error.text}".localize(r,[a]))})},UserFolder:Object.extend(function(e,t){o.Folder.call(this,e,t)},{prototype:Object.extend({},o.Folder.prototype,{getThumbnailUrl:function(e,t){return n._getAlbumThumbnailUrl(this,e,t)},getContents:function(){var e=[this.id,"photos"].join("/"),t=[this.id,"albums"].join("/"),i=function(e){this.albums.push(new n.Album(this,{id:e.id,title:e.name,count:e.count,created_date:e.created_time,date:e.updated_time,data:e}))};return!!this.ready||(this.folders=[],this.albums=[],n._batchAPI([{relative_url:e+"?fields=backdated_time,created_time,updated_time,name,images,width,height&limit=1"},{relative_url:t+"?fields=id,name,cover_photo,count&limit="+n._limit}],function(s){var a;if(this.ready=!0,s&&s[0])if(!(a=window.JSON.parse(s[0].body)).error&&Shr.Array.getLength(a.data)){var l=[];Shr.L.forEach(a.data,function(e){l.push(new n.Item(e))}),this.folders.push(new n.Album(this,{id:"tagged",title:"${taggedPics}".localize(r,[this.uName||this.title]),getContents:function(){return n._getContents(this,e,{fields:"backdated_time,created_time,updated_time,name,images,width,height"},function(e){this.items=this.items||[],this.items.push(new n.Item(e))}.bind(this),"${error.tagged}",function(){this.count=this.items.length}.bind(this)),!1},getThumbnailUrl:function(e,t){return this._cover.getThumbnailUrl(e,t)},_cover:new n.Item(a.data[0])}))}else a.error&&n._error(this,e,s,"${error.text}".localize(r,["${error.tagged}".localize(r)]));s&&s[1]&&((a=window.JSON.parse(s[1].body)).error?n._error(this,t,s,"${error.text}".localize(r,["${error.albums}".localize(r)])):(Shr.L.forEach(a.data,i.bind(this)),delete this.error,a.paging&&a.paging.next?n._getContents(this,t,n._next(a.paging.next),i.bind(this),"${error.albums}"):this.albums.length||"me"==this.id&&"declined"==(Shr.Array.findByProperty(n._permissions,"permission","user_photos")||{}).status&&(this.empty=n._formatPermission(this,"${permissions.photos}",function(){this.ready=!1}.bind(this))))),o.refresh(this)}.bind(this)),!1)},getSortChoices:function(){var e={};return Shr.L.forEach({"title asc":"${sortChoices.titleAtoZ}","title desc":"${sortChoices.titleZtoA}","date desc":"${sortChoices.modifiedNewestFirst}","date asc":"${sortChoices.modifiedOldestFirst}","created_date desc":"${sortChoices.createdNewestFirst}","created_date asc":"${sortChoices.createdOldestFirst}"},function(t,n){e[n]=new String(t.localize(r))}),e}})}),Album:Object.extend(function(e,t){delete this.items,this._size="album",o.Album.call(this,e,t)},{prototype:Object.extend({},o.Album.prototype,{getContents:function(){return this.items=[],n._getContents(this,["",this.id,"photos"].join("/"),{fields:"backdated_time,created_time,updated_time,name,images,width,height"},function(e){this.items.push(new n.Item(e))}.bind(this),"${error.photos}",function(){Shr.Array.sortByProperty(this.items,this.sortOrder="date desc")}.bind(this)),!1},getThumbnailUrl:function(e,t){return n._getAlbumThumbnailUrl(this,e,t)},getSortChoices:function(){var e={};return Shr.L.forEach({"title asc":"${sortChoices.titleAtoZ}","title desc":"${sortChoices.titleZtoA}","date desc":"${sortChoices.dateTakenNewestFirst}","date asc":"${sortChoices.dateTakenOldestFirst}","updated_time desc":"${sortChoices.modifiedNewestFirst}","updated_time asc":"${sortChoices.modifiedOldestFirst}"},function(t,n){e[n]=new String(t.localize(r))}),e}})}),Item:Object.extend(function(e){o.Item.call(this,e),this.data=e,this.date=Date.parse(e.backdated_time||e.created_time||e.updated_time),this.location=n._getLocation(e)},{prototype:{getThumbnailUrl:function(e,t,r){return o.Item.returnThumbnailUrl(n._getThumbnailUrl(this,e,t),r)}}})}),n)},function(e,t){var r,n,o;Shr.flickrDS=(n=Shr.Dialogs.UniversalPicker,"shrOverlay","shrUPFLCB",o=new n.Folder({},{id:"flickr",title:"${title}",dataSourceType:n.Source.DataSourceType.flickr,L10N:{title:"Flickr",info:"Showing <b>${0}</b>&#39;s Flickr photos.<br/><br/>"+Shr.Html.formatTag("a",{href:"https://www.flickr.com/people/${1}",target:"flickr"},"View Flickr profile")+"<br/><br/>${2}",connect:"Connect",disconnect:"Disconnect from Flickr",connectPrompt:"Use photos from Flickr in your project",connectingToFlickr:"Connecting to Flickr...",errorConnecting:"We are unable to connect to Flickr.",errorGettingSets:"We are unable to get the list of your Flickr photo sets.",errorGettingPhotos:"We are unable to get the list of pictures in this set.",errorGettingCollectionsTree:"We are unable to get the list of your Flickr Collections.",errorGettingTagList:"We are unable to get the list of your Flickr photo tags.",albums:"Albums/Sets",collections:"Collections",tags:"Tags",notInSet:"Photos not in an album",sortChoices:{defaultSortOrder:"Default",dateTakenNewestToOldest:"Date taken (newest to oldest)",dateTakenOldestToNewest:"Date taken (oldest to newest)",dateUploadedNewestToOldest:"Date uploaded (oldest to newest)",dateUploadedOldestToNewest:"Date uploaded (newest to oldest)",dateCreatedNewestFirst:"Date created (newest first)",dateCreatedOldestFirst:"Date created (oldest first)",dateUpdatedNewestFirst:"Date updated (newest first)",dateUpdatedOldestFirst:"Date updated (oldest first)"},_end:null},init:function(e,t,n){(r=this).title="${title}".localize(this),o._popup=t,o._popupURL=o._popupURL||n,o._needIFrame=Shr.B.isIE,this.pending=o._formatConnect(),o._localStorage||(o._localStorage={},o._localStorage._origin=[window.location.protocol,"",Shr.AS.www].join("/"),o._localStorage._URL=[[o._localStorage._origin,"upp","localStorage.jsp"].join("/"),["origin="+encodeURIComponent(window.location.protocol+"//"+window.location.host)].join("&")].join("?"),Shr.Event.addEventListener(window,"message",o._localStorage._listener=function(e){e.source==o._localStorage._iframe.contentWindow&&e.origin==o._localStorage._origin&&(o._localStorage._upp=window.JSON.parse(e.data),o._flickrData=o._localStorage._upp.flickrData||{cacheVersion:0},(o._flickrData.cacheVersion||0)<o._cacheVersion&&o._localStorage._update(),o._nextStep(o._steps._checkCachedToken))}),o._localStorage._update=function(e){e?(o._flickrData=e,o._flickrData.cacheVersion=o._cacheVersion):o._flickrData={cacheVersion:o._cacheVersion},o._localStorage._iframe.contentWindow.postMessage(window.JSON.stringify({flickrData:o._flickrData}),o._localStorage._origin)},o._localStorage._iframe=document.createElement("iframe"),o._localStorage._iframe.style.display="none",o._localStorage._iframe.src=o._localStorage._URL,document.body.appendChild(o._localStorage._iframe),Object.defineProperty(this,"sourceAuth",{get:function(){return o._flickrData&&o._flickrData[Shr.U.id]&&o._flickrData[Shr.U.id].oauth_token}}))},onclick:function(){return n.Source.prototype.onclick.call(this)},getContents:function(){var e,t=o._connected&&this.folders;return o._connected?t||(delete this.pending,this.folders=[Object.extend(new n.Folder(this,{id:"albums",title:"${albums}".localize(r)}),{getContents:function(){var t=this.albums;return t||o._doFlickrAPI({urlArgs:{method:"flickr.photosets.getList"}},function(t){this.folders=[Object.extend(new o.Album(this,{id:"none",title:"${notInSet}".localize(r)}),{getThumbnailUrl:function(){},_getUrlArgs:function(e){return{method:"flickr.photos.getNotInSet"}}})],this.albums=[],e=window.JSON.parse(t.responseText),Shr.L.forEach(e&&e.photosets&&e.photosets.photoset,function(e,t){this.albums.push(new r.Album(this,{id:e.id,index:t+1,title:e.title._content,data:e,text:e.description._content,count:e.photos,date_create:e.date_create,date_update:e.date_update,thumbnail:["https:/",["farm"+e.farm,"staticflickr","com"].join("."),e.server,[e.primary,e.secret,"m.jpg"].join("_")].join("/")}))}.bind(this))}.bind(this),function(e){}.bind(this),this,"${errorGettingSets}".localize(r)),t},getSortChoices:function(){var e={};return Shr.L.forEach({"index asc":"${sortChoices.defaultSortOrder}","date_create desc,index asc":"${sortChoices.dateCreatedNewestFirst}","date_create asc,index asc":"${sortChoices.dateCreatedOldestFirst}","date_update desc,index asc":"${sortChoices.dateUpdatedNewestFirst}","date_update asc,index asc":"${sortChoices.dateUpdatedOldestFirst}"},function(t,n){e[n]=t.localize(r)}),Object.extend(e,n.Folder.prototype.getSortChoices.call(this)),e}}),Object.extend(new n.Folder(this,{id:"collections",title:"${collections}".localize(r)}),{getContents:function(){var e=!!this.folders||!!this.albums;return e||o._doFlickrAPI({urlArgs:{method:"flickr.collections.getTree"}},function(e){var t=window.JSON.parse(e.responseText);this.folders=[],this.albums=[],Shr.L.forEach(t&&t.collections&&t.collections.collection,function(e,t){this.folders.push(Object.extend(new o.Collection(this,e),{index:t+1}))}.bind(this)),Shr.L.forEach(t&&t.collections&&t.collections.set,function(e,t){this.albums.push(Object.extend(new o.Album(this,e),{index:t+1}))}.bind(this)),this.count=this.folders.length+this.albums.length}.bind(this),function(e){}.bind(this),this,"${errorGettingCollectionsTree}".localize(r)),e},getSortChoices:function(){return o.Collection.prototype.getSortChoices.call(this)}}),Object.extend(new n.Folder(this,{id:"tags",title:"${tags}".localize(r)}),{getContents:function(){var e=!!this.albums;return e||o._doFlickrAPI({urlArgs:{method:"flickr.tags.getListUserRaw"}},function(e){var t=window.JSON.parse(e.responseText);this.albums=[],Shr.L.forEach(t&&t.who&&t.who.tags&&t.who.tags.tag,function(e,t){this.albums.push(Object.extend(new o.Album(this,{id:e.clean,title:e.raw[0]._content}),{_getUrlArgs:function(){return{method:"flickr.photos.search",tags:this.id}}}))}.bind(this))}.bind(this),function(e){}.bind(this),this,"${errorGettingTagList}".localize(r)),e}})],t=!0):o._needIFrame||this._connect(),t},renderStyle:function(e){e(r._formatStyle())},Album:Object.extend(function(e,t){n.Album.call(this,e,t)},{prototype:Object.extend({},n.Album.prototype,{getContents:function(){var e=!!this.items;return e||this._getPage(1),e},getThumbnailUrl:function(e,t){return o._getThumbnailUrl(e,t,this.data||{})},getSortChoices:function(){var e={};return Shr.L.forEach({"index asc":"${sortChoices.defaultSortOrder}","datetaken desc":"${sortChoices.dateTakenNewestToOldest}","datetaken asc":"${sortChoices.dateTakenOldestToNewest}","dateupload desc":"${sortChoices.dateUploadedNewestToOldest}","dateupload asc":"${sortChoices.dateUploadedOldestToNewest}"},function(t,n){e[n]=t.localize(r)}),Object.extend(e,n.Album.prototype.getSortChoices.call(this)),e},_getUrlArgs:function(){return{method:"flickr.photosets.getPhotos",photoset_id:this.id}},_pageSize:500,_getPage:function(e){o._doFlickrAPI({urlArgs:Object.extend({page:e,per_page:this._pageSize,media:"photos",extras:"original_format, description, date_taken, date_upload, o_dims, url_l, url_h, url_k, url_o"},this._getUrlArgs())},function(t){var i=window.JSON.parse(t.responseText),s=1==e;if(i=i.photoset||i.photos,this.items=this.items||[],s)for(;this.items.length<parseInt(i.total);)this.items.push(new o.Item({id:this.items.length+1,title:"&nbsp;",pending:this.items.length>=i.photo.length}));Shr.L.forEach(i&&i.photo,function(t,i){var a=t.url_o;"jpg"!=t.originalformat&&(delete t.url_o,a=r._getThumbnailUrl(Number.MAX_VALUE,Number.MAX_VALUE,t)),i+=(e-1)*this._pageSize,this.items[i]=new o.Item({id:t.id,index:i,title:t.title,width:t.width_o,height:t.height_o,datetaken:t.datetaken,dateupload:t.dateupload,data:t,location:a}),!s&&n.refresh(this,this.items[i])}.bind(this)),parseInt(i.pages)>e&&window.setTimeout(this._getPage.bind(this,e+1),0),s&&n.refresh(this)}.bind(this),function(e){}.bind(this),this,"${errorGettingPhotos}".localize(r))}})}),Item:Object.extend(function(e){n.Item.call(this,e)},{prototype:Object.extend({},n.Item.prototype,{getThumbnailUrl:function(e,t){return this.pending?Shr.ImgSrc.blank2:o._getThumbnailUrl(e,t,this.data||{})}})}),Collection:Object.extend(function(e,t){n.Folder.call(this,e,t),this.thumbnail=t.iconlarge,this.thumbnail.startsWith("/")&&(this.thumbnail="//www.flickr.com"+this.thumbnail),this.folders=[],this.albums=[],Shr.L.forEach(t&&t.collection,function(e,t){this.folders.push(Object.extend(new o.Collection(this,e),{index:t+1}))}.bind(this)),Shr.L.forEach(t&&t.set,function(e,t){this.albums.push(Object.extend(new o.Album(this,e),{index:t+1,getThumbnailUrl:function(e,t){return[["/",Shr.AS.www,"upp","ds","flickr","coverImage.jsp"].join("/"),["oauth_token="+o._flickrData[Shr.U.id].oauth_token,"oauth_token_secret="+o._flickrData[Shr.U.id].oauth_token_secret,"photoset_id="+this.id,"width="+e,"height="+(t||e)].join("&")].join("?")}}))}.bind(this)),this.count=this.folders.length+this.albums.length},{prototype:Object.extend({},n.Folder.prototype,{getThumbnailUrl:function(e,t){return this.thumbnail},getSortChoices:function(){var e={"index asc":"${sortChoices.defaultSortOrder}".localize(r)};return Object.extend(e,n.Folder.prototype.getSortChoices.call(this)),e}})}),_sizes:function(){function e(e,t){return"c"==t?Math.max(e.width_o,e.height_o)>=this.size&&"dateupload"in e&&133056e4<e.dateupload:"url_"+t in e}return{s:{size:75,isSquare:!0},q:{size:150,isSquare:!0},t:{size:100},m:{size:240},n:{size:320}," ":{size:500},z:{size:640},c:{size:800,available:e},b:{size:1024,available:function(e,t){return"url_l"in e}},h:{size:1600,available:e},k:{size:2048,available:e}}}(),_getThumbnailUrl:function(e,t,n){function o(e,t){var r;return"url_"+e in t?r=t["url_"+e]:"farm"in t&&(r=["https:/",["farm"+t.farm,"staticflickr","com"].join("."),t.server,[t.primary||t.id,t.secret].join("_")+(" "!=e?"_"+e:"")+".jpg"].join("/")),r}var i={width:Math.sqrt(Number.MAX_VALUE),height:Math.sqrt(Number.MAX_VALUE)},s={width:0,height:0},a=!1,l=n.height_o?n.width_o/n.height_o:1;if(t=t||e,"url_o"in n){if(t==Number.MAX_VALUE&&e==Number.MAX_VALUE)return n.url_o;s={url:n.url_o,width:n.width_o,height:n.height_o}}else"width_o"in n||(s={url:o("z",n),width:i.width,height:i.height});return Shr.L.forEach(r._sizes,function(r,c){var d,h={width:r.size,height:r.size};return r.available&&!r.available(n,c)||r.isSquare&&1!=l||(r.isSquare||(l<1?h.width*=l:h.height/=l),d=h.width*h.height,h.width>=e&&h.height>=t&&d<i.width*i.height?(a=!0,(i=h).url=o(c,n)):d>s.width*s.height&&((s=h).url=o(c,n))),!0}),a||(i=s),i.url},_getApiURL:["https:/",Shr.AS.www,"upp","ds","flickr","getApiURL.jsp"].join("/"),_cacheVersion:3,_connected:!1,_steps:{_waitForLocalStorage:2,_checkCachedToken:3,_requestToken:4,_getAuthorization:5,_accessToken:6},_step:2,_nextStep:function(e){o._step=e||o._step+1,window.setTimeout(o._connect.bind(r),0)},_connectListener:new Shr.Event.MessageListener(function(e,t){var r=window.JSON.parse(t.data);o._oauthVerifier=r.oauth_verifier,o._closePopup(),e.remove(),o._nextStep()}),_connect:function(){var e,t=["https:/",Shr.AS.www,"upp","ds","flickr","request_token.jsp"].join("/"),i=["https:/",Shr.AS.www,"upp","ds","flickr","access_token.jsp"].join("/"),s={},a="${errorConnecting}".localize(r);Shr.EB.isOnClick&&o._step<6&&o._openPopup(o._authorize||o._popupURL,r.requiresPopup),o._step==o._steps._waitForLocalStorage||(o._step==o._steps._checkCachedToken?(e=o._flickrData[Shr.U.id]||{}).oauth_token&&e.oauth_token_secret?o._doFlickrAPI({urlArgs:{method:"flickr.auth.oauth.checkToken"}},function(e){o._setConnected(),n.refresh(this)}.bind(this),function(e){delete o._flickrData[Shr.U.id],o._localStorage._update(o._flickrData),o._nextStep()}.bind(this)):this._nextStep():o._step==o._steps._requestToken?o._authorize?o._nextStep():(o._needIFrame?s.oauth_callback=[[o._iframeOrigin,"upp","ds","flickr","iframe_connected.html"].join("/")].join("?"):(o._connectListener.origin=[window.location.protocol,"","dev"==Shr.AS.getEnv()?Shr.AS.www:Shr.AS.staticServer].join("/"),o._connectListener.source=o._popup,s.oauth_callback=[[o._connectListener.origin,"upp","ds","flickr","connected.html"].join("/"),["origin="+encodeURIComponent(window.location.protocol+"//"+window.location.host)].join("&")].join("?"),o._connectListener.add(o._connectListener.fn.bind(this))),n.API.SflyAjax.sendAjaxRequest({url:t,args:s,withCredentials:!0},function(e){var r=e.responseText&&window.JSON.parse(e.responseText);200<=e.status&&e.status<300?(o._requestToken=r.oauth_token,o._requestTokenSecret=r.oauth_token_secret,o._authorize=r.authorize,o._nextStep()):(o._closePopup(),n.Error.log(this,t,e.status,a),n.refresh(this))}.bind(this))):o._step==o._steps._getAuthorization?o._openPopup(o._authorize,r.requiresPopup):o._step==o._steps._accessToken&&n.API.SflyAjax.sendAjaxRequest({url:i,args:{oauth_token:o._requestToken,oauth_token_secret:o._requestTokenSecret,oauth_verifier:o._oauthVerifier},withCredentials:!0},function(e){200<=e.status&&e.status<300?o._setConnected(window.JSON.parse(e.responseText)):n.Error.log(this,i,e.status,a),n.refresh(this)}.bind(this)))},_setConnected:function(e){var t,i;o._closePopup(),e&&(o._flickrData[Shr.U.id]=e,o._localStorage._update(o._flickrData)),i=Shr.Button.format("${disconnect}".localize(o),{onclick:function(e){delete o._flickrData[Shr.U.id],o._localStorage._update(o._flickrData),o._connected=!1,o._step=o._steps._checkCachedToken,delete this.folders,this.pending=o._formatConnect(),window.setTimeout(n.refresh.bind(n,this),0),Shr.Dom.hide(e.parentNode.parentNode)}.bind(r)}),t="${info}".localize(o).substitute([window.decodeURIComponent(o._flickrData[Shr.U.id].username),window.decodeURIComponent(o._flickrData[Shr.U.id].user_nsid),i]),o._info=Shr.Html.formatTag("div",{},t),delete o._authorize,o._connected=!0},_doFlickrAPI:function(e,t,i,s,a){var l=o._getApiURL;e=Object.merge({url:l,method:"GET",withCredentials:!0,urlArgs:{user_id:o._flickrData[Shr.U.id].user_nsid,oauth_token:o._flickrData[Shr.U.id].oauth_token,oauth_token_secret:o._flickrData[Shr.U.id].oauth_token_secret,format:"json",nojsoncallback:1}},e),n.API.SflyAjax.sendAjaxRequest(e,function(e){var o=function e(t){s&&a&&n.Error.log(s,l.replace(/\?.*$/,""),t.status,a.localize(r)),Shr.L.tryToCall(e,t,l)};200<=e.status&&e.status<300?(l=window.JSON.parse(e.responseText.replace(/\s/g,"")).api,n.API.SflyAjax.sendAjaxRequest({url:l,method:"GET"},function(e){200<=e.status&&e.status<300?(Shr.L.tryToCall(t,e),s&&n.refresh(s)):o(e)})):o(e)})},_openPopup:function(e,t){o._needIFrame?(o._iframe.postMessage(window.JSON.stringify({method:"openPopup",url:e}),o._iframeOrigin),o._popup={close:function(){}}):o._popup&&!o._popup.closed?(o._popup.location.href=e,o._popup.focus()):Shr.EB.isOnClick?(o._popup=window.openPopup(e,t),o._connectListener.source=o._popup):delete o._popup},_closePopup:function(){var e=window._popup=o._popup;delete o._popup;try{e&&e.close()}catch(t){e&&(e.location.href="javascript:window.close()")}},_formatConnect:function(){var e="";return o._needIFrame&&(o._iframeOrigin=[window.location.protocol,"",Shr.AS.www].join("/"),e=Shr.Html.formatTag("iframe",{src:[[o._iframeOrigin,"upp","ds","flickr","iframe.jsp"].join("/"),["origin="+encodeURIComponent(window.location.protocol+"//"+window.location.host),"popup="+encodeURIComponent(window.JSON.stringify(Object.extend({url:o._popupURL},this.requiresPopup)))].join("&")].join("?"),className:"shrOverlay",style:{width:"100%",height:"100%",border:"none"},onload:function(e){o._connectListener.source=o._iframe=e.contentWindow}}),o._connectListener.origin=o._iframeOrigin,o._connectListener.add(function(e,t){"connect"==window.JSON.parse(t.data).method?o._connect():e.fn.apply(null,arguments)})),Shr.Html.formatTag("div",{className:"shrUPConnect"},Shr.Html.formatTag("div",{},"${connectPrompt}")+Shr.Html.formatTag("button",{className:["sflyButton-tertiary","shrUPFLCB"],onclick:function(){o._connect()}.bind(r),tabindex:"0"},"${connect}"+e)).localize(r)},_formatStyle:function(){var e=[".shrUPSrc_flickr .shrUPHdr .shrSC {position: relative; float: left; width: auto; bottom: -9px !important;}",""];return o._needIFrame&&(e=e.concat([".shrUPFLCB {position: relative;}",""])),e.join("\n")}}))},function(e,t){var r,n,o,i,s,a,l,c,d,h,u,p,m,g,f,_,S;Shr.googleDS=(c=Shr.Dialogs.UniversalPicker,d=window.trUPP,h=d&&d.util||Shr,u=new c.Folder({},{title:"${title}",id:"googlePhotos",version:"$Revision$"}),["44c","88c","150c","300c"].join(","),p="shrEmptyState",m="shrShowMore",g="spinner",f="shrRandomAlbumStack",_="shrGoogleConnectIframe",S="shrUPConnect",Shr.Event.addEventListener(window,"message",function(e){if(e.origin){var t,r=document.getElementsByClassName(_)[0];if(e.source==(r&&r.contentWindow)){var n=e[e.message?"message":"data"];if(n&&n.contains("googleToken:"))try{t={access_token:(t=(t=n.replace("googleToken:","")).split(","))[0],expires_at:t[1]},u._googleApi.handleAuthResult.call(u._googleApi,t)}catch(e){}}}},!1),Object.extend(u,{dataSourceType:c.Source.DataSourceType.google,_responseKeys:{dollarT:"$t",albumType:"gphoto$albumType",numphotos:"gphoto$numphotos",id:"gphoto$id",group:"media$group",thumbnail:"media$thumbnail",width:"gphoto$width",height:"gphoto$height",videostatus:"gphoto$videostatus"},init:function(e){(r=this).title=u._getTitle(),Object.defineProperty(this,"sourceAuth",{get:function(){return u._googleApi.getAccessToken()}})},onclick:function(){return c.Source.prototype.onclick.call(this)},_getAllAlbums:function(){var e,t="https://photoslibrary.googleapis.com/v1/mediaItems?",r=["access_token="+u._googleApi.getAccessToken(),"pageSize=100"],n=function(e){this.customEmptyState={className:[p,f],primaryMessage:e?"${noValidAlbumsPrimaryMessage}".localize(u):"${noAlbumsPrimaryMessage}".localize(u),secondaryMessage:"${noAlbumsSecondaryMessage}".localize(u)}}.bind(this);t+=r.join("&"),Shr.SflyAjax.sendAjaxRequest({method:"GET",url:t,timeout:u.timeout,ontimeout:function(){u._onTimeoutCallback.bind(this,t)}.bind(this)},function(t){if(200<=t.status&&t.status<300){var r=window.JSON.parse(t.responseText);if(r.mediaItems&&0<r.mediaItems.length){this.albums=this.albums||[];var o={id:"autobackup",title:"All Photos",count:void 0,coverPhotoBaseUrl:r.mediaItems[0].baseUrl,isAutobackAlbum:!0};e=new u.AutoBackup(this,u.getAlbumObject(!0,o,void 0)),this.albums.push(e),this._getAlbums.call(this,!0)}else n(),c.refresh(this)}else n(),c.refresh(this)}.bind(this))},_getAlbums:function(e,t){e=e||!1,t=t||null,this.albums=this.albums||[];var r=u._googleApi.getSettings().api+"?",n=["access_token="+u._googleApi.getAccessToken(),"pageSize=50"],o="${error.getAlbums}".localize(u),i=function(e){this.customEmptyState={className:[p,f],primaryMessage:e?"${noValidAlbumsPrimaryMessage}".localize(u):"${noAlbumsPrimaryMessage}".localize(u),secondaryMessage:"${noAlbumsSecondaryMessage}".localize(u)}}.bind(this),s=[];t&&n.push("pageToken="+t),r+=n.join("&"),Shr.SflyAjax.sendAjaxRequest({method:"GET",url:r,timeout:u.timeout,ontimeout:function(){c.Error.log(this,r,{status:408},o),c.refresh(this)}.bind(this)},function(n){if(200<=n.status&&n.status<300){var a=window.JSON.parse(n.responseText),l=0;if(this.sortOrder="published desc",a&&a.albums){if(Shr.Array.getLength(a.albums)){if(Shr.L.forEach(a.albums,function(e){0<(l=e.mediaItemsCount)&&s.push(new u.Album(this,u.getAlbumObject(!1,e,l)))}.bind(this)),s.length&&(this.albums=this.albums.concat(Shr.Array.sortByProperty(s,this.sortOrder))),a.nextPageToken)return void this._getAlbums(!1,a.nextPageToken);0===this.albums.length&&i(!0)}}else 0===this.albums.length&&c.Error.log(this,r,a,o);!1!==e&&t||c.refresh(this)}else c.Error.log(this,r,{status:n&&n.status||"???"},o),c.refresh(this)}.bind(this))},getContents:function(){var e=!!this.albums||!!this.customEmptyState;return u._googleApi.getAccessToken(!0)?(e||(this.pending=!1,this.info||this._googleApi.setAccountInfoInNavbar.call(this._googleApi),this._getAllAlbums()),e):u._connect(this)},renderStyle:function(e){e(u._formatStyle())},getSortChoices:function(){return u._sortByName()},getUserId:function(){var e=Shr.U.id+"-google_access_token",t=window.JSON.parse(c._utilities.localStorage.getItem(e));return t&&t.userId?t.userId:null},L10N:{title:"Google Photos",connect:"Connect",info:"Showing Google Photos for<br/><br/><b>${0}</b><br/><br/>${1}",disconnect:"Change Account",connectPrompt:"Use photos from Google Photos in your project",disabledPrompt:"Google Photos is not currently available. <p>We are working with Google on this issue and appreciate your patience.</p>",googleLoadError:"There was an error connecting to Google.  This may be because of an issue with Google Authentication or because a browser extension like Ghostery may be blocking access to it.  Please check your browser extensions and try again.",error:{getAlbums:"Unable to get albums from Google Photos",getPhotos:"Unable to get the photos in this album.",googleSignout:"Unable to connect to google, Retry?",getPhotosLoaded:"Unable to connect. Retry?",getPhotosErrorWithMultiAccounts:"Unable to get photos in this album.<br/>You maight have logged into multiple Google accounts, please logout from other account(s) and click try again."},sortChoices:{titleAtoZ:"Title (A-Z)",titleZtoA:"Title (Z-A)",createdNewestFirst:"Created date (newest to oldest)",createdOldestFirst:"Created date (oldest to newest)",modifiedNewestFirst:"Modified date (newest to oldest)",modifiedOldestFirst:"Modified date (oldest to newest)"},noAlbumsPrimaryMessage:"You have no albums.",noAlbumsSecondaryMessage:"You can create albums in Google Photos to organize your photos and use them here.",invalidAlbumsPrimaryMessage:"You have no albums available with photos.",noPhotosInAlbumPrimaryMessage:"You have no photos in this album.",invalidPhotosInAlbumPrimaryMessage:"You have no valid photos in this album.",invalidType:"This filetype is not supported at this time.",loadMoreText:"LOAD MORE PHOTOS",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"]},timeout:15e3,_end:null}),Object.extend(u,{_googleApi:(o={profileId:"default",api:"https://photoslibrary.googleapis.com/v1/albums/",version:"3.0"},i={},s=function(e){var t,n=i;t=Shr.Html.formatTag("a",{onclick:this.disconnect.bind(r)},"${disconnect}".localize(u)),r.info=Shr.Html.formatTag("div",{},t),r.activeTitle=Shr.Html.truncateText(n.email,24,"..."),e||c.refresh(r)},a=function(){i={},c._utilities.localStorage.removeItem(l())},l=function(){return Shr.U.id+"-google_access_token"},{getSettings:function(){return o},getRedirectFolder:function(){return n},shouldFlashInfoBox:function(){var e=!i.infoBoxFlashed;return e&&(i.infoBoxFlashed=!0,c._utilities.localStorage.setItem(l(),window.JSON.stringify(i))),e},getAccessToken:function(e){var t=null,o=null;return i.token||(o=c._utilities.localStorage.getItem(l()))&&(i=o=window.JSON.parse(o)),i.token&&((Date.now()/1e3|0)<parseInt(i.expiration)?t=i.token:(a(),e||(n=r,this.disconnect.call(r,null,!0)))),t},disconnect:function(e,t){a(),delete this.albums,delete this.customEmptyState,this.pending=this._formatConnect(),c.View.Event("flashInfoBox",!0),t||window.setTimeout(c.refresh.bind(c,this),10),this.info=void 0,this.activeTitle=null,e&&Shr.Dom.hide(e.parentNode.parentNode)},setAccountInfoInNavbar:function(){s.call(this,!0)},handleAuthResult:function(e){return e&&!e.error&&e.access_token&&(Shr.ClassToggle.toggle(document.querySelector("."+S),g,!0),function(e,t,r){var n,o,s;i={token:e,expiration:t,infoBoxFlashed:!1,email:null,userId:null},c._utilities.localStorage.setItem(l(),window.JSON.stringify(i)),Shr.SflyAjax.sendAjaxRequest({method:"GET",url:"https://www.googleapis.com/oauth2/v1/userinfo?access_token="+i.token},function(e){try{200<=e.status&&e.status<300&&(n=window.JSON.parse(e.responseText),o=n&&n.email,s=n&&n.id,o&&(i.email=o,c._utilities.localStorage.setItem(l(),window.JSON.stringify(i))),s&&(i.userId=s,c._utilities.localStorage.setItem(l(),window.JSON.stringify(i))))}catch(e){window&&window.trUPP&&window.trUPP.Timing&&window.trUPP.Timing.recordInfo("upp_exception",{ex_message:e.message,ex_stack:e.stack})}finally{r()}}.bind(this))}(e.access_token,e.expires_at,s.bind(this))),!1}}),_connect:function(e){return e.pending=u._formatConnect(e),!1},_connected:function(e){return e.pending=u._formatConnected(e),!1},_formatConnected:function(e){return Shr.Html.formatTag("div",{className:S},Shr.Html.formatTag("div",{},"${connectPrompt}")+Shr.Html.formatTag("span",{className:g},"")).localize(r)},_formatConnect:function(e){var t=h.CURL("static/googlesignin.html");return c.disableSourceGoogle&&(t+=(-1!==t.indexOf("?")?"&":"?")+"disabled=true"),Shr.Html.formatTag("div",{className:S},Shr.Html.formatTag("div",{},c.disableSourceGoogle?"${disabledPrompt}":"${connectPrompt}")+Shr.Html.formatTag("span",{className:g},"")+Shr.Html.formatTag("iframe",{name:Shr.Dom.getUniqueId(),src:t+(-1!==t.indexOf("?")?"&":"?")+"origin="+encodeURIComponent(window.location.protocol+"//"+window.location.host),className:_})).localize(r)},_getTitle:function(){return"${title}".localize(u)},_setTitle:function(){u.title=u._getTitle()},_sortByName:function(){return{"title asc":"${sortChoices.titleAtoZ}".localize(u),"title desc":"${sortChoices.titleZtoA}".localize(u)}},_sortByDate:function(){return{"published asc":"${sortChoices.createdOldestFirst}".localize(u),"published desc":"${sortChoices.createdNewestFirst}".localize(u)}},_getThumbnailUrl:function(e,t,r){var n,o=e.split("/");return n=(r=r||t)<=t?t:r,o[o.length-2]=o[o.length-2].replace(/s[0-9]*/,"s"+n),o.join("/")},getAlbumObject:function(e,t,r){return{id:t.id,title:t.title||"&nbsp;",count:r,thumbnails:t.coverPhotoBaseUrl,isAutobackAlbum:e}},_loadMoreSeparator:Object.extend(function(e,t){var r=Shr.Html.formatTag("span",{onclick:function(r){return Shr.ClassToggle.toggle(document.querySelector("."+m),g,!0),window.setTimeout(function(){this.isAutobackAlbum?this._fetchAutoBackupPhotos(t):this._fetchPhotosInAlbum(t)}.bind(e),100),Shr.Event.stop(r),!1},className:m},"${loadMoreText}".localize(u));r+=e.isAutobackAlbum?"":Shr.Html.formatTag("span",{className:g},"")+Shr.Html.formatTag("span",{}," &nbsp;| "+e.loadedCount+" out of "+e.count),c.Item.call(this,{id:"",title:r})},{prototype:{disabled:!0,separator:!0,className:m,formatContent:function(){return c.Item.prototype.formatContent.call(this,this.title)}}}),_getApiUrl:function(){return"https://photoslibrary.googleapis.com/v1/mediaItems:search"},_responseCallback:function(e,t){if(e&&e.mediaItems){var n,o,i=Shr.Array.getLength(e.mediaItems),s=0===this.items.length,a=[],l=!1;i&&(0!==this.loadedCount&&(this.items.pop(),Shr.Dom.removeNode(document.querySelector("."+m))),this.loadedCount=this.loadedCount+i,Shr.L.forEach(e.mediaItems,function(e){this.startIndex++,o=new u.Item({id:e.id,thumbnailUrl:e.baseUrl,width:e.mediaMetadata.width,height:e.mediaMetadata.height,published:e.mediaMetadata.creationTime,date:e.mediaMetadata.creationTime,updated:e.mediaMetadata.creationTime,data:e,location:e.baseUrl+"=w"+e.mediaMetadata.width+"-h"+e.mediaMetadata.height}),e.mimeType.match(/image\/.?jpeg/)?this.hasPhotos=!0:(o.disabled=!0,o.tooltip="${invalidType}".localize(r)),a.push(o)}.bind(this)),a=Shr.Array.sortByProperty(a,this.sortOrder),e.nextPageToken?a.push(new u._loadMoreSeparator(this,e.nextPageToken)):(this.disableSorting&&this.onlyShowCountNoSelect&&this.hasPhotos&&(this.onlyShowCountNoSelect=this.disableSorting=!1,l=!0),this.hasPhotos||(this.onlyShowCountNoSelect=this.disableSorting=!0,l=!0),l&&new c.View.Event("refresh",this)),n=this.items.length,this.items=this.items.concat(a),s?c.refresh(this):c.Grid.add(a,this,n))}else u._onError.call(this,!1,null,t,e)},_onTimeoutCallback:function(e){u._onError.call(this,!0,null,e,null)},_onErrorCallback:function(e,t){u._onError.call(this,!1,e,t,null)},_onError:function(e,t,r,n){if(n=n||{status:e?408:t&&(t.status||t.response||"???")},u._googleApi.getAccessToken(!0))if(0==this.loadedCount&&0<this.count)this.items=void 0,c.Error.log(this,r,n,"${error.getPhotos}".localize(u)),c.refresh(this);else{var o=document.querySelector(".shrShowMore > span:first-of-type");o&&(Shr.ClassToggle.toggle(document.querySelector("."+m),g,!1),o.innerHTML="${error.getPhotosLoaded}".localize(u))}else{c.Error.log(u._googleApi.getRedirectFolder(),r,n,"${error.googleSignout}".localize(u));try{u._googleApi.getRedirectFolder().onclick()}catch(e){}}},AutoBackup:Object.extend(function(e,t){c.Album.apply(this,arguments),this.thumbnail=this.getThumbnailUrl(44*(window.devicePixelRatio||1),44*(window.devicePixelRatio||1)),this.loadedCount=0,this.startIndex=1,this.maxResultsToFetch=250,this.hasPhotos=!1,this.sortOrder="published desc",this.disableSorting=this.onlyShowCountNoSelect=this.count>this.maxResultsToFetch},{prototype:Object.extend({},c.Folder.prototype,{noCount:!0,noSelectAll:!0,getThumbnailUrl:function(e,t){return u.Album.prototype.getThumbnailUrl.call(this,e,t)},getSortChoices:function(){return this.disableSorting?{}:u._sortByDate()},getContents:function(){var e=!!this.items;return e||(this.items=[],this._fetchAutoBackupPhotos()),e},_fetchAutoBackupPhotos:function(e){var t="https://photoslibrary.googleapis.com/v1/mediaItems?",r=["access_token="+u._googleApi.getAccessToken(),"pageSize=100"];e&&r.push("pageToken="+e),t+=r.join("&"),Shr.SflyAjax.sendAjaxRequest({method:"GET",url:t,timeout:u.timeout,ontimeout:function(){u._onTimeoutCallback.bind(this,t)}.bind(this)},function(e){if(200<=e.status&&e.status<300){var r=window.JSON.parse(e.responseText);u._responseCallback.call(this,r,t)}else u._onErrorCallback.call(this,e,t)}.bind(this))}})}),Album:Object.extend(function(e,t){c.Album.apply(this,arguments),this.thumbnail=this.getThumbnailUrl(44*(window.devicePixelRatio||1),44*(window.devicePixelRatio||1)),this.loadedCount=0,this.startIndex=1,this.maxResultsToFetch=250,this.hasPhotos=!1,this.sortOrder="published desc",this.disableSorting=this.onlyShowCountNoSelect=this.count>this.maxResultsToFetch},{prototype:Object.extend({},c.Album.prototype,{getThumbnailUrl:function(e,t){return this.thumbnails+"=w"+e+"-h"+t+"-c"},getSortChoices:function(){return this.disableSorting?{}:u._sortByDate()},getContents:function(){var e=!!this.items;return e||(this.items=[],this._fetchPhotosInAlbum()),e},_fetchPhotosInAlbum:function(e){var t="https://photoslibrary.googleapis.com/v1/mediaItems:search",r={pageSize:100,albumId:this.id};e&&(r.pageToken=e);var n={Authorization:"Bearer "+u._googleApi.getAccessToken()};Shr.SflyAjax.sendAjaxRequest({method:"POST",url:t,timeout:u.timeout,args:r,headers:n,ontimeout:function(){u._onTimeoutCallback.bind(this,t)}.bind(this)},function(e){if(200<=e.status&&e.status<300){var r=window.JSON.parse(e.responseText);u._responseCallback.call(this,r,t)}else u._onErrorCallback.call(this,e,t)}.bind(this))}})}),Item:Object.extend(function(e){c.Item.call(this,e)},{prototype:Object.extend({},c.Item.prototype,{getThumbnailUrl:function(e,t,r){return c.Item.returnThumbnailUrl(u._getThumbnailUrl(this.thumbnailUrl,e,t),r)}})}),_formatStyle:function(){var e=Object.extend({},Shr.Style.parameters,{bg:{randomPhotoStack:Shr.Style.formatBackground({url:h.IURL("universalpicker/random-photo-stack.jpg"),url2x:h.IURL("universalpicker/random-photo-stack@2x.jpg"),width:"573px"}),randomAlbumStack:Shr.Style.formatBackground({url:h.IURL("universalpicker/random-album-stack.jpg"),url2x:h.IURL("universalpicker/random-album-stack@2x.jpg"),width:"451px"}),randomPhotoStack4Mobile:Shr.Style.formatBackground({url:h.IURL("universalpicker/random-photo-stack.jpg"),url2x:h.IURL("universalpicker/random-photo-stack@2x.jpg"),width:"287px"}),randomAlbumStack4Mobile:Shr.Style.formatBackground({url:h.IURL("universalpicker/random-album-stack.jpg"),url2x:h.IURL("universalpicker/random-album-stack@2x.jpg"),width:"226px"})}});return[".shrUPWide .shrUPFC > .shrEmptyState {text-align: center; position: relative; top: 5%; /*left: 50%; transform: translate(-50%, -50%); -webkit-transform: translate(-50%, -50%); -ms-transform: translate(-50%, -50%);*/ text-shadow: 0 1px 0 #fff; color: #4b525c; font-size: 24px; line-height: 50px; display: block; padding-top: 50px;}",".shrUPWide .shrUPFC > .shrEmptyState:after {content: attr(secondaryMessage); opacity: 0.5;  text-shadow: 0 1px 0 #fff; color: #4b525c; font-size: 20px; font-weight: 400; line-height: 34px; display: block;}",".shrUPWide .shrUPFC > .shrEmptyState:before {content: ''; display: block; margin: auto;}",".shrUPWide .shrUPFC > .shrEmptyState.shrRandomPhotoStack:before {width: 573px; height: 266px; ${bg.randomPhotoStack}}",".shrUPWide .shrUPFC > .shrEmptyState.shrRandomAlbumStack:before {width: 451px; height: 271px; ${bg.randomAlbumStack}}",".shrMobile .shrUPFC > .shrEmptyState {text-align: center; position: relative; /*top: 15%; left: 50%; transform: translate(-50%, -50%); -webkit-transform: translate(-50%, -50%); -ms-transform: translate(-50%, -50%);*/ text-shadow: 0 1px 0 #fff; color: #4b525c; font-size: 20px; line-height: 50px; display: block; padding-top: 50px;}",".shrMobile .shrUPFC > .shrEmptyState:after {content: attr(secondaryMessage); opacity: 0.5;  text-shadow: 0 1px 0 #fff; color: #4b525c; font-size: 16px; font-weight: 400; line-height: 34px; display: block;}",".shrMobile .shrUPFC > .shrEmptyState:before {content: ''; display: block; margin: auto;}",".shrMobile .shrUPFC > .shrEmptyState.shrRandomPhotoStack:before {width: 287px; height: 133px; ${bg.randomPhotoStack4Mobile}}",".shrMobile .shrUPFC > .shrEmptyState.shrRandomAlbumStack:before {width: 226px; height: 136px; ${bg.randomAlbumStack4Mobile}}",".shrUPConnect .shrGoogleConnectIframe {position: relative;left: 50%;margin-left: -96.5px;background-position: 0 -96px;width: 206px;height: 48px;display: block; border: 0;}".substitute([Shr.Style.formatBackground({file:h.IURL("universalpicker/signin.png"),file2x:h.IURL("universalpicker/signin@2x.png"),width:"193px"})]),".shrUPConnect .shrGoogleConnectIframe:focus, .shrUPConnect .shrGoogleConnectIframe:hover {background-position: 0 -48px;outline: 0;}",".shrUPConnect .shrGoogleConnectIframe:active {background-position: 0 -144px;}",".shrUPConnect .shrGoogleConnectIframe:disabled {background-position: 0 0;}",".shrUPConnect span.spinner {display: none; position: relative; left: 50%; margin-left: -20px; width: 40px; height: 40px; background-size: contain; ${0} }".substitute([Shr.Style.formatBackground({file:h.IURL("universalpicker/smooth_spinner_orange.gif"),file2x:h.IURL("universalpicker/smooth_spinner_orange@2x.gif"),width:"40px"})]),".shrUPConnect.spinner span.spinner {display: block;}",".shrUPConnect.spinner .shrGoogleConnectIframe {display: none;}",".shrUPConnect .shrGoogleConnectIframe.shrDisabled {display: none;}",".shrUPG > LI.shrShowMore > DIV:first-child {display: none;}",".shrUPG > LI.shrShowMore > DIV:before, .shrUPG > LI.shrShowMore > DIV:after  {display: none;}",".shrUPG > LI.shrShowMore {display: block; text-align: left; width: 100%; border: none !important; margin: 15px 0 0 0 !important; background: none !important; height: auto; line-height: normal; font-size: 16px; color: #25292e;}",".shrUPG > LI.shrShowMore > span.shrShowMore:first-of-type {display: inline-block; line-height: 40px; font-weight: 700;font-size: 14px;color: #336699}",".shrUPG > LI.shrShowMore > span.shrShowMore:first-of-type:hover{color:#f05323}",".shrUPG > LI.shrShowMore > span.spinner {display: none;}",".shrUPG > LI.shrShowMore > span:last-child {display: inline-block; line-height: 40px; font-weight: 700; font-size: 14px;color: #929497;}",".shrUPG > LI.shrShowMore.spinner {text-align: center}",".shrUPG > LI.shrShowMore.spinner > span:first-of-type {display: none;}",".shrUPG > LI.shrShowMore.spinner > span:last-child {display: none;}",".shrUPG > LI.shrShowMore.spinner > span.spinner {display: inline-block; width: 40px; height: 40px; background-size: contain; ${0} }".substitute([Shr.Style.formatBackground({file:h.IURL("universalpicker/smooth_spinner_orange.gif"),file2x:h.IURL("universalpicker/smooth_spinner_orange@2x.gif"),width:"40px"})]),""].join("\n").substitute(e)},_end:null}),u)},function(e,t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}try{if(Shr.ScriptManager.throwIfOverridden("Shr.MyComputerDS"),"object"!=r(Shr.Dialogs.UniversalPicker))throw{message:"deferred because local UPP override needs to load first"};Shr.MyComputerDS=function(){var e=document.createElement("input");e.type="file";var t="shrMC",r=Shr.Dialogs.UniversalPicker,n={_folderContent:t+"FC",_empty:"shrEmpty",_overlay:"shrOverlay",_upload:"shrUpload",_input:t+"ITF",_typeError:t+"TypeError",_dialog:"shrUPDlg",_flashWidgets:t+"Widgets",_hidden:t+"Hidden",_html4:t+"HTML4",_dropZone:t+"DropZone"},o={_choose:Shr.Dom.getUniqueId(),_empty:Shr.Dom.getUniqueId(),_chooseFolder:Shr.Dom.getUniqueId()},i=Shr.B.isIE&&Shr.B.ieVersion<9,s=Shr.B.isIE&&Shr.B.ieVersion<10,a=!!("webkitdirectory"in(e||document.querySelectorAll("input[type=file]")[0]))&&!Shr.B.isEdge,l=!!("FileReader"in window),c=!l&&function(){var e=!1;if(!i)try{e=!!(void 0===navigator.plugins||0==navigator.plugins.length?new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash"):navigator.plugins["Shockwave Flash"])}catch(e){}return e}(),d=window.trUPP,h=d&&d.util||Shr,u=new r.Sink({isDataSink:c,dataSourceType:r.Source.DataSourceType.upload,_contentClassName:[n._folderContent],L10N:{dragDrop:"<span style='font-weight:bold'>Drag and drop</span> ${0} from<br/>your computer ${1}",or:"or",empty:{text:"CHOOSE ${0}"},button:"CHOOSE ${0}",itemsName:"photos",itemName:"a photo",itemsNAME:"PHOTOS",itemNAME:"PHOTO",emptyButton:"CHOOSE ${0}",chooseFolder:"CHOOSE FOLDER",_end:null},folders:[],albums:[],init:function(e){e.singleSelect;var t=(e.singleSelect?"${itemName}":"${itemsName}").localize(this),i=(e.singleSelect?"${itemNAME}":"${itemsNAME}").localize(this),s="${or}".localize(this),d=("${button}".localize(this,[i]),this.isDevice&&"${device.prompt}".localize(this)),h=this.isDevice?d:"${dragDrop}".localize(this,[t,s]),p="";this._context=e,this.isDevice?(Shr.MyComputerDS.isDevice=!0,this.title=(Shr.B.isIos?"${device.library}":"${device.gallery}").localize(this)):this.title=this.device?this.device.title:"${title}".localize(this),p=Shr.Html.formatTag("span",{},h),p+=Shr.Button.format("${emptyButton}".localize(this,[i]),{className:"needsclick",onclick:this._onClick.bind(this,o._empty,"file"),id:o._empty,tabindex:"0"}),a&&(p+=Shr.Button.format("${chooseFolder}".localize(this,[i]),{className:"needsclick",onclick:this._onClick.bind(this,o._chooseFolder,"folder"),id:o._chooseFolder,tabindex:"0"})),p=Shr.Html.formatTag("div",{},p),this.empty=Shr.Html.formatTag("div",{className:n._upload},p),this.items=[],Object.defineProperty(this,"formatContent",{get:function(){return function(e,t){return t(this),this.empty}}}),this._useFlash=this.isDataSink=r.context.useFlash||c,this._html5=l&&!r.context.useHTML4,this.noZoom=!this._html5&&!this._useFlash,this.contentClassName=this._contentClassName,this.noZoom&&this.contentClassName.push(n._html4),this.noZoom=this.noZoom||Shr.B.isGecko,u._flashWidgets={},this.log={picturesCount:0,failedCount:0,totalTime:0,totalBytes:0}},getContents:function(){var e=u._flashWidgets[o._empty];return Shr.Dom.onContentReady(o._empty,u._bind.bind(this,o._empty,null,"file")),a&&Shr.Dom.onContentReady(o._chooseFolder,u._bind.bind(this,o._chooseFolder,null,"folder")),this.items.length?e&&this._useFlash&&Shr.ClassToggle.toggle(e.embed,n._hidden,!0):(Shr.Dom.onContentReady(o._empty,u._bind.bind(this,o._empty,null,"file")),a&&Shr.Dom.onContentReady(o._chooseFolder,u._bind.bind(this,o._chooseFolder,null,"folder")),e&&this._useFlash&&Shr.ClassToggle.toggle(e.embed,n._hidden,!1)),this.autoUploads&&(this._onChange({files:this.autoUploads}),delete this.autoUploads),!0},onblur:function(){Shr.L.tryToCall(r.Html5Item.resetQueue)},renderStyle:function(e){e(u._formatStyle())},onItemSelected:function(e,t){var r=e.source==this;return r&&(u._flashWidgets[e.location.location].items[e.location.data]={item:e,update:t}),r},onItemDeselected:function(e){e.selected=!1},start:function(e){Shr.L.forEach(u._flashWidgets,function(e){var t=[];e.items.reverse(),Shr.L.forEach(e.items,function(r,n){r.item.selected?t.push(r):this._callFlash(e,"onUserFileDelete",n)}.bind(this)),t.length&&(e.items=t.reverse(),this.log.picturesCount+=t.length,u._callFlash(e,"onUserUpload"))}.bind(this))},_end:null});return Object.extend(u,{_albumName:function(){return(new Date).dateFormat("${upload.albumName}".localize(r))},_input:void 0,_inputFolder:void 0,_bind:function(e,t,i){var l,c,d=Shr.Dom.get(e),h=(c=["image/jpeg"],Shr.B.isFF&&(c.push(".jpg"),c.push(".jpeg")),r.context.enableVideos&&(c.push("video/*"),(Shr.B.isFF||Shr.B.isSafari)&&(c=c.concat([".flv",".mp4",".mp2",".mpeg",".mpg",".mov",".qt",".asf",".avi",".movie",".m4v",".dv",".mts",".m2ts",".3gpp",".3gp",".wmv"]))),c.join(",")),u=function(e){return Shr.Dom.create("input",document.body,{name:e,type:"file",className:[n._input].join(" "),onchange:this._onChange.bind(this),accept:h,value:" "})}.bind(this),p=function(e){return Shr.Dom.create("input",document.body,{name:e,type:"file",className:[n._input].join(" "),onchange:this._onChange.bind(this),value:" ",webkitdirectory:!0,mozdirectory:!0,directory:!0})}.bind(this),m=function(e){var t=document.getElementsByName(e);t.length&&(t=t[0]).parentNode.removeChild(t)},g="folder"===i?this._inputFolder:this._input;if(this._useFlash)this._bindWidget(e);else if("file"===i?g||(m(o._empty),g=this._input=u(e),this._html5&&(r.context.singleSelect||(g.multiple="multiple"))):"folder"===i&&(g||(m(o._chooseFolder),g=this._inputFolder=p(e))),s)if(void 0===t)for(t=0;d.offsetWidth>80*t;t++)this._bind(e,t,i);else Shr.Dom.get(e+"_"+t)?g.parentNode.removeChild(g):(Shr.Dom.addClass(g,n._overlay),this._getWidgetDiv(e).appendChild(g.parentNode.removeChild(g)),g.id=g.name+"_"+t,this._bindWidget(e,g,t)),g=void 0;else this._html5&&(l=Shr.Dom.getChildByClass(document.body,this.contentClassName))&&(r.context.formatHeader&&(l.onclick=this._onClick.bind(this,"folder"===i?o._chooseFolder:o._empty,i),l.style.cursor="pointer"),l.ondragover=function(e){var t=!1,o=0;return Shr.Event.stop(e),e.dataTransfer&&e.dataTransfer.items&&!Shr.B.isSafari?(o=e.dataTransfer.items.length||0,Shr.L.forEach(e.dataTransfer&&e.dataTransfer.items,function(e){return!(t=(t=a?"image/jpeg"==e.type||"application/x-moz-file"==e.type||""===e.type:"image/jpeg"==e.type||"application/x-moz-file"==e.type)||r.context.enableVideos&&e.type.match(/^video\/*/))})):e.dataTransfer&&e.dataTransfer.types&&(o=-1)!=Shr.Array.indexOf(e.dataTransfer.types,"Files")&&(t=!0),t&&r.context.singleSelect&&1<o&&(t=!1),e.dataTransfer&&(e.dataTransfer.dropEffect=t?"copy":"none"),window.clearTimeout(this._removeDropZone),Shr.ClassToggle.toggle(l,n._dropZone,t),!1}.bind(this),l.ondragleave=function(e){e.target==l?Shr.ClassToggle.toggle(l,n._dropZone,!1):(window.clearTimeout(this._removeDropZone),this._removeDropZone=window.setTimeout(Shr.ClassToggle.toggle.bind(Shr.ClassToggle,l,n._dropZone,!1),100))}.bind(this),l.ondrop=function(e){return Shr.Event.stop(e),a&&e.dataTransfer.items&&e.dataTransfer.items.length&&null!=e.dataTransfer.items[0].webkitGetAsEntry?this._addFilesFromItems(e.dataTransfer.items):this._onChange(e.dataTransfer),Shr.ClassToggle.toggle(l,n._dropZone,!1),!1}.bind(this))},_bindWidget:function(e,t,r){var n=t||this._flashWidgetFor(e),o=Shr.Dom.getPageBounds(n.offsetParent),a=Shr.Dom.getPageBounds(e);r=r||0,Shr.Dom.setBoundsRect(n,{x:a.x-o.x+80*r,y:a.y-o.y,width:i||s&&t?Math.min(80,a.width-80*r):a.width,height:a.height})},showTrace:!/prod|stage/.test(Shr.AS.getEnv()),_flashWidgets:{},_flashWidgetFor:function(e){var t,o,i,s={callbackObjectName:"Shr.MyComputerDS._flashWidgets."+e,maxFileSize:10*Math.pow(2,20),totalUploadSize:Math.pow(2,32)-1,fileTypeDesc:"jpeg files",fileTypeExts:[".jpg",".JPG",".jpeg",".JPEG"].join(","),isSingleFile:!!r.context.singleSelect,showTrace:u.showTrace,useFileExtensionFilter:"true"},a={allowScriptAccess:"always",movie:Shr.FlashSrc.universalPicker,loop:"false",quality:"high",scale:"noScale",salign:"lt",wmode:"transparent",FlashVars:(o=s,i=[],Shr.L.forEach(o,function(e,t){i.push(t+"="+encodeURIComponent(e))}),i.join("&"))},l=u._flashWidgets[e],c=this._getWidgetDiv(e);return l||(l=u._flashWidgets[e]={id:e,embedId:Shr.Dom.getUniqueId(),items:[]},Shr.L.forEach({onListChange:this._onListChange,onPrepareUpload:this._onPrepareUpload,onUploadProgress:this._onUploadProgress,onUploadComplete:this._onUploadComplete,onUploadCompleteData:this._onUploadCompleteData,onInitDone:this._onInitDone,onAddFile:this._onAddFile,onUploadOpen:this._onUploadOpen,onUploadHTTPError:this._onUploadHTTPError,onUploadIOError:this._onUploadIOError,onUploadSecurityError:this._onUploadSecurityError,onUploadCancel:this._onUploadCancel,onUploadOtherError:this._onUploadOtherError,onThumbnailUrl:this._onThumbnailUrl,onTrace:this._onTrace},function(e,t){e&&(l[t]=e.bind(this,l))}.bind(this)),t=new Shr.StringBuilder,Shr.FlashElement.render(t.write,{id:l.embedId,className:n._overlay},a),l.embed=Shr.Dom.create("div",c,{},t.toString()).firstChild),l.embed},_widgetDiv:void 0,_getWidgetDiv:function(e){var t=Shr.Dom.getParentByClass(Shr.Dom.get(e),n._dialog);return this._widgetDiv||(this._widgetDiv=Shr.Dom.create("div",null,{className:n._flashWidgets}),Shr.Dom.insertAfter(Shr.Dom.getChildByClass(t,n._folderContent),this._widgetDiv)),this._widgetDiv},_onClick:function(e,t,r){var n,o=!1,i="folder"===t?this._inputFolder:this._input;return this._html5?i.click():s?o=!0:((n=i.cloneNode(!0)).id=Shr.Dom.getUniqueId(),n.click()),document.body.onfocus=this._bodyFocus.bind(this),o},_bodyFocus:function(){document.body.onfocus=null,r.context.bypass&&r.context.filepicker&&!this._inputFolder.value.length&&!this._input.value.length&&window.setTimeout(r._onDone,250)},_onChange:function(e,t){var n,o=[],i=[],a=[],l=[],c=function(e){return!e.error&&(e.type?"image/jpeg"==e.type:e.name.match(/\.(jpg|jpeg)$/i))},d=function(e){return e.split(/[\/\\]/).pop()},u=0,p=function(e,n){n?l.push(e):(u++,o.push(e.location)),(e=a.shift())?m(e.location)?p(e,!0):r.Html5Item.testJPEG(e,p):(document.body.style.cursor="",u&&r.Log.metric("invalidJPEG.header",u,void 0,"count"),this._onChangeComplete(o,i,l,t))}.bind(this),m=function(e){return(e.type||"").match(/^video\/.*/)},g=function(e){n=new r.Html5Item(e),a.push(n)};if(this._html5||this._useFlash){var f=e.files||e.target.files;Shr.L.forEach(f,function(e){m(e)&&r.context.enableVideos?g(e):c(e)?g(e):"size"==e.error?i.push(e):o.push(e)}.bind(this))}else c({name:e.value})?(a.push(new r.Item({title:d(e.value),id:this.items.length,location:e,selected:!0,autoSelect:!0,showTitle:!0,getThumbnailUrl:function(){return h.IURL("universalpicker/imgnotavailable.png",!0)}})),s&&(e.id="")):o.push({name:d(e.value)});o.length&&r.Log.metric("invalidJPEG.extension",o.length,void 0,"count"),i.length&&r.Log.metric("invalidJPEG.size",i.length,void 0,"count"),this._html5&&a.length?(document.body.style.cursor="wait",n=a.shift(),m(n.location)?p(n,!0):r.Html5Item.testJPEG(n,p)):this._onChangeComplete(o,i,a,t),e.value=""},_addFilesFromItems:function(e){var t,r=this,n=function(e,t,r){return window.trUPP.Promise.all(Shr.Array.map(e,function(e){return o(e,t,r)}))},o=function(e,t,r){return new window.trUPP.Promise(function(o,i){var s,a=function(t){t&&!t.entry&&(t.entry=e),o([t])};r=r||"",e.isFile?e._file?(e._file.fullPath=r+e._file.name,o(e._file)):e.file(function(e){e.fullPath=r+e.name,o(e)},a):e.isDirectory?(s=e.createReader()).readEntries(function i(l){n(l,[],r+e.name+"/").then(function(e){t=t.concat(e),0<l.length&&null!=s?s.readEntries(i,a):o(t)}).catch(a)},a):o([])})};return n(Shr.Array.map(e,function(e){return null!=e.webkitGetAsEntry&&(t=e.webkitGetAsEntry())&&t?(t._file=e.getAsFile(),t):e.getAsEntry()}),[]).then(function(e){var t=[];!function e(r){Shr.L.forEach(r,function(r){Shr.L.isArray(r)?e(r):t.push(r)})}(e),r._onChange({files:t})})},_onChangeComplete:function(e,t,o,i){e.length&&(e=Shr.Array.map(e,function(e){return e.name||"?"}),e=Shr.Html.formatTag("pre",{className:[n._typeError,"shrRH"]},e.join("\n")),r.Source.alert("${typeError.text}".localize(r,[e]),"${typeError.title}".localize(r))),t.length&&(t=Shr.Array.map(t,function(e){return e.name||"?"}),t=Shr.Html.formatTag("pre",{className:[n._typeError,"shrRH"]},t.join("\n")),r.Source.alert("${sizeError.text}".localize(r,[t]),"${sizeError.title}".localize(r))),o.length&&r.Source.canSelect(o.length)?(Shr.L.forEach(o,function(e){var t,n;if(window.trUPP&&window.trUPP.util||Shr,this._useFlash&&(n=(t=u._flashWidgets[e.location.location]).items.length,t.items.push(e),e.getThumbnailUrl=function(e,t,r,n,o){var i=Shr.ImgSrc.blank2;return e.items[t].set=o,e.items[t].thumbnail?i=e.items[t].thumbnail:(i=e.items[t].thumbnail=h.IURL("universalpicker/imgloading_overgray.gif"),this._callFlash(e,"getThumbnailUrl",t,r,n)),i}.bind(this,t,n)),this.items.push(e),Shr.U.useNewAuth&&Shr.U.status===Shr.U.Status.signedOut)return window.setTimeout(r._onDone,250)}.bind(this)),r.refresh(this)):o.length&&this._useFlash&&Shr.L.tryToCall(i)},_callFlash:function(e,t){var r='<invoke name="'+t+'" returntype="javascript">'+window.__flash__argumentsToXML(arguments,2)+"</invoke>";try{e.embed.CallFunction(r)}catch(e){Console.write("MyComputerDS._callFlash method="+t+" fn="+r+" threw:"+e.message)}},_onSuccess:function(e,t,n){var o=e.items[t];o.item.state=r.Sink.state.done,o.item.progress=1,Shr.U.id?o.item.type=r.Item.type.sfly:o.item.type=r.Item.type.anonymous,this.log.totalTime+=Date.now()-o.item.start,this.log.totalBytes+=o.item.size,o.item.id=n,Shr.L.tryToCall(o.update),this._callFlash(e,"onUploadCompleteDataResponse",t,!0)},_onError:function(e,t,n,o){var i=e.items[t];i.item.state=r.Sink.state.error,this.log.failedCount++,r.Error.log(null,i.item.uploadUrl,{status:n}),Shr.L.tryToCall(i.update),this._callFlash(e,"onUploadCompleteDataResponse",t,!1)},_onListChange:function(e,t,r,n,o,i){window.setTimeout(u.__onListChange.bind(this,e,t,r,n,o,i),0)},__onListChange:function(e,t,r,n,o,i){try{var s=[];Shr.L.forEach(t,function(t,r){var n;r>=e.items.length&&(n={name:t.name,size:t.size,location:e.id,data:e.items.length+s.length},s.push(n))}),Shr.L.forEach(r,function(e){s.push({name:e.name,size:e.size,error:"size"})}),Shr.L.forEach(n,function(e){s.push({name:e.name,size:e.size,error:"type"})}),s.length&&window.setTimeout(function(){this._onChange({files:s},function(){this._callFlash(e,"onUserFileDeleteMultiple",Shr.Array.getLength(e.items),s.length)}.bind(this))}.bind(this),0)}catch(t){window&&window.trUPP&&window.trUPP.Timing&&window.trUPP.Timing.recordInfo("upp_exception",{ex_message:t.message,ex_stack:t.stack}),Console.write("onListChange threw: "+t.message),Console.write(t.stack||"(no stack trace)")}},_onPrepareUpload:function(e,t){var n,o=["http:/",Shr.AS.up,"services","shutterfly-upload"].join("/"),i=e.items[t].item;n=r.Sink.destinationAlbumId()?{url:[o,Shr.U.id,"images"].join("/")+"?albumId=${0}".substitute([encodeURIComponent(r.Sink.destinationAlbumId())]),dataFieldName:"Image.Data"}:{url:[o,Shr.U.id,"images"].join("/")+"?folderTitle=${0}&albumName=${1}".substitute([encodeURIComponent(r.Sink.destinationFolderName()),encodeURIComponent(r.Sink.destinationAlbumName())]),dataFieldName:"Image.Data"},Shr.U.id?i.uploadUrl=o:(n.url=["http:/",Shr.AS.up,"UploadImage"].join("/"),n.args={IsAnonymousUpload:"true",IncludeIID:"true",PartnerID:"SFLY",PartnerSubID:"WEB"},i.uploadUrl=n.url),i.state=r.Sink.state.xfer,i.progress=0,i.start=Date.now(),this._callFlash(e,"onUploadFile",n)},_onUploadProgress:function(e,t,r,n){var o=e.items[t];o.item.progress=r/n,Shr.L.tryToCall(o.update)},_onUploadComplete:function(e,t){},_onUploadCompleteData:function(e,t,r){var n;e.items[t],Shr.U.id?(n=Object.fromString(decodeURIComponent(r)))&&n.numSuccess&&this._onSuccess(e,t,n.images[0].plainMspImagePath):(n=decodeURIComponent(r)).match(/Success=1/)?this._onSuccess(e,t,n.match(/iid0=(.*?)\</)[1],!0):this._onError(e,t,500)},_onInitDone:function(e,t){},_onAddFile:function(e){},_onUploadOpen:function(e,t){},_onUploadHTTPError:function(e,t,r,n){this._onError(e,t,r,n)},_onUploadIOError:function(e,t,r,n){this._onError(e,t,r,n)},_onUploadSecurityError:function(e,t,r,n){this._onError(e,t,r,n)},_onUploadCancel:function(e,t){},_onUploadOtherError:function(e,t){this._onError(e,t,"other")},_onThumbnailUrl:function(e,t,r){window.setTimeout(function(){var n=e.items[t];r?(n.thumbnail=r,Shr.L.tryToCall(n.set,r)):Console.write("Error loading Flash thumbnail")}.bind(this),0)},_onTrace:function(e,t){var r=new Date;Console.write("MyComputerDS:onTrace ${0}:${1}:${2}${3} widget=${4} msg=${5}".substitute([r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()/1e3,e.embedId,t]))},_formatStyle:function(){var e={bg:{arrow:"url(${0})".substitute([h.IURL("universalpicker/desktopIcons.png")]),empty:Shr.Style.formatBackground({file:h.IURL("universalpicker/imgMyComputerUpload.png"),file2x:h.IURL("universalpicker/imgMyComputerUpload@2x.png"),width:"120px"}),clouds:Shr.Style.formatBackground({file:h.IURL("universalpicker/clouds.png"),file2x:h.IURL("universalpicker/clouds@2x.png"),width:"290px"})},id:{choose:o._choose,empty:o._empty},fonts:{avenir65Medium:Shr.Style.parameters.fonts.avenir65Medium}},t=[".shrMCFC {position: relative !important; text-align: center;}",".shrMCFC .shrUPGrid {position: relative !important; text-align: left;}",".shrMCFC > .shrUpload {margin: 0 !important; padding: 0 !important;}",".shrMCFC > .shrUpload {display: inline-block !important; position: relative; width: 98%; height: 98%; top: -25px !important;}","HEADER + .shrMCFC > .shrUpload {top: 0 !important;}",".shrMCFC > .shrUpload {border: 2px dashed #ccc; border-radius: 6px;}",".shrMCFC > .shrUpload {overflow: hidden;}",".shrMCFC > .shrUpload > DIV > * {display: block; width: 100%;}",".shrMCFC > .shrUpload SPAN {font-size: 16px; color: #777;}",".shrMCFC > .shrUpload > DIV > SPAN:first-child {padding-top: 140px; color: #4b525c; ${bg.clouds}; background-position: center top;}",".shrMCFC > .shrUpload:before {content: none;}",".shrMCFC.shrMCDropZone:after {content: ''; display: block; position: absolute; top: 0; bottom: 0; left: 0; right: 0;}",".shrMCFC.shrMCDropZone:after {background-color: #000; opacity: 0.5;}",".shrMCFC.shrMCDropZone > .shrUpload > DIV > SPAN:first-child {z-index: 2; color: #fff;}","PRE.shrMCTypeError {height: 100px; overflow: auto; margin: 1em 0; padding: 1px 3px 0; background-color: #eee; border: 1px solid #58595b;}","INPUT.shrMCITF {display: none;}",".shrUPSrc_myComputer .shrUPNavBar {visibility: hidden !important;}",".shrUPnewPP.shrUPWide .shrMCFC > .shrUpload SPAN {font-size: 16px; color: #4b525c;}",".shrMCFC > .shrUpload > DIV {position: relative; top: 50%; transform: translateY(-50%);}",".shrMCFC > .shrUpload A.sflyButton {margin: 0 auto; margin-top: 25px;}",".shrMCFC > .shrUpload A.sflyButton {margin-left: 12px; margin-right: 12px;}",".shrUPNarrow .shrMCFC > .shrUpload {position: absolute; top: 0; left: 0; bottom: 0; right: 0;}","@media (orientation: landscape) {",".shrUPNarrow .shrMCFC > .shrUpload SPAN:first-child {}",".shrUPNarrow .shrMCFC > .shrUpload A.sflyButton {}","}",".shrUPFC:not(.shrMCFC) + .shrMCWidgets EMBED, .shrMCWidgets EMBED.shrMCHidden {top: 0 !important; left: 0 !important; width: 1px !important; height: 1px !important;}",".shrUPFC:not(.shrMCFC) + .shrMCWidgets OBJECT, .shrMCWidgets OBJECT.shrMCHidden {top: 0 !important; left: 0 !important; width: 1px !important; height: 1px !important;}",".shrMCHTML4 LI:before {content: none !important;}",".shrMCHTML4 .shrTitle {text-align: left; font-size: 13px; line-height: 38px; width: 120px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;}",""];return s?t.splice(-1,0,".shrMCITFP {overflow: hidden;}","INPUT.shrMCITF {display: block; zoom: 1; cursor: pointer; ${0};}".substitute([Shr.Style.formatOpacity(0)]),""):Shr.B.isIE&&t.push(".shrMCFC > .shrUpload > .sflyButton {position: absolute; left: 50%; margin-left: -122px;}"),t.join("\n").substitute(e)},_end:null}),u}()}catch(e){window&&window.trUPP&&window.trUPP.Timing&&window.trUPP.Timing.recordInfo("upp_exception",{ex_message:e.message,ex_stack:e.stack}),Console.write("Error loading mycomputerds.js: "+e.message)}},function(e,t){Shr.sitesDS=function(){var e=Shr.Dialogs.UniversalPicker,t=void 0,r={className:"shrUPSS",dataSourceType:e.Source.DataSourceType.sites,L10N:{title:"Share sites",pseudoPageTitle:{featuredPictures:"Featured Pictures",taggedPictures:"Tagged Pictures"},error:{sites:"the list of your Shutterfly Share sites",pages:"the list of pages on this site",images:"the list of photos in this album",taggedPictures:"the list of pictures with this tag"},sortChoices:{sites:{byRole:"By role (owner/member)",images:"the list of photos in this album"},sitePages:{modifiedNewToOld:"Updated (new - old)",modifiedOldToNew:"Updated (old - new)"},siteAlbums:{dateTakenNewToOld:"Date taken (new-old)",dateTakenOldToNew:"Date taken (old-new)",uploadedNewToOld:"Date uploaded (new-old)",uploadedOldToNew:"Date uploaded (old-new)",index:"Default (album order)"}}},init:function(e){(t=this).title="${title}".localize(this)}};function n(e){return new r.Item({id:e.shutterflyId,shutterflyId:e.shutterflyId,nodeType:"shutterflyItem",title:e.title,date:1e3*(e.captureDate||e.modified||e.created||0),location:"share:///"+e.shutterflyId,captureDate:e.captureDate||e.created,created:e.created,data:e})}r.Album=Object.extend(function(t,r,n){this.isTag=n,this.sortOrder="index",e.Album.call(this,t,r),this.siteId=t.siteId},{prototype:Object.extend({},e.Folder.prototype,{getContents:function(o){return this.items||(this.getAlbumCmdArgs.access_token=o,Shr.C.beginExec(this.getAlbumCmd,this.getAlbumCmdArgs,Shr.L.hitch(this,function(o){if(o&&!o.error&&o.result){this.items=[];var i=this.isTag,s=i?Object.get("result.section.contentTags",o):o.result.items;Shr.L.forEach(s,Shr.L.hitch(this,function(e,t){var o,s,a=i?(s=(o=e).item,new r.Item({id:s.pictureId,shutterflyId:s.pictureId,nodeType:"shutterflyItem",title:s.title,location:"share:///"+s.pictureId,data:o})):n(e);a.index=t,this.items.push(a)}))}else e.Error.log(this,this.getAlbumCmd,{status:o.error&&o.error.type||"???"},"${error.text}".localize(e,[(this.isTag?"${error.taggedPictures}":"${error.images}").localize(t)]));e.refresh(this.refresh||this)}),void 0,!0)),!!this.items},getThumbnailUrl:function(t,r){return this.shutterflyId?Shr.Sfly.formatImgSrc({shutterflyId:this.shutterflyId},Math.max(t,r)):e.Folder.prototype.getThumbnailUrl.apply(this,arguments)},getSortChoices:function(){var e={};return Shr.L.forEach({"captureDate desc":"${sortChoices.siteAlbums.dateTakenNewToOld}","captureDate asc":"${sortChoices.siteAlbums.dateTakenOldToNew}","created desc":"${sortChoices.siteAlbums.uploadedNewToOld}","created asc":"${sortChoices.siteAlbums.uploadedOldToNew}",index:"${sortChoices.siteAlbums.index}"},function(r,n){e[n]=r.localize(t)}),e}})}),r.Item=Object.extend(function(t){e.Item.call(this,t)},{prototype:Object.extend({},e.Item.prototype,{getThumbnailUrl:function(e,t){return Shr.Sfly.formatImgSrc(this,Math.max(e,t))}})}),r.Site=function(t,r){e.Folder.call(this,t,r),this.siteId=this.id},r.Site.prototype=Object.extend({},e.Folder.prototype,{getContents:function(r){if(!this.folders){var n=Shr.C.getSiteCommand("sfly/getsitefoldersjs",this.id)+"usejwt_token=true",o={format:"js",module:"Pictures,BabyMilestones,Picture,Marquee",access_token:r};Shr.C.beginExec(n,o,Shr.L.hitch(this,function(s){s&&!s.error&&s.result?(this.folders=[],this.albums=[],this.items=[],i(this,r,o.module,s)):e.Error.log(this,n,{status:s.error&&s.error.type||"???"},"${error.text}".localize(e,["${error.pages}".localize(t)])),e.refresh(this)}),void 0,!0)}return!!this.folders},getThumbnailUrl:function(e,t){var r;return this.coverImage&&(r=Shr.Sfly.formatImgSrc({shutterflyId:this.coverImage},Math.max(e,t))),r},getSortChoices:function(){},noLog:!0}),r.Album.createItem=n,r.Page=function(t,r){e.Folder.call(this,t,r),this.siteId=t.siteId,this.folders=[],this.items=[]},r.Page.prototype=Object.extend({},e.Folder.prototype,{getContents:function(){return!0},getSortChoices:function(){var r=e.Folder.prototype.getSortChoices.call(this);return Shr.L.forEach({"modifiedInSeconds desc":"${sortChoices.sitePages.modifiedNewToOld}","modifiedInSeconds asc":"${sortChoices.sitePages.modifiedOldToNew}"},function(e,n){r[n]=e.localize(t)}),r},noLog:!0});var o=function(e){return Shr.L.isArray(e)?e:Shr.L.isNullOrUndefined(e)?[]:[e]};r._defaultSitesSortOrder="owned desc,title",r.getContents=function(n){if(!this.folders){var o="ofly/getusersites",i={format:"js",fields:"Role,FirstSection,SiteDetails,Keys,permission,coverimage",module:"Pictures,BabyMilestones,Picture,Marquee",access_token:n};this.site?this.folders=[new this.Site(this,this.site)]:this.data?(this.folders=[],Shr.L.forEach(this.data,function(e){this.folders.push(new this.Site(this,e))}.bind(this))):Shr.C.beginExec(o,i,Shr.L.hitch(this,function(n){n&&!n.error&&n.result?(this.folders=[],this.sortOrder=r._defaultSitesSortOrder,Shr.L.forEach(n.result.sites,Shr.L.hitch(this,function(t){!e.context.noSelect&&t.noSave||this.folders.push(new r.Site(this,{title:t.title,id:t.id,owned:-4==t.role,coverImage:t.coverImage}))})),this.folders=Shr.Array.sortByProperty(this.folders,this.sortOrder)):e.Error.log(this,o,{status:n.error&&n.error.type||"???"},"${error.text}".localize(e,["${error.sites}".localize(t)])),e.refresh(this)}),null,!0)}return!!this.folders},r.getSortChoices=function(){var n=e.Folder.prototype.getSortChoices.call(this);return n[r._defaultSitesSortOrder]="${sortChoices.sites.byRole}".localize(t),n};var i=function(n,i,s,a){var l,c,d,h,u,p=s.split(","),m=Object.get("result.response.result",a);m&&(c=n,d=i,h=a.result.siteTags,u=new r.Page(c,{title:"${pseudoPageTitle.taggedPictures}".localize(t),id:c.id,albums:[],sortOrder:"title asc",getSortChoices:function(){return e.Folder.prototype.getSortChoices.call(this)}}),Shr.L.forEach(h,function(e){e.count&&u.albums.push(new r.Album(u,{id:e.id,title:e.title,parent:u,getAlbumCmd:Shr.C.getSiteCommand("tagsmanagement/gettags",c.id)+"usejwt_token=true",getAlbumCmdArgs:{tag:e.id,size:"all",access_token:d}},!0))}),(l=u).albums.length&&n.folders.push(l),Shr.L.forEach(o(Object.get("site.pages.page",m)),function(e){var s,a,c,d,h=e.sections&&o(e.sections.section)||[],u=[];l=new r.Page(n,{title:e.title,id:e.id,albums:[],items:[],sortOrder:"modifiedInSeconds desc"}),s=h,a=p,c=l,d=i,Shr.L.forEach(["Marquee","Picture"],function(e){if(-1!=Shr.Array.indexOf(a,e)){var n={count:0},o=[];Shr.L.forEach(Shr.Array.filterByProperty(s,"module",e),function(e){e.count=parseInt(e.count),e.count&&(n.count+=e.count,o.push(e.id))}),n.count&&(n.id=e+":"+o.join(","),c.albums.push(new r.Album(c,{id:n.id,title:"${pseudoPageTitle.featuredPictures}".localize(t)||"&nbsp;",parent:c,getAlbumCmd:Shr.C.getSiteCommand("pictures/getalbumpictures",c.id)+"usejwt_token=true",getAlbumCmdArgs:{parent:n.id,page:c.id,access_token:d}})))}}),u=l.albums||[],l.albums=[],Shr.Array.remove(p,"Marquee"),Shr.Array.remove(p,"Picture"),Shr.L.forEach(e.sections&&o(e.sections.section),function(e){-1!=Shr.Array.indexOf(p,e.module)&&Shr.L.forEach(o(e.folders&&e.folders.folder),function(e){e.count&&l.albums.push(new r.Album(l,{id:e.id,title:e.title,count:e.count,modifiedInSeconds:e.modifiedInSeconds,parent:l,shutterflyId:e.shutterflyId,getAlbumCmd:Shr.C.getSiteCommand("pictures/getalbumpictures",n.id)+"usejwt_token=true",getAlbumCmdArgs:{parent:e.id,page:l.id,access_token:i}}))})}),(l.albums.length||u.length)&&(l.albums=u.concat(Shr.Array.sortByProperty(l.albums,l.sortOrder)),n.folders.push(l))}))};return r}()},function(e,t){var r,n,o;Shr.stockphotosDS=new(o=Shr.Dialogs.UniversalPicker).Folder({},{id:"stockphotos",title:"${title}",uses:"Shr.ThisLifeDS",dataSourceType:o.Source.DataSourceType.sfly,L10N:{error:{story:{getStockCategories:"We were unable to get a list of the stock photo categories.<br/><br/>${0}"}}},init:function(e){r=this,n=Object.extend({},Shr.ThisLifeDS),this.title="${title}".localize(r)},getContents:function(e){var t=!1,i="story.getStockCategories",s=function(e,t){o.Error.log(this,n.getLastAPI(),e,["${error.",i,"}"].join("").localize(r,[t]))}.bind(this);return this.albums?t=!0:n.api(i,[e],function(e){var t;200<=e.status&&e.status<300?(t=e.responseObj)&&t.result&&t.result.success?(this.albums=[],Shr.L.forEach(t.result.payload,function(e,t){var r,i=e.story,s=Number.MAX_VALUE,a=i.name;"My Story"!=i.name&&((r=a.match(/\$\d*/))&&(s=parseInt(r[0].substr(1)),a=a.replace(/\$\d*\s*/,"")),i.visible_moment_count&&this.albums.push(new n.Story(this,{id:i.uid,title:a,count:i.visible_moment_count,cover_uid:i.cover_moment_uid,owner:i.cover_owner_uid,api:"story.getStockCategory",data:i,index:s,index2:t,onItemsLoaded:function(){Shr.L.forEach(this.items,function(e){e.mPath=e.location,e.type=o.Item.type.stockphoto})},getSortChoices:function(){return{}}})))}.bind(this)),this.albums=Shr.Array.sortByProperty(this.albums,"index asc,index2 asc")):s(e,t.result.message):s(e),o.refresh(this)}.bind(this)),t},onclick:o.Source.prototype.onclick})},function(e,t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}try{if(Shr.ScriptManager.throwIfOverridden("Shr.ThisLifeDS"),"object"!=r(Shr.Dialogs.UniversalPicker))throw{message:"deferred because local UPP override needs to load first"};Shr.ThisLifeDS=function(){Shr.AS.tl||("prod"==Shr.AS.getEnv()?Shr.AS.tl="cmd.thislife.com":Shr.AS.tl="cmd.${0}.thislife.com".substitute([Shr.AS.getEnv()]));var e,t,r,n,o,i="shrTL",s=Shr.Dialogs.UniversalPicker,a=window.trUPP,l=a&&a.util||Shr,c={_folderContent:i+"FC",_dayTitle:i+"Day",_year:i+"Year",_timelineFolder:i+"TimelineFolder",_albumsFolder:i+"AlbumsFolder",_peopleFolder:i+"peopleFolder",_people:i+"people",_placesFolder:i+"placesFolder",_tagsFolder:i+"tagsFolder",_recentUploads:i+"Recent",_lifetouch:i+"Lifetouch",_favoritesFolder:i+"FavoritesFolder",_folder:"Folder",_selected:"shrSelected",_empty:"shrEmpty",_busy:"shrBusy",_migrationInProgress:"shrBusyMigration",_overlay:"shrOverlay",_shrEmptyState:"shrEmptyState",_shrRandomFavPhotoStack:"shrRandomFavPhotoStack",_shrRandomPhotoStack:"shrRandomPhotoStack",_shrRandomAlbumStack:"shrRandomAlbumStack",_shrRandomLifetouchStack:"_shrRandomLifetouchStack",_new:"shrUPNew",_etv:i+"ETV"},d={2:1,12:2,1:3,3:4},h=(Shr.Dom.getUniqueId(),Shr.Dom.getUniqueId(),0),u=["https:/",Shr.AS.tl,"json",""].join("/"),p=function(){return{"date desc":"${sortChoices.newestToOldest}".localize(t),"date asc":"${sortChoices.oldestToNewest}".localize(t)}},m=function(e,r){return{"title asc":("${sortChoices."+(e||"nameAToZ")+"}").localize(t),"title desc":("${sortChoices."+(r||"nameZToA")+"}").localize(t)}},g=function(){return 1.5<window.devicePixelRatio?l.IURL("universalpicker/iconsprite@2x.png"):l.IURL("universalpicker/iconsprite.png")},f=function(e){return Shr.Html.formatTag("div",{className:e.className,secondaryMessage:e.secondaryMessage||""},e.primaryMessage)},_=Object.extend(function(e,t){s.Folder.call(this,e,Object.extend({},t,{id:t.term,title:t.term.toString()}))},{prototype:Object.extend({},s.Folder.prototype,{getContents:function(e){var n=this.folders&&this.albums&&this.items;return this.args=[e,r],n||b._api("upp",this.args,function(e){var r;200<=e.status&&e.status<300&&(r=e.responseObj)&&r.result&&r.result.success?(this.folders=[],this.albums=[],this.items=[],Shr.L.forEach(r.result.payload,function(e){var t=e.term&&parseInt(e.term)||0;t.toString()==e.term&&(e.term=t)}.bind(this)),Shr.L.forEach(Shr.Array.sortByProperty(r.result.payload,"term,date"),function(e){this._addChild(e)}.bind(this)),this._sortItems&&this._sortItems(),n=!0):s.Error.log(this,b._lastAPI,e,"${error.upp}".localize(t)),s.refresh(this)}.bind(this)),n},getThumbnailUrl:function(e,t){var r=this.cover;return/\/medium\//.test(r)&&(r=r.replace(/\/medium\//,"/"+s.Item.getResolution(null,e,t,!0)+"/")),r||s.Folder.prototype.getThumbnailUrl.call(this,e,t)},getSortChoices:function(){}})}),S=Object.extend(function(e,r){Object.extend(this,{parent:e,id:r,title:("${"+r+"}").localize(t),className:i+r+c._folder})},{prototype:{getContents:function(e){var r=!!this.albums,n=S._method[this.id];return r||b._api(n,this._getMethodArgs(e),function(e){var r=e.responseObj&&e.responseObj.result||{success:!1},o=S._getAlbumCtor(this.id);if(200<=e.status&&e.status<300&&r.success){if(this.albums=[],Shr.L.forEach(r.payload,function(e){this.albums.push(new o(this,e))}.bind(this)),this.albums=Shr.Array.sortByProperty(this.albums,"people"==this.id?"count desc":"title asc"),0==Shr.Array.getLength(this.albums)){var i="${no"+this.id+"PrimaryMessage}",a="${no"+this.id+"SecondaryMessage}";this.empty=f({className:[c._shrEmptyState,c._shrRandomAlbumStack],primaryMessage:i.localize(t),secondaryMessage:a.localize(t)})}}else s.Error.log(this,u+n,e,("${error."+n+"}").localize(t));s.refresh(this)}.bind(this)),r},getThumbnailUrl:function(e,t){return S._getThumbnailUrl()||s.Folder.prototype.getThumbnailUrl.call(this,e,t)},getSortChoices:m,_getMethodArgs:function(e){var t=[e];return"people"==this.id?t=t.concat([[],"face",!1]):"places"==this.id||this.id,t}},_method:{people:"getPersonTags",places:"getLocationTags",tags:"getMomentTags"},_getThumbnailUrl:function(){return g()},_getAlbumCtor:function(e){return{people:t.Person,places:t.Place,tags:t.Tag}[e]}}),b=new s.Folder({},{title:"${title}",id:"thisLife",dataSourceType:s.Source.DataSourceType.sfly,version:"$Revision$",contentClassName:c._folderContent,L10N:{title:"Shutterfly",lives:"Pick a Life",stories:"Stories",folders:"Albums",myFolders:"My Folders",favorites:"Favorites",people:"People",places:"Places",library:"All Photos",tags:"Tags",recentAlbums:"Recent Albums",recentUploads:"Recent Uploads",lifetouch:"Lifetouch",noTimelinePrimaryMessage:"You have no photos in your account.",noFavoritesPrimaryMessage:"You have no Favorites yet.",noFavoritesSecondaryMessage:"You can favorite the best photos in your account to retrieve them here.",noRecentAlbumsPrimaryMessage:"You have no recent Albums.",noRecentAlbumsSecondaryMessage:"You can create Albums to organize your photos.",noPhotosInAlbumPrimaryMessage:"You have no photos in this Album.",nopeoplePrimaryMessage:"You have not tagged any people yet.",nopeopleSecondaryMessage:"You can organize your photos by tagging people.",noplacesPrimaryMessage:"You have no photos tagged with locations.",noplacesSecondaryMessage:"You can organize your photos by location by tagging them.",notagsPrimaryMessage:"You have not tagged any photos yet.",notagsSecondaryMessage:"You can organize your photos by tagging them.",noLifetouchPrimaryMessage:"You have no lifetouch photos.",activeTitle:{month:"${1} ${0}",day:"${1} ${2}, ${0}"},dayTitle:"${3}${0} ${1} ${2} ",signinIn:"Signing in...",disconnect:"Sign out of ThisLife",error:{login:"We were unable to login to ThisLife.<br/><br/>${0}",getPersonInfo:"We were unable to access your ThisLife account.",getPersonInfoMigrated:"We were unable to access your photos at this time.",updateSession:"We were unable to access the selected ThisLife life.",getPersonTags:"We were unable to get the list of people tags.",getLocationTags:"We were unable to get the list of location tags.",getMomentTags:"We were unable to get the list of tags",storyParser:"We were unable to get the list of story moments.",getStories:"We were unable to get a list of your ThisLife stories.",getStory:"We were unable to get the photos in this album.",getFolders:"We were unable to get a list of your folders and albums.",getStoriesInFolder:"We were unable to get a list of the albums in this folder.",upp:"We were unable to access the photos in your account.",searchMoments:{topLevel:"We were unable to get the list of people, locations, and tags.",person:"We were unable to get the list of photos of this person.",place:"We were unable to get the list of photos at this location.",tag:"We were unable to get the list of photos with this tag.",month:"We were unable to get the list of photos taken during this month.",favorites:"We were unable to get the list of your favorite photos.",lifetouch:"We were unable to get the list of your Lifetouch photos."},getMomentSet:"We were unable to get this set of photos.",getRecentAlbums:"We were unable to get the list of your recent albums."},getMomentSetEmpty:{person:"There are no photos of this person.",place:"There are no photos at this location.",tag:"There are no photos with this tag."},sortChoices:{storyOrder:"Story order",newestToOldest:"Date (newest to oldest)",oldestToNewest:"Date (oldest to newest)",nameAToZ:"Name (A-Z)",nameZToA:"Name (Z-A)",tagAToZ:"Tag (A-Z)",tagZToA:"Tag (Z-A)",dateTaken:"Date Taken",lastModified:"Last Modified",createdDate:"Created Date",newToOld:"(newest to oldest)",oldToNew:"(oldest to newest)"},monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],folderTitles:{friendsAlbums:"Shared with Me"},noRecentUploads:"Sorry, no results found.",migrating:{header:"Updating your photos...",item1:"We are preparing your new photo experience.",item2:"This should only take a few minutes."},_end:null},init:function(n){(t=this)._context=n,r=void 0,this.id="sfly",this.onclick=this._onclick,this.onblur=this._onblur,this.title="${title}".localize(this),e||(e=this.getUppExt()),this._clearMomentDbIfNeeded(),this.buildFolderList()},buildFolderList:function(){this._buildFolderList()},getLastAPI:function(){return b._lastAPI},renderStyle:function(e){e(b._formatStyle())},getContents:function(e,n){var i=!!r,a="getPersonInfo";if(n&&o)return i;if(o=!0,i)if(this._isMigrated())this._lastClickedSubfolder&&this._lastClickedSubfolder.onclick(void 0,!0);else{if(!this.empty){var l="";l+=Shr.Html.formatTag("div",{},"${migrating.header}".localize(t)),l+=Shr.Html.formatTag("div",{},"${migrating.item1}".localize(t)),l+=Shr.Html.formatTag("div",{},"${migrating.item2}".localize(t)),l=Shr.Html.formatTag("div",{className:[c._migrationInProgress]},l),l=Shr.Html.formatTag("div",{className:[c._timelineFolder,c._busy,c._overlay]},l),this.empty=l,window.setTimeout(function(){b._api("getPersonInfo",[e,!0],function(e){var t=e.responseObj&&e.responseObj.result;200<=e.status&&e.status<300&&t.success&&(Shr.U.migration_status=s._utilities.localStorage.getItem("Shr.U.migration_status")||t.payload&&t.payload.migration_status||""),Shr.Dialogs.UniversalPicker.refresh(this)}.bind(this))}.bind(this),6e4)}new s.View.Event("titleChange",null,this._lastClickedSubfolder),i=!0}else this._api(a,[e,!0],function(n){var o;200<=n.status&&n.status<300?(o=n.responseObj)&&o.result&&o.result.success?(Shr.U.migration_status=s._utilities.localStorage.getItem("Shr.U.migration_status")||o.result.payload&&o.result.payload.migration_status||"",Shr.U.lifeUid=r=o.result.payload.life_permissions[0].life_uid,Shr.U.ownerId=this.owner=b._owner_person_uid=o.result.payload.life_permissions[0].owner_person_uid,this.getLifetouchContents(e)):Shr.U.migrated?s.Error.log(this,u+a,n,"${error.getPersonInfoMigrated}".localize(t)):b._state=h:s.Error.log(this,u+a,n,"${error.getPersonInfoMigrated}".localize(t)),s.refresh(this)}.bind(this));return i},getLifetouchContents:function(e){if(!n){if(!r)return!1;try{var t=null,o=[e,Shr.U.lifeUid,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!0];this._api("searchMoments",o,function(e){var r=e.responseObj;if(r&&r.result&&r.result.success){var o=r.result.payload.sources;n=!0,o&&o.length&&(t=o.find(function(e){return"lifetouch"===e.term}))&&t.count&&(Shr.U.lifetouch=!0),s.refresh(this)}}.bind(this))}catch(e){window&&window.trUPP&&window.trUPP.Timing&&window.trUPP.Timing.recordInfo("upp_exception",{ex_message:e.message,ex_stack:e.stack})}}return!!n},_isMigrated:function(){return"sfly_inprogress"!==Shr.U.migration_status},_lastClickedSubfolder:null,_onclick:function(e,t){e&&(this._lastClickedSubfolder=e),s.Source.prototype.onclick.call(this,void 0,!0)},_onblur:function(){this.folders&&this.folders.forEach(function(e){e.onblur(!0)})},_isCurrentDS:function(){return e.dlg.classList.contains([e.classNames.sources,this.id].join("_"))},_clearMomentDbIfNeeded:function(){try{var e=s.momentDB?s.getStatus():null,r=null,n=null;e&&e.length&&(r=(n=e[e.length-1])&&n.done.find(function(e){return e.sink&&"sfly"!==e.sink.id})),t._context.forceUpdate&&(r=!0),r&&window.trUPP.momentDB.clearMoments()}catch(e){}},_buildFolderList:function(){this.folders||(this.folders=[],this.folders.push(new s.Album(this,{id:"recentUploads",title:"${recentUploads}".localize(t),empty:Shr.Html.formatTag("div",{className:[c._empty,c._overlay]},"${noRecentUploads}".localize(t)),className:c._albumsFolder,noSelectAll:!0,contentClassName:c._recentUploads,useVerticalTimeline:!0,useVisualSearch:!0,onblur:function(t){t&&e.dlg.classList.remove([e.classNames.sources,this.id].join("_"))},getContents:function(e){if(!b._isParentTheCurrentDS.call(this))return!1;var n,o,i,l=function(e){return 24*e*60*60},c="searchMoments",d="${error.getRecentUploads}".localize(t),h=!!this.items;if(!h)if(a.Timing.startTimer("recent-uploads-load"),this.sortOrder=s.momentDB&&s.vt?"upload_date desc":"date desc",s.momentDB&&s.vt){var p=Date.now();window.trUPP.momentDB.getAllMoments(t.Item).then(function(e){b._onPromiseResolve.call(this,e,"momentDB_getAllMoments_recent",p)}.bind(this),function(){b._onPromiseReject.call(this,"momentDB_getAllMoments_recent",p,d)}.bind(this))}else this.data._done||(this.data._pendingRequest?this.items&&(this.data._done=!0,this.data._pendingRequest=!1):(this.data._pendingRequest=!0,this.data._requests++,(i=this.data._timespans[this.data._requests])||(i=this.data._timespans[this.data._requests-1]+this.data._timespans[this.data._requests-2],this.data._timespans.push(i)),o=this.data._startDate-1,this.data._startDate-=l(i),n=[e,r,!0,[],[],[],[],[],!1,[],[],!1,"image","","",this.data._startDate,o],b._api(c,n,function(e){var t=this,r=200<=e.status&&e.status<300&&e.responseObj,n=r&&r.result&&r.result.success;this.data._pendingRequest=!1,n?this.data._momentUIDs=this.data._momentUIDs.concat(r.result.payload.moments||[]):s.Error.log(this,u+c,e,d),this.error?s.refresh(this):this.data._momentUIDs.length>=this.data._minMoments||this.data._startDate<Math.floor(Date.now()/1e3)-l(this.data._maxAge)?(s.Log.metric(["ds","sfly","recentUploads","numRequests",this.data._timespans.length-1].join("."),this.data._timespans.length-1,void 0),s.Log.metric(["ds","sfly","recentUploads","numMoments",this.data._timespans.length-1].join("."),this.data._momentUIDs.length,void 0),this.data._momentUIDs.length?(this.data._pendingRequest=!0,this.count=this.data._momentUIDs.length,b._getMomentSet(this,this.data._momentUIDs,{onSelect:function(e,r){return b.Month.prototype._onItemSelected.call(this,e,r,t._gridItems)}})):(this.items=[],this.data._done=!0,s.refresh(this))):window.setTimeout(this.getContents.bind(this),100)}.bind(this)))),h=this.data._done;return h},getThumbnailUrl:function(){return g()},getSortChoices:function(){return{}},onclick:function(e,t){return t||a.Log.logOmnitureClick(this.id),s.Album.prototype.onclick.apply(this,arguments)},getGridItems:b.Month.prototype.getGridItems,_onDaySelect:b.Month.prototype._onDaySelect,data:{_momentUIDs:[],_done:!1,_pendingRequest:!1,_minMoments:1,_maxAge:365,_requests:0,_timespans:[0,31],_startDate:Math.floor((Date.now()+1)/1e3)}})),this.folders.push(new s.Folder(this,{noSkip:!0,id:"timeline",title:"${library}".localize(t),className:c._timelineFolder,noSelectAll:!0,sortOrder:"created_at_timestamp desc",contentClassName:c._etv,useVerticalTimeline:!0,useVisualSearch:!0,noGrid:!0,onblur:function(t){t&&e.dlg.classList.remove([e.classNames.sources,this.id].join("_"))},getContents:function(e){if(!b._isParentTheCurrentDS.call(this))return!1;var n=!!this.items||!!this.folders;if(!n)if(a.Timing.startTimer("all-photos-load"),s.momentDB&&s.vt){var o=Date.now();window.trUPP.momentDB.getAllMoments(t.Item).then(function(e){b._onPromiseResolve.call(this,e,"momentDB_getAllMoments_all",o)}.bind(this),function(){b._onPromiseReject.call(this,"momentDB_getAllMoments_all",o,"${error.upp}".localize(t))}.bind(this))}else b._api("upp",[e,r,null,null,null,!1,!1,!1],function(e){var r,n=!0;200<=e.status&&e.status<300&&(r=e.responseObj,this.folders=[],this.albums=[],r&&r.result&&r.result.success&&(Shr.Array.getLength(r.result.payload)?Shr.L.forEach(Shr.Array.sortByProperty(r.result.payload,"term desc"),function(e){this.folders.push(new t.Year(this,e))}.bind(this)):this.empty=f({className:[c._shrEmptyState,c._shrRandomFavPhotoStack],primaryMessage:"${noTimelinePrimaryMessage}".localize(t)}),n=!1)),n&&(this.folders=void 0,s.Error.log(this,b._lastAPI,e,"${error.upp}".localize(t))),s.refresh(this)}.bind(this));return n},formatContent:function(){var e=[];return this.folders.length&&this.folders[0].albums.length?(Shr.L.forEach(this.folders,function(t){e.push(Shr.Html.formatTag("li",{className:c._year},Shr.Html.formatTag("h4",{},t.title))),Shr.L.forEach(t.albums,function(t){e.push(s.Folder.prototype.formatCover.apply(t))})}),e.join("")):s.Folder.prototype.formatContent.apply(this,arguments)},getThumbnailUrl:function(){return g()},getSortChoices:function(){}})),this.hideAlbums||this.folders.push(new s.Folder(this,{id:"Albums",title:"${folders}".localize(t),className:c._albumsFolder,onblur:function(t){t&&e.dlg.classList.remove([e.classNames.sources,this.id].join("_"))},getContents:function(e){if(!b._isParentTheCurrentDS.call(this))return!1;var n=!!this.folders,o="folder.getFolders",i="${error.getFolders}".localize(t);return n||b._api(o,[e,r],function(e){var r;200<=e.status&&e.status<300&&(r=e.responseObj)&&r.result&&r.result.success?(this.albums=[],this.folders=[],Shr.L.forEach(r.result.payload,function(e){e&&0<e.albumCount&&(2==e.folder_type?this.folders.push(Object.extend(new t.Folder(this,e),{title:"${folderTitles.friendsAlbums}".localize(t),className:"sfly_migrated"==Shr.U.migration_status?c._new:void 0,folderSortOrder:d[e.folder_type]})):1!=e.folder_type&&3!=e.folder_type&&12!=e.folder_type||this.folders.push(Object.extend(new t.Folder(this,e),{folderSortOrder:d[e.folder_type]})))}.bind(this)),this.folders=Shr.Array.sortByProperty(this.folders,"folderSortOrder")):s.Error.log(this,u+o,e,i),Shr.Dialogs.UniversalPicker.refresh(this)}.bind(this)),n},getThumbnailUrl:function(){return g()}})),this.folders.push(new s.Folder(this,{noSkip:!0,id:"Lifetouch",title:"${lifetouch}".localize(t),className:c._lifetouch,noSelectAll:!0,sortOrder:"created_at_timestamp desc",contentClassName:c._etv,empty:Shr.Html.formatTag("div",{className:[c._empty,c._overlay]},"${noLifetouchPrimaryMessage}".localize(t)),useVerticalTimeline:!0,useVisualSearch:!1,noGrid:!0,onblur:function(t){t&&e.dlg.classList.remove([e.classNames.sources,this.id].join("_"))},getContents:function(e){if(!b._isParentTheCurrentDS.call(this))return!1;var n=!!this.items,o="searchMoments",i="${error.searchMoments.lifetouch}".localize(t),a=[e,r,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!0];try{n||this.data._pendingRequest?this.items&&(this.data._pendingRequest=!1):(this.data._pendingRequest=!0,b._api(o,a,function(t){this.data._pendingRequest=!1;var n=t.responseObj;if(n&&n.result&&n.result.success){var a=n.result.payload.sources,l=null;if(a&&a.length&&(l=a.find(function(e){return"lifetouch"===e.term})),l&&l.count){var c=[e,r,!0,[],[],[],[],["lifetouch"],!1,[],[],null,"",null,null,null,null];this.data._pendingRequest=!0,b._api(o,c,function(e){this.data._pendingRequest=!1;var t,r=e.responseObj;r&&r.result&&r.result.success?(t=Shr.Array.getLength(r.result.payload.moments))?(this.count=t,this.data._pendingRequest=!0,b._getMomentSet(this,r.result.payload.moments)):(this.items=[],s.refresh(this)):s.Error.log(this,u+o,e,i),Shr.Dialogs.UniversalPicker.refresh(this)}.bind(this))}else this.items=[],s.refresh(this)}else s.Error.log(this,u+o,t,i)}.bind(this)))}catch(n){window&&window.trUPP&&window.trUPP.Timing&&window.trUPP.Timing.recordInfo("upp_exception",{ex_message:n.message,ex_stack:n.stack})}return n},getThumbnailUrl:function(){return g()},getSortChoices:function(){},data:{_pendingRequest:!1}}))),s.mayBeNotUsingSearch&&!this._nonSearchFoldersAdded&&(this._nonSearchFoldersAdded=!0,this.folders.push(Object.extend(new S(this,"people"),{contentClassName:c._people,getSortChoices:function(){return{}}})),this.folders.push(new S(this,"places")),this.folders.push(new S(this,"tags")),this.folders.push(new s.Folder(this,{id:"favorites",title:"${favorites}".localize(t),className:c._favoritesFolder,isAlbum:!0,getContents:function(e){var n=!!this.items,o="searchMoments",i="${error.searchMoments.favorites}".localize(t),a=[e,r,!0,[],[],[],[],[],!1,["1","2","3"],[],!1,"image"];return n||b._api(o,a,function(e){var r,n=e.responseObj;n&&n.result&&n.result.success?(r=Shr.Array.getLength(n.result.payload.moments))?(this.count=r,b._getMomentSet(this,n.result.payload.moments)):(this.items=[],this.empty=f({className:[c._shrEmptyState,c._shrRandomFavPhotoStack],primaryMessage:"${noFavoritesPrimaryMessage}".localize(t),secondaryMessage:"${noFavoritesSecondaryMessage}".localize(t)})):s.Error.log(this,u+o,e,i),Shr.Dialogs.UniversalPicker.refresh(this)}.bind(this)),n},getThumbnailUrl:function(){return g()},getSortChoices:function(){var e=m();return Object.extend(e,{"end_date desc,start_date desc":"${sortChoices.newestToOldest}".localize(t),"start_date asc,end_date asc":"${sortChoices.oldestToNewest}".localize(t)})}})))},MyFolders:Object.extend(function(e,r){s.Folder.call(this,e,{id:"myFolders",title:"${myFolders}".localize(t),count:r&&r.length||0}),this.folders=r},{prototype:Object.extend({},s.Folder.prototype,{getContents:function(){return this.folders}})}),Folder:Object.extend(function(e,t){s.Folder.call(this,e,{id:t.uid,title:t.name,data:t,sortOrder:t.sort_option,folder_type:t.folder_type,className:t.className,count:t.count||t.albumCount||0})},{prototype:Object.extend({},s.Folder.prototype,{getContents:function(e){var n=!!this.albums,o="folder.getStoriesInFolder",i="${error.getStoriesInFolder}".localize(t);return n||b._api(o,[e,r,this.id],function(e){var r;200<=e.status&&e.status<300&&(r=e.responseObj)&&r.result&&r.result.success?(this.albums=[],Shr.L.forEach(r.result.payload,function(e){Shr.L.forEach(e,function(e){(!e.default||e.story.moment_count||e.story.visible_moment_count)&&this.albums.push(new t.Story(this,{id:e.story.uid,title:e.story.name,count:e.story.visible_moment_count,cover_uid:e.story.cover_moment_uid,owner:e.owner_person_uid,date:e.story.updated,created:e.story.created,start_date:e.story.start_date,end_date:e.story.end_date}))}.bind(this)),this.sortOrder=this.sortOrder?this.sortOrder.replace(":"," ").replace("name","title").replace("updated","date"):"title asc",this.albums=Shr.Array.sortByProperty(this.albums,this.sortOrder)}.bind(this))):s.Error.log(this,u+o,e,i),Shr.Dialogs.UniversalPicker.refresh(this)}.bind(this)),n},getSortChoices:function(){return function(){var e={};return e=Object.extend(e,{"start_date asc, end_date desc":["${sortChoices.dateTaken}".localize(t),"${sortChoices.newToOld}".localize(t)].join(" "),"start_date desc, end_date asc":["${sortChoices.dateTaken}".localize(t),"${sortChoices.oldToNew}".localize(t)].join(" "),"date desc":["${sortChoices.lastModified}".localize(t),"${sortChoices.newToOld}".localize(t)].join(" "),"date asc":["${sortChoices.lastModified}".localize(t),"${sortChoices.oldToNew}".localize(t)].join(" "),"created desc":["${sortChoices.createdDate}".localize(t),"${sortChoices.newToOld}".localize(t)].join(" "),"created asc":["${sortChoices.createdDate}".localize(t),"${sortChoices.oldToNew}".localize(t)].join(" ")}),Object.extend(e,s.Folder.prototype.getSortChoices.call(this)),e}()}})}),Story:Object.extend(function(e,t){s.Album.apply(this,arguments),this.thumbnail=this.getThumbnailUrl(44,44)},{prototype:Object.extend({},s.Album.prototype,{getThumbnailUrl:function(e,t){return this.cover_uid?b._getThumbnailUrl(null,this.cover_uid,e,t,this.owner,!0):s.Folder.prototype.getThumbnailUrl.call(this,e,t)},getContents:function(e){var r=!!this.items,n=this.api||"story.getStory",o=function(e,r){s.Error.log(this,u+n,{status:e.status},"${error.getStory}".localize(t,[r&&r.result&&r.result.message]))}.bind(this);return r||b._api(n,[e,this.id,null,!1,!1,!0],function(e){var r;if(200<=e.status&&e.status<300)if((r=e.responseObj)&&r.result&&r.result.success){var n,i=r.result.payload,a=i.moments||"",l={moment_uid:{index:9,length:16},owner_uid:{index:43,length:12},moment_date:{index:1,length:8},width:{index:37,length:4},height:{index:33,length:4},rating:{index:41,length:1},effects_modified_date:{index:25,length:8}},d=function(e){var t=l[e];return t?a.substr(n+t.index,t.length):""};for(this.items=[],n=0;n<a.length;n+=63)(parseInt(d("rating"),16)>>1)%2||this.items.push(new b.Moment({id:parseInt(d("moment_uid")),index:this.items.length+1,owner:d("owner_uid"),caption_text:i.filenames&&i.filenames[n/63]||"",date:1e3*parseInt(d("moment_date"),16),effects_modified_date:1e3*parseInt(d("effects_modified_date"),16),width:parseInt(d("width"),16),height:parseInt(d("height"),16),rating:parseInt(d("rating"),16)>>2}));this.count=this.items.length,Shr.Array.sortByProperty(this.items,"date desc"),this.onItemsLoaded(),0==Shr.Array.getLength(this.items)&&(this.empty=f({className:[c._shrEmptyState,c._shrRandomPhotoStack],primaryMessage:"${noPhotosInAlbumPrimaryMessage}".localize(t)}))}else o(e,r);else o(e);s.refresh(this)}.bind(this)),r},getSortChoices:p,onItemsLoaded:function(){}})}),Person:Object.extend(function(e,t){s.Album.call(this,e,{id:t.uid,title:t.name,count:t.moment_count||t.visible_moment_count,thumbnail:t.icon_url,data:t})},{prototype:Object.extend({},Shr.Dialogs.UniversalPicker.Album.prototype,{getContents:function(e){var n=!!this.items,o="searchMoments",i="${error.searchMoments.person}".localize(t);return n||(this.empty=Shr.Html.formatTag("div",{className:[c._empty,c._overlay]},"${getMomentSetEmpty.person}".localize(t)),b._api(o,[e,r,!0,[this.id]],function(e){var t;200<=e.status&&e.status<300&&(t=e.responseObj)&&t.result&&t.result.success?b._getMomentSet(this,t.result.payload.moments||[]):s.Error.log(this,u+o,e,i)}.bind(this))),n},getThumbnailUrl:function(e,t){return this.thumbnail||s.Folder.prototype.getThumbnailUrl.call(this,e,t)},getSortChoices:p})}),Place:Object.extend(function(e,t){s.Album.call(this,e,{id:t.uid,title:t.name,count:t.moment_count||t.visible_moment_count,cover:t.cover_moment_uid,data:t}),this.thumbnail=this.getThumbnailUrl(44,44)},{prototype:Object.extend({},Shr.Dialogs.UniversalPicker.Album.prototype,{getContents:function(e){var n=!!this.items;if(!n){var o="searchMoments",i="${error.searchMoments.place}".localize(t);this.empty=Shr.Html.formatTag("div",{className:[c._empty,c._overlay]},"${getMomentSetEmpty.place}".localize(t)),b._api(o,[e,r,!0,[],[this.id]],function(e){var t;200<=e.status&&e.status<300&&(t=e.responseObj)&&t.result&&t.result.success?(this.count=Shr.Array.getLength(t.result.payload.moments),b._getMomentSet(this,t.result.payload.moments||[])):s.Error.log(this,u+o,e,i)}.bind(this))}return n},getThumbnailUrl:function(e,t){return this.cover?b._getThumbnailUrl(null,this.cover,e,t,null,!0):s.Folder.prototype.getThumbnailUrl.call(this,e,t)},getSortChoices:p})}),Item:Object.extend(function(e){s.Item.call(this,e)},{prototype:Object.extend({},s.Item.prototype,{getThumbnailUrl:function(e,t){return b._getThumbnailUrl(this,this.id,e,t,this.owner)}})}),Moment:Object.extend(function(e){s.Item.call(this),this.id=e.uid||e.id,this.title=e.caption_text||e.original_filename||"",this.date=e.moment_date_timestamp&&1e3*e.moment_date_timestamp||e.date,this.rating=e.rating,this.width=e.width,this.height=e.height,this.created_at_timestamp=e.created_at_timestamp,(this.data=e).owner&&(this.owner=e.owner),this.location=["nxgen://",e.owner||b._owner_person_uid||Shr.U.id,e.uid||e.id].join("/")},{prototype:Object.extend({},Shr.Dialogs.UniversalPicker.Item.prototype,{getThumbnailUrl:function(e,t){return b._getThumbnailUrl(this,this.id,e,t,this.owner)}})}),Tag:Object.extend(function(e,t){s.Album.call(this,e,{id:t.uid,title:t.name,count:t.moment_count||t.visible_moment_count,cover:t.cover_moment_uid,data:t}),this.thumbnail=this.getThumbnailUrl(44,44)},{prototype:Object.extend({},s.Album.prototype,{getContents:function(e){var n=!!this.items,o="searchMoments",i="${error.searchMoments.tag}".localize(t);return n||b._api(o,[e,r,!0,[],[this.id]],function(e){var r;this.empty=Shr.Html.formatTag("div",{className:[c._empty,c._overlay]},"${getMomentSetEmpty.tag}".localize(t)),200<=e.status&&e.status<300&&(r=e.responseObj)&&r.result&&r.result.success?b._getMomentSet(this,r.result.payload.moments||[]):s.Error.log(this,u+o,e,i)}.bind(this)),n},getThumbnailUrl:function(e,t){return this.cover?b._getThumbnailUrl(null,this.cover,e,t,null,!0):void 0},getSortChoices:p})}),Year:Object.extend(function(e,t){_.call(this,e,t),delete this.count,this.isAlbum=!0,"0"in t?(this.albums=[],Shr.L.forEach(Shr.Array.sortByProperty(t[0],"term"),function(e){e.id=parseInt(e.term),this.albums.push(new b.Month(this,e))}.bind(this))):this.args.push(this.id)},{prototype:Object.extend({},_.prototype,{getContents:function(){var e=_.prototype.getContents.apply(this,arguments);return e&&(Shr.L.forEach(this.folders,function(e){e.id=parseInt(e.id),e.title=("${monthNames."+(e.id-1)+"}").localize(t)}.bind(this)),this.folders=Shr.Array.sortByProperty(this.folders,"id")),e},_addChild:function(e){this.folders.push(new t.Month(this,e))},_monthOnClick:function(){s.Folder.prototype.onclick.apply(this,arguments)}})}),Month:Object.extend(function(e,r){var n=("${monthNames."+(parseInt(r.term)-1)+"}").localize(t);_.call(this,e,Object.extend(r,{count:r.count||void 0,title:n,activeTitle:"${activeTitle.month}".localize(t,[e.term,n])})),this.title=n,this.type=s.Folder.Type.album,this.isAlbum=!0,this.sortOrder="date asc",this.args.push(e.term),this.args.push(this.term)},{prototype:Object.extend({},_.prototype,{getContents:function(e){var r,n=!!this.items,o=Math.round(Date.UTC(this.parent.term,this.term-1,1)/1e3),i=Math.round((Date.UTC(this.parent.term,this.term,1)-1)/1e3),a=this;if(!n)if(s.momentDB){r={onSelect:function(e,t){return a._onItemSelected.call(this,e,t,a._gridItems)}};var l=Date.now();window.trUPP.momentDB.getMonthMoments(o,i,r,t.Item).then(function(e){b._onPromiseResolve.call(a,e,"momentDB_getMonthMoments",l)},function(){b._onPromiseReject.call(a,"momentDB_getMonthMoments",l,"${error.searchMoments.month}".localize(t))})}else b.getMonthMoments.call(a,"searchMoments",e,o,i);return n},getGridItems:function(){var e,r,n,o,i=0,a=!0,l=[],d=function(){i&&(l[o].title=l[o].title.substitute(["",i]),i=0,l[o].selected=a,a=!0)},h=Object.extend(function(e,r,n,o){var i=Shr.Html.formatTag("span",{className:"${0}",onclick:function(e,r){return t._context.noSelect||t._context.singleSelect||o._onDaySelect(e),Shr.Event.stop(r),!1}},"${dayTitle}".localize(t,[("${dayNames."+new Date(e,r,n).getDay()+"}").localize(t),("${monNames."+r+"}").localize(t),n,Shr.Html.formatTag("span",{className:c._year},e)])+Shr.Html.formatTag("span",{},"${1}"));s.Item.call(this,{id:""+e+r+n,title:i})},{prototype:{disabled:!0,separator:!0,className:c._dayTitle,formatContent:function(){return s.Item.prototype.formatContent.call(this,this.title)}}});return Shr.L.forEach(this.items,function(t){var s=new Date(parseInt(t.date));n==s.getUTCFullYear()&&r==s.getUTCMonth()&&e==s.getUTCDate()||(d(),n=s.getUTCFullYear(),r=s.getUTCMonth(),e=s.getUTCDate(),o=l.length,l.push(new h(n,r,e,this))),i++,a=a&&t.selected,l.push(t)}.bind(this)),d(),this._gridItems=l},getMonth:function(){return this},getSortChoices:p,_onDaySelect:function(e){for(var t=Shr.Dom.getParentByClass(e,c._dayTitle),r=Shr.Dom.hasClass(t,c._selected),n=Shr.Array.indexOf(e.parentNode.parentNode.childNodes,e.parentNode)+1,o=[];n<this._gridItems.length&&!this._gridItems[n].separator;)o.push(Shr.Array.indexOf(this.items,this._gridItems[n])),n++;(r?this.deselectItems:this.selectItems).call(this,o)},_onItemSelected:function(e,t,r){for(var n=Shr.Array.indexOf(r,this),o=n,i=!0;o--,r&&!r[o].separator;);for(n=o+1;i=r&&r[n].selected,n++,r&&i&&n<r.length&&!r[n].separator;);r&&r[o].selected!=i&&(r[o].selected=i,Shr.ClassToggle.toggle(t.parentNode.getElementsByTagName("li")[o],c._selected,i))}})}),_state:h,_api:function(e,t,r,n){var o={headers:["Keep-Alive: 115","Connection: keep-alive"],method:e,params:t,id:null},i=[u,["method",window.encodeURIComponent(e)].join("=")].join("?"),a=Shr.SflyAjax.canUseXHR(i),l=Date.now();b._lastAPI=i,a&&!b.useJSONP?s.API.SflyAjax.sendAjaxRequest({url:i,args:window.JSON.stringify(o),accept:"application/json",method:"POST",headers:n},function(t){s.Log.metric("superfly_"+e.split(".").join("_"),Date.now()-l,t.status),t.responseObj={};try{t.responseObj=window.JSON.parse(t.responseText)}catch(e){window&&window.trUPP&&window.trUPP.Timing&&window.trUPP.Timing.recordInfo("upp_exception",{ex_message:e.message,ex_stack:e.stack}),t.status=404}Shr.L.tryToCall(r,t)},b.id):(i+="?json=${0}&callback=".substitute([encodeURIComponent(Object.toJavaScript(o,5,100))]),s.API.ScriptManager.getJsonP(i,{cb:function(t){s.Log.metric("superfly_"+e.split(".").join("_"),Date.now()-l,200),Shr.L.tryToCall(r,{status:200,responseObj:t})},onError:function(){s.Log.metric("superfly_"+e.split(".").join("_"),Date.now()-l,500),Shr.L.tryToCall(r,{status:200,responseObj:{result:{success:!1}}})},onTimeout:function(){s.Log.metric("superfly_"+e.split(".").join("_"),Date.now()-l,408),Shr.L.tryToCall(r,{status:408})}}))},_getThumbnailUrl:function(e,t,r,n,o,i){var a=Shr.AS.uniim||Shr.AS.img,l=[Shr.AS.uniim?"https:/":"/",a,"ng","services","mediarender","THISLIFE",o||b._owner_person_uid||Shr.U.id,"media",t,s.Item.getResolution(e,r,n,i)];return e&&(e.effects_modified_date||e.data.effects_modified_date)&&l.push(e.effects_modified_date||e.data.effects_modified_date),l.push("enhance"),l.join("/")},_getOwner:function(e){for(var t;!t&&e;)t=e.owner,e=e.parent;return t},_getMomentSet:function(e,r,n){Shr.U.getIdToken().then(function(o){if(s.momentDB){var i=Date.now();window.trUPP.momentDB.getMomentsData(r,n,t.Item).then(function(t){b._onPromiseResolve.call(e,t,"momentDB_getMomentsData",i)},function(){b._onPromiseReject.call(e,"momentDB_getMomentsData",i,"${error.getMomentSet}".localize(t))})}else{var a="getMomentSet";b._api(a,[o,r],function(r){var o,i=!0;200<=r.status&&r.status<300&&((o=r.responseObj)&&o.result&&o.result.success?(i=!1,e.items=[],Shr.L.forEach(o.result.payload,function(t){e.items.push(Object.extend(new b.Moment(t),n))}),e.items=Shr.Array.sortByProperty(e.items,e.sortOrder||"date desc")):o&&o.result&&!o.result.success&&"Moment not found."==o.result.message&&(i=!1,e.items=[])),i&&s.Error.log(e,u+a,r,"${error.getMomentSet}".localize(t)),s.refresh(e)})}}.bind(this)).catch(function(e){window.trUPP.Timing.recordSessionEvents({event:"getIdToken",err:e,session_method:"thislifeDS _getMomentSet"})})},_onPromiseResolve:function(e,t,r){e&&(this.items=this.sortOrder&&0<e.length?Shr.Array.sortByProperty(e,this.sortOrder):e,s.Log.metric(t,Date.now()-r,200)),s.refresh(this)},_onPromiseReject:function(e,t,r){s.Error.log(this,e,400,r),s.Log.metric(e,Date.now()-t,400),s.refresh(this)},_isParentTheCurrentDS:function(){var t;return t=!!(this.parent._isCurrentDS()&&Shr.U.id&&Shr.U.lifeUid&&this.parent._isMigrated())||(this.parent.onclick(this),!1),this.parent.onblur(),e.dlg.classList.add([e.classNames.sources,this.id].join("_")),t},getMonthMoments:function(e,n,o,i){b._api(e,[n,r,!0,[],[],[],[],[],!1,[],[],!1,"image",o,i],function(r){var n,o=!0,i=this;200<=r.status&&r.status<300&&(n=r.responseObj)&&n.result&&n.result.success?(this.folders=[],o=!(this.albums=[]),b._getMomentSet(this,n.result.payload.moments||[],{onSelect:function(e,t){return i._onItemSelected.call(this,e,t,i._gridItems)}})):s.Error.log(this,u+e,r,"${error.searchMoments.month}".localize(t)),o&&s.refresh(this)}.bind(this))},_formatStyle:function(){var e=Object.extend({},Shr.Style.parameters,{bg:{desktop:Shr.Style.formatBackground({url:l.IURL("universalpicker/desktopicons.png"),url2x:l.IURL("universalpicker/desktopicons@2x.png"),width:"351px"}),tlSourceIconBgSize:1.5<window.devicePixelRatio?"152px":"auto",randomFavPhotoStack:Shr.Style.formatBackground({url:l.IURL("universalpicker/random-fav-photo-stack.png"),url2x:l.IURL("universalpicker/random-fav-photo-stack@2x.png"),width:"573px"}),randomPhotoStack:Shr.Style.formatBackground({url:l.IURL("universalpicker/random-photo-stack.jpg"),url2x:l.IURL("universalpicker/random-photo-stack@2x.jpg"),width:"573px"}),randomAlbumStack:Shr.Style.formatBackground({url:l.IURL("universalpicker/random-album-stack.jpg"),url2x:l.IURL("universalpicker/random-album-stack@2x.jpg"),width:"451px"}),randomFavPhotoStack4Mobile:Shr.Style.formatBackground({url:l.IURL("universalpicker/random-fav-photo-stack.png"),url2x:l.IURL("universalpicker/random-fav-photo-stack@2x.png"),width:"287px"}),randomPhotoStack4Mobile:Shr.Style.formatBackground({url:l.IURL("universalpicker/random-photo-stack.jpg"),url2x:l.IURL("universalpicker/random-photo-stack@2x.jpg"),width:"287px"}),randomAlbumStack4Mobile:Shr.Style.formatBackground({url:l.IURL("universalpicker/random-album-stack.jpg"),url2x:l.IURL("universalpicker/random-album-stack@2x.jpg"),width:"226px"}),recentUploadsEmptyState:Shr.Style.formatBackground({url:l.IURL("universalpicker/no-result-icon.png"),url2x:l.IURL("universalpicker/no-result-icon@2x.png"),width:"100px"}),mdotIconSprite:Shr.Style.formatBackground({url:l.IURL("universalpicker/mdot-iconsprite.png"),url2x:l.IURL("universalpicker/mdot-iconsprite@2x.png"),width:"44px"})},colors:{sfly:Shr.Style.parameters.colors.sfly,green:"#390",dayTitle:{light:"#d8d8d8",medium:"#c6c7c9",dark:"#58595b"}},fonts:{avenir65Medium:Shr.Style.parameters.fonts.avenir65Medium,avenir85Heavy:Shr.Style.parameters.fonts.avenir85Heavy}});return[".shrTLDay > SPAN {line-height: 50px;}",".shrTLDay > SPAN SPAN {line-height: inherit;}",".shrTLDay > SPAN {color: ${colors.dayTitle.dark};}",".shrTLDay > SPAN SPAN.shrTLYear {color: ${colors.dayTitle.medium}; border-right: 1px solid ${colors.dayTitle.medium}; padding-right: 8px; margin-right: 8px;}",".shrTLDay > SPAN SPAN:last-child {margin-left: 5px; font-size: 12px; padding: 3px 10px; vertical-align: bottom;}",".shrTLDay > SPAN SPAN:last-child {color: ${colors.dayTitle.dark};}",".shrTLDay > SPAN SPAN:last-child {border: 1px solid ${colors.dayTitle.light}; border-radius: 10px; padding: 3px 10px;}",".shrTLDay > SPAN SPAN:last-child {position: relative; padding-left: 30px;}",".shrTLDay > SPAN SPAN:last-child:before {content: ''; display: block; position: absolute; top: 5px; left: 10px; height: 4px; width: 12px;}",".shrTLDay > SPAN SPAN:last-child:before {border: 2px solid ${colors.dayTitle.dark}; border-top-width: 0; border-right-width: 0; transform: rotate(-45deg);}",".shrTLDay.shrSelected > SPAN {color: #f05323;}",".shrTLDay:not(.shrSelected) > SPAN:hover {color: #f05323;}",".shrTLDay:not(.shrSelected) > SPAN:hover SPAN:last-child:before {border-color: #f05323;}",".shrTLDay.shrSelected > SPAN SPAN:last-child {background-color: #f05323; color: #fff !important; border-color: #f05323;}",".shrTLDay.shrSelected > SPAN SPAN:last-child:before {border-color: #fff;}",".shrTLDay > SPAN:hover SPAN:last-child {color: ${colors.sfly}; border-color: ${colors.sfly};}",".shrTLDay > SPAN {position: relative; z-index: 1;}",".shrTLDay > SPAN {cursor: pointer;}",".shrUP.shrUPNoSel .shrTLDay > SPAN, .shrUP.shrUPSS .shrTLDay > SPAN {margin-left: 0; cursor: default;}",".shrUP.shrUPNoSel .shrTLDay > SPAN:hover SPAN:last-child, .shrUP.shrUPSS .shrTLDay > SPAN:hover SPAN:last-child {color: ${colors.dayTitle.dark}; border-color: ${colors.dayTitle.light};}",".shrUP .shrTLTimelineFolder.shrBusy:before  {width: 40px; height: 40px; margin-top: -50px; background-size: contain; ${0} }".substitute([Shr.Style.formatBackground({file:l.IURL("universalpicker/smooth_spinner_orange.gif"),file2x:l.IURL("universalpicker/smooth_spinner_orange@2x.gif"),width:"40px"})]),".shrUPFC > .shrBusy .shrBusyMigration div {font-size: 14px; font-weight: 500; color: #929497 !important;padding-bottom:3px;}",".shrUPFC > .shrBusy .shrBusyMigration > :first-child {font-size: 20px; font-weight: 700; color: #58595B !important; padding-bottom:10px;}",".shrTLDay > DIV:first-child {display: none;}",".shrUPG > LI.shrTLDay {display: block; background: none !important; height: auto; line-height: normal;}",".shrUPG > LI.shrTLDay {width: 100%; text-align: left;}",".shrUPG > LI.shrTLDay {font-size: 16px; color: #25292e;}",".shrUPG > LI.shrTLDay {border: none !important; border-bottom: 1px solid #eee !important;}",".shrUPG > LI.shrTLDay {margin-bottom: 15px !important;}",".shrMobile .shrUPNarrow .shrUPG > LI.shrTLDay:first-child {margin-top: 0;}",".shrUPG > LI.shrTLDay > DIV:before, .shrUPG > LI.shrTLDay > DIV:after {content: none;}",".shrUPWide .shrTLFC LI.shrTLTimelineFolder IMG {background-position: 0 -1836px}",".shrUPWide .shrTLFC LI.shrTLAlbumsFolder IMG, .shrUPWide .shrTLFC LI.shrTLLifetouch IMG {background-position: 0 -24px}",".shrUPWide .shrTLFC LI.shrTLpeopleFolder IMG {background-position: 0 -936px}",".shrUPWide .shrTLFC LI.shrTLplacesFolder IMG {background-position: 0 -1236px}",".shrUPWide .shrTLFC LI.shrTLtagsFolder IMG {background-position: 0 -1536px}",".shrUPWide .shrTLFC LI.shrTLFavoritesFolder IMG {background-position: 0 -324px !important}",".shrUPWide .shrTLFC LI.shrUPAlbum.shrTLFavoritesFolder .shrUPStack:after {content: none;}",".shrUPWide .shrTLFC LI.shrTLTimelineFolder:hover IMG {background-position: 0 -1986px}",".shrUPWide .shrTLFC LI.shrTLAlbumsFolder:hover IMG {background-position: 0 -174px}",".shrUPWide .shrTLFC LI.shrTLpeopleFolder:hover IMG {background-position: 0 -1086px}",".shrUPWide .shrTLFC LI.shrTLplacesFolder:hover IMG {background-position: 0 -1386px}",".shrUPWide .shrTLFC LI.shrTLtagsFolder:hover IMG {background-position: 0 -1686px}",".shrUPWide .shrTLFC LI.shrTLFavoritesFolder:hover IMG {background-position: 0 -474px !important}",".shrUPWide .shrTLFC .shrUPStack IMG, .shrTLFC LI.shrTLAlbumsFolder .shrUPStack IMG {background-size: ${bg.tlSourceIconBgSize}, 0 !important;}",".shrUPWide .shrTLFC LI.shrTLTimelineFolder .shrUPStack:before, .shrUPFC LI.shrTLAlbumsFolder .shrUPStack:before, .shrUPFC LI.shrTLpeopleFolder .shrUPStack:before, .shrUPFC LI.shrTLplacesFolder .shrUPStack:before, .shrUPFC LI.shrTLtagsFolder .shrUPStack:before, .shrUPFC LI.shrTLFavoritesFolder .shrUPStack:before {content: none;}",".shrMobile .shrTLFC LI.shrUPFolder:before {content: ''; ${bg.mdotIconSprite}; width: 44px; height: 44px; top: 0px; left: 0; position: absolute;}",".shrMobile .shrTLFC LI.shrUPFolder.shrTLTimelineFolder:before {background-position: 0 -264px;}",".shrMobile .shrTLFC LI.shrUPFolder.shrTLAlbumsFolder:before {background-position: 0 0;}",".shrMobile .shrTLFC LI.shrUPFolder.shrTLpeopleFolder:before {background-position: 0 -132px;}",".shrMobile .shrTLFC LI.shrUPFolder.shrTLplacesFolder:before {background-position: 0 -176px;}",".shrMobile .shrTLFC LI.shrUPFolder.shrTLtagsFolder:before {background-position: 0 -220px;}",".shrMobile .shrTLFC LI.shrTLFavoritesFolder IMG { ${bg.mdotIconSprite}; background-position: 0 -44px;}",".shrUPWide .shrUPFC > .shrEmptyState {text-align: center; position: relative; top: 5%; /*left: 50%; transform: translate(-50%, -50%); -webkit-transform: translate(-50%, -50%); -ms-transform: translate(-50%, -50%);*/ text-shadow: 0 1px 0 #fff; color: #4b525c; font-size: 24px; line-height: 50px; display: block; padding-top: 50px;}",".shrUPWide .shrUPFC > .shrEmptyState:after {content: attr(secondaryMessage); opacity: 0.5;  text-shadow: 0 1px 0 #fff; color: #4b525c; font-size: 20px; font-weight: 400; line-height: 34px; display: block;}",".shrUPWide .shrUPFC > .shrEmptyState:before {content: ''; display: block; margin: auto;}",".shrUPWide .shrUPFC > .shrEmptyState.shrRandomFavPhotoStack:before {width: 573px; height: 266px; ${bg.randomFavPhotoStack}}",".shrUPWide .shrUPFC > .shrEmptyState.shrRandomPhotoStack:before {width: 573px; height: 266px; ${bg.randomPhotoStack}}",".shrUPWide .shrUPFC > .shrEmptyState.shrRandomAlbumStack:before {width: 451px; height: 271px; ${bg.randomAlbumStack}}",".shrMobile .shrUPFC > .shrEmptyState {text-align: center; position: relative; /*top: 15%; left: 50%; transform: translate(-50%, -50%); -webkit-transform: translate(-50%, -50%); -ms-transform: translate(-50%, -50%);*/ text-shadow: 0 1px 0 #fff; color: #4b525c; font-size: 20px; line-height: 50px; display: block; padding-top: 50px;}",".shrMobile .shrUPFC > .shrEmptyState:after {content: attr(secondaryMessage); opacity: 0.5;  text-shadow: 0 1px 0 #fff; color: #4b525c; font-size: 16px; font-weight: 400; line-height: 34px; display: block;}",".shrMobile .shrUPFC > .shrEmptyState:before {content: ''; display: block; margin: auto;}",".shrMobile .shrUPFC > .shrEmptyState.shrRandomFavPhotoStack:before {width: 287px; height: 133px; ${bg.randomFavPhotoStack4Mobile}}",".shrMobile .shrUPFC > .shrEmptyState.shrRandomPhotoStack:before {width: 287px; height: 133px; ${bg.randomPhotoStack4Mobile}}",".shrMobile .shrUPFC > .shrEmptyState.shrRandomAlbumStack:before {width: 226px; height: 136px; ${bg.randomAlbumStack4Mobile}}",".shrUPFC.shrTLFC > LI.shrUPFolder .shrUPStack[data-childCount]:after {content: none;}",".shrUPWide .shrTLpeople .shrUPStack:before {content: none !important;}",".shrUPWide .shrTLpeople .shrUPStack > IMG {border-radius: 50%;}",".shrUPWide .shrTLpeople .shrUPStack:after {bottom: -9px; right: auto; left: 50%; transform: translateX(-50%);}",".shrUPWide .shrTLpeople .shrUPStack:after {color: #4b525c; background-color: #fff; border: 1px solid #999;}",".shrUPWide .shrTLpeople .shrUPStack:after {box-shadow: none; text-shadow: none;}",".shrUPWide .shrUPFC LI.shrTLYear {display: block;}",".shrUPWide .shrUPFC LI.shrTLYear {line-height: 22px; font-size: 16px; color: #58595b;}",".shrUPWide .shrUPFC LI.shrTLYear {width: 100% !important; height: 22px; margin: 0; margin-left: -29px; padding: 0 41px 5px 17px;}",".shrUPWide .shrUPFC LI.shrTLYear {text-align: left;}",".shrUPWide .shrUPFC LI.shrTLYear {border-bottom: 1px solid #d8d8d8;}",".shrUPWide .shrUPFC LI:not(.shrTLYear) + LI.shrTLYear {margin-top: 20px;}","LI.shrTLYear H4 {padding: 0; margin: 0;}",".shrUPWide .shrUPFC.shrTLETV LI:not(.shrTLYear) > DIV:last-child {font-size: 12px;}",".shrUPNarrow .shrTLETV LI.shrTLYear {height: 33px; line-height: 33px; text-align: center; background-color: #f8f8f8;padding-left: 30px;}",".shrUPNarrow .shrTLETV LI.shrTLYear H4 {margin-top: 7px;}",".shrUPNarrow .shrTLETV LI.shrTLYear:after {content: none;}",".shrTLRecent .shrEmpty {color: #b7b9bd !important;}",".shrTLRecent .shrEmpty:before {${bg.recentUploadsEmptyState};}",".shrTLRecent .shrEmpty:before {width: 100px; height: 79px;}",""].join("\n").substitute(e)},useJSONP:void 0});return Object.extend(b,{api:b._api,apiUrl:u}),Object.defineProperty(b,"life_uid",{get:function(){return r}}),b}()}catch(e){window&&window.trUPP&&window.trUPP.Timing&&window.trUPP.Timing.recordInfo("upp_exception",{ex_message:e.message,ex_stack:e.stack}),Console.write("Error loading thislifeds.js: "+e.message)}},,function(e,t,r){r(113),e.exports=r(9)},function(e,t,r){"use strict";r.r(t),r(114),r(115),r(116),r(117),r(118),r(119),r(120),r(121),r(122),r(123),r(124),r(125),r(126),r(127),r(128),r(129),r(130),r(131),r(132)},function(e,t){!function(){window.performance||(window.performance={});var e,t=(new Date).getTime(),r={},n=[],o={navigationStart:!0,unloadEventStart:!0,unloadEventEnd:!0,redirectStart:!0,redirectEnd:!0,fetchStart:!0,domainLookupStart:!0,domainLookupEnd:!0,connectStart:!0,connectEnd:!0,secureConnectionStart:!0,requestStart:!0,responseStart:!0,responseEnd:!0,domLoading:!0,domInteractive:!0,domContentLoadedEventStart:!0,domContentLoadedEventEnd:!0,domComplete:!0,loadEventStart:!0,loadEventEnd:!0};function i(e,t,r,n){this.name=e,this.entryType=t,this.startTime=r,this.duration=n}function s(t,r){window.performance[t]||("getEntries"===t&&(e=function(){return n}),window.performance[t]=r)}function a(e,t){if(void 0===t)!function(e){for(var t,o={},i=[],s=0,a=n.length;s<a;s++)(t=n[s]).entryType!==e&&(o[t.name]=t,i.push(t));r=o,n=i}(e);else{for(var o,i=[],s=0;s<n.length;s++)(o=n[s]).name===t&&o.entryType===e||i.push(o);n=i,(o=r[t])&&o.entryType===e&&(r[t]=void 0)}}s("now",function(){return(new Date).getTime()-t}),s("mark",function(e){if(o[e])throw Error("'"+e+"' is part of the PerformanceTiming interface, and cannot be used as a mark name.");var t=new i(e,"mark",window.performance.now(),0);n.push(t),r[e]=t}),s("clearMarks",function(e){a("mark",e)}),s("measure",function(e,t,o){var s=void 0===t,a=void 0===o,l=window.performance.now(),c=0,d=0;if(s)c=0;else{if(!r[t])throw Error("The mark '"+t+"' does not exist.");c=r[t].startTime}if(a)d=l;else{if(!r[o])throw Error("The mark '"+o+"' does not exist.");d=r[o].startTime}var h=new i(e,"measure",l,d-c);n.push(h),r[e]=h}),s("clearMeasures",function(e){a("measure",e)}),s("getEntries",function(t){var r,n=e();return void 0===t?n:(t.entryType?r=t.name?function(e){return e.entryType===t.entryType&&e.name===t.name}:function(e){return e.entryType===t.entryType}:t.name&&(r=function(e){return e.name===t.name}),n.filter(r))}),s("getEntriesByName",function(e,t){var r={name:e};return t&&(r.entryType=t),this.getEntries(r)}),s("getEntriesByType",function(e){return this.getEntries({entryType:e})})}()},function(e,t){!function(e,t){var r=e.Shr||{};Object.extend=function(e,t){var r,n=arguments.length;if(1<n)for(var o=1;o<n;o++){var i=arguments[o];if(i)for(r in i)e[r]=i[r]}return e};var n,o=function e(t,r,n){return new e.fn.init(t,r,n)},i=0,s=["AS","AD","AR","S","SD","P","PD","PM","PL","U","UP","UB","US","Commands","Components","Settings"],a=s.length;for(n in r)o[n]=r[n]||{};for(i=0;i<a;i++)o[n=s[i]]||(o[n]=r[n]||{});o.C=o.Commands,o.fn={init:function(e,t,r){}},e.Shr=o}(window)},function(e,t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n;Shr.Lang=n={isBoolean:function(e){return"boolean"==typeof e},isNumber:function(e){return"number"==typeof e&&isFinite(e)},isString:function(e){return"string"==typeof e},isUndefined:function(e){return void 0===e},isDefined:function(e){return!n.isUndefined(e)},isNullOrUndefined:function(e){return n.isUndefined(e)||null===e},isArray:function(e){return"[object Array]"===Object.prototype.toString.apply(e)},isObject:function(e){return e&&"object"===r(e)},isFunction:function(e){return"[object Function]"===Object.prototype.toString.apply(e)},isEmptyObject:function(e){for(var t in e)return!1;return!0},isNullOrEmptyObject:function(e){return!e||n.isEmptyObject(e)},getMaxDate:function(){return new Date(2035,11,31)},forRange:function(e,t,r){for(var n=(e=parseInt(e,10))<(t=parseInt(t,10))?1:-1,o=t+n;e!=o&&!1!==r(e);)e+=n;return e},forEach:function(e,t,r){if(e){var o,i=0,s=e.length;if(r)if(n.isUndefined(s)){for(o in e)if(e.hasOwnProperty(o)&&!1===t.apply(e[o],r))break}else for(i=0;i<s&&!1!==t.apply(e[i],r);i++);else if(n.isUndefined(s)){for(o in e)if(e.hasOwnProperty(o)){var a=e[o];if(!1===t.call(a,a,o))break}}else for(var l=e[0];i<s&&(l=e[i],!1!==t.call(l,l,i));i++);}},_bind:void(Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),r=this,n=function(){},o=function(){return r.apply(this instanceof n&&e?this:e,t.concat(Array.prototype.slice.call(arguments)))};return n.prototype=this.prototype,o.prototype=new n,o})),hitch:function(e,t,r){if(2<arguments.length)return this._hitch.apply(n,arguments);if(t||(t=e,e=null),this.isString(t)){if(!(e=e||window)[t])throw"Shr.Lang.hitch: null method: ${0}[${1}]".substitute([e.toString(),t]);return function(){return e[t].apply(e,arguments||[])}}return e?function(){return t.apply(e,arguments||[])}:t},_hitch:function(e,t,r){var n=Object.toArray(arguments,2),o=this.isString(t);return function(){var r=Object.toArray(arguments),i=o?(e||window)[t]:t;return i&&i.apply(e||this,n.concat(r))}},tryToCall:function(e,t,r,o){return n.tryToApply(e,Array.prototype.slice.call(arguments,1))},tryToApply:function(e,t,r){var o;if(n.isFunction(e))try{o=e.apply(r||window,t)}catch(e){}return o},encodeFileName:function(e){return e&&(e=encodeURIComponent(e.replace(/~/g,"~7E").replace(/&/g,"~26").replace(/#/g,"~23").replace(/%/g,"~25"))),e}},Shr.ConditionalQueue=function(){this.done=!1,this.queue=[]},Object.extend(Shr.ConditionalQueue.prototype,{setDone:function(){this.done=!0,this.raise()},add:function(e){Shr.L.isFunction(e)&&(this.done?setTimeout(e,0):this.queue.push(e))},remove:function(e){Shr.L.isFunction(e)&&Shr.Array.remove(this.queue,e)},raise:function(e){if(0<this.queue.length){var t=this.queue;this.queue=[],Shr.L.forEach(t,function(t){Shr.L.isFunction(t)&&Shr.L.tryToCall(t,e)})}}}),Shr.L=Shr.Lang},function(module,exports){function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(){var L=Shr.L;Object.merge=function(e,t){var r;return t&&L.forEach(Array.prototype.slice.call(arguments,1),function(t){for(r in null==e&&(e=new t.constructor),t)"object"==_typeof(t[r])?e[r]=Object.merge(e[r],t[r]):e[r]=t[r]}),e},Object.extend(Object,{each:L.forEach,compare:function(e,t){return e<t?1:t<e?-1:0},propsEqual:function(e,t){if(e==t)return!0;if(e&&t){for(var r in e)if(e[r]!=t[r])return!1;return!0}return!1},createDerived:function(e,t){var r;return e?(e.hasOwnProperty("derivedConstructor")?r=e.derivedConstructor:((r=function(e){e&&Object.extend(this,e)}).prototype=e).derivedConstructor=r,new r(t)):t},get:function(e,t){var r,n,o=0;if(e){if(null==t&&(t=window),e.indexOf(".")<0)return t[e];for(n=(r=e.split(".")).length,o=0;o<n;o++)if(null==(t=t[r[o]]))return null;return t}return null},put:function(e,t,r){var n,o;if(e)if(null!=t&&void 0!==t||(t=window),e.indexOf(".")<0)t[e]=r;else{for(n=e.split(".");1<n.length;)t=void 0===t[o=n.shift()]?t[o]={}:t[o];t[n.shift()]=r}return r},fromString:function fromString(s){var v;if(s)try{eval("v="+s)}catch(e){}return v},fromArray:function(e,t,r,n){return Shr.Array.toLiteral(e,t,r,n)},toArray:function(e,t,r){var n=[];if(e){t=t||0,r=r||function(e,t){return e};var o=0;L.forEach(e,function(e,i){t<++o&&n.push(r(e,i))})}return n},toJavaScript:function(e,t,r){try{var n,o;if(t||(t=5),r||(r=20),null==e)o=L.isUndefined(e)?"undefined":"null";else{var i=e.constructor;if(L.isString(e))o='"'+(e=e.replace(/\\/g,"\\\\").replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/"/g,'\\"').replace(/<\/script>/gi,"<\\/script>"))+'"';else if(i==Number||i==Boolean||i==Date||i==RegExp)o=e.toString();else if(i==Function||t<=1||r<=1);else if(i==Array){for(r--,o="[",n=0;n<e.length;n++)0<n&&(o+=","),r--,o+=Object.toJavaScript(e[n],t-1,r);o+="]"}else{r--;var s,a=[];for(s in e)a[a.length]=s;for(a.sort(),o="{",n=0;n<a.length;n++)s=a[n],0<n&&(o+=","),r--,o+='"'+s+'":'+Object.toJavaScript(e[s],t-1,r);o+="}"}}return o}catch(e){return"{error:"+e.message+"}"}}})}()},function(module,exports){function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var hOb;hOb=Shr.L,Object.extend(String.prototype,{trim:function(){return this.replace(/^\s+|\s+$/g,"")},ltrim:function(){return this.replace(/^\s+/,"")},rtrim:function(){return this.replace(/\s+$/,"")},startsWith:function(e){return 0==this.indexOf(e)},endsWith:function(e){var t=this.lastIndexOf(e);return 0<=t&&t==this.length-e.length},contains:function(e){return!e||(hOb.isString(e)?-1!=this.indexOf(e):e.test(this))},capitalize:function(){return this.replace(/^[a-z]/,function(e){return e.toUpperCase()})},capitalizeWords:function(){return this.replace(/(^|\s)([a-z])/g,function(e){return e.slice(0,-1).concat(e.charAt(e.length-1).toUpperCase())})},decapitalize:function(){return this.replace(/^[A-Z]/,function(e){return e.toLowerCase()})},decapitalizeWords:function(){return this.replace(/(^|\s|-)([A-Z])/g,function(e){return e.slice(0,-1).concat(e.charAt(e.length-1).toLowerCase())})},reverse:function(){for(var e="",t=this.length;0<t;--t)e+=this.charAt(t-1);return e},toSingular:function(){return this.match(/(x|ch|ss|sh)es$/)?this.slice(0,-2):this.replace(/(ies|s)$/,function(e){return"ies"==e?"y":""})},toPlural:function(){return this.replace(/(y|x|ch|ss|sh|.)$/,function(e){return"y"==e?"ies":e.concat("x"==e||2==e.length?"es":"s")})},substitute:function(e){var t,r,n=arguments,o=0;return this.replace(/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g,function(i,s){var a=Object.get(s,e);if(hOb.isNullOrUndefined(a)&&1<n.length)for(t=Array.prototype.slice.call(n,1),r=t&&t.length||0,o=0;o<r&&(a=Object.get(s,t[o]),hOb.isNullOrUndefined(a));o++);return hOb.isNullOrUndefined(a)?"":a})},localize:function(e,t){var r,n=[];for(arguments.callee.debug;e&&e.L10N;)n.push(e.L10N),e=e.context;return n=n.reverse(),r=this.substitute.apply(this,n),t&&(r=r.substitute(t)),r}}),Shr.StringBuilder=function(e){var t=this.parts=[];e&&(t[0]=e),this.write=function(){var e,n,o=0,i=arguments.length;if(0<i&&!0===arguments[0])for(o=1;o<i;o++)"string"===(n=_typeof(e=arguments[o]))||"number"===n&&isFinite(e)?t[t.length]=e:r(e);else for(;o<i;o++)t[t.length]=arguments[o]},this.writeArray=function(e){if(e)for(var n,o=0,i=e.length,s=null;o<i;o++)"string"===(n=_typeof(s=e[o]))||"number"===n&&isFinite(s)?t[t.length]=s:r(s)};var r=this.writeArray;this.writeln=function(){for(var e=0;e<arguments.length;e++)t[t.length]=arguments[e],t[t.length]="\r\n"}},Object.extend(Shr.StringBuilder.prototype,{clear:function(){Shr.Array.clear(this.parts)},isEmpty:function(){return 0==this.parts.length},getArray:function(){return this.parts}}),Shr.StringBuilder.prototype.toString=function(){return this.parts.join("")},Shr.StringEx=function(){var t={optional:function(e,t,r){return e?t?r?t+e+r:t+e:r?e+r:e:""},optionalSuffix:function(e,t){return e?t?e+t:e:""},joinOptional:function(){for(var e="",t=arguments[0],r=1;r<arguments.length;r++){var n=arguments[r];n&&(e?e+=t+n:e=n)}return e},leftPad:function(e,t,r){var n=new String(e);for(null==r&&(r=" ");n.length<t;)n=r+n;return n},escape:function(e){return e.replace(/('|\\)/g,"\\$1")},htmlDecode:function htmlDecode(s){if(null==s)return null;for(var out="",l=s.length,i=0;i<l;i++){var c=s.charAt(i);if("&"==c){var semicolonIndex=s.indexOf(";",i+1);if(0<semicolonIndex){var entity=s.substring(i+1,semicolonIndex);c=1<entity.length&&"#"==entity.charAt(0)?"x"==entity.charAt(1)||"X"==entity.charAt(1)?String.fromCharCode(eval("0"+entity.substring(1))):String.fromCharCode(eval(entity.substring(1))):"",i=semicolonIndex}}out+=c}return out},formatCommaAnd:function(e,t){var r=Shr.Array.getLength(e),n=new Shr.StringBuilder;return Shr.L.forEach(e,function(e,o){n.write(t?t(e):e,0<r&&o==r-2?" and ":1<r&&o<r-1?", ":"")}),n.toString()},hash:function(e){var t,r=0;if(0==(e=e||"").length)return r;for(t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t),r&=r;return Math.abs(r)},checkSum:function(e){for(var t=0,r=0,n=(e||"").length,o=0;o<n;o++)r=(r+(t=(t+e.charCodeAt(o))%255))%255;return r<<8|t}};return t}()},function(module,exports){Object.extend(Number.prototype,{toLetter:function(){var e,t=this;for(e="";0<=t;t=parseInt(t/26)-1)e=String.fromCharCode(t%26+65)+e;return e},toHexString:function(e){var t=Math.round(this).toString(16);return e&&t.length<e&&(t="0000000000000000".slice(0,e-t.length)+t),t},toCount:function(e,t,r){var n;return n=1==this?(e||(e=t.toString().toSingular()),e):(t||(t=e.toString().toPlural()),t.endsWith("ss")?e:t),r?n:this.toN0()+" "+n},toFileSize:function(){var e=this;return e?e<1024?e.toCount("byte"):(e/=1024)<1024?e.toFixed(e<10?2:0)+" KB":(e/=1024)<1024?e.toFixed(e<10?2:0)+" MB":(e/=1024).toFixed(e<10?2:0)+" GB":null},toN0:function(){return this.numberFormat("#,###")},constrain:function(e,t){return e&&this<=e?e:t&&t<=this?t:this}}),function(){var t=Number,StringEx=Shr.StringEx;Object.extend(t,{formatFunctions:{count:0},createNewFormat:function createNewFormat(format){t.formatFunctions.count++;var funcName="format"+t.formatFunctions.count;t.formatFunctions[format]=funcName;var code="Number.prototype."+funcName+" = function(context){\n",formats=format.split(";");switch(formats.length){case 1:code+=t.createTerminalFormat(format);break;case 2:code+='return (this < 0) ? this.numberFormat("'+StringEx.escape(formats[1])+'", 1) : this.numberFormat("'+StringEx.escape(formats[0])+'", 2);';break;case 3:code+='return (this < 0) ? this.numberFormat("'+StringEx.escape(formats[1])+'", 1) : ((this == 0) ? this.numberFormat("'+StringEx.escape(formats[2])+'", 2) : this.numberFormat("'+StringEx.escape(formats[0])+'", 3));';break;default:code+="throw 'Too many semicolons in format string';"}eval(code+"}")},createTerminalFormat:function(e){if(0<e.length&&-1==e.search(/[0#?]/))return"return '"+StringEx.escape(e)+"';\n";var t="var val = (context == null) ? new Number(this) : Math.abs(this);\n",r=!1,n=e,o="",i=0,s=0,a=0,l=!1,c="";(d=e.match(/\..*(e)([+-]?)(0+)/i))&&(c=d[1],l="+"==d[2],a=d[3].length,e=e.replace(/(e)([+-]?)(0+)/i,""));var d=e.match(/^([^.]*)\.(.*)$/);return d&&(n=d[1].replace(/\./g,""),o=d[2].replace(/\./g,"")),0<=e.indexOf("%")&&(t+="val *= 100;\n"),(d=n.match(/(,+)(?:$|[^0#?,])/))&&(t+="val /= "+Math.pow(1e3,d[1].length)+"\n;"),0<=n.search(/[0#?],[0#?]/)&&(r=!0),(d||r)&&(n=n.replace(/,/g,"")),(d=n.match(/0[0#?]*/))&&(i=d[0].length),(d=o.match(/[0#?]*/))&&(s=d[0].length),0<a?t+="var sci = Number.toScientific(val,"+i+", "+s+", "+a+", "+l+");\nvar arr = [sci.l, sci.r];\n":(e.indexOf(".")<0&&(t+="val = (val > 0) ? Math.ceil(val) : Math.floor(val);\n"),t+="var arr = val.round("+s+").toFixed("+s+").split('.');\n",t+="arr[0] = (val < 0 ? '-' : '') + StringEx.leftPad((val < 0 ? arr[0].substring(1) : arr[0]), "+i+", '0');\n"),r&&(t+="arr[0] = Number.addSeparators(arr[0]);\n"),t+="arr[0] = Number.injectIntoFormat(arr[0].reverse(), '"+StringEx.escape(n.reverse())+"', true).reverse();\n",0<s&&(t+="arr[1] = Number.injectIntoFormat(arr[1], '"+StringEx.escape(o)+"', false);\n"),0<a&&(t+="arr[1] = arr[1].replace(/(\\d{"+s+"})/, '$1"+c+"' + sci.s);\n"),t+"return arr.join('.');\n"},toScientific:function(e,t,r,n,o){var i={l:"",r:"",s:""},s="",a=Math.abs(e).toFixed(t+r+1).trim("0"),l=Math.round(new Number(a.replace(".","").replace(new RegExp("(\\d{"+(t+r)+"})(.*)"),"$1.$2"))).toFixed(0);return l.length>=t?l=l.substring(0,t)+"."+l.substring(t):l+=".",i.s=a.indexOf(".")-a.search(/[1-9]/)-l.indexOf("."),i.s<0&&i.s++,i.l=(e<0?"-":"")+StringEx.leftPad(l.substring(0,l.indexOf(".")),t,"0"),i.r=l.substring(l.indexOf(".")+1),i.s<0?s="-":o&&(s="+"),i.s=s+StringEx.leftPad(Math.abs(i.s).toFixed(0),n,"0"),i},injectIntoFormat:function(e,t,r){for(var n=0,o=0,i="";n<t.length&&o<e.length&&0<=t.substring(n).search(/[0#?]/);)t.charAt(n).match(/[0#?]/)?("-"!=e.charAt(o)?i+=e.charAt(o):i+="0",o++):i+=t.charAt(n),++n;return o==e.length&&"-"==e.substring(o-1)&&(i+="-"),o<e.length&&r&&(i+=e.substring(o)),n<t.length&&(i+=t.substring(n)),i.replace(/#/g,"").replace(/\?/g," ")},addSeparators:function(e){return e.reverse().replace(/(\d{3})/g,"$1,").reverse().replace(/^(-)?,/,"$1")}})}(),Object.extend(Number.prototype,{numberFormat:function(e,t){return isNaN(this)||this==1/0||this==-1/0?this.toString():(null==Number.formatFunctions[e]&&Number.createNewFormat(e),this[Number.formatFunctions[e]](t))},round:function(e){if(0<e){var t=this.toFixed(e+1).match(new RegExp("(-?\\d*).(\\d{"+e+"})(\\d)\\d*$"));if(t&&t.length)return new Number(t[1]+"."+Shr.StringEx.leftPad(Math.round(t[2]+"."+t[3]),e,"0"))}return this}})},function(e,t){Shr.EventHandler=function(){this._handlers=[]},Object.extend(Shr.EventHandler.prototype,{add:function(e){this._handlers.push(e)},remove:function(e){Shr.Array.remove(this._handlers,e)},hasHandlers:function(){return 0<this._handlers.length},getHandlerCount:function(){return this._handlers.length},raise:function(){for(var e=this._handlers,t=0;t<e.length;t++)Shr.L.tryToApply(e[t],arguments)},tryRaise:function(e){for(var t=this._handlers,r=0;r<t.length;r++)Shr.L.tryToApply(t[r],arguments)}})},function(e,t){var r,n;Shr.TimerPool=(r=Shr.EventHandler,(n={ms40:new r,s1:new r,m1:new r,_interval:null,_init:function(){var e=(new Date).getTime();n._nextS=e+1e3,n._nextM=e+6e4,n._interval=window.setInterval(n._onTick,40)},_onTick:function(){var e=new Date,t=e.getTime();n.ms40.raise(e),n._nextS<=t&&(n._nextS=t+1e3,n.s1.raise(e)),n._nextM<=t&&(n._nextM=t+6e4,n.m1.raise(e))}})._init(),n)},function(e,t){var r,n,o,i,s,a;r=navigator.userAgent,a=window.trUPP=window.trUPP||{},i=(n=r).toLowerCase(),(s=a.B={}).isChrome=-1!=n.indexOf("Chrome"),s.isSafari=-1!=n.indexOf("Safari")&&!s.isChrome,s.isFirefox=-1!=n.indexOf("Firefox"),s.isEdge=-1!=n.indexOf("Edge"),s.isIos=/ipad|iphone|ipod/.test(i),s.isAndroid=-1!=i.indexOf("android"),s.isTouch=!!("ontouchstart"in window),s.isIE=!!n.match(/Trident/g)||!!n.match(/MSIE/g),s.isIE?(o=n.match(/MSIE\s([\d]+)/)||n.match(/rv:([\d]+)/),s.ieVersion=o&&o[1]?o[1]:""):s.ieVersion="",s.isMac=/macintosh/.test(i),s.isWin=/windows/.test(i),s.browser=s.isChrome?"chrome":s.isSafari?"safari":s.isIE?"ie":s.isFirefox?"firefox":"other",s.os=s.isMac?"mac":s.isWin?"windows":s.isAndroid?"android":s.isIos?"ios":"other","Shr"in window&&(window.Shr.B=window.Shr.Browser=window.trUPP.B)},function(e,t){!function(){function e(e,t){for(var r=0;r<e.length;r++)if(e[r]==t)return r;return-1}function t(e,t){var r=Shr.L.isFunction(e[t]);return r&&"indexOf ".indexOf(t+" "),r}Shr.Browser.isIE&&(Shr.L.isFunction([].indexOf)||(Array.prototype.indexOf=function(t){return e(this,t)})),Shr.Array=Object.extend({},{add:function(e,r){Shr.L.isNullOrUndefined(e)||(t(e,"add")?e.add(r):e[e.length]=r)},getLength:function(e){return Shr.L.isNullOrUndefined(e)?0:t(e,"getLength")?e.getLength():e.length},clear:function(e){if(!Shr.L.isNullOrUndefined(e))if(t(e,"clear"))e.clear();else{var r=e;r.splice(0,r.length)}},append:function(e,r){if(!Shr.L.isNullOrUndefined(e))if(t(e,"append"))e.append(r);else{var n=e;Shr.L.isArray(r)?Array.prototype.push.apply(n,r):Array.prototype.push.call(n,r)}},remove:function(e,r){if(!Shr.L.isNullOrUndefined(e))if(t(e,"remove"))e.remove(r);else for(var n=e,o=0,i=n.length;o<i;o++)if(n[o]==r)return void n.splice(o,1)},removeAllMatches:function(e,r){if(!Shr.L.isNullOrUndefined(e))if(t(e,"removeAllMatches"))e.removeAllMatches(r);else for(var n=e,o=n.length-1;0<=o;o--)n[o]==r&&n.splice(o,1)},removeByProperty:function(e,r,n){if(!Shr.L.isNullOrUndefined(e))if(t(e,"removeByProperty"))e.removeByProperty(r,n);else{var o=e,i=Shr.Array.indexOfByProperty(o,r,n);0<=i&&Shr.Array.removeAt(o,i)}},insert:function(e,r,n){if(!Shr.L.isNullOrUndefined(e))if(t(e,"insert"))e.insert(r,n);else{var o=e;r<0?o[o.length]=n:o.splice(r,0,n)}},removeAt:function(e,r){if(!Shr.L.isNullOrUndefined(e))return t(e,"removeAt")?e.removeAt(r):e.splice(r,1)[0]},indexOf:function(r,n){return Shr.L.isNullOrUndefined(r)?-1:t(r,"indexOf")?r.indexOf(n):e(r,n)},indexOfByProperty:function(e,r,n){if(Shr.L.isNullOrUndefined(e))return-1;if(t(e,"indexOfByProperty"))return e.indexOfByProperty(r,n);for(var o=e,i=o.length,s=0;s<i;s++){var a=o[s];if(a&&a[r]==n)return s}return-1},findByProperty:function(e,r,n){if(Shr.L.isNullOrUndefined(e))return null;if(t(e,"findByProperty"))return e.findByProperty(r,n);var o=e,i=Shr.Array.indexOfByProperty(o,r,n);return-1!=i?o[i]:null},findByProperties:function(e,r){if(Shr.L.isNullOrUndefined(e))return null;if(t(e,"findByProperties"))return e.findByProperties(r);var n=e,o=Shr.Array.indexOfByProperties(n,r);return-1!=o?n[o]:null},indexOfByProperties:function(e,r){if(Shr.L.isNullOrUndefined(e))return-1;if(t(e,"indexOfByProperties"))return e.indexOfByProperties(r);for(var n=e,o=n.length,i=0;i<o;i++){var s=n[i];if(s){var a=!0,l=null;for(l in r)if(r.hasOwnProperty(l)&&r[l]!=s[l]){a=!1;break}if(a)return i}}return-1},filter:function(e,r,n){if(Shr.L.isNullOrUndefined(e))return[];if(t(e,"filter"))return e.filter(r);for(var o=e,i=[],s=0,a=o.length;s<a;s++)r.call(n||window,o[s],s,o)&&(i[i.length]=o[s]);return i},filterByProperty:function(e,r,n){if(Shr.L.isNullOrUndefined(e))return[];if(t(e,"filterByProperty"))return e.filterByProperty(r,n);for(var o=[],i=e,s=i.length,a=0;a<s;a++){var l=i[a];l&&l[r]==n&&(o[o.length]=l)}return o},sortByProperty:function(e,r){if(Shr.L.isNullOrUndefined(e))return[];if(t(e,"sortByProperty"))return e.sortByProperty(r);var n=e;if(!r)return n;for(var o=r.split(","),i=o.length,s=0,a=new Array(i);s<i;s++){var l=o[s],c=l.indexOf(" ");0<=c&&(o[s]=l.substring(0,c),"desc"==l.substring(c+1).toLowerCase()&&(a[s]=!0))}return n.sort(function(e,t){for(var r=0;r<i;r++){var n=o[r],s=e[n],l=t[n];if(s&&Shr.L.isString(s)&&(s=s.toLowerCase()),l&&Shr.L.isString(l)&&(l=l.toLowerCase()),s!=l){var c=a[r];if(null==s)return c?1:-1;if(null==l)return c?-1:1;if(s<l)return c?1:-1;if(l<s)return c?-1:1}}return 0})},toLiteral:function(e,r,n,o){if(Shr.L.isNullOrUndefined(e))return null;if(t(e,"toLiteral"))return e.toLiteral(r,n,o);var i,s,a,l=0,c=e,d=c.length;for(o=o||{};l<d;l++)i=c[l],a=null,s=n?n(i):i,i&&null!=(a=r?i[r]||i:l)&&(o[a]=s);return o},substitute:function(e,r){if(Shr.L.isNullOrUndefined(e))return null;if(t(e,"substitute"))return e.substitute(r);var n=0,o=e;if(r)for(var i in r)if(r.hasOwnProperty(i)){if(isNaN(n=parseInt(i)))continue;o.length>=n&&(o[n]=r[i])}return o},swap:function(e,t,r){e[t]=e.splice(r,1,e[t])[0]},dispose:function(e){if(!Shr.L.isNullOrUndefined(e))if(t(e,"dispose"))e.dispose();else{for(var r=e,n=0;n<r.length;n++){var o=r[n];o&&(o instanceof Array?Shr.Array.dispose(o):o.dispose&&o.dispose())}Shr.Array.clear(r)}},map:function(e,t,r){var n,o;if(e&&e.map)n=e.map.call(e,t,r);else if(e)for(n=[],o=0;o<e.length;o++)n.push(t.call(r||window,e[o],o,e));return n},end:{}})}()},function(e,t){!function(){var e,t,n=Shr.P,o=Shr.B,i=Shr.A,s=Shr.L,a=window.Trace,l=window.ActiveXObject;Shr.Event=(e=Shr.Browser,t={getEventDetail:function(r){var n=null;return!r&&window.event&&(r=event),r&&(n=t.getEvent(r),Object.extend(n,{pageX:e.isSafari?r.pageX:r.clientX+Shr.DocumentEx.getScrollLeft(),pageY:e.isSafari?r.pageY:r.clientY+Shr.DocumentEx.getScrollTop()})),n},getEvent:function(t){var r=null;return!t&&window.event&&(t=event),t&&(r={clientX:t.clientX,clientY:t.clientY,srcElement:t.srcElement||Shr.Dom&&Shr.Dom.fromNode(t.target),button:t.button,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey,keyCode:t.keyCode},e.isSafari&&(r.pageX=t.pageX,r.pageY=t.pageY)),r},getSrcElement:function(e){var t=null;return!e&&window.event&&(e=window.event),e?t=e.srcElement||Shr.Dom&&Shr.Dom.fromNode(e.target):window.event&&(t=event.srcElement),t},stopPropagation:function(e){e||(e=window.event),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},preventDefault:function(e){e||(e=window.event),e.preventDefault?e.preventDefault():e.returnValue=!1},stop:function(e){e||(e=window.event),e.stopPropagation?(e.stopPropagation(),e.preventDefault()):(e.cancelBubble=!0,e.returnValue=!1)},addOneTimeEventListener:function(e,t,r,n){u.addEventListener(e,t,function o(){u.removeEventListener(e,t,o,n),Shr.L.tryToApply(r,Array.prototype.slice.call(arguments,1))},n)},addEventListener:function(e,t,r,n){e&&r&&(e.addEventListener?e.addEventListener(t,r,n):e.attachEvent?e.attachEvent("on"+t,r,n):e["on"+t]=r)},removeEventListener:function(e,t,r,n){e&&r&&(e.removeEventListener?e.removeEventListener(t,r,n):e.detachEvent?e.detachEvent("on"+t,r,n):e["on"+t]=null)},Listener:Object.extend(function(e){this.fn=e},{prototype:{add:function(e,r,n,o){this.remove(),t.addEventListener(this._target=e,this._type=r,this._listener=n.bind(null,this),!!o)},remove:function(){this._listener&&(t.removeEventListener(this._target,this._type,this._listener),delete this._type,delete this._target,delete this._listener)}}})},Object.extend(t,{MessageListener:Object.extend(function(e,t,r){Shr.Event.Listener.apply(this,arguments),this.source=t,this.origin=r},{prototype:Object.extend({},t.Listener.prototype,{add:function(e,r,n,o){t.Listener.prototype.add.call(this,window,"message",function(t,o){o.source==(r||t.source)&&o.origin==(n||t.origin)?e(t,o):Console.write("Shr.Event.MessageListener callback *not* being invoked, srcMatch="+!(o.source!=(r||t.source))+" _evt.origin="+o.origin+" required.origin="+(n||t.origin)+" data="+o.data)},o)}})})}),t);var c,d,h,u=Shr.Event;document.createEvent&&!window.CustomEvent&&((c=function(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var r=document.createEvent("CustomEvent");return r.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),r}).prototype=window.Event.prototype,window.CustomEvent=c),Shr.Dom=function(){new Date;var e="complete"==document.readyState,t={body:document.body,head:document.getElementsByTagName("HEAD")[0],walk:function(e,r){for(r(e),e=e.firstChild;e;)t.walk(e,r),e=e.nextSibling},_nextId:0,_contentReadyInitialized:!1,_contentReadyQueue:[],onDomReady:new Shr.ConditionalQueue,onContentReady:function(e,r,n,o,i){if(e&&r){var s={id:e,fn:r,obj:n,scope:!0===o?n:o,condFn:i};t._contentReadyQueue.push(s),t._contentReadyInitialized||(Shr.TimerPool.ms40.add(t._checkOnContentReady),t._contentReadyInitialized=!0)}},_checkOnContentReady:function(){var e=t._contentReadyQueue,r=[];t._contentReadyQueue=[],s.forEach(e,function(e){e.id&&t.get(e.id)&&(!e.condFn||e.condFn&&e.condFn())?e.fn&&e.fn.call(e.scope||window,e.obj,e):r.push(e)}),t._contentReadyQueue=r.concat(t._contentReadyQueue),0==t._contentReadyQueue.length&&(Shr.TimerPool.ms40.remove(t._checkOnContentReady),t._contentReadyInitialized=!1)},get:function(e,r){if(r=r||document,e){if(e.nodeType||e.item)return e;if(s.isString(e)||s.isNumber(e))return r.getElementById(e);if("length"in e){for(var n=[],o=0;o<e.length;o++)n[n.length]=t.get(e[o],r);return n}return e}return null},set:function(e,r){if((e=t.get(e))&&(e.innerHTML=s.isNullOrUndefined(r)?"":r),e&&o.isIE&&"SELECT"==e.tagName){s.forEach(e.childNodes,function(t){try{e.removeChild(t)}catch(t){}});var n=document.createElement("DIV");n.innerHTML=e.outerHTML.replace(/\<\/select\>$/i,r)+"</select>",e.parentNode.replaceChild(n.firstChild,e)}return e},setWhenReady:function(e,r){var n=t.get(e);n?t.set(n,r):t.onContentReady(e,function(){t.set(e,r)})},getAttribute:function(e,r){if(e=t.get(e))try{return e.getAttribute(r)}catch(e){}return null},getUniqueId:function(){return t._nextId++,"sfly_"+t._nextId},getByNodeId:function(e,r){return r&&(e+="_"+r),t.get("n_"+e)},getByNode:function(e){return e?t.get("n_"+e.nodeId):null},getNode:function(e){return e?n.nodes[e.id.substring(2)]:null},getNodeId:function(e){return e&&e.id?e.id.substring(2):-1},getElementId:function(e,t){return e?"n_"+(e.nodeId||e)+(t?"_"+t:""):""},create:function(e,r,n,o){var i,s=document.createElement(e);if(n)for(var a in n)i=n[a],Shr.L.isString(i)?i=Shr.Html.escapeAttributeValue(i):Shr.L.isFunction(i)&&(i=Shr.EB.on(a.replace(/^on/,"").toLowerCase(),i),"onclick"==a&&(i+="return false")),s.setAttribute("className"==a?"class":a,i);return o&&(s.innerHTML=o),r&&(r=t.get(r))&&r.appendChild(s),s},createStyleElement:function(e){var t=Shr.Dom.create("style");return t.type="text/css",t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e)),t},fromNode:function(e){for(;e;){var t=e.nodeType;if(1==t||9==t)return e;e=e.parentNode}return null},_isElementCollection:function(e){return!(e&&e.tagName||void 0===e.length)},show:function(e,r){if(e=t.get(e))if(t._isElementCollection(e))s.forEach(e,function(e){t.show(e,r)});else{var n=r||"block",o=e.tagName;"TR"!=o&&"INPUT"!=o&&"SPAN"!=o&&"LABEL"!=o||(n=""),t.setStyle(e,"display",n)}},toggleShow:function(e,r){(r?t.show:t.hide)(e)},setStyle:function(e,r,n){(e=t.get(e))&&e.style&&(s.isString(r)?e.style[r]=n:s.isObject(r)&&s.forEach(r,function(t,r){e.style[r]=t}))},getProperty:function(e,r,n){return e=t.get(e),Shr.L.isNullOrUndefined(e)?n:e[r]},setProperty:function(e,r,n){(e=t.get(e))&&(s.isString(r)?e[r]=n:s.isObject(r)&&s.forEach(r,function(t,r){e[r]=t}))},hide:function(e){(e=t.get(e))&&(t._isElementCollection(e)?s.forEach(e,t.hide):t.setStyle(e,"display","none"))},isHidden:function(e){return null!=(e=t.get(e))&&"none"==e.style.display},toggleHidden:function(e){return e=t.get(e),t.isHidden(e)?(t.show(e),!0):(t.hide(e),!1)},toggleCollapse:function(e,r,n){n=n||{};var o=!0;if(e=t.get(e)){o=t.isHidden(e);var a=!(!r||"IMG"!=r.tagName);o?(Shr.Animation.expandHeight(e,0,n.callback),r&&!s.isEmptyObject(n)?(t.removeClass(r,n.exp),t.addClass(r,n.col)):a&&(r.src=i.imageUrl("collapseArrowUp.gif"),r.alt=r.alt.replace("Expand","Collapse"))):(Shr.Animation.collapseHeight(e,0,n.callback),r&&!s.isEmptyObject(n)?(t.addClass(r,n.exp),t.removeClass(r,n.col)):a&&(r.src=i.imageUrl("collapseArrowDown.gif"),r.alt=r.alt.replace("Collapse","Expand")))}return o},collapse:function(e,r){var n;return!!(n=1==r?t.getParentByTag(e,"TABLE"):t.getParentByTag(e,"DIV"))&&(n=n.nextSibling,t.toggleCollapse(n,e))},getClientBounds:function(e){var r,n;try{if((e=t.get(e))&&e.parentNode&&1==e.nodeType)if(e.getBoundingClientRect)n=e.getBoundingClientRect(),r=new Shr.Rect(n.left-2,n.top-2,n.right-n.left,n.bottom-n.top);else if(document.getBoxObjectFor)n=document.getBoxObjectFor(e),r=new Shr.Rect(n.x-Shr.DocumentEx.getScrollLeft(),n.y-Shr.DocumentEx.getScrollTop(),n.width,n.height);else{r=new Shr.Rect(e.offsetLeft,e.offsetTop,e.offsetWidth,e.offsetHeight);for(var i=e.offsetParent;null!=i;)r.x+=i.offsetLeft,r.y+=i.offsetTop,i=i.offsetParent;if(o.isSafari&&"TR"==e.tagName){var s=e.parentNode.parentNode;r.width=s.offsetWidth;var l=e.firstChild.offsetTop;r.y+=l,e.nextSibling?r.height=e.nextSibling.firstChild.offsetTop-l:r.height=s.offsetHeight-l}r.x-=Shr.DocumentEx.getScrollLeft(),r.y-=Shr.DocumentEx.getScrollTop()}}catch(e){a.error("Error during Dom.getPageBounds.",e)}return r||(r=new Shr.Rect(0,0,0,0)),r},getPageBounds:function(e){var r,n;e=t.get(e);try{if(e&&e.parentNode&&1==e.nodeType)if(e.getBoundingClientRect)n=e.getBoundingClientRect(),r=new Shr.Rect(n.left-2+Shr.DocumentEx.getScrollLeft(),n.top-2+Shr.DocumentEx.getScrollTop(),n.right-n.left,n.bottom-n.top);else if(document.getBoxObjectFor)n=document.getBoxObjectFor(e),r=new Shr.Rect(n.x,n.y,n.width,n.height);else{r=new Shr.Rect(e.offsetLeft,e.offsetTop,e.offsetWidth,e.offsetHeight);for(var i=e.offsetParent;null!=i;)r.x+=i.offsetLeft,r.y+=i.offsetTop,i=i.offsetParent;if(o.isSafari&&"TR"==e.tagName){var s=e.parentNode.parentNode;r.width=s.offsetWidth;var l=e.firstChild.offsetTop;r.y+=l,e.nextSibling?r.height=e.nextSibling.firstChild.offsetTop-l:r.height=s.offsetHeight-l}}}catch(e){a.error("Error during Dom.getPageBounds.",e)}return r||(r=new Shr.Rect(0,0,0,0)),r},clientRectToPageRect:function(e){return new Shr.Rect(e.x+Shr.DocumentEx.getScrollLeft(),e.y+Shr.DocumentEx.getScrollTop(),e.width,e.height)},setBoundsRect:function(e,r){var n=t.setStyle;n(e,"left",r.x+"px"),n(e,"top",r.y+"px"),n(e,"width",r.width+"px"),n(e,"height",r.height+"px")},setBounds:function(e,r,n,o,i){var s=t.setStyle;s(e,"left",r+"px"),s(e,"top",n+"px"),s(e,"width",o+"px"),s(e,"height",i+"px")},centerInWindow:function(e){var r=t.getClientBounds(e),n=Shr.DocumentEx.getClientWidth(),o=Shr.DocumentEx.getClientHeight(),i=Math.max(0,Shr.DocumentEx.getScrollLeft()+(n-r.width)/2),s=Math.max(0,Shr.DocumentEx.getScrollTop()+(o-r.height)/2);t.setLocation(e,i,s)},centerInBounds:function(e,r){var n=t.getClientBounds(e),o=Shr.DocumentEx.getClientWidth(),i=Shr.DocumentEx.getClientHeight(),s=Math.min(r&&r.width||o,o),a=Math.min(r&&r.height||i,i),l=Math.max(0,Shr.DocumentEx.getScrollLeft()+(s-n.width)/2),c=Math.max(0,Shr.DocumentEx.getScrollTop()+(a-n.height)/2);t.setLocation(e,l,c)},centerAndRight:function(e){var r=t.getClientBounds(e),n=Shr.DocumentEx.getClientWidth(),o=Math.max(0,n-r.width-10);(0,t.setStyle)(e,"left",o+"px")},setLocation:function(e,r,n){var o=t.setStyle;o(e,"left",r+"px"),o(e,"top",n+"px")},setSize:function(e,r,n){t.setWidth(e,r),t.setHeight(e,n)},setHeight:function(e,r){t.setStyle(e,"height",isNaN(r)?r:r+"px")},setWidth:function(e,r){t.setStyle(e,"width",isNaN(r)?r:r+"px")},disableButton:function(e,r){(e=t.get(e))&&(r?t.enableButton(e):t.hasClass(e,"shr-btn")?Shr.SflyButton.disable(e):(e.disabled=!0,t.addClass(e,"button-disabled")))},enableButton:function(e){(e=t.get(e))&&(t.hasClass(e,"shr-btn")?Shr.SflyButton.enable(e):(e.disabled=!1,t.removeClass(e,"button-disabled")))},formatLength:function(e,t){return e?e.constructor==Number?e+"px":e:t||""},isLeftHalf:function(e,r){var n=t.getClientBounds(e);return r<=n.x+n.width/2},isTopHalf:function(e,r){var n=t.getClientBounds(e);return r<=n.y+n.height/2},isBefore:function(e,t,r){return!(!e||!t||r!=e&&(r!=e.nextSibling||t!=e.parentNode))},contains:function(e,t){if(e&&t){if(e.contains)return e.contains(t);for(;null!=e;){if(t==e)return!0;e=e.parentNode}return!1}return!1},addToHead:function(e){var t=document.getElementsByTagName("head")[0];return t&&t.appendChild(e)},removeNode:function(e){(e=t.get(e))&&e.parentNode&&e.parentNode.removeChild(e)},swapNode:function(e,t){if(e&&t)if(e.swapNode)e.swapNode(t);else{var r=t.parentNode,n=t.nextSibling;e.parentNode.replaceChild(t,e),r.insertBefore(e,n)}},optionalInsertBefore:function(e,t,r){e&&t&&(r==e&&r==e.nextSibling&&t==e.parentNode||t.insertBefore(e,r))},replaceNode:function(e,r){var n;(e=t.get(e))&&e.parentNode&&(s.isString(r)?e.outerHTML?e.outerHTML=r:((n=document.createElement("DIV")).innerHTML=r,t.replaceNode(e,n.removeChild(n.firstChild))):e.replaceNode?e.replaceNode(r):(e.parentNode.insertBefore(r,e),e.parentNode.removeChild(e)))},insertBefore:function(e){var r=(e=t.get(e)).parentNode;if(r)for(var n=1;n<arguments.length;n++)r.insertBefore(arguments[n],e)},insertAfter:function(e){var r,n=(e=t.get(e)).parentNode;if(n)if(e==n.lastChild)for(r=1;r<arguments.length;r++)n.appendChild(arguments[r]);else for(e=e.nextSibling,r=1;r<arguments.length;r++)n.insertBefore(arguments[r],e)},_classExpressions:{},_getClassExpression:function(e){var r=t._classExpressions[e];return r||(r=new RegExp("(^|\\s+)"+e+"($|\\s+)"),t._classExpressions[e]=r),r},_isInClass:function(e,t){if(e){var r=e.className;if(r)return t.test(r)}return!1},hasClass:function(e,r){var n=t._getClassExpression(r);return e=t.get(e),t._isInClass(e,n)},addClass:function(e,r){(e=t.get(e))&&(t._isElementCollection(e)?s.forEach(e,function(e){t.addClass(e,r)}):t.hasClass(e,r)||(e.className?e.className+=" "+r:e.className=r))},removeClass:function(e,r){if(e=t.get(e))if(t._isElementCollection(e))s.forEach(e,function(e){t.removeClass(e,r)});else{var n=e.className;n&&(n==r?n="":(Shr.L.isArray(r)||(r=[r]),Shr.L.forEach(r,function(e){var r=t._getClassExpression(e);n=n.replace(r," ")})),e.className=n)}},getChildrenByClass:function(e,r,n){var o=[];if((e=t.get(e))&&!n&&e.getElementsByClassName)o=Shr.Array.map(e.getElementsByClassName(r),function(e){return e});else if(e){n=n||"*";for(var i,s=0,a=t._getClassExpression(r),l=e.getElementsByTagName(n),c=l&&l.length;s<c;s++)i=l[s],t._isInClass(i,a)&&o.push(i)}return o},getFirstChildByClass:function(e,r){e=t.get(e);for(var n=t._getClassExpression(r);e;){if(t._isInClass(e,n))return e;e=e.firstChild}return null},getChildByClass:function(e,r,n){var o,i,s,a,l;if(e=t.get(e))for(s=t._getClassExpression(r),i=(a=e.getElementsByTagName(n||"*")).length,o=0;o<i;o++)if(l=a[o],t._isInClass(l,s))return l;return null},getParentByClass:function(e,r){e=t.get(e);for(var n=t._getClassExpression(r);e;){if(t._isInClass(e,n))return e;e=e.parentNode}return null},getChildElement:function(e,r,n){var o,i,s,a,l,c=0;if(e=t.get(e))for(o=(a=e.getElementsByTagName(r)).length,c=0;c<o;c++){for(l in i=a[c],s=!0,n){if("innerHTML"==l&&i.innerHTML!=n[l]){s=!1;break}if(i[l]!=n[l]){s=!1;break}}if(s)return i}return null},getChildrenByTag:function(e,r,n){var o=[];return e=t.get(e),s.forEach(e&&e.getElementsByTagName(r),function(e){var t=!0;Shr.L.forEach(n,function(r,n){return t=e[n]==r}),t&&o.push(e)}),o},getParentByTag:function(e,t){for(;e;){if(e.tagName==t)return e;e=e.parentNode}return null},getParentAttribute:function(e,r){return e=t.getParentByAttribute(e,r),t.getAttribute(e,r)},getParentByAttribute:function(e,r,n){if(n)for(;e&&e.getAttribute;){if(t.getAttribute(e,r)==n)return e;e=e.parentNode}else for(;e&&e.getAttribute;){if(null!=t.getAttribute(e,r))return e;e=e.parentNode}return null},getNextSiblingByAttribute:function(e,r,n){if(e&&(e=e.nextSibling),n)for(;e&&e.getAttribute;){if(t.getAttribute(e,r)==n)return e;e=e.nextSibling}else for(;e&&e.getAttribute;){if(null!=t.getAttribute(e,r))return e;e=e.nextSibling}return null},getRadioValue:function(e){var t=this.getRadioChecked(e);return t?t.value:null},getRadioIndex:function(e){if(e)if(e.length){for(var t=0;t<e.length;t++)if(e[t].checked)return t}else if(e.checked)return 0;return-1},getRadioChecked:function(e){if(e)if(e.length)for(var t=0;t<e.length;t++){var r=e[t];if(r.checked)return r}else if(e.checked)return e;return null},getSelectedText:function(e){return e?e.options[e.selectedIndex].text:null},setSelectedValue:function(e,r){var n;return(e=t.get(e))&&e.options&&s.forEach(e.options,function(t,o){if(t&&t.value==r)return n=o,e.selectedIndex=n,!1}),n},addInputValue:function(e,t,r){if(e){var n=parseInt(e.value,10)+t;r&&n<r&&(n=r),e.value=n}},getValue:function(e){return e?e.value:null},setValue:function(e,r){(e=t.get(e))&&(e.value=r)},setInputFocus:function(e){if(e){t.tryFocus(e);var r=this;setTimeout(function(){r.setInputFocusDone(e)},50)}},setInputFocusDone:function(e){e&&e.select&&e.select()},tryFocus:function(e,r){if(e=t.get(e))try{!r||"INPUT"!=e.tagName&&"TEXTAREA"!=e.tagName?e.focus():e.select()}catch(e){}},setDocumentInputFocus:function(){for(var e=0;e<document.forms.length;e++){var r=document.forms[e];if(t.setFormInputFocus(r))break}},setFormInputFocus:function(e){for(var r=0;r<e.length;r++){var n=e[r],o=n.type;if("hidden"!=o&&"submit"!=o&&"button"!=o&&!n.disabled&&n.name)try{return t.setInputFocus(n),!0}catch(e){}}return!1},showTag:function(e,t,r){r||(r=document);for(var n=r.getElementsByTagName(t),o=e?"visible":"hidden",i=0;i<n.length;i++)n[i].style.visibility=o},showNativeControls:function(e,r){o.isWin,o.isIE6&&t.showTag(e,"SELECT",r)},getComputedStyle:function(e,r){var n=null;if(!(e=t.get(e)))return n;var o=e.ownerDocument||e.document;if(o.defaultView&&o.defaultView.getComputedStyle){var i=o.defaultView.getComputedStyle(e,"");i&&(n=i[r])}else n=e.currentStyle?e.currentStyle[r]:null;return n},setOpacity:function(e,r){if(e=e&&t.get(e)){var n=e.style;if(n.opacity=r,o.hasFilters&&e.filters){var i=e.filters.alpha;i?i.opacity=r:n.filter+=" progid:DXImageTransform.Microsoft.Alpha(Opacity="+parseInt(100*r)+")"}}},_sbWidth:null,_sbHeight:null,scrollBarWidth:function(){if(!t._sbWidth){var e=document.createElement("DIV"),r=e.appendChild(document.createElement("DIV"));e.style.visibility="hidden",e.style.position="absolute",e.style.width=e.style.height="150px",r.style.width=r.style.height="200px",document.body.appendChild(e),e.style.overflow="hidden",t._sbWidth=e.clientWidth,t._sbHeight=e.clientHeight,e.style.overflow="scroll",t._sbWidth-=e.clientWidth,t._sbHeight-=e.clientHeight,document.body.removeChild(e)}return t._sbWidth},scrollBarHeight:function(){return t._sbHeight||t.scrollBarWidth(),t._sbHeight}};return t.getElement=t.get,t.setHtml=t.set,t.getXY=t.getClientBounds,t.setXY=t.setBoundsRect,t.versionsLoaded=function(){e&&t.onDomReady.setDone()},document.addEventListener?u.addOneTimeEventListener(document,"DOMContentLoaded",function(){e=!0,t.onDomReady.setDone()}):document.attachEvent&&document.attachEvent("onreadystatechange",function r(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",r),e=!0,t.onDomReady.setDone())},!1),u.addOneTimeEventListener(window,"load",function(){e=!0,t.onDomReady.setDone()}),t}(),Shr.ImageEx=(d=Shr.Dom,h={_usePngFilter:o.isIE6&&o.hasFilters,formatImg:function(e,t,r,n,o){return n||(n={}),o||(o={}),e&&(e=e.toLowerCase()),h._usePngFilter&&e.endsWith(".png")?(n.src=Shr.ImgSrc.blank,o.width=t+"px",o.height=r+"px",o.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+e+", sizingMethod=scale)"):(n.src=e,o.width=t+"px",o.height=r+"px"),Shr.HtmlFactory.img(n,o)},setSrc:function(e,t){h._usePngFilter&&t.endsWith(".png")?(e.src=Shr.ImgSrc.blank,e.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+t+"', sizingMethod='scale')"):(e.src=t,h._usePngFilter&&(e.style.filter=""))},onError:function(e,t){e&&(1==t?e.src=Shr.ImgSrc.blank:(e=d.getParentByClass(e,"image-border")||e,d.hide(e)))}}),Shr.ImageSizer=function(e,t,r){this._id=Shr.ImageSizer._sizers.length,(Shr.ImageSizer._sizers[this._id]=this).maxWidth=e,this.maxHeight=t,r&&Object.extend(this,r)},Object.extend(Shr.ImageSizer.prototype,{isHidden:function(e){return 0<this.minFileSize&&0<e.fileSize&&e.fileSize<this.minFileSize||0<this.minWidth&&0<e.width&&e.width<this.minWidth||0<this.minHeight&&0<e.height&&e.height<this.minHeight},_getClippedBounds:function(e,t,r,n){var o,i,s=e/r,a=t/n;return i=s<1&&a<1?a<s?(o=e,Math.round(n*s)):(o=Math.round(r*a),t):(o=r,n),new Shr.Rect(Math.round((e-o)/2),Math.round((t-i)/3),o,i)},_getScaledSize:function(e,t,r,n){var o=1;return 0<e&&e<r&&(o=e/r),0<t&&t<n&&(o=Math.min(o,t/n)),o<1?{ratio:o,width:Math.round(r*o),height:Math.round(n*o)}:{width:r,height:n}},setSize:function(e,t,r){var n,o=t.width,i=t.height,s=this.maxWidth,a=this.maxHeight;this.clip?(n=this._getClippedBounds(s,a,o,i),e.width=n.width,e.height=n.height,r&&(n.x&&(r["margin-left"]=n.x+"px"),n.y&&(r["margin-top"]=n.y+"px"))):(n=this._getScaledSize(s,a,o,i)).ratio<1&&(e.width=Math.round(o*n.ratio),e.height=Math.round(i*n.ratio)),this.onSetSize&&this.onSetSize(e,this.args,s,a,r)},_onImageLoad:function(e,t){e.style.display="";var r=Shr.ImageSizer._imagesByIndex[t];Object.extend(r,{width:e.width,height:e.height,fileSize:e.fileSize});var n,o=e.width,i=e.height,s=this.maxWidth,a=this.maxHeight;if(this.isHidden(e))e.style.display="none";else if(this.clip)n=this._getClippedBounds(s,a,o,i),e.width=n.width,e.height=n.height,n.x&&(e.style.marginLeft=n.x+"px"),n.y&&(e.style.marginTop=n.y+"px");else{var l=(n=this._getScaledSize(s,a,o,i)).ratio;l<1&&(l<.5&&!this.noTip&&e.setAttribute("tip","<img "+Shr.Html.attribute("src",e.src)+"' width='"+o+"px' height='"+i+"px' />"),e.height=Math.round(i*l),e.width=Math.round(o*l))}this.onLoadImageDone&&this.onLoadImageDone(e,this.args,s,a)},render:function(e,t,r){var n=Shr.ImageSizer;r||(r={}),t||(t={});var o=t.src,i=n.imagesBySrc[o];if(r=r||{},i&&i.width){if(this.isHidden(i))return!1;this.setSize(t,i,r),t.onerror="Dom.hide(this)"}else{if(!i){i={src:o},n.imagesBySrc[o]=i;var s=n._imagesByIndex.length;(n._imagesByIndex[s]=i).index=s}r.display="none",t.onload="Shr.ImageSizer._onLoad(this,"+this._id+","+i.index+")"}return e(Shr.HtmlFactory.img(t,r)),!0}}),Object.extend(Shr.ImageSizer,{_sizers:[],imagesBySrc:{},_imagesByIndex:[],_onLoad:function(e,t,r){var n=Shr.ImageSizer._sizers[t];n&&n._onImageLoad(e,r)}});var p,m,g={expressInstallCallback:function(){}};Shr.FlashElement=p={_classId:"clsid:d27cdb6e-ae6d-11cf-96b8-444553540000",_downloadFlashUrl:"http://get.adobe.com/flashplayer/",_downloadFlashCab:"http://fpdownload.macromedia.com/get/flashplayer/current/swflash.cab",_type:"application/x-shockwave-flash",_shockwaveFlash:"ShockwaveFlash.ShockwaveFlash",_playerVersion:{},_initialized:!1,render:function(e,t,r){var n;if(t.style=t.style||{},window.ActiveXObject){for(n in e("<object ",Shr.Html.formatAttributes(t)," classid='",p._classId,"' codebase='",p._downloadFlashCab,"' type='",p._type,"' >"),r)e("<param name='",n,"' value='",r[n],"' />");e("</object>")}else{for(n in e("<embed src='",r.movie,"' type='",p._type,"' pluginspage='",p._downloadFlashUrl,"'",Shr.Html.formatAttributes(t)),r)"movie"!=n&&e(" ",n,"='",r[n],"'");e(" />")}},showExpressInstall:function(e,t){if(t.swfVersion&&t.xiSwfUrl&&p.canExpressInstall(t.swfVersion)){var r=Shr.C.exec("getversionedresource",{path:"/flashapps/simplepath/expressInstall.swf"});if(r.error||!r.result.versionedPath)return;var n=Shr.B.isIE&&Shr.B.isWin?"ActiveX":"PlugIn",o=document.title;o="Flash Player Installation",document.title=o,s.isFunction(t.onFail)&&(g.expressInstallCallback=t.onFail),t.atts=t.atts||{};var i=t.atts;i.id=i.id||"SWFObjectExprInst",p.render(e,i,{scale:"scale",allowScriptAccess:"always",flashVars:"MMredirectURL=${0}&MMplayerType=${1}&MMdoctitle=${2}".substitute([t.xiSwfUrl,n,escape(o)]),movie:Shr.Html.removeProtocol(r.result.versionedPath)})}},isPlayerInstalled:function(e){var t=e.split("."),r=p._parseVersionArray(t),n=p._getPlayerVersion();return!(n.major<r.major||!(n.major>r.major)&&(n.minor<r.minor||!(n.minor>r.minor)&&n.rev<r.rev))},canExpressInstall:function(e){return"0.0.0"!=p.getPlayerVersionString()&&!p.isPlayerInstalled(e)&&p.isPlayerInstalled("6.0.65")},getPlayerVersion:function(){return p._getPlayerVersion()},getPlayerVersionString:function(){var e=p._getPlayerVersion();return e.major+"."+e.minor+"."+e.rev},_getPlayerVersion:function(){if(p._initialized)return p._playerVersion;p._initialized=!0;var e=p._parseVersionArray([0,0,0]);if(navigator.plugins&&navigator.mimeTypes.length){var t=navigator.plugins["Shockwave Flash"];t&&t.description&&(e=p._parseVersionArray(t.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s+r|\s+b[0-9]+)/,".").split(".")))}else{var r;try{r=new l(p._shockwaveFlash+".7")}catch(t){try{r=new l(p._shockwaveFlash+".6"),e=p._parseVersionArray([6,0,21]),r.AllowScriptAccess="always"}catch(t){if(6==e.major)return p._playerVersion=e}try{r=new l(p._shockwaveFlash)}catch(t){}}null!=r&&(e=p._parseVersionArray(r.GetVariable("$version").split(" ")[1].split(",")))}return p._playerVersion=e},formatFlashMessage:function(e){return(e=e||{}).flashVersionRequired=e.flashVersionRequired||"9.0.0",e.flashVersionString=e.flashVersionString||p.getPlayerVersionString(),e.url=e.url||p._downloadFlashUrl,e.helpPopup=Shr.A.www+"/help/pop/main.jsp?a=1162",("<div>"+(e.message||("0.0.0"==e.flashVersionString?"To ${installVerb}, you must have Adobe Flash installed.":"The ${upgradeNoun} requires Adobe Flash version ${flashVersionRequired} or beyond.<br/>However, version ${flashVersionString} is installed on your machine."))+"<div style='text-align: center; margin-top: 10px;'><a target='_blank' href='${url}'>Download Adobe Flash here</a></div><div style='text-align: center; margin-top: 10px;'><a href='#' onclick=\"openHelpPopup('${helpPopup}')\">Click here for help with Flash</a></div></div>").substitute(e)},_parseVersionArray:function(e){return{major:null!=e[0]?parseInt(e[0],10):0,minor:null!=e[1]?parseInt(e[1],10):0,rev:null!=e[2]?parseInt(e[2],10):0}}},Shr.Rect=function(e,t,r,n){this.x=e,this.y=t,this.width=r,this.height=n},Object.extend(Shr.Rect.prototype,{getRight:function(){return this.x+this.width},getBottom:function(){return this.y+this.height},inset:function(e){this.x+=e,this.y+=e,e+=e,this.width-=e,this.height-=e},contains:function(e,t){return e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height},getCenter:function(){return{x:this.x+(this.width>>>1),y:this.y+(this.height>>>1)}},toString:function(){return"{x:"+this.x+", y:"+this.y+", width:"+this.width+", height:"+this.height+"}"}}),Shr.ElementBinding=function(e,t,r){this.formatter=t,this.text="",this.onChange=r,this.setValue(e,!0)},Object.extend(Shr.ElementBinding.prototype,{setValue:function(e,t){(t||this.value!=e)&&(this.lastValue=this.value,this.value=e,this.formatter&&(e=this.formatter(e,this.formatterArgs)),this.setText(e))},setText:function(e){var t=this;t.text!=e&&(t.text=e,t.element&&(t.property?t.element[t.property]=e:t.element.innerHTML=e,t.onChange&&t.onChange(t)))}}),Shr.AgeBinding=function(e,t,r){var n=Shr.Dom;e=e||new Date,t=t||n.getUniqueId(),e.constructor==Number&&(e=Date.fromSeconds(e)),this.id=t,this.time=e,this.future=r;var o=this._getAge();this.text=o.text,0!=o.kind&&(Shr.AgeBinding._ages[t]=this)},Object.extend(Shr.AgeBinding.prototype,{_getAge:function(e){return e=e||new Date,this.future?{kind:2,text:Date.formatAge(this.time,e,this.future)}:this.time.toAge()},toHtml:function(){return(this.text||"").replace(" ","&nbsp;")},_update:function(e){var t=!1,n=this._getAge(e),o=n.text;if(t=0!=n.kind,this.text!=o){this.text=o;var i=r.get(this.id);i&&i.parentNode?i.innerHTML=this.toHtml():t=!1}t||this._dispose()},_dispose:function(){delete Shr.AgeBinding._ages[this.id]}}),Object.extend(Shr.AgeBinding,{_ages:{},_init:function(){Shr.TimerPool.m1.add(Shr.AgeBinding._onMinuteTimer)},_onMinuteTimer:function(e){var t=new Date(e),r=Shr.AgeBinding._ages;for(var n in r)r[n]._update(t)},formatDynamicHtml:function(e,t,r,n){if(e){n=n||{};var o=new Shr.AgeBinding(e,t),i=n.useCssColor?" color-red":"",s=n.format?n.format:"uf",a=n.useDateTxt?o.time.toDateTimeString(s):o.toHtml();return"<span id='"+o.id+"'"+(1==r?" class='font-sys"+i+"'":"")+Shr.Html.attribute("title",o.time.toDateTimeString(s))+">"+a+"</span>"}return""}}),Shr.L.tryToCall(Shr.AgeBinding._init),Shr.Hover=(m={_hoverClass:"_hover",_hoverPattern:new RegExp("_hover\\b","g"),_noHoverClass:"_nohover",_noHoverPattern:new RegExp("_nohover\\b","g"),_hoverName:"_hover.",_noHoverName:"_nohover.",_element:null,_init:function(){u.addEventListener(document,"mouseover",m._onMouseOver),Shr.Mouse.bodyOut.add(m._onBodyOut)},_onBodyOut:function(){m._onMouseOver()},hide:function(){r.hide("menu-hover")},_onMouseOver:function(e){if(Shr.L.isObject(Shr.Menu)){var t=u.getSrcElement(e),n=Shr.Menu.isInMenu(t),o=((t=r.getParentByAttribute(t,"hover-type"))&&t.id,m._element);if(Shr.Menu.isInMenu(o)&&!n&&m.hide(),t!=o){for(var i,a,l;o;){var c=r.getAttribute(o,"hover-type");if("src"==c)0<=(i=o.src).indexOf(m._hoverName)&&(o.src=i.replace(m._hoverName,m._noHoverName));else if("class"==c)o.className,o.className=o.className.replace(m._hoverPattern,m._noHoverClass);else if("menu"==c)n||(r.removeClass(o,"hover"),m.hide());else if(/^call\((.*)\)$/.test(c))try{l=Object.get(RegExp.$1),s.isFunction(l)&&l(o,!1)}catch(t){}else r.removeClass(o,c);o=n?null:r.getParentByAttribute(o.parentNode,"hover-type")}for(m._element=t;t;){var d=r.getAttribute(t,"hover-type");if("src"==d)0<=(i=t.src).indexOf(m._noHoverName)&&(t.src=i.replace(m._noHoverName,m._hoverName));else if("class"==d)t.className,t.className=t.className.replace(m._noHoverPattern,m._hoverClass);else if("menu"==d){r.addClass(t,"hover");var h=r.getAttribute(t,Shr.Atts.contextMenu),p=Object.get(h);if(p){var g=r.getAttribute(t,Shr.Atts.menuArgs),f=new Shr.MenuItemCollection;if(p.createMenuItems(f,g),0<f.items.length){var _=r.get("menu-hover");if(_&&t!=_){a=r.getPageBounds(t);var S,b={width:17,height:17};S=p.getHoverLocation?p.getHoverLocation(a,b,t,g):{x:a.x+a.width-b.width,y:a.y},r.setLocation(_,S.x,S.y),_.setAttribute(Shr.Atts.menu,h),_.setAttribute(Shr.Atts.menuArgs,g),m.hide(),r.show(_)}}}}else if(/^call\((.*)\)$/.test(d))try{l=Object.get(RegExp.$1),s.isFunction(l)&&l(t,!0)}catch(t){}else r.addClass(t,d);t=r.getParentByAttribute(t.parentNode,"hover-type")}}}}},Shr.Dom.onDomReady.add(m._init),m)}();var r=window.Dom=Shr.Dom},function(e,t){!function(){Shr.S;var e,t=Shr.U,r=(Shr.P,Shr.A),n=Shr.Event,o=(Shr.Zone,window.Trace);Shr.DragDrop=((e={active:!1,text:null,request:null,effect:null,_startPixels:5,_state:0,_dragHandler:null,_dragContainer:null,_mouseDownX:0,_mouseDownY:0,dragElement:null,startBounds:null,startParent:null,startBefore:null,dropEffect:null,render:function(e){e("<div id=dragContainer></div>")},init:function(){n.addEventListener(window,"load",e._onLoad),n.addEventListener(document,"mousedown",e._onMouseDown),n.addEventListener(document,"mousemove",e._onMouseMove),n.addEventListener(document,"mouseup",e._onMouseUp)},_onLoad:function(){var t=document.body;n.addEventListener(t,"dragstart",e._onDragStart),n.addEventListener(t,"dragenter",e._onDragEnter),n.addEventListener(t,"dragover",e._onDragOver),n.addEventListener(t,"drop",e._onDrop)},getDragContainer:function(){return e._dragContainer||(e._dragContainer=Dom.get("dragContainer")),e._dragContainer},clear:function(){e.active=!1,e.text=null,e.request=null,e.startParent=null,e.startBefore=null,e._clearEffect()},_clearEffect:function(){e._section=null,e._group=null,e._parent=null,e._before=null,e.effect&&(Dom.removeNode(e.effect),e.effect=null)},_setEffect:function(t,r,n,o){if(r&&Dom.hasClass(r,"divider")&&(r=r.nextSibling),!(null!=e.effect&&e.effect==r||e._parent==t&&e._before==r)){var i,s;e._clearEffect(),e._section=n,e._group=o,e._parent=t,e._before=r;var a="<div id='dropEffect'>&nbsp;</div>";switch(t.tagName){case"TBODY":i=document.createElement("TR"),s=document.createElement("TD"),t.firstChild&&(s.colSpan=t.firstChild.cells.length),i.appendChild(s);break;case"OL":case"UL":s=i=document.createElement("LI");break;default:t.firstChild&&"SPAN"==t.firstChild.tagName?(i=document.createElement("SPAN"),a="<span class='itemDrop'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>"):i=document.createElement("DIV"),s=i}var l=n.layout;if(l.renderItemDivider){var c=new Shr.StringBuilder;l.renderItemDivider(c.write);var d=c.toString();r?a+=d:t.firstChild&&(a=d+a)}s.innerHTML=a,t.insertBefore(i,r),e.effect=i}},_onDrag:function(i){var s;if(t.id&&window.event&&event.dataTransfer){var a=event.srcElement,l=a.tagName;if("A"!=l&&"IMG"!=l)try{if(window.event&&(event.returnValue=!1),!e.active){e.active=!0;var c=event.dataTransfer.getData("Text");if(c){var d=new Shr.Uri(c);if(d.isValid){var h=d.authority;r.domain&&h.contains(r.domain)||h.contains(location.hostname)||Shr.U.getIdToken().then(function(t){s=r.createCmdXhr("getitems");var n={url:c,access_token:t};s.beginSend(n),e.request=s}).catch(function(e){window.trUPP.Timing.recordSessionEvents({event:"getIdToken",err:e,session_method:"drag _onDrag"})})}}}var u;if(e.request)if(Dom.contains(e.effect,a))u=!0;else{u=!1;var p=Dom.getParentByClass(a,"section");if(p){var m=Dom.getNode(p);if(m.permissions.edit&&m.module.allowDrag){u=!0;var g=event.clientX,f=event.clientY,_=Shr.ContentGroup.find(m,g,f),S=Shr.ContentItem.find(_||m,g,f);if(S){var b=(a=Dom.getByNodeId(S.nodeId)).parentNode;s=Dom.getClientBounds(a),("SPAN"==b.firstChild.tagName?g<=s.x+s.width/2:f<=s.y+s.height/2)?e._setEffect(b,a,m,_):e._setEffect(b,a.nextSibling,m,_)}else if(_){var y=Dom.getByNodeId(_.nodeId);e._setEffect(y.lastChild,null,m,_)}else{var P=Dom.getChildByClass(p,"section-content");e._setEffect(P,null,m,_)}}}u||(e._clearEffect(),event.dataTransfer.dropEffect="move")}else u=!1}catch(i){o.error("Error during onDrag.",i)}else n.stop(i)}},_onDragStart:function(e){var t=n.getSrcElement(e);t&&!Dom.getParentByAttribute(t,"noDrag")||n.stop(e)},_onDragEnter:function(t){e._onDrag(t)},_onDragOver:function(t){e._onDrag(t)},_onDrop:function(t){if(window.event&&event.dataTransfer){try{if(e.request){var r=e._section;if(r){var i=r.module;if(i&&i.insertItem2){var s=e.request,a=e._group?e._group.nodeId:e._section.nodeId,l=e._before?Dom.getNodeId(e._before):-1,c=function(){var e=s.getCommandResponse();if(e.error);else{for(var t=e.result.items,r=!1,n=0;n<t.length;n++){var o=t[n];if(o[0]==i.id){r=!0,i.insertItem2(a,l,o[2],o[1],null);break}}r||Shr.C.alert("Unable to find content of type "+i.id+".")}};s&&(s.responseText?c():s.oncomplete=c)}}}}catch(t){o.error("Error during onDrop.",t)}e.clear(),n.stop(t)}},_onMouseDown:function(t){0<e._state&&e._onMouseUp(t);var r,o=n.getEvent(t),i=o.srcElement,s=Dom.getParentByClass(i,"dragHandle");i&&i.getAttribute&&"none"!=Dom.getAttribute(i,"dragType")&&!Dom.getParentByAttribute(i,"noDrag","")&&s&&(s=Dom.getParentByAttribute(s,"dragType"))&&(r=Dom.getAttribute(s,"dragType"),e._dragHandler=e[r],e._dragHandler||(e._dragHandler=Object.get(r)),e._dragHandler&&(n.stop(t),e._state=1,e.dragElement=s,e._mouseDownX=o.clientX,e._mouseDownY=o.clientY))},_onMouseMove:function(t){try{if(0<e._state){var r=n.getEvent(t);n.stop(t);var i=r.clientX,s=r.clientY,a=i-e._mouseDownX,l=s-e._mouseDownY;if(1==e._state&&(Math.abs(a)>e._startPixels||Math.abs(l)>e._startPixels)){var c=e.dragElement;e.startBounds=Dom.getPageBounds(c),e.startParent=c.parentNode,e.startBefore=c.nextSibling,e._state=2,Dom.addClass(e.dragElement,"drag"),e._dragHandler&&e._dragHandler.onStartDrag(i,s);var d=document.body;d.setCapture&&d.setCapture(!0)}2==e._state&&e._dragHandler&&e._dragHandler.onDrag(i,s,a,l)}}catch(t){o.error("Error during Shr.DragDrop.onMouseMove, exception= ",t)}},_onMouseUp:function(t){if(2==e._state){n.stop(t);try{Dom.removeClass(e.dragElement,"drag");var r=document.body;r.releaseCapture&&r.releaseCapture(),e._dragHandler&&e._dragHandler.onDrop()}catch(t){o.error("Error during Shr.DragDrop.onMouseUp.",t)}}Dom.removeNode(e.dropEffect),e.dropEffect=null,e._state=0,e.dragElement=null,e._dragHandler=null,e.clear()},setDragContent:function(t){if(t){var r=e.getDragContainer(),n=t.tagName;if("TR"==n){var o=Dom.create("TABLE",r);o.style.width="100%",o.cellPadding="0",o.cellSpacing="0",Dom.create("TBODY",o).appendChild(t)}else"LI"==n?Dom.create("UL",r).appendChild(t):r.appendChild(t)}}}).init(),e),Shr.DragDrop.Move={_savedStyle:null,onStartDrag:function(e,t){var r=Shr.DragDrop,n=r.Move,o=r.dragElement,i=o.style;n._savedStyle={position:i.position,width:i.width,height:i.height};var s=r.startBounds;Dom.setSize(o,s.width,s.height),i.position="absolute"},onDrag:function(e,t,r,n){var o=Shr.DragDrop,i=(o.Move,o.startBounds);Dom.setLocation(o.dragElement,i.x+r,i.y+n)},onDrop:function(){var e=Shr.DragDrop,t=e.Move,r=e.dragElement.style,n=t._savedStyle;r.position=n.position,r.width=n.width,r.height=n.height}},Shr.DragDrop.Resize={_sizedElement:null,_startBounds:null,onStartDrag:function(e,t){var r,n=Shr.DragDrop,o=n.Resize,i=n.dragElement,s=Dom.getChildrenByClass,a=Dom.getPageBounds,l=Dom.getParentByAttribute(i,"sizeContext");o._sizeType=Dom.getAttribute(i,"sizeType"),o._sizedElement=l,o._startBounds=a(l);var c=s(l,"resize-height");o._heightElements=c;var d=[];for(r=0;r<c.length;r++)d[r]=a(c[r]).height;c=s(l,"shrRH"),Shr.L.forEach(c,function(e){o._heightElements.push(e),d.push(parseInt(Dom.getComputedStyle(e,"height")))}),o._heights=d;var h=s(l,"resize-width");o._widthElements=h;var u=[];for(r=0;r<h.length;r++)u[r]=a(h[r]).width;h=s(l,"shrRW"),Shr.L.forEach(h,function(e){o._widthElements.push(e),u.push(parseInt(Dom.getComputedStyle(e,"width")))}),o._widths=u},onDrag:function(e,t,r,n){var o,i,s=Shr.DragDrop.Resize,a=s._startBounds,l=s._sizedElement,c=0,d=!1,h=s._sizeType;if("w"==h||"sw"==h||"nw"==h?(r=Math.min(r,a.width-20),Dom.setLocation(l,a.x+r,a.y+("s"==h[0]?0:n)),Dom.setSize(l,a.width-r,a.height),c=-r,d="sw"==h||"nw"==h):"e"==h||"se"==h||"ne"==h?("ne"==h&&Dom.setLocation(l,a.x,a.y+n),Dom.setSize(l,Math.max(20,a.width+r),a.height),c=r,d="se"==h||"ne"==h):"s"==h?d=!0:"n"==h&&(d=!0,Dom.setLocation(l,a.x,a.y+n)),d){var u=s._heightElements,p=s._heights;for(i=0;i<u.length;i++)o=parseInt(Shr.Dom.getComputedStyle(u[i],"min-height"))||20,Dom.setHeight(u[i],Math.max(p[i]+("s"==h[0]?n:-n),o))}if(c){var m=s._widthElements,g=s._widths;for(i=0;i<m.length;i++)o=parseInt(Shr.Dom.getComputedStyle(u[i],"min-width"))||20,Dom.setWidth(m[i],Math.max(g[i]+c,o))}},onDrop:function(){}}}()},function(module,__webpack_exports__,__webpack_require__){"use strict";var _date__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}_date__WEBPACK_IMPORTED_MODULE_0__.a.init(Shr.U),Shr.AS.getEnv=function(){return Shr.AS.env&&"null"!=Shr.AS.env?Shr.AS.env.substr(1):"prod"};var appVersion=12.1,globalPopup,Esc,Fsc,Gsc,Hsc,Isc,Jsc,Ksc,Lsc,Msc,Nsc,dwc;if(document.uniqueId&&document.execCommand)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(e){}function closeWin(e){return e&&(e.closed||e.close()),null}function openPopupToSize(e,t,r){window.openPopup(e,{width:t,height:r})}function openHelpPopup(e){openPopupToSize(e,700,500)}function escapeXml(e){return e.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function truncate(e,t,r){return null==e||e.length<=t?e:(r=r||"...",e.substring(0,t)+r)}window.openPopup=function(e,t){if(/(http:|https:|www\.)/.test(e)){var r,n=void 0===(t=t||{}).global||t.global,o=(t.target,Object.extend({width:500,height:400,location:"no",menubar:"no",scrollbars:"yes",toolbars:"no",resizable:"yes"},t)),i=[];return delete o.global,delete o.target,n&&closeWin(globalPopup),Shr.L.forEach(o,function(e,t){i.push(t+"="+e)}),r=window.open(e,(t.target||"pop_win").split(" ").join("_"),i.join(",")),n&&(globalPopup=r),r}return e=Shr.A.www+e,void window.open(e,"pop_win","height=400,width=500,location=no,menubars=no,scrollbars=yes,toolbars=no,resizable=yes")},function(){var AS=Shr.AS,AD=Shr.AD,AR=Shr.AR,S=Shr.S,SD=Shr.SD,P=Shr.P,PD=Shr.PD,PM=Shr.PM,U=Shr.U,UP=Shr.UP,UB=Shr.UB,US=Shr.US,L=Shr.L,Event=Shr.Event,StringEx=Shr.StringEx,StringBuilder=Shr.StringBuilder,EventHandler=Shr.EventHandler,TimerPool=Shr.TimerPool,TimeSpan=Shr.TimeSpan,Browser=Shr.Browser,B=Browser,AsyncLoader=function(e,t){if(this._loadFn=e,t=t||{},this._loadLimit=t.loadLimit||this._defaultLoadLimit,this._waitTime=void 0===t.waitTime?this._defaultWaitTime:t.waitTime,this._waiting=new Array,this._onTimer=void 0,this._loading=new Array,this._start=this._last=0,t.trigger){var r=this;Dom.get(t.trigger).onclick=function(e){Event.getEvent(e).ctrlKey&&window.alert(r._status())}}this._onEmpty=t.onEmpty};Object.extend(AsyncLoader.prototype,{add:function(e){this._waiting.push(e),this._last=new _date__WEBPACK_IMPORTED_MODULE_0__.a,this._ensureTimer()},remove:function(e){if(Shr.Array.remove(this._loading,e),this._last=new _date__WEBPACK_IMPORTED_MODULE_0__.a,!this._loading.length&&!this._waiting.length&&this._onEmpty)try{this._onEmpty(this)}catch(e){}this._ensureTimer()},reset:function(){Shr.Array.clear(this._waiting),Shr.Array.clear(this._loading),this._last=new _date__WEBPACK_IMPORTED_MODULE_0__.a},_status:function(e){return"${0}\n\tloadLimit=${1} waitTime=${2}\n\t#loading=${3}\n\t#waiting=${4}\n\telapsed=${5}\n\tTimer is ${6}\n".substitute([e||"AddPictures _loader",this._loadLimit,this._waitTime,this._loading.length,this._waiting.length,(this._last-this._start)/1e3,this._onTimer?"running":"stopped"])},_ensureTimer:function(e){if(!this._onTimer){var t=this;this._onTimer=function(){for(var e=new _date__WEBPACK_IMPORTED_MODULE_0__.a,r=t._loadLimit;t._waiting.length&&t._loading.length<t._loadLimit&&r;){r--;var n=t._waiting.shift();t._last=e,t._loading.push(n),t._loadFn(n,t)}!t._waiting.length&&e-t._last>t._waitTime&&(TimerPool.ms40.remove(arguments.callee),t._onTimer=void 0)},TimerPool.ms40.add(this._onTimer),this._start=new _date__WEBPACK_IMPORTED_MODULE_0__.a}},_defaultLoadLimit:8,_defaultWaitTime:1e4});var AsyncData={},f8b_init,f8b_waiting,f8b_ready,g8b;f8b_init=-1,f8b_waiting=0,f8b_ready=1,g8b={},AsyncData=function(e,t,r,n){switch(this._data=g8b[e]||{_state:f8b_init,_id:e,_cmd:t,_args:n,_q:[r],_r:{}},this._data._state){case f8b_init:this.load(),this._data._state=f8b_waiting;break;case f8b_waiting:this._data._q.push(r);break;case f8b_ready:this._call(r)}},Object.extend(AsyncData.prototype,{getResponse:function(){return this._data._state==f8b_ready?this._data._r:{error:"The data is not available yet."}},isReady:function(){return this._data._state==f8b_ready},isWaiting:function(){return this._data._state==f8b_waiting},load:function(){Shr.C.beginExec(this._data._cmd,this._data._args,L.hitch(this,this.onResponse))},onResponse:function(e){this._data._r=e,this._data._state=f8b_ready,L.forEach(this._data._q.splice(0,this._data._q.length),L.hitch(this,function(e){this._call(e)}))},addArgs:function(e){Object.merge(this._args,e)},_call:function(e){try{e(this._data._r)}catch(e){Trace.error("Shr.AsyncData id="+this._data._id+" callback threw:",e)}}}),Object.extend(AsyncData.prototype,{data:g8b});var WindowState=function(){var t={_prefix:"Sfly.WindowState=",_key:U.visitorId,_ver:3,_data:null,get:function(e,r){var n=t._data[e];return r&&t.set(e,null),n},set:function(e,r,n){t._data[e]=r,t._save(n)},_hasSessionStorage:!1,_sessionStorageKey:"com.shutterfly.Shr.WindowState",_load:function(){var e=t._hasSessionStorage?window.sessionStorage.getItem(t._sessionStorageKey):window.name;t.__load(e)},__load:function __load(state){for(var key=/^[0-9a-zA-Z.]+\=/;key.test(state);){var lastMatch=RegExp.lastMatch;state=state.substr(lastMatch.length);var len=0;if(state.startsWith("l=")?(len=parseInt(state.substr(2)),state=state.replace(/l=[0-9]+;/,"")):lastMatch==t._prefix&&(len=state.length),lastMatch==t._prefix){var ver=1;state.startsWith("v=")&&(ver=parseInt(state.substr(2)));try{if(1==ver)eval("t._data="+state);else if(2==ver){var data=state.substring(0,len).replace(/v=[0-9]+;data=/,"");eval("t._data="+data)}else if(3==ver&&Shr.L.isDefined(t._key)){var base64=state.substring(0,len).replace(/v=[0-9]+;data=/,""),encoded=t._fromBase64(base64),decoded=t._arc4(encoded);decoded.startsWith(t._key)&&eval("t._data="+decoded.substr(t._key.length))}break}catch(e){"_dev"==AS.env&&alert("error loading WindowState: "+e.message+"\nl="+len+" v="+ver+" data="+state)}}state=state.substr(len)}t._data=t._data||{}},_save:function(e){e&&e!=t._key&&(t._key=e,t._ksa=t._ksaInit(t._key));var r="${prefix}l=${len};v=${ver};data=${data}",n=Object.toJavaScript(t._data,10,Number.MAX_VALUE);if(3==t._ver){var o=t._arc4(t._key+n);n=t._toBase64(o)}var i=6+t._ver.toString().length+5+n.length,s=i.toString().length;s<(i+=s).toString().length&&i++,r=r.substitute({prefix:t._prefix,len:i.toString(),ver:t._ver.toString(),data:n}),t.__save(r)},__save:function(e){t._hasSessionStorage?window.sessionStorage.setItem(t._sessionStorageKey,e):window.name=e},_ksaInit:function(e){var t=new Array(256),r=0,n=0;for(r=0;r<256;r++)t[r]=r;var o=e.length;for(r=0;r<256;r++){n=(n+t[r]+e.charCodeAt(r%o))%256;var i=t[r];t[r]=t[n],t[n]=i}return t},_arc4:function(e){for(var r=[].concat(t._ksa),n=0,o=0,i=new Array(e.length),s=0;s<e.length;s++){o=(o+r[n=(n+1)%256])%256;var a=r[n];r[n]=r[o],r[o]=a;var l=r[(r[n]+r[o])%256];i[s]=e.charCodeAt(s)^l}return String.fromCharCode.apply(String,i)},_key64:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",_toBase64:function(e){for(var r,n,o,i,s,a,l,c=[],d=0;d<e.length;)r=e.charCodeAt(d),d++,n=e.charCodeAt(d),d++,o=e.charCodeAt(d),d++,i=r>>2,s=(3&r)<<4|n>>4,a=(15&n)<<2|o>>6,l=63&o,isNaN(n)?a=l=64:isNaN(o)&&(l=64),c.push(t._key64.charAt(i)),c.push(t._key64.charAt(s)),c.push(t._key64.charAt(a)),c.push(t._key64.charAt(l));return c.join("")},_fromBase64:function(e){var t,r,n,o,i,s,a,l=[],c=0;for(e=e.replace(/[^A-Za-z0-9\-\_\=]/g,"");c<e.length;)o=this._key64.indexOf(e.charAt(c)),c++,i=this._key64.indexOf(e.charAt(c)),c++,s=this._key64.indexOf(e.charAt(c)),c++,a=this._key64.indexOf(e.charAt(c)),c++,t=o<<2|i>>4,r=(15&i)<<4|s>>2,n=(3&s)<<6|a,l.push(t),64!=s&&l.push(r),64!=a&&l.push(n);return String.fromCharCode.apply(String,l)}};return t._key&&(t._ksa=t._ksaInit(t._key)),t}(),N=(C9b={_hashName:"h",_timeName:"t",_init:function(){C9b.h(AR)},toDo:function(){Shr.C.alert("This feature is currently not available.")},openWindow:function(e,t){e&&(e.startsWith("http")||e.startsWith("//")||(e=A.site+e),C9b.submitForm("GET",Shr.ServerCommands.redirect,{url:e},{target:t}))},submitForm:function(e,t,r,n,o){var i="dynamicForm";try{var s=Dom.get(i);if(s||(s=Shr.Dom.create("form",document.body,{id:i,style:"display: none;"})),s){n=n||{},t.startsWith("http")||t.startsWith("//")||(t=A.site+t),s.method=e||"GET",s.action=t;var a=n.target;a||""==a||(a="_blank"),s.target=a;var l=new Shr.StringBuilder;if(r)for(var c in r)Shr.Html.hidden(l.write,c,r[c]);s.innerHTML=l.toString(),Shr.L.forEach(o,function(e){s.appendChild(e),"file"==e.type&&(s.encoding=s.enctype="multipart/form-data")}),s.submit()}else Shr.Console.write("unable to access/create dynamicForm")}catch(e){Trace.error("Error submitting dynamic form.",e)}},reload:function(){var e=P.reloadUrl||window.location.href,t=e.indexOf("#");if(-1!=t){var r=e.substring(t+1);e=e.substring(0,t),WindowState.set("hash",r)}B.isSafari?window.location=e:window.location.replace(e)},replace:function(e){window.location.replace(e)},goPage:function(){C9b.go(WebPath.fromPathKey(P.id))},go:function(e){e&&L.isString(e)||(e=S.home),e&&L.isString(e)&&(e.startsWith("http")||e.startsWith("//")||(e=A.site+e),document.location.href=e)},h:function(e){if(e){var t=C9b,r=e[t._hashName];if(r){var n=e[t._timeName],o=t._hashInsert(n),i=t._hashInsertPosition(n);e[t._hashName]=r.substring(0,i)+o+r.substring(i,r.length)}}},_hashInsert:function(e){var t=e.toString();return t.charAt(t.length-2)},_hashInsertPosition:function(e){var t=e.toString();return parseInt(t.charAt(t.length-1),10)},imgError:function(e){e&&(e.style.display="none")},importContent:function(e,t){var r={url:e,html:t};Shr.C.beginExec("importcontent",r)}},C9b._init(),C9b),C9b,Nexo=N,PermissionRoles={banned:-5,owner:-4,everyone:-3,visitors:-2,members:-1,ownersAndContributors:-10,memberName:"Member",getName:function(e){if(0<e){var t=S.roles;if(t)for(var r=0;r<t.length;r++){var n=t[r];if(n.roleId==e)return n.title}return"Custom Role"}switch(e){case-4:return"Owner";case-3:case-2:return"Visitor";case-1:return PermissionRoles.memberName;case-5:return"Banned User";default:return"Custom Role"}}},Permissions={readPage:1,addComment:2,addContent:4,editOwnContent:8,deleteOwnContent:16,editContent:32,deleteContent:64,editPage:128,admin:256,none:0,reader:1,commenter:3,author:31,editor:127,owner:255,nullValue:-1,formatLevel:function(e){return e?1==e?"Readers":3==e?"Commenters":31==e?"Contributors":127==e?"Editors":255==e?"Owners":511==e?"Administrators":"Custom":"No Access"}},A={debug:!0,trace:!0,onLoad:new Shr.ConditionalQueue,_loaded:!1,cid:"SHARE3SXXXX",cids:{sfly:"SHARE3SXXXX",sites:"SHARE3SCSXX",header:"SHARE3SSUHL",header2:"SHARE3SSUSH",body:"SHARE3SSUPS",savePics:"SHARE3SSVXX",orderPrints:"SHARE3SOPXX",saveProjects:"SHARE3SSJXX",orderProjects:"SHARE3SOJXX",createProducts:"SHARE3SCPXX",comments:"SHARE3SACXX",addPics:"SHARE3SAPXX",addVideos:"SHARE3SAVXX",videoDownload:"SHARE3SDLVD",downloadPic:"SHARE3SDLXX",journal:"SHARE3SAJEX",forum:"SHARE3SAFMX",createSiteReminder:"SHARE3SCSRB",createSitePopup:"SHARE3SCSIL",createSiteHover:"SHARE3SCSHL",privPass:"SHARE3SPASS",email:"SHARE3SEMAD",simplePath:"SHARE3SOJSP",sitesetup:"SHARE3SXXXX",ayso:"SHARE3SAYSO",sportsysd:"SHARE3SYSDX",calsouth:"SHARE3SCALS",cysa:"SHARE3SCYSA",siteStore:"SHARE3SSTOR"},pids:{ayso:"AYSO",cysa:"CYSA",calsouth:"CALS",our3:"OUR3"},_init:function(){Event.addEventListener(window,"load",A._onLoad);var e=document.domain,t=e.lastIndexOf(".");if(0<=t&&(!Shr.Score||!Shr.Score.noDocumentDomain)){var r=e.lastIndexOf(".",t-1);0<=r&&(document.domain=e.substring(r+1))}WindowState._load(),A.windowId=AS.windowId,A.windowId||(A.windowId=WindowState.get("windowId"),A.windowId||(A.windowId=Math.round(1e5*Math.random()),WindowState.set("windowId",A.windowId)));var n="//",o=window.location.protocol+"//";A.isLocal=AS.isLocal,A.turnOnSSL=AS.turnOnSSL,A.domain=AS.domain,A.mailDomain=AS.mailDomain,A.site=o+AS.site+"/",A.www=o+AS.www+"/",A.ws=o+AS.ws+"/",A.community=n+AS.community+"/",A.wwwSSL="https://"+AS.www+"/",A.wsSSL="https://"+AS.ws+"/",A.c1=o+AS.c1+"/",AS.c1&&(Shr.AS.cdnSfly=AS.c1.replace("c1","cdn"),A.cdnSfly=n+Shr.AS.cdnSfly+"/"),A.audio=o+AS.audio,A.web=A.cdnSfly,A.img=n+AS.img+"/",A.gim=n+AS.gim+"/",A.up=o+AS.up+"/",A.mySites=A.www+"sites/start.sfly";var i=A.staticBase=n+AS.staticServer+"/shr/";A.static2Base=n+AS.site+"/shr/",A.codeBase=i+"c/",A.imagesBase=i+"images/",A.flashBase=i+"flash/",A.modulesBase=i+"m/",A.themesBase=i+"t/",A.userStaticBase=i+"userstatic/",A.frameCmd=n+AS.cmd+"/commands/",A.cmd=n+AS.cmd+"/commands/",A.cmd2=n+AS.cmd+"/commands/",A.cmdWithProtocol=o+AS.cmd+"/commands/",A.appCmd=A.site+"commands/",A.quantserve="//pixel.quantserve.com/pixel/p-f4BHX2ZttKRdw.gif",A.facebook="//connect.facebook.net/en_US/sdk.js",A.facebookDebug="//static.ak.fbcdn.net/connect/en_US/core.debug.js";var s=Shr.Score.truPP||Shr.Score.trUPP;s&&s.enabled&&(A.codeBase=n+(window.localStorage.getItem("Shr.AS.staticServer")||AS.staticServer)+"/trupp/builds/"+s.version+"/dist/",A.imagesBase=A.codeBase+"assets/")},Log:function(e){e=Object.extend({ApplicationName:"share",oflyAppId:"00000000000000000000000000000004"},e),(new Image).src=A.ws+"eventlog"+Shr.Html.formatQuery(e)},convertToHttp:function(e){return e.startsWith("https:")?e=e.replace("https:","http:"):e.startsWith("//")&&(e="http:"+e),e},ensureProtocol:function(e){return e.startsWith("//")?window.location.protocol+e:e},_onLoad:function(){if(!A._loaded){A._loaded=!0;var e=document.body;Event.addEventListener(e,"click",A._onClick),Event.addEventListener(e,"keydown",A._onKeyDown),Event.addEventListener(e,"mousedown",A._onMouseDown),A.onLoad.setDone()}},_onMouseDown:function(e){Dialog.setActive()},_onKeyDown:function(e){Dialog.setActive()},_onMouseOver:function(e){window.lastAction=new _date__WEBPACK_IMPORTED_MODULE_0__.a},_onClick:function(e){var t=Event.getEvent(e),r=Dom.getAttribute(t.srcElement,"s:click");if(r){var n=Shr.C[r];n&&(n(),Event.stop(e))}},createCmdXhr:function(e){var t=WindowEx.updateHandler,r=A.cmd+Shr.C.getSiteCommand(e);return t?t.createXhr("POST",r):null},createCmd2Xhr:function(e){var t=WindowEx.updateHandler;return t?t.createXhr("POST",A.cmd2+e):null},targetWindowName:"_blank",imageUrl:function(e,t){var r,n;return t&&1.5<(window.devicePixelRatio||1)&&(n=(r=e.split(".")).pop(),e=r.join(".")+"@2x."+n),(A.imagesBase+e).toLowerCase()},themeImageUrl:function(e){return(Shr.Theme.base+e).toLowerCase()},registerOnLoad:function(e){A.onLoad.add(e)},_end:null};A._init();var WebPath={fromPathKey:function(e,t,r){if(e){var n=A.domain,o=e.indexOf("/"),i="";return t||(i=r?"http:":window.location.protocol,i+="//"),0<=o?i+e.substring(0,o)+"."+n+"/"+e.substring(o+1):i+e+"."+n+(t?"":"/")}return A.mySites},fromPageAndNode:function(e,t){return WebPath.fromPathKey(e).replace(/\/$/,"")+"/"+t}},UrlVersion={_staticVersion:"?v="+(new _date__WEBPACK_IMPORTED_MODULE_0__.a).getTime().toString(),_formatUrl:function(e){return e&&e.indexOf("?")<0&&(e+=UrlVersion._staticVersion),e}},IURL=function(e){return A.imageUrl(e)},CURL=function(e){return UrlVersion._formatUrl(A.codeBase+e)},DURL=function(e){return UrlVersion._formatUrl(A.codeBase+"dialogs/"+e)},URL=function(e){return UrlVersion._formatUrl(A.staticBase+e)},RURL=function(e){return UrlVersion._formatUrl(e)},FURL=function(e){var t=e.lastIndexOf("/");return 0<=t&&(e=e.substring(t+1)),UrlVersion._formatUrl(e)},StyleManager=function(){var e={type:"text/css",rel:"stylesheet"};function t(t,r){var n={href:t};r&&(n.id=r),Object.extend(n,e);var o=Shr.Dom.create("link",null,n);Shr.Dom.addToHead(o)}var r={renderTheme:function(e,r){e&&L.forEach(e,function(e){t(e,e)}),r&&L.forEach(r,Shr.Dom.removeNode)},renderStyleSheets:function(e,t){Shr.L.isArray(e)||(e=[e]),L.forEach(e,function(e){r.renderStyleSheet(e)}),t&&window.setTimeout(t,10)},renderStyleSheet:function(e){t(e)},renderStyle:function(e,t){if(e&&e.renderStyle&&!e.renderStyle.called){var n=new Shr.StringBuilder,o=n.write;e.renderStyle(o),e.renderStyle.called=!0;try{var i=n.toString();if(i){var s=Shr.Dom.createStyleElement(i);return Shr.Dom.addToHead(s)}}catch(n){Shr.Console.write("StyleManager.renderStyle failed: "+n.message),n.stack&&Shr.Console.write("call stack=\n"+n.stack),t||window.setTimeout(function(){r.renderStyle(e,!0)},0)}}return null}};return r}(),ScriptManager=function(){var e=function e(t){e.currentId++;var r=ScriptManager,n=[],o=[],i={success:[],failed:[]},s=!1,a={async:(t=t||{}).async,type:t.type||"script",timeout:t.timeout||1e4};function l(e,t){e?i.failed.push({url:t,err:e}):i.success.push({url:t,duration:null}),Shr.Array.remove(o,t),window.setTimeout(c,0)}function c(){if(0<n.length)!function(t){o.push(t);var n={cb:function(){l(null,t)},onError:function(e){l(e||{message:"error"},t)},onTimeout:function(e){l(e||{message:"timeout"},t)}};Object.extend(n,a),L.isArray(t)?e.Load(t,n):r.getJsonP(t,n)}(n.pop());else if(0==o.length){var c=t.onComplete||t.cb;if(c){if(s)return;s=!0,t.cbArgs?c.apply(window,[i,t.cbArgs]):c(i)}}}this.start=function(e){if(L.isNullOrUndefined(e))throw{name:"InvalidArgumentException",message:"Url's should be an array of strings"};if(L.isString(e))n=e.split(",");else{if(!L.isArray(e))throw{name:"InvalidArgumentException",message:"Url's should be an array of strings or comma seperated string"};n=e}if(n.reverse(),0<n.length&&a.async)for(var t=n.length;0<t;t--)c();else c()}};e.currentId=1,e.load=function(t,r){new e(r).start(t)};var t={_scripts:{},_callbacks:[],_externalCallbacks:{},_externalContext:{},_loadStateName:"_loadState",_clientScripts:[],load:function(e,r,n,o,i,s,a){n&&(t._callbackIfLoaded(e,r,n,o,a)||(t._scripts[n]=t._createNode(n),t._appendNode(t._scripts[n]),t._loadComponentsOrQueueCallback(e,r,n,o,i,s,a)))},_callbackIfLoaded:function(e,r,n,o,i,s){return!(!t._scripts[n]||s||(o&&o(e?e[r]:null,i),0))},_loadComponentsOrQueueCallback:function(e,r,n,o,i,s,a){if(o){var l=Object.get(r,e);!l||L.isString(l)||a?t._callbacks.push({object:e,propertyName:r,callback:o,args:i,src:s?n:null}):t._loadComponents(null,{value:l,callback:o,args:i})}},_attachOn:function(e,t){e&&(e.onerror=t.error,t.isScript&&(e.onload=t.load),e.onreadystatechange=function(){e.readyState,/loaded|complete/i.test(e.readyState)&&(e.onreadystatechange=function(){},t.isScript?(e.onload=function(){},t.load("readystate")):t.error())})},_createNode:function(e,t){return(t=t||{}).type="text/javascript",t.src=e,Dom.create("SCRIPT",null,t,null)},_appendNode:function(e){Dom.head.appendChild(e)},_isObjectLoaded:function(e){var t=Object.get(e);return!(!t||L.isString(t))},loadOptional:function(e,r,n,o){var i=(o=o||{}).objScope||window,s=Object.get(e,i);if(s)if(L.isString(s)){var a=window.localStorage.getItem(e)||o.srcOverride||s;t._callbackIfLoaded(i,e,a,r,n)||(t._loadComponentsOrQueueCallback(i,e,a,r,n),t.get(a,{cb:function(){t.onLoad()}}))}else r&&r(s,n);else Shr.C.alert("Unable to load the component '"+e+"'.")},onLoad:function(){for(var e=t._callbacks,r=0;r<e.length;r++){var n=e[r];if(n){var o=Object.get(n.propertyName,n.object);o&&!L.isString(o)&&(e.splice(r,1),r--,n.value=o,t._loadComponents(o,n),n.src&&Dom.removeNode(t._scripts[n.src]))}}},loadModuleComponents:function(e,r,n){t._loadComponentsOrQueueCallback(window,e,null,r,n)},_loadComponents:function(e,r){var n=r.value,o=n[t._loadStateName];if(!o||o<2){n[t._loadStateName]=1;var i=n.uses;if(i)for(var s=i.split(","),a=0;a<s.length;a++){var l=s[a].trim();if(l){if(!t._isObjectLoaded(l))return void t.loadOptional(l,t._loadComponents,r);i[a]=null}}}t._onScriptFullyLoaded(r)},_onScriptFullyLoaded:function(e){var r=e.value;if(r){r[t._loadStateName]=2,r.onScriptLoad&&r.onScriptLoad();var n=e.callback;n&&n(r,e.args)}},batchLoad:function(t,r){e.load(t,r)},batchGetStyles:function(e,t){L.forEach(e,function(e){StyleManager.renderStyleSheet(e)}),t.cb&&Shr.L.tryToCall(t.cb)},bootStrap:function(){t.batchLoad(Shr.PM.js2,{async:!0,cb:function(){t.batchLoad(Shr.PM.js3,{async:!0,cb:function(){t.batchLoad(Shr.PM.js4,{async:!0,cb:function(){t.batchLoad(Shr.PM.js5,{async:!0,cb:function(){t.batchGetStyles(Shr.PM.styles,{async:!0,cb:function(){var e=(Shr.Page||Shr.Page).render(!0).toString(),t=document.createElement("DIV");t.innerHTML=e,document.body.appendChild(t)}})}})}})}})}})},get:function(e,r){(r=r||{}).type="script",t.getJsonP(e,r)},getJsonP:function(e,r){r=r||{};var n,o=t._externalContext[e],i=o&&o.key&&!r.noBrowserCache?o.key:"jsonp"+(new _date__WEBPACK_IMPORTED_MODULE_0__.a).getTime(),s=o&&o.response&&o.response==t._responseStatus._pending,a="script"==r.type||r.noFunctionCallback;s||(o&&!r.noPageCache?(a&&r.cb.apply(r.cb,r.cbArgs||[]),o.json&&t._externalCallback(o,o.json)):(o={key:i,url:e,timer:null,response:t._responseStatus._pending},Object.extend(o,r),r.timeout&&r.onTimeout&&t._setExternalTimer(o,function(){t._onExternalTimeout(o)},1e3*r.timeout),n=a?t._createNode(e,{id:i}):t._createNode("${0}Shr.ScriptManager._externalCallbacks.${1}".substitute([e,i]),{id:i}),a&&(t._scripts[e]=n),t._attachOn(n,{isScript:a,error:function(){t._onExternalError(o)},load:function(e){r.cb&&L.isFunction(r.cb)&&r.cb.apply(r.cb,r.cbArgs||[])}}),t._externalCallbacks[i]=function(e){o.response=t._responseStatus._success,o.json=e||{},t._externalCallback(o,e),t._externalCleanup(o)},t._externalContext[e]=o,t._appendNode(n)))},_responseStatus:{_pending:"pending",_timeout:"timeout",_error:"error",_success:"success"},_clearExternalTimer:function(e){window.clearTimeout(e.timer)},_setExternalTimer:function(e,t,r){e.timer=window.setTimeout(t,r)},_onExternalTimeout:function(e){e.response=t._responseStatus._timeout,t._externalCleanup(e),t._externalCallback(e,null,"onTimeout")},_onExternalError:function(e){t._externalCleanup(e),e.onError&&e.response!=t._responseStatus._success&&(e.response=t._responseStatus._error,t._externalCallback(e,null,"onError"))},_externalCleanup:function(e){window.setTimeout(function(){if(e){t._clearExternalTimer(e);var r=Dom.get(e.key);r&&(r.onerror=function(){},r.onload=function(){},r.onreadystatechange=function(){},Dom.removeNode(r),r=null)}},0)},_externalCallback:function(e,t,r){r=r||"cb";var n=t&&[t]||[];n&&e.cbArgs&&Shr.Array.append(n,e.cbArgs),e[r]&&e[r].apply(e[r],n)},loadJQuery:function(e,r){Shr.jQuery?L.isFunction(e)&&e.apply(this,r||[]):Shr.Dom.onDomReady.add(function(){t._loadJQuery(e,r)})},_loadJQuery:function(e,r){var n=this;t.getJsonP("//ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js",{cb:function(){if(window.jQuery){var t=window.jQuery;Shr.jQuery=t,Shr.fn.init=function(e,r,n){return n=n||t(document),new t.fn.init(e,r,n)},t.noConflict(),L.isFunction(e)&&e.apply(n,r||[])}},type:"script"})},loadTwtr:function(e,r){Shr.Twtr?L.isFunction(e)&&e.apply(this,r||[]):t._loadTwtr(e,r)},_loadTwtr:function(e,r){var n=this;t.getJsonP("//widgets.twimg.com/j/2/widget.js",{cb:function(){window.TWTR&&L.isFunction(e)&&e.apply(n,r||[])},type:"script"})},throwIfOverridden:function(e){var t=!0,r="",n="";try{n=window.localStorage.getItem(e),(t=-1!=Shr.Array.indexOf(Array.prototype.map.call(document.querySelectorAll("SCRIPT"),function(e){return e.src}),n))||(r=Array.prototype.slice.call(document.querySelectorAll("SCRIPT"),-1).pop().src)}catch(e){}if(n&&!t)throw new window.Error("skipping "+e+" defined in "+r.split("/").pop()+" in lieu of override="+n)},_init:function(){var e=PM.js2||[];L.forEach(e,function(e,r){t._scripts[e]={}})}};return t._init(),t.BatchLoader=e,t}(),TraceLevel={names:["Off","Error","Warning","Info","Verbose"],Off:0,Error:1,Warning:2,Info:3,Verbose:4,format:function(e){return TraceLevel.names[e]}},LogEntry=function(e,t){this.time=new _date__WEBPACK_IMPORTED_MODULE_0__.a,this.level=e,this.message=t};Object.extend(LogEntry.prototype,{toString:function(){var e=this.time;return e.getHours().numberFormat("00")+":"+e.getMinutes().numberFormat("00")+":"+e.getSeconds().numberFormat("00")+"."+e.getMilliseconds().numberFormat("000")+" "+TraceLevel.format(this.level).toUpperCase()+" - "+this.message}});var Trace=(Nfc={level:TraceLevel.Verbose,onWrite:new EventHandler,_write:function(e,t){if(0<Nfc.onWrite.hasHandlers()){var r=new LogEntry(e,t);Nfc.onWrite.raise(r)}},write:function(e,t){A.trace&&Nfc.level>=e&&Nfc._write(e,t)},verbose:function(e){Nfc.write(4,e)},info:function(e){Nfc.write(3,e)},warning:function(e){Nfc.write(2,e)},error:function(e,t){e instanceof Error&&(e=Nfc.formatException(e)),t&&(t instanceof Error&&(t=Nfc.formatException(t)),e+="\r\n"+t),Nfc.write(1,e)},formatCallStack:function(e,t){var r="",n=arguments.callee,o=0;for(t=t||5120;n;){if(e<o){r+="------------------------------------------\r\n";var i=n.arguments;if(0<i.length){for(var s=0;s<i.length;s++)r+="Arguments["+s+"]="+Object.toJavaScript(i[s])+"\r\n";r+="\r\n"}r+=n+"\r\n"}n=n.caller,o++}return t&&r.length>t&&(r=r.substring(0,t)+"..."),r},formatException:function(e){return"JavaScript Error #"+e.number+" - "+e.name+"\r\n"+e.message+(e.description!=e.message?"\r\n"+e.description:"")+(e.source?"\r\n"+e.source:"")+(e.stack?"\r\n"+e.stack:"")},_onError:function(e,t,r){try{var n="JavaScript Error:\r\nMessage:"+e+"\r\nUrl: "+t+"\r\nLine Number: "+r+"\r\nCallStack: "+Nfc.formatCallStack(1,5e3);t&&t.indexOf("nexo")<0?Nfc.warning(n):Nfc.error(n)}catch(e){}return!0},_times:{start:window.timer1||new _date__WEBPACK_IMPORTED_MODULE_0__.a},_onload:!1,timer:function(e){Nfc._times[e]=new _date__WEBPACK_IMPORTED_MODULE_0__.a;var t=Nfc._times[e]-Nfc._times.start,r=Nfc._times[e]-(Nfc._times.last||Nfc._times.start);if(Nfc._times.last=Nfc._times[e],Console.write("timer: label="+e+" delta="+(r/1e3).toFixed(3)+" total="+(t/1e3).toFixed(3)),!Nfc._onload)if(Nfc._onload=!0,Event.addEventListener(window,"load",function(){Nfc.timer("window.onload   ")}),B.isGecko)Event.addEventListener(window,"DOMContentLoaded",function(){Nfc.timer("DOMContentLoaded")});else if(B.isSafari)var n=setInterval(function(){/loaded|complete/.test(document.readyState)&&(window.clearInterval(n),Nfc.timer("DOMContentLoaded"))},10);else B.isIE},displayTimes:function(){var e=[],t=null,r=null;for(var n in Nfc._times)if("last"!=n){var o=Nfc._times[n];r?(e.push(n+": delta="+((o-t)/1e3).toFixed(3)+" total="+((o-r)/1e3).toFixed(3)),t=o):(r=t=o,e.push(n+": "+r.toString()))}alert(e.join("\n"))}},Nfc),Nfc,Debug=(Dgc={level:TraceLevel.Verbose,write:function(e,t){A.debug&&Dgc.level>=e&&Trace._write(e,t)},verbose:function(e){Dgc.write(4,e)},info:function(e){Dgc.write(3,e)},warning:function(e){Dgc.write(2,e)},error:function(e){Dgc.write(1,e)}},Dgc.info("start"),Dgc),Dgc,WindowEx=(Pgc={_baseTime:new _date__WEBPACK_IMPORTED_MODULE_0__.a,loading:!0,onRefresh:new EventHandler,onBeforeUnload:new EventHandler,onUnload:new EventHandler,loadFocus:null,_pendingAsyncCommands:[],init:function(){Shr.Dom.onDomReady.add(Pgc._onLoad),Event.addEventListener(window,"unload",Pgc._onUnload),Event.addEventListener(window,"beforeunload",Pgc._onBeforeUnload),Pgc.onBeforeUnload.add(Pgc._flashOnBeforeUnload),Pgc.onUnload.add(Pgc._stopUpdateHandler)},_onLoad:function(){if(Pgc.loadFocus){var e=Dom.get(Pgc.loadFocus);Dom.tryFocus(e)}try{var t,r=document.createElement("DIV"),n="",o=Shr.ServerCommands.updateFrame;r.style.height="0",r.style.overflow="hidden",Shr.SCore&&Shr.SCore.noDocumentDomain&&(t=window.location.origin||window.location.protocol+"//"+window.location.host,n="&noDocumentDomain=true&origin="+window.encodeURIComponent(t),o=o.replace(/\?site=\d*&/,"?"),Shr.Event.addEventListener(window,"message",Pgc._onMessage,!1)),r.innerHTML="<iframe id='updateFrame'"+Shr.Att.src(o+n)+" style='width:0;height:0;visibility:hidden;border:none;'></iframe>",document.body.appendChild(r)}catch(e){}if(U.initSettings||S.initSettings){var i=new _date__WEBPACK_IMPORTED_MODULE_0__.a((new _date__WEBPACK_IMPORTED_MODULE_0__.a).getFullYear(),1,1).getTimezoneOffset();U.initSettings&&Shr.C.beginExec("users/initusersettings",{timeZoneOffset:i}),S.initSettings&&Shr.C.beginExec("sites/initsitesettings",{siteId:S.id,timeZoneOffset:i})}var s=WindowState.get("onload",!0);if(s&&(U.uid||!s.requireSignIn)){var a=Shr.Modules[s.module],l=null;a?l=a[s.method]:Shr.Page.initCommands[s.method]?(l=Shr.C[s.method],a=Shr.C):Shr.L.forEach({"Shr.PictureUtils.SelectedPics":["onOk"]},function(e,t){return t==s.module&&-1!=Shr.Array.indexOf(e,s.method)&&(a=Object.get(t),l=a&&a[s.method]),!l}),l&&l.apply(a,s.args||[])}},_pseudoHttpRequest2:Object.extend(function(e,t,r,n){this._method=e,this._url=t,this._user=r,this._pw=n},{prototype:{beginSend:function(e,t,r){this._id=Pgc._requestId,Pgc._requestId++,this._cb=t,this.asyncState=r,Pgc._requests.push(this),Pgc._updateFrame.postMessage(window.JSON.stringify({id:this._id,method:this._method,url:this._url,args:e,user:this._user,password:this._pw}),Pgc._updateFrameOrigin)},getCommandResponse:function(){return Object.fromString(this.responseText)},send:function(){throw"Synchronous requests not supported with noDocumentDomain=true"}}}),_onMessage:function(e){var t,r;e.origin==window.location.protocol+"//"+Shr.AS.cmd&&("onUpdateFrameLoad"==e.data?(Pgc._updateFrame=document.getElementById("updateFrame").contentWindow,Pgc._updateFrameOrigin=e.origin,Pgc._requestId=0,Pgc._requests=[],Pgc.onUpdateFrameLoad({createXhr:function(e,t,r,n){return new Pgc._pseudoHttpRequest2(e,t,r,n)},stop:function(){Pgc._updateFrame.postMessage("stop",Pgc._updateFrameOrigin)}},Pgc._updateFrameOrigin)):"string"==typeof e.data&&(r=window.JSON.parse(e.data),(t=Shr.Array.findByProperty(Pgc._requests,"_id",r.id))&&(Shr.Array.remove(Pgc._requests,t),t.status=r.status,t.responseText=r.responseText,Shr.L.tryToCall(Shr.C._execDone.bind(Shr.C),t))))},_onBeforeUnload:function(){Pgc.onBeforeUnload.raise()},_flashOnBeforeUnload:function(){window.__flash_unloadHandler=function(){},window.__flash_savedUnloadHandler=function(){},Pgc.onUnload.add(Pgc._cleanupSWFs)},_cleanupSWFs:function(){for(var e=document.getElementsByTagName("OBJECT"),t=0;t<e.length;t++){var r=e[t];for(var n in Dom.hide(r),r)if(Shr.L.isFunction(r[n]))try{r[n]=function(){}}catch(e){}}},_onUnload:function(){Pgc.onUnload.raise()},_stopUpdateHandler:function(){Pgc.unloading=!0;try{Pgc.updateHandler&&Pgc.updateHandler.stop()}catch(e){}},updateFrameLoad:new EventHandler,onUpdateFrameLoad:function(e){Pgc.updateHandler=e,Pgc.updateFrameLoad.raise()},onUpdate:function(e){Pgc._processUpdate(e)},_processUpdate:function(e){try{var t;if(e)if(e.error)Trace.info("Error during update.  "+e.error.message);else{var r=e.result;if(r){if(AR.t=r.t,AR.t2=r.t2,r.h&&(AR.h=r.h,Shr.N.h(AR)),r.reload&&!Dialog.isOpen())return void Shr.N.reload();if(r.shuttingDown,r.hasOwnProperty("siteMessage")){var n=r.siteMessage;AD.siteMessage=n;var o=Dom.get("user-message");(o.innerHTML=n)?Dom.show(o):Dom.hide(o)}var i=r.changes;if(i){i.length;var s=Pgc._pendingSectionRedrawList={};for(t=0;t<i.length;t++)Pgc._processPageTransaction(i[t]);for(var a in s){var l=P.nodes[a];l&&Shr.Section.refreshContentHtml(l)}}var c=r.updates;if(c)for(c.length,t=0;t<c.length;t++){var d=c[t];Shr.DataManager.updateValue(d[0],d[1],d[2])}P.changeId=r.changeId}}}catch(t){e&&e.result&&(e.result.ttl=30),Trace.info("Error reading refresh response.  ",t)}Pgc.onRefresh.raise()},_pendingSectionRedrawList:{},scheduleSectionRedraw:function(e){Pgc._pendingSectionRedrawList[e]=!0},_processPageTransaction:function(e){var t=Shr.Section,r=Shr.ContentItem,n=Shr.ContentGroup;try{var o=e.kind,i=e.args;if("InsertItem"==o){var s=i[4];s&&(i[2].tempId=s),r.onInsertItem(i[0],i[1],i[2],i[3])}else"UpdateItem"==o?r.onUpdateItem(i[0],i[1]):"DeleteItem"==o?r.onDeleteItem(i[0],i[1]):"MoveItem"==o?r.onMoveItem(i[0],i[1],i[2]):"ReloadPage"==o?Shr.Page.refreshInnerHtml():"InsertSection"==o?t.onInsertSection(i[0],i[1],i[2],i[3]):"UpdateSection"==o?t.onUpdateSection(i[0],i[1]):"DeleteSection"==o?t.onDeleteSection(i[0]):"MoveSection"==o?t.onMoveSection(i[0],i[1],i[2]):"SectionMessage"==o?t.onSectionMessage(i[0],i[1],i[2]):"ClearChildren"==o?t.onClearItems(i[0]):"InsertGroup"==o?n.onInsertGroup(i[0],i[1],i[2]):"UpdateGroup"==o?n.onUpdateGroup(i[0],i[1]):"DeleteGroup"==o?n.onDeleteGroup(i[0]):"MoveGroup"==o&&n.onMoveGroup(i[0],i[1],i[2])}catch(t){Trace.error("Error processing page transaction '"+e.kind+"'.",t)}},encodeFileName:function(e){return Shr.L.encodeFileName(e)},_hasSize:function(e,t){var r={},n=t.capitalize();return"matchMedia"in window?(parseInt(e)==e&&(e+="px"),r=window.matchMedia("(min-${1}: ${0})".substitute([e,t]))):"inner"+n in window?r.matches=window["inner"+n]>=parseInt(e):r.matches=document.body["client"+n]>=parseInt(e),r.matches&&window.screen[t]>=parseInt(e)},hasWidth:function(e){return Pgc._hasSize(e,"width")},hasHeight:function(e){return Pgc._hasSize(e,"height")}},Pgc.init(),Pgc),Pgc,DocumentEx=(vic={init:function(){Event.addEventListener(document,"selectstart",vic._onSelectStart)},_onSelectStart:function(e){Shr.Dom.getParentByClass(Mouse.downElement,"noselect")&&Event.stop(e)},getVisibleBounds:function(){return new Shr.Rect(vic.getScrollLeft(),vic.getScrollTop(),vic.getClientWidth(),vic.getClientHeight())},getClientWidth:function(){return document.documentElement.clientWidth||document.body.clientWidth},getClientHeight:function(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight},getScrollTop:function(){var e=document.documentElement;if(e&&e.scrollTop)return e.scrollTop;var t=document.body;return t?t.scrollTop:0},getScrollLeft:function(){var e=document.documentElement;if(e&&e.scrollLeft)return e.scrollLeft;var t=document.body;return t?t.scrollLeft:0}},vic.init(),vic),vic,Atts={handler:"s:handler",menu:"s:menu",contextMenu:"s:contextMenu",menuArgs:"s:menuArgs",positionX:"s:positionX"},Dialog=(Iic={dialogs:[],inlineDialogs:[],zIndex:100,newDlg:!1,newDlgTitle:!1,newDlgButtons:!1,confirm:function(e){return window.confirm(StringEx.htmlDecode(e))},render:function(e){e("<div id=dlg-background></div>","<div id=dlg-container></div>")},showBackground:function(e,t,r){var n=Dom.get("dlg-background");if(n){var o=n.style;Iic.sizeBackground(),o.cursor=t||"wait",o.zIndex=e,B.isIE&&!B.hasFilters&&(o.backgroundColor="Transparent"),o.backgroundColor=r||"",Dom.show(n)}},sizeBackground:function(e){if(e=e||Dom.get("dlg-background")){var t=e.style,r=document.body;t.width=Math.max(DocumentEx.getClientWidth(),r.offsetWidth)+"px",t.height=Math.max(DocumentEx.getClientHeight(),r.offsetHeight,r.scrollHeight)+"px"}},hideBackground:function(){var e=Dom.get("dlg-background");e&&Dom.hide(e)},setActive:function(){Iic.active=!0},active:!1,isOpen:function(){var e=Iic.active||Iic.dialogs.length||Iic.inlineDialogs.length;return Iic.active=!1,e},handheldWidth:"480px",getDlgProperty:function(e,t,r){return void 0===(t=t||{})[e]?t.dialog&&void 0!==t.dialog[e]?t.dialog[e]:r:t[e]},show:function(e,t){if(!Shr.Dom.get("dlg-container")){var r=Dom.create("DIV",null,{id:"dlg-background",style:"position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 101; display: block; opacity: 0.5;"});document.body.appendChild(r);var n=Dom.create("DIV",null,{id:"dlg-container"});document.body.appendChild(n)}var o=Iic.show,i=Iic.show2;if((t=t||{}).showtime=_date__WEBPACK_IMPORTED_MODULE_0__.a.now(),e){if(Shr.Hover&&Shr.Hover.hide(),t.renderInline){if(!t.container)return;o=Iic.renderInline,i=function(e,t){Dialog.renderInline2(e,t)}}else Iic.showBackground(Iic.zIndex+2*Iic.dialogs.length+1,void 0,Iic.getDlgProperty("bgMask",t,!L.isString(e)&&e.bgMask||"#464646"));L.isString(e)?ScriptManager.loadOptional("Shr.Dialogs."+e,o,t):(t.dialog=e,ScriptManager.loadOptional("Shr.Dialog2",i,t))}},show2:function(e,t){Iic.show3(t)},renderInline:function(e,t){Iic.show(e,Object.extend(t||{},{renderInline:!0}))}},Shr.L.forEach(Iic,function(e,t){return"_"!=t.charAt(0)}),Iic),Iic,Uri=function(e){var t=(this.text=e).match(/\s*(\w+:\/\/)([\w-.:]+)\/([^\?#]*)(\?[^#]*)?(#\S*)?\s*/);this.isValid=null==t?(this.scheme=this.authority=this.path=this.query=this.fragment=null,!1):(this.scheme=t[1],this.authority=t[2],this.path=t[3],this.query=t[4],this.fragment=t[5],!0)};Uri.prototype.toString=function(){return this.text},Object.extend(Uri,{getArg:function(e,t){if(e){var r=e.match("[?&]"+t+"=([^&#]*)");if(r)return r[1]}return null}});var Cookie=(Fjc={getCookie:function(e){var t=document.cookie,r=e+"=",n=t.indexOf("; "+r);if(-1==n){if(0!=(n=t.indexOf(r)))return null}else n+=2;var o=document.cookie.indexOf(";",n);return-1==o&&(o=t.length),unescape(t.substring(n+r.length,o))},setCookie:function(e,t,r,n,o,i){document.cookie=e+"="+escape(t)+(r?"; expires="+r.toGMTString():"")+(n?"; path="+n:"")+(o?"; domain="+o:"")+(i?"; secure":"")+";"},deleteCookie:function(e,t,r){this.getCookie(e)&&Fjc.setCookie(e,"",new _date__WEBPACK_IMPORTED_MODULE_0__.a(1970,0,1,0,0,1),t,r)}},Fjc),Fjc,Console=(Xjc={_buffer:[],_window:null,_output:null,_focus:!1,_loadFirebugConsole:A.debug&&B.isGecko&&window.loadFirebugConsole&&window.loadFirebugConsole(),_write:function(e){var t=Xjc._output,r=t.document.createElement("div");r.innerHTML=e,t.appendChild(r)},write:function(e){if(e=e?e.toString():"",window.console)return e=e.replace("%",""),void console.log(e);window.debugService?window.debugService.trace(e):Xjc._buffer[Xjc._buffer.length]=e},onWrite:function(e){if(e){var t=e.message||"";if(!((t=t.toString())&&0<=t.indexOf("Error loading script"))){Xjc.write(Xjc._formatEntry(e));var r=e.level;if(r<=2&&(Xjc._errorCount++,Xjc._errorCount<5))try{window.Shr.C?Shr.C.beginExec("clienterror",{level:r,page:P.id,message:t+"  Flash Version: "+Shr.FlashElement.getPlayerVersionString()},null,null,!0):(new Image).src="commands/clienterror?level="+r+"&message="+encodeURIComponent(t)}catch(e){}}}},_errorCount:0,_formatEntry:function(e){var t=e.time;return t.getHours().numberFormat("00")+":"+t.getMinutes().numberFormat("00")+":"+t.getSeconds().numberFormat("00")+"."+t.getMilliseconds().numberFormat("000")+" "+TraceLevel.format(e.level).toUpperCase()+" - "+e.message}},Xjc),Xjc,Mouse=(kkc={_overElement:null,downElement:null,bodyOut:new EventHandler,_init:function(){var e=Event.addEventListener;e(document,"mouseover",kkc._onMouseOver),e(document,"mouseout",kkc._onMouseOut),e(document,"mousedown",kkc._onMouseDown),e(document,"mouseup",kkc._onMouseUp),e(document,"selectstart",kkc._onSelectStart),TimerPool.ms40.add(kkc._onTimer)},_handlers:{i:{_setPosition:function(e,t,r){var n=e.style;if(n.backgroundPositionY)n.backgroundPositionY=r+"px";else{var o=Dom.getAttribute(e,Atts.positionX);e.style.backgroundPosition=o+" "+r+"px"}},_onMouseOver:function(e,t){this._setPosition(e,t,-20)},_onMouseOut:function(e,t){this._setPosition(e,t,0)},_onMouseDown:function(e,t){this._setPosition(e,t,-40)},_onMouseUp:function(e,t){this._setPosition(e,t,0)}},m:{_onMouseOver:function(e){Dom.addClass(e,"m-over")},_onMouseOut:function(e){Dom.removeClass(e,"m-over")},_onMouseDown:function(e){Dom.addClass(e,"m-down")},_onMouseUp:function(e){Dom.removeClass(e,"m-down")}}},_onMouseOver:function(e){kkc._handleMouseOut=!1;var t=kkc._getElementWithHandler(e),r=kkc._overElement;t!=r&&(r&&(kkc._bubble(r,"_onMouseOut"),kkc._bubble(r,"_onMouseUp"),kkc._overElement=null),kkc.downElement||(kkc._overElement=t,kkc._bubble(t,"_onMouseOver")))},_onMouseOut:function(e){kkc._handleMouseOut=!0},_onMouseDown:function(e){var t=kkc._getElementWithHandler(e);kkc.downElement=t,kkc._bubble(t,"_onMouseDown")},_onMouseUp:function(e){var t=kkc._getElementWithHandler(e);kkc._bubble(kkc.downElement,"_onMouseUp"),kkc.downElement=null,kkc._bubble(t,"_onMouseOver"),kkc._overElement=t},_bubble:function(e,t){if(window.Dom)for(var r=kkc._handlers;e;){var n=Dom.getAttribute(e,Atts.handler);if(n){var o=r[n];o&&o[t](e,n)}e=Dom.getParentByAttribute(e.parentNode,Atts.handler)}},_onTimer:function(){if(kkc._handleMouseOut){var e=kkc._overElement;e&&(kkc._bubble(e,"_onMouseOut"),kkc._bubble(e,"_onMouseUp"),kkc._overElement=null),kkc._handleMouseOut=!1,kkc.bodyOut.raise()}},_onSelectStart:function(e){kkc._getElementWithHandler(e)&&Event.stop(e)},_getElementWithHandler:function(e){var t=Event.getSrcElement(e);return t&&window.Dom&&(t=Dom.getParentByAttribute(t,Atts.handler)),t},isDown:function(){return null!=kkc.downElement}},kkc._init(),kkc),kkc,Sfly={},mlc;mlc={videogramUrl:A.convertToHttp(A.www+"videograms/myVideograms.sfly"),videogramCreateUrl:A.convertToHttp(A.www+"videograms/edit.sfly"),videogramFAQsUrl:"//shutterfly-2.custhelp.com/app/answers/detail/a_id/1501/",videogramSubscriptionUrl:A.convertToHttp(A.www+"subscriptionpath/start.sfly?planTypeId=5&planId=7"),videogramPIP:A.convertToHttp(A.www+"photo-gifts/premium-videogram-plan"),_albumImgCommandUrl:A.img+"procgserv/",_cropImgCommandUrl:A.img+"procsrserv/",_emptyAlbumImgUrl:A.web+"img_/SFLY/empty_album_W.gif",_osc4pOrderUrl:"//"+AS.www+"/osc4p/sites_osc4p.jsp",_osc4pQueryUrl:A.ensureProtocol(A.www+"share/checkCart?skipAppLoginFilter=1&function="),_signedInQueryUrl:A.wwwSSL+"order/isCartEmpty.jsp?skipAppLoginFilter=1&function=",_osc4pCartUrl:A.convertToHttp(A.www+"osc4p/oscart.jsp"),_emptyAlbumImgUrls:{96:"emptyAlbum_96_1.gif",150:"emptyAlbum_150_1.gif",200:"emptyAlbum_200_1.gif"},_emptyAlbumImgUrlsNoPermissions:{96:"emptyAlbum_96_2.gif",150:"emptyAlbum_150_2.gif",200:"emptyAlbum_200_2.gif"},_init:function(){Event.addEventListener(window,"load",mlc._OnWindowLoad)},_OnWindowLoad:function(){mlc._setPartnerInfo(),US.id&&(US.cartHasItems&&Shr.Page.showReminder(5),mlc._checkForExpiredSessionData(),TimerPool.m1.add(mlc._checkForExpiredSessionData))},formatImgSrc:function(e,t,r,n){var o=e.shutterflyId||e.pictureId;if(n&&"getThumbnailUrl"in e)return e.getThumbnailUrl(t,t);if(o&&38<o.length){var i=mlc._pixelToSflySize(t),s="shutterflyAItem"==e.nodeType?"proctaserv/":"procgtaserv/";return(r||A.img)+s+o.substring(0,35)+i+o.substring(36)}return null},_pixelToSflySize:function(e){return e<=100?9:e<=200?8:e<=400?7:e<=480?6:e<=800?5:e<=1e3?4:Shr.AS.imgsize||0},formatShareSiteImageSrc:function(e,t,r){if(e&&38<e.length){var n=mlc._pixelToSflySize(Math.max(t,r));return A.img+"procsrserv/"+e.substring(0,35)+n+e.substring(36)+"/cC/rx="+t+"/ry="+r+"/ps=0"}return null},getAlbumImgId:function(e){var t;return e.coverPicture?t=e.coverPicture.shutterflyId:e.coverImgId&&(t=e.coverImgId),!t&&e.items&&0<e.items.length&&(t=e.items[0].shutterflyId),t},formatAlbumImgSrc:function(e,t,r){var n,o=mlc.getAlbumImgId(e);return o?Sfly.formatImgSrc({shutterflyId:o,nodeType:Object.get("coverPicture.nodeType",e)||"shutterflyItem"},t||96,void 0,r):e&&e.section?(L.forEach(!e.noOnClick&&e.section.canAddContent?mlc._emptyAlbumImgUrls:mlc._emptyAlbumImgUrlsNoPermissions,function(e,r){return n=e,r<t}),A.imageUrl(n)):A.imageUrl(mlc._emptyAlbumImgUrlsNoPermissions[t||96])},formatPictureOrderImgSrc:function(e){var t=e.shutterflyId;return t?mlc._albumImgCommandUrl+t.substring(0,35)+"01"+t.substring(37):Shr.ImgSrc.blank},formatRotatedImgSrc:function(e,t){var r=e.shutterflyId;if(r){var n=(parseInt(r.charAt(37))+parseInt(t))%4;return mlc._albumImgCommandUrl+r.substring(0,35)+"01"+n+r.substring(38)}return Shr.ImgSrc.blank},formatCroppedImgSrc:function(e,t,r,n,o,i,s){var a=n?n.toString():"0.0",l=o?o.toString():"0.0",c=i?i.toString():"1.0",d=s?s.toString():"1.0",h=e.shutterflyId;return mlc._cropImgCommandUrl+h.substring(0,35)+"00"+h.substring(37)+"/cC/rx="+t+"/ry="+r+"/cr="+a+","+l+","+c+","+d},getBestFitBounds:function(e,t,r){var n,o,i=e.width,s=e.height,a=t,l=r;i&&s||(s=4,i=6);var c=i/s;return 1<=a/l?(o=(n=a)/c)<l&&(n=(o=l)*c):(n=(o=l)*c)<a&&(o=(n=a)/c),new Shr.Rect(Math.round((n-a)/2),Math.round((o-l)/3),Math.round(n),Math.round(o))},getCroppedBounds:function(e,t,r,n){var o=t/(e.width*(n.rightOffset-n.leftOffset));return new Shr.Rect(e.width*n.leftOffset*o,e.height*(1-n.topOffset)*o,e.width*o,e.height*o)},getExpansionFactor:function(e,t,r){var n=t&&e||r||1.78,o=e&&t||1,i=Math.round(100*n/o)/100;return i&&Math.max(i,1/i)||1},formatContentSource:function(e,t){if(e&&e.section){var r=e.section,n=r.sectionType||r.mid,o="";if(r)return r.isFolderPage?o="FolderPage":r.isSectionPage?o="SectionPage":r.isItemPage&&(o="ItemPage"),StringEx.joinOptional("/",n,o,t)}return t},orderNow:function(e,t,r,n,o){var i,s={cid:o||A.cids.orderPrints,scid:S.collectionKey,collectionKey:e,albumID:t};U.id?(i=mlc._orderCmdUrl,Object.extend(s,{albumTitle:S.displayName||S.siteName||S.id,uid:U.id,shareIds:r.join(",")})):(i=mlc._osc4pOrderUrl,Object.extend(s,{returnURL:P.reloadUrl||window.location.href,viewIDs:r.join(",")})),i+=(i.endsWith("&")?"":"?")+"cid="+s.cid,A.Log({ModuleName:"content",EventName:"order",uid:U.id,collectionId:e,path:P.id,contentType:"pictures",creator:S.createdBy==U.id?"1":"0",contentSource:n||"",count:r.length}),Shr.C.message({id:"Progress",title:"Ordering...",msg:"<div style='text-align: center;'>Adding pictures to cart...</div>",cmd:{callback:function(e){N.submitForm("POST",i,s,{target:""})}}})},addToCart:function(e,t,r){var n=S.displayName||S.siteName||S.id,o=mlc._orderCmdUrl+"&collectionKey="+e+"&albumID="+t+"&albumTitle="+encodeURIComponent(n)+"&shareIds="+encodeURIComponent(r)+"&noRedirect=true",i=Dom.get("dynamicFrame");i||((i=document.createElement("IFRAME")).id="dynamicFrame",document.body.appendChild(i)),i&&(i.src=o)},formatCartUrl:function(){return U.id?mlc.mainCartUrl:mlc._osc4pCartUrl},_setPartnerInfo:function(){try{!U.id&&(S.ayso||S.our3||S.cysa||S.calsouth)&&((new Image).src=A.www+"share/updp.jsp?v="+U.visitorId+"&p="+S.pid+"&s=SHR&u="+(new _date__WEBPACK_IMPORTED_MODULE_0__.a).toSeconds())}catch(e){}},_checkForExpiredSessionData:function(){(US.ttl<0||US.cartHasItems&&US.ttl<=0)&&(U.id?ScriptManager.load({},"nocache",mlc._signedInQueryUrl+"Shr.Sfly._cartQueryComplete",null,[],!0,!0):ScriptManager.load({},"nocache",mlc._osc4pQueryUrl+"Shr.Sfly._cartQueryComplete",null,[],!0,!0)),0<=US.ttl&&US.ttl--},_cartQueryComplete:function(e){var t=US.cartHasItems=!e.isEmpty;US.ttl=15,t&&Shr.Page.showReminder(5),Shr.C.beginExec("client/updatesessiondata",{cartHasItems:t},null,null,!0)},invalidateUserCache:function(){var e=A.www+"cac/sp.sp";(new Image).src=e},addProjectToCart:function(e,t){Shr.C.alert("TBD")},versioned:{pbHtml5Slideshow:{js:{path:"js/jsslideshow/1.0/slideshow-min.js"},css:{path:"css/photobooks/jsslideshow/1.0/jsslideshow.css"}}},photoBookSlideShowMovieUrl:{path:"/flashapps/flashslideshowphotobook/slideshow_pb.swf"},photoBookSlideShow30MovieResource:{path:"/flashapps/slideshow/slideshow-ui.swf"},formatPhotobookFlashVars:function(e,t,r,n,o,i,s,a,l,c){var d=A.ws+"psdata?projectGUID="+e+"&uid="+t+"&height="+r+"&width="+r+"&ts="+o+"&size=0";return"xmlURL="+encodeURIComponent(d)+"&size=1"+(i?"":"&ob=0")+(s?"":"&fc=0")+(a?"":"&sb=0")+(l?"":"&ss=0")+(c?"":"&ft=0")},pb30ConfigResource:{path:"/flashapps/slideshow/config/config-share.xml"},_pb30ModuleResource:{path:"flashapps/slideshow/slideshow-module.swf"},getVersionedResourceUrl:function(e){var t;if(!e.url&&(t=Shr.C.exec("getversionedresource",e)).result){e.url=t.result.versionedPath,/^.dev/.test(AS.env)&&/^http\:\/\/web1\.dev\.staticsfly\.com/.test(e.url);var r=e.url.split(".");r&&r[0]&&-1!=r[0].indexOf("cdn")&&(r[0]="http://cdn"),e.url=r.join(".")}return Shr.Html.removeProtocol(e.url)},formatPhotobook30FlashVars:function(e,t,r,n,o,i,s,a,l,c){var d={configXMLURL:mlc.getVersionedResourceUrl(mlc.pb30ConfigResource),slideshowModuleURL:mlc.getVersionedResourceUrl(mlc._pb30ModuleResource),projectGUID:e,swfName:"slideshowFlashContent",showReplay:!0},h=[],u=function(e,t){var r=(e||"").split("/");return r[2]=t,r.join("/")},p=(mlc.photoBookSlideShow30MovieResource.url||"").split("/")[2];return d.configXMLURL=u(d.configXMLURL,p),d.slideshowModuleURL=u(d.slideshowModuleURL,p),L.forEach(d,function(e,t){h.push(t+"="+encodeURIComponent(e))}),h.join("&")},formatPhotoBookOrderUrl:function(e,t){var r="PHOTOBOOK_30"==t,n="PHOTOBOOK_20"==t,o=r?"custompath/start.sfly":n?"action/projects/viewProject":"photobook/start.sfly",i={projectGUID:e,cid:A.cids.orderProjects};return r?i.fromLocation="order":n?(i.projid=e,i.ptype=t,i.redirectToEditPages=!1):i.orderFromShare=!0,mlc.getHref(o,i)},addPicturesToCreationPath:function(e,t,r){var n,o={},i=function(e){return!e.error||(Shr.C.alert("An error occurred while putting your pictures in the product creation path.  Please try again."),!1)};return o.albumName=e||mlc.formatDefaultAlbumName(),o.pictureIds=t.join(","),r?(Shr.C.beginExec("pictures/collectpictures",o,function(e){Shr.L.tryToCall(r,i(e))}),!0):(n=Shr.C.exec("pictures/collectpictures",o,!0),i(n))},formatProjectFormFactor:function(e){switch(e){case 1:return"4x4 Photo book";case 2:return"8x8 Photo book";case 3:return"12x12 Photo book";case 4:return"8.5x11 Photo book";case 5:return"5x7 Photo book";default:return""}},renderPBiFrame:function(e,t,r){return L.isNumber(r)&&(r+="px"),L.isNumber(t)&&(t+="px"),"<iframe "+Shr.Att.src(e)+' id="bookFrame" scrolling="no" style="display:block;height:'+t+";width:"+r+';position:relative;border:none;" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>'},formatPBUrl:function(e,t,r){return(e?A.wwwSSL:A.www)+"pb/#/"+t+Shr.Html.formatQuery(r)},_uploadModule:"ShareUploader",sendUploadSessionMetrics:function(e,t){var r=new StringBuilder;r.write(A.up,"uploadlog/sessionmetrics.txt?","module=",encodeURIComponent(mlc._uploadModule),"&type=upload","&duration=",e,"&userid=",encodeURIComponent(U.id)||"","&ulState=initial");var n=Shr.FlashElement.getPlayerVersionString().replace(/\./g,",");for(var o in n=B.isWin?"WIN "+n:B.isMac?"MAC "+n:"UNK "+n,t.flashver=n,t)r.write("&",o,"="+encodeURIComponent(t[o]));var i=r.toString();(new Image).src=i},formatDefaultAlbumName:function(){return(new _date__WEBPACK_IMPORTED_MODULE_0__.a).dateFormat("Y-m-d")},go:function(e){document.location.href=A.www+e},getHref:function(e,t){var r=0==e.indexOf("/")?e.substring(1):e;U.id&&S.bsa&&(t.pid=S.pid,t.psid=S.psid),t.scid=S.collectionKey;var n=-1!=r.indexOf("?")?"":"?";return t&&L.forEach(t,function(e,t){n+=t+"="+e+"&"}),"//"+AS.www+"/"+r+n},getEmail:function(){var e=QueryStringParser.parse();return e.email?e.email:mlc.validateEmail(U.sflyEmail||"")?U.sflyEmail:""},signout:function(){var e={cid:A.cids.sfly,logout:!0,logoutSynchronously:!0,re:encodeURIComponent(document.location)};N.go(mlc.getHref("signout/start.sfly",e))},validateEmail:function(e){var t='[^\\s\\(\\)<>@,;:\\\\\\"\\.\\[\\]]+',r="("+t+'|("[^"]*"))',n=new RegExp("^"+r+"(\\."+r+")*$"),o=new RegExp("^"+t+"(\\."+t+")*$"),i=e.match(/^(.+)@(.+)$/);if(null==i)return!1;var s=i[1],a=i[2];if(null==s.match(n))return!1;var l=a.match(/^\[(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})\]$/);if(null!=l){for(var c=1;c<=4;c++)if(255<l[c])return!1;return!0}if(null==a.match(o))return!1;var d=new RegExp(t,"g"),h=a.match(d),u=h.length;return!(h[h.length-1].length<2||4<h[h.length-1].length||u<2)},getPictureId:function(e,t){var r;if("shutterflyAItem"==e.nodeType)r=e.shutterflyId;else if(!t&&e.nodeId){var n=e.parent&&(e.parent.nodeId||e.parent.id)||P.id;r=(n=n.replace(/\/\d*$/,""))+"/"+e.nodeId}else r=(e.parent&&e.parent.type||"Unknown")+":"+e.shutterflyId;return r},isSflyImage:function(e){return!Sfly.isShareImage(e)},isShareImage:function(e){var t=L.isObject(e)?Sfly.getPictureId(e):e;return Sfly.isShareImageItem(t)||/^.*\:.*$/.test(t)},isShareImageItem:function(e){var t=L.isObject(e)?Sfly.getPictureId(e):e;return/^(?:.*\/)+\d*$/.test(t)},formatPricing:function(e){var t=e||{};return(t.isOnSale?"<del>$${originalPrice}</del> <b class='color-red'>$${salePrice}</b>":t.originalPrice?"$${originalPrice}":"").substitute(t)},getModule:function(e){var t=mlc.getSection(e);return t&&t.module},getSection:function(e){var t;return Shr.L.isNumber(e)?Shr.P.sections[e]:(t=Shr.Sfly.sections[e])&&t.section},testImage:function(e,t,r,n){var o=t,i=new window.FileReader,s=(o.slice||o.mozSlice||o.webkitSlice||function(){}).call(o,0,r);try{Object.extend(i,{onloadend:function(t){var r=e(t);n(r)}}).readAsArrayBuffer(s)}catch(t){n(!1)}},testJPEG:function(e,t){mlc.testImage(function(e){var t,r=!1;return e.currentTarget.error||3!=e.currentTarget.result.byteLength||255==(t=new window.Uint8Array(e.currentTarget.result))[0]&&216==t[1]&&255==t[2]&&(r=!0),r},e,3,t)},testPNG:function(e,t){mlc.testImage(function(e){var t,r=!1;return e.currentTarget.error||8!=e.currentTarget.result.byteLength||137==(t=new window.Uint8Array(e.currentTarget.result))[0]&&80==t[1]&&78==t[2]&&71==t[3]&&13==t[4]&&10==t[5]&&26==t[6]&&10==t[7]&&(r=!0),r},e,8,t)}},mlc._orderCmdUrl=mlc.getHref("orderpictures/start.sfly",{}),mlc.preCartUrl=mlc.getHref("orderpictures/start.sfly",{cid:A.cids.orderPrints}),mlc.mainCartUrl=mlc.getHref("maincart/start.sfly",{cid:A.cids.orderPrints}),mlc.simplePathMinPictureCount=20,Object.extend(Sfly,mlc),(mlc=Sfly)._init();var SigninPopup=(qqc={link:function(e,t){return"<a href='' onclick='Shr.C.signIn({cid:\""+A.cids[e]+'",context:"'+t+"\"});return false;'>Sign in</a> "+t},dialog:function(e,t,r,n,o,i){var s={cid:A.cids[e],context:t,onload:{module:r,method:n,args:o},onCancel:i};U.sflyMember=U.sflyMember||U.id,(/comments/i.test(r)||"addRemoveLike"==n||"addInlineComment"==n||"addComment"==n)&&(s.showFBSignin=!0),U.sflyMember?Shr.C.signIn(s):Shr.C.signUp(s)},hide:function(){qqc.opening||Dom.hide("popup")},opening:!1,show:function(e,t,r){L.isString(r)&&(r=Dom.get(r));var n=Dom.get("popup"),o=Dom.get("popup-arrow");Dom.get("popup-title").innerHTML=e,Dom.get("popup-content").innerHTML=t,n.style.visibility="hidden",o.style.left="50px",Dom.removeClass(n,"popup-above"),Dom.show(n);var i,s=Dom.getPageBounds(r),a=s.getCenter(),l=Dom.getPageBounds(n),c=Dom.getPageBounds(o),d={x:a.x-(c.x-l.x)-(c.width>>>1),y:s.y+s.height+c.height,width:l.width,height:l.height+c.height},h=qqc.getVisibleBounds();h.inset(5),d.y+d.height>h.y+h.height&&(Dom.addClass(n,"popup-above"),d.y=s.y-d.height),d.x+d.width>h.x+h.width?(i=Math.max(h.x,h.x+h.width-d.width),o.style.left=Math.min(d.width-c.width-4,50+d.x-i)+"px",d.x=i):d.x<h.x&&(i=h.x,o.style.left=Math.max(0,50+d.x-i)+"px",d.x=i),Dom.setLocation(n,d.x,d.y),n.style.visibility="visible";var u=n.getElementsByTagName("A");u[u.length-1].focus(),qqc.opening=!0,window.setTimeout("Shr.SigninPopup.opening=false",0)},render:function(e){e("<div id='popup'>","<div id='popup-2'>","<img id='popup-arrow' src='"+Shr.ImgSrc.blank+"' alt=''/>","<div id='popup-cancel'>(<a href='' onclick='Shr.SigninPopup.hide();return false;'>Cancel</a>)</div>","<div id='popup-title'></div>","<div id='popup-content'></div>","</div>","</div>")},_end:null},qqc),qqc,UrlHashParser=(Uqc=window.location,Vqc=encodeURIComponent,Wqc=decodeURIComponent,Xqc={parse:function(){var e=Uqc.hash.replace(/^#/,"");e||(e=WindowState.get("hash"))&&(Uqc.replace(Uqc.href+"#"+e),WindowState.set("hash",""));var t={};if(e){var r=(e=Wqc(e)).indexOf(":");if(-1!=r){var n=e.substring(r);n=n.replace(/^:/,""),0<r&&(t.cmd=e.substring(0,r)),t.qs=QueryStringParser.parseString(n)}else t.cmd=e}return t},_getHashEncoded:function(){var e=Uqc.hash.substring(1);return B.isGecko?Vqc(e):e},clearQs:function(e,t){var r="";if(t&&e.qs){var n={};Object.extend(n,e),L.forEach(t,function(e){delete n.qs[e]}),L.forEach(n.qs,function(e,t){r+=t+"="+e+"&"})}r=r?":"+r:"",Xqc.clear(Vqc((e.cmd||"")+r))},clearCmd:function(e){var t=e.cmd||"";Xqc.clear(Xqc._getHashEncoded().replace(t,""))},clear:function(e){Uqc.href;var t=new RegExp(Xqc._getHashEncoded()+"$","i");e=e||"";var r=Uqc.hash.replace(t,e);Uqc.replace(r)},encodeCmd:function(e){var t=Vqc(e&&e.cmd||""),r=[];return L.forEach(e.qs||{},function(e,t){r.push(t+"="+e)}),r.length&&(t+=Vqc(":"+r.join("&"))),t?"#"+t:t}},Xqc),Uqc,Vqc,Wqc,Xqc,QueryStringParser=(Arc={parse:function(){var e=document.location.search;return e=(e=e.replace(/\?/,"")).replace(/\+/g," "),Arc.parseString(e)},parseString:function(e){var t={};if(e&&0<e.length)for(var r=e.split("&"),n=0;n<r.length;n++){var o=r[n].split("="),i=decodeURIComponent(o[0]),s=2==o.length?decodeURIComponent(o[1]):i;t[i]=s}return t}},Arc),Arc,SC={calEventTypes:{0:"All events",1:"General",2:"Game",3:"Practice",4:"Party",5:"Meeting",9:"Trip",10:"Volunteer",11:"Performance",6:"Birthday",12:"Holiday",7:"Vacation",8:"Anniversary"},formatTooltip:function(e,t,r){r=r||{};var n=(e=e||{}).start&&_date__WEBPACK_IMPORTED_MODULE_0__.a.fromAbsDateTimeString(e.start)||new _date__WEBPACK_IMPORTED_MODULE_0__.a,o=e.end&&_date__WEBPACK_IMPORTED_MODULE_0__.a.fromAbsDateTimeString(e.end)||new _date__WEBPACK_IMPORTED_MODULE_0__.a,i=e.created&&_date__WEBPACK_IMPORTED_MODULE_0__.a.fromSeconds(e.created)||new _date__WEBPACK_IMPORTED_MODULE_0__.a,s=e.modified&&_date__WEBPACK_IMPORTED_MODULE_0__.a.fromSeconds(e.modified)||new _date__WEBPACK_IMPORTED_MODULE_0__.a,a=n.getDate()==o.getDate(),l=new _date__WEBPACK_IMPORTED_MODULE_0__.a(n).addMinutes(0-(e.arrivalTime||0)),c="<div class='${args.className}'><label>${tooltip.labels.title}</label><div>${event.title}</div><label>${tooltip.labels.start}</label><div>${data.startDate}</div><label></label><div>${data.startTime}</div>"+(!e.isAllDay&&e.arrivalTime?"<label></label><div>${tooltip.labels.arrive}&nbsp;${data.arrivalTime}</div>":"")+(a&&e.isAllDay?"":"<label>${tooltip.labels.end}</label>")+(a?"":"<div>${data.endDate}</div>")+(a&&e.isAllDay?"":"<label></label>")+(e.isAllDay?"":"<div>${data.endTime}</div>")+(e.location||e.address?"<label>${tooltip.labels.location}</label><div>${data.location}</div>":"")+"<label>${tooltip.labels.created}</label><div>${data.created}</div>"+(e.modified&&e.created&&6e4<=s.getTime()-i.getTime()?"<label>${tooltip.labels.modified}</label><div>${data.modified}</div>":"")+"</div>";return(t={event:e,data:{},tooltip:t,args:r}).data.startDate=n.toDateTimeString("uDMd"),t.data.startTime=e.isAllDay?"${tooltip.allDay}".localize(t):n.toDateTimeString("ut"),t.data.arrivalTime=l.toDateTimeString("ut"),t.data.endDate=o.toDateTimeString("uDMd"),t.data.endTime=e.isAllDay?"&nbsp;":o.toDateTimeString("ut"),t.data.created=i.toDateTimeString("uFM"),t.data.modified=s.toDateTimeString("uFM"),t.data.location=e.location||e.address||"&nbsp;",c.substitute(t)}},initPage=function(){function e(e){return{edit:0<(e&Permissions.editPage),admin:0<(e&Permissions.admin),addContent:0<(e&Permissions.addContent)}}P.id=P.pageId||"";var t=e(P.up);Object.extend(P,{url:WebPath.fromPathKey(P.id),nodes:[],pending:{},items:{},layout:P.layout||"nw",startTime:AR.t,up:P.up||0,isHome:P.id.indexOf("/")<0,permissions:t,visitorPermissions:e(P.vp),canAddContent:t.addContent,canEdit:t.edit,canCustomize:t.edit})};initPage();var initS=function(){var e,t,r;S.id=S.siteName,Object.extend(S,{dn:S.displayName||S.id,home:WebPath.fromPathKey(S.id),email:S.id+"@"+A.mailDomain,category:(r=(S.template||"").split("_"),1<r.length&&(S.templateName=r[0]+"_"+r[1],e=r[1]),(t={sports:function(){return S.ageGroup&&3!=S.ageGroup&&(S.youthSports=!0),1},classroom:function(){return S.ageGroup<=108&&(S.youthClassroom=!0),1}}[e])&&t()?S[e]=!0:t||(S[e]=!0),S.pid==A.pids.our3&&(S.our3="WEB"==S.psid),e)})};initS();var initU=function(){U.id=U.userId;var e=P.permissions;Object.extend(U,{un:U.userName,uid:U.id||U.fbid,dn:U.displayName,owner:P.role==PermissionRoles.owner,member:P.role!=PermissionRoles.visitors,p:e,vp:P.visitorPermissions,edit:e.edit||U.owner,admin:e.admin}),U.Status||(U.Status={unknown:0,pending:-2,signedIn:1,signedOut:-1,error:-99})};initU(),"dev"!=AS.getEnv()?window.onerror=Trace._onError:Console.write("DEV mode will not use window.onerror"),Trace.onWrite.add(Console.onWrite),Object.extend(Shr,{SC:SC,N:N,A:A,QueryStringParser:QueryStringParser,UrlHashParser:UrlHashParser,SigninPopup:SigninPopup,Sfly:Sfly,Mouse:Mouse,Console:Console,Cookie:Cookie,Uri:Uri,Dialog:Dialog,Atts:Atts,DocumentEx:DocumentEx,WindowEx:WindowEx,Debug:Debug,Trace:Trace,TraceLevel:TraceLevel,LogEntry:LogEntry,ScriptManager:ScriptManager,StyleManager:StyleManager,FURL:FURL,RURL:RURL,URL:URL,DURL:DURL,IURL:IURL,CURL:CURL,UrlVersion:UrlVersion,WindowState:WindowState,AsyncData:AsyncData,AsyncLoader:AsyncLoader,Permissions:Permissions,PermissionRoles:PermissionRoles,WebPath:WebPath})}(),Shr.History=function(){var e=Shr.B.isIE7||Shr.B.isIE8,t={},r=!0,n=!1,o=function(e,t){};function i(){n&&Shr.L.isDefined(Shr.RSH.iframeLoaded)&&(Shr.RSH.iframeLoaded(),Shr.TimerPool.ms40.remove(i))}return t.iframeLoaded=function(){n=!0,i()},t.ensureInitialized=function(t,n,s){if(r){if(r=!1,e){var a=Shr.Static2Src.rshHistoryFrame;t("<ifr","ame src='",a,a.match(/\?/)?"&":"?","hash=",document.location.hash,"&domain=shutterfly.com' id='shr-history-frame'"," style='display: none;'"," onload='window.Shr.History.iframeLoaded()'>","</iframe>"),Shr.TimerPool.ms40.add(i)}Shr.ScriptManager.loadOptional("Shr.RSH",function(){!function(t){var r=Shr.RSH;r.debug&&!Shr.B.isSafari&&(r.log=function(e){Console.write(e)}),e&&(r.iframeId="shr-history-frame",r.iframeSrc=Shr.Static2Src.rshHistoryFrame,r.iframeDomain="shutterfly.com");var n=t||o;r.onHashValueChange=n}(n),s&&s()})}},t.add=function(e){e?window.Shr.RSH&&window.Shr.RSH.add&&window.Shr.RSH.add(e):Shr.UrlHashParser.clearCmd(Shr.UrlHashParser.parse())},t}(),Esc=Shr.U,Fsc=Shr.P,Gsc=Shr.A,Hsc=Shr.AR,Isc=Shr.L,Jsc=Shr.ScriptManager,Ksc=encodeURIComponent,Lsc=function(e){return e||(e={}),e.page||(e.page=Fsc?Fsc.id:null),e.version||(e.version=Fsc?Fsc.version:0),e.format||(e.format="js"),Esc.donotOwnSession&&(e.donotOwnSession=Esc.donotOwnSession),e.t=Hsc.t,e.h=Hsc.h,e},Msc=[],Nsc={alert:function(e,t,r,n){Shr.B.isTouch&&arguments.length<=2?(t=t?t+"\n\n":"",window.alert(t+e)):(e&&(e=e.replace(/\r\n/g,"<br/>").replace(/\n/g,"<br/>").replace(/\r/g,"<br/>")),Nsc.message(Object.extend({title:t||"Shutterfly",body:e,buttonsStyle:{"text-align":"center","border-top":"none"},buttons:[{title:"OK",result:1}],closeCallback:r?function(){Dom.tryFocus(r,!0)}:null},n)))},message:function(e){Shr.Dialog.show("Message",e)},requireSignIn:function(){return!!Esc.un||(Nsc.alert("You must be Signed In to use this command."),!1)},beginExec:function(e,t,r,n,o){this._beginExec(e,t,r,n,o,Gsc.createCmdXhr)},beginExec2:function(e,t,r,n,o){this._beginExec(e,t,r,n,o,Gsc.createCmd2Xhr)},_beginExec:function(e,t,r,n,o,i){var s=i(e);if(!s){var a=Msc;return a.length||Shr.WindowEx.updateFrameLoad.add(Nsc._onUpdateFrameLoad),void Shr.Array.add(a,arguments)}var l=r||!o?Nsc._execDone:null;s.beginSend(Lsc(t),l,{callback:r,state:n,noUI:o})},sflyExec:function(e,t,r){var n=[];Isc.forEach(t,function(e,t){n.push(t+"="+Ksc(e))});var o=Gsc.www+e+"?"+n.join("&");o+=(n.length?"&":"")+"function=",Jsc.getJsonP(o,{cb:r,noPageCache:!1,noBrowserCache:!1})},_onUpdateFrameLoad:function(){var e=Msc;if(e.length){for(var t=0;t<e.length;t++)Nsc._beginExec.apply(Nsc,e[t]);Shr.Array.clear(e)}},_execDone:function(e){var t=e.getCommandResponse(),r=e.asyncState;if(r){if(!r.noUI&&t){t.error&&Nsc.alert(t.error.message);var n=t.result;n&&n.message&&Nsc.alert(n.message)}r.callback&&r.callback(t,r.state)}},exec:function(e,t,r){var n=Shr.A.createCmdXhr(e);return this._exec(n,t,r)},exec2:function(e,t,r){var n=Shr.A.createCmd2Xhr(e);return this._exec(n,t,r)},getSiteCommand:function(e,t){return"ofly/getusersites"==e||(-1!=e.indexOf("?site=")?e.endsWith("&")||(e+="&"):e="${0}?site=${1}&".substitute([e,t||Shr.S.id||"site"])),e},_exec:function(e,t,r){e.send(Lsc(t));var n=e.getCommandResponse();return!r&&n&&n.error&&Nsc.alert(n.error.message),n},errorCodes:{notAuthorized:100,notAuthorizedUser:102,notSignedIn:104}},Object.extend(Shr.C,Nsc),function(){var L=Shr.L,S=Shr.S,AS=Shr.AS,xhr=window.XMLHttpRequest;void 0===xhr&&(xhr=function(){try{return new window.ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new window.ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new window.ActiveXObject("Msxml2.XMLHTTP")}catch(e){}return null});var t=window.Shr.SflyAjax={sendRequest:function sendRequest(request,callback){var req,url=request.url,fid=request.fid,service=request.service||"self",method=request.method,params=request.args,args;xhr&&(req=new xhr,L.isFunction(callback)&&(req.onreadystatechange=function(){var response,style;if(4==req.readyState){try{eval("response="+req.responseText.replace(/^\/\*/,"").replace(/\*\/$/,""))}catch(e){response=req.responseText}try{callback(Shr.Array.getLength(response&&response.response)&&response.response[0]||{error:"invalid ajax request response: "+(response&&response.toString())})}catch(e){}}}),req.open("POST",url),req.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),args={fid:fid,bundleId:Math.floor(100001*Math.random()),"serviceRequests[0].methodName":method,"serviceRequests[0].serviceName":service,"serviceRequests[0].methodParams":Object.toJavaScript(params||{})},req.send(this._toContent(args)))},sendAjaxRequest:function(e,t){var r,n,o,i=e.url,s=e.args,a=e.method||"POST",l=this._isFormData(s),c=this.canUseXHR(i,"withCredentials"in e),d=function(e,t){var r=[];return Shr.L.forEach(t,function(e,t){void 0!==e&&r.push(t+"="+encodeURIComponent(e))}),r.length&&(e+=-1==e.indexOf("?")?"?":"&",e+=r.join("&")),e},h="_onPostComplete";return"urlArgs"in e&&(i=d(i,e.urlArgs)),c&&!e.useApiServerProxy?xhr&&(r=new xhr,"withCredentials"in e&&(r.withCredentials=e.withCredentials),L.isFunction(t)&&(r.onreadystatechange=function(){if(4==r.readyState)try{t(r)}catch(e){}}),l&&L.isFunction(e.onprogress)&&r.upload.addEventListener("progress",e.onprogress,!1),r.open(a,i),"accept"in e&&r.setRequestHeader("Accept",e.accept),e.timeout&&(r.timeout=e.timeout),e.ontimeout&&(r.ontimeout=e.ontimeout),Shr.L.forEach(e.headers,function(e,t){r.setRequestHeader(t,e)}),"POST"==a?(l?(r.setRequestHeader("Pragma","no-cache"),r.setRequestHeader("Cache-Control","no-cache")):r.setRequestHeader("Content-Type",e.contentType||"application/x-www-form-urlencoded"),r.send(this._postData(s,l))):r.send()):(n=["https:/",Shr.AS.www,"apiServerProxy","api.sfly"].join("/"),(o={api:i.split("/").slice(3).join("/"),bypassCache:_date__WEBPACK_IMPORTED_MODULE_0__.a.now(),server:e.server||"",fn:"parent.rpc."+h}).server||delete o.server,"POST"!=a?(o.fn="",Shr.ScriptManager.getJsonP(d(n,o),{cb:function(e,t){Shr.L.tryToCall(e,t)}.bind(this,t)})):Shr.ScriptManager.loadOptional("easyXDM",function(e,t,r,n,o){var i=Shr.Dom.getUniqueId();new o.Rpc({remote:d(r,{name:i,random:_date__WEBPACK_IMPORTED_MODULE_0__.a.now(),fn:h}),onReady:function(){var t=Shr.Dom.create("form",document.body,{action:d(r,Object.extend({},n,{contentType:e.contentType||"application/x-www-form-urlencoded",accept:e.accept})),method:a,target:i});Shr.Dom.create("input",t,{name:"body",type:"hidden"}).value=this._postData(s,l);try{t.submit()}catch(t){}}.bind(this)},{local:{_onPostComplete:function(e,t){Shr.L.tryToCall(e,t)}.bind(this,t)}})}.bind(this,e,t,n,o))),r},L10N:{_end:null},_postData:function(e,t){return t?e:"object"==_typeof(e)?this._toContent(e):e},_toContent:function(e){var t=[];return L.forEach(e,function(e,r){t.push(r+"="+encodeURIComponent(e))}),t.join("&")},_isFormData:function(e){return window.FormData&&e instanceof window.FormData||window.Blob&&e instanceof window.Blob},canUseXHR:function(e,t){var r=e.split("/"),n=r[0],o=r[2],i=!xhr||Shr.B.isIE&&Shr.B.ieVersion<10&&(n!=window.location.protocol||o!=window.location.host);if(!i&&t){if(!("withCredentials"in Shr.B)){Shr.B.withCredentials=!1;try{Shr.B.withCredentials=(new xhr).withCredentials=!0}catch(e){}}i=!Shr.B.withCredentials}return!i},_easyXDM:function(e,t){},_onPost:function(e){},_end:null}}(),Shr.FB=Shr.FB||{},Shr.FBC=function(){Shr.N,Shr.S,Shr.P;var e=Shr.U,t=(Shr.A,Shr.WindowEx,{_initialized:!1,apiKey:"02affaab89b8556df10e24e13b198434",appId:"178406241888",access_token:"",onSignIn:new Shr.EventHandler,onSignOut:new Shr.EventHandler,refreshElement:function(e){Shr.FB.XFBML&&Shr.FB.XFBML.parse(e||document.body)},load:function(e,r){Dom.onDomReady.add(function(){t._init(e,r)})},_init:function(r,n){if((n=Object.merge({init:{version:"v2.9"}},n)).onSignIn&&Shr.FBC.onSignIn.add(n.onSignIn),n.onSignOut&&Shr.FBC.onSignOut.add(n.onSignOut),e.fbDisabled||t._initialized)t._initialized&&Shr.L.isFunction(r)&&r();else{t._initialized=!0;var o=Shr.A.facebook;Shr.ScriptManager.getJsonP(o,{type:"script",cb:function(){window.FB.init&&(Shr.FB=window.FB,t._monitorEvents(),Shr.FB.init(Object.extend({appId:t.appId,status:!1,cookie:!0,xfbml:!0,oauth:!0},n.init)),Shr.L.isFunction(r)&&r())}})}},getUserId:function(r){Shr.L.isEmptyObject(Shr.FB)?window.setTimeout(t.getUserId.bind(this,r),100):Shr.FB.getLoginStatus(function(n){t._parseStatusResponse(n),r&&r(e.fbid,n)},!0)},_parseStatusResponse:function(r){var n=r&&r.status,o="";return e.fbid=void 0,e.uid=e.id||e.fbid,"connected"===n&&(o="fb:"+r.authResponse.userID,t.access_token=r.authResponse.accessToken,e.fbid=o,e.uid=e.id||e.fbid),n},_monitorEvents:function(){Shr.FB.Event.subscribe("auth.statusChange",function(e){"connected"===t._parseStatusResponse(e)?t.onSignIn.raise():t.onSignOut.raise()})},_serializeTag:function(e,t){var r=new Shr.StringBuilder,n=r.write;for(var o in n("<fb:",e," "),t)n(o,"='",t[o],"' ");return n("></fb:",e,">"),r.toString()},getUserInfo:function(t){e.fbid?Shr.FB.api(e.fbid.substring(3),function(e){t(e)}):t()},name:function(e,r){var n={linked:!0,useyou:!1,uid:e,ifcantsee:""};return Object.extend(n,r),t._serializeTag("name",n)},profilePic:function(e,r){var n={linked:!0,size:"thumb",uid:e,"facebook-logo":!0};return r&&Object.extend(n,r),t._serializeTag("profile-pic",n)}});return t}(),dwc=Shr.Score&&Shr.Score.getUserInfo,Shr.Score&&(Shr.Score.getUserInfo=function(e){"function"!=typeof window.evalUseNewAuth&&(Shr.U.useNewAuth=!1),"useNewAuth"in Shr.U?Shr.U.useNewAuth?(Shr.Score.setUserInfo=function(e,t){var r;try{window.$sflyAuth.getIdToken().then(function(e){e||window.trUPP.Timing.recordSessionEvents({event:"getIdToken",err:"no valid token",session_method:"getUserInfo"}),Shr.U.status=Shr.U.Status.signedIn,r=e,Shr.U.id=Shr.U.uid=Shr.U.userId=Shr.U.userName=r.payload.sfly_uid,Shr.U.email=Shr.U.sflyEmail=r.payload.email,Shr.U.firstName=r.payload.given_name,Shr.U.lastName=r.payload.family_name,Shr.U.dn=Shr.U.userDisplayName=Shr.U.displayName=Shr.U.firstName+" "+Shr.U.lastName,Shr.U.oauthToken=r.jwtToken,Shr.U.oauthV2AccessToken=Shr.U.oauthToken,Shr.U.oflyToken=Shr.U.oauthToken,Shr.U.sflyMember=!0,Shr.U.migrated=!0,t&&t()}).catch(function(e){window.trUPP.Timing.recordSessionEvents({event:"getIdToken",err:e,session_method:"getUserInfo"})})}catch(e){}},window.$sflyAuth&&window.$sflyAuth.currentUser&&Shr.Score.setUserInfo(window.$sflyAuth.currentUser),e()):dwc(e):window.evalUseNewAuth().then(function(t){Shr.U.useNewAuth=t,Shr.Score.getUserInfo(e)}).catch(function(e){window.trUPP.Timing.recordSessionEvents({event:"evalUseNewAuth",err:e,session_method:"getUserInfo"})})});var Console=Shr.Console,Trace=Shr.Trace;window.Console=Console},function(e,t){var r,n,o;o=Shr.A,Shr.Style=r={collapseDuration:.6,changedHighlightDuration:5,changedBackColor:"#ffffd1",changedUpBackColor:"#9acd32",changedDownBackColor:"#fa8072",onRender:function(){r.bullet2=r.img("ti-bullet2")},formatCollapseSrc:function(e){return e?o.imageUrl("collapsearrowdown.gif"):o.imageUrl("collapsearrowup.gif")},formatCollapseText:function(e,t){var r;return r=e?"Expand":"Collapse",t&&(r+=" "+t),r},pipe:"<span class='shrPipe'>|</span>",clear:"<div class='shrClear'></div>",cmdSpacer:"<span class='cmd-spacer'>&nbsp;</span>",menu:function(e,t,n,o){return"<span class='cmd-b'><span class='cmd-b2 noselect' dragType=none"+Shr.Menu.menuAtts(e,o)+">"+(n?r.img(n)+" ":"")+t+" "+r.img("ti-menu")+"</span></span>"},cmd2:function(e,t,n,o){return t?"<a href='' class='font-sys "+n+"' onclick='"+e+";return false;'"+o+">"+t+"</a>":r.cmd(e,t,n)},cmd:function(e,t,n,o){var i="";return o&&(i="tabindex='"+o+"' "),t?(n?r.img(n)+" ":"")+"<a href='' class='font-sys'"+i+" onclick='"+e+";return false;'>"+t+"</a>":"<a href='' "+i+"onclick='"+e+";return false;'>"+r.img(n)+"</a>"},link:function(e,t,n,o){return(n?r.img(n)+" ":"")+"<a id='"+o+"' href='"+e+"' class='font-sys'>"+t+"</a>"},img:function(e,t,r,n){return(r||n)&&((t=t||{})[Shr.Atts.positionX]=r,t.style=t.style||{},t.style["background-position"]=(r||"0")+" "+(n||"0")),"<img src='"+Shr.ImgSrc.blank+"' class='"+e+" noselect' unselectable='on' dragType='none'"+(t?Shr.Html.formatAttributes(t):"")+" />"},formatOpacity:function(e){var t="opacity: "+e+";";return Shr.B.isIE&&!Shr.B.isIE9&&(t+=' -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=${0})"; filter: alpha(opacity=${0});'.substitute([parseInt(100*e)])),t},formatLinearGradient:function(e,t,r){var n,o=Shr.B.isIE&&!Shr.B.isIE10,i=!1,s=function(e){var t;switch(e){case"#":t=e;break;default:t=e+e}return t},a="",l=1,c=[],d={stdAngle:"",angle:"",colorStops:"",ie:{start:"",stop:"",gradientType:"0"}};return/^to /.test(e)?(d.stdAngle=e+",",d.angle=[],(e=e.split(" ")).shift(),Shr.L.forEach(e,function(e){switch(e){case"top":d.angle.push("bottom");break;case"bottom":d.angle.push("top");break;case"left":d.angle.push("right");break;case"right":d.angle.push("left")}}),d.angle=d.angle.join(" ")+",",o&&(/left|right/.test(e.join(" "))&&(d.ie.gradientType="1"),/left|top/.test(e.join(" "))&&(i=!0))):/deg$/.test(e)?(d.stdAngle=e+",",d.angle="-"+Shr.Style.subtract(e,"90deg")+",",d.angle=d.angle.replace(/^--/,""),d.angle=d.angle.replace(/^-0deg/,"0deg"),o&&(90!=(n=Math.abs(parseInt(e)))&&270!=n||(d.ie.gradientType="1"),/270|-90|0|360|-360/.test(parseInt(e))&&(i=!0))):(l=0,d.stdAngle="",d.angle="top,"),Shr.L.forEach(arguments,function(e,t){l<=t&&(c.push(e),o&&t==l?d.ie.start=e:o&&t==l+1&&(d.ie.stop=e))}),d.colorStops=c.join(","),Shr.B.isIE?(a="filter: progid:DXImageTransform.Microsoft.gradient(GradientType=${ie.gradientType}, startColorstr='${ie.start}', endColorstr='${ie.stop}'); ",Shr.B.isIE8||Shr.B.isIE9?a="-ms-filter: \"progid:DXImageTransform.Microsoft.gradient(GradientType=${ie.gradientType}, startColorstr='${ie.start}', endColorstr='${ie.stop}')\"; ":Shr.B.isIE10&&(a="background-image:     -ms-linear-gradient(${angle} ${colorStops}); "),i&&(i=d.ie.start,d.ie.start=d.ie.stop,d.ie.stop=i),/^#[0-9a-fA-F]{3}$/.test(d.ie.start)&&(d.ie.start=d.ie.start.replace(/[#0-9a-fA-F]/g,s)),/^#[0-9a-fA-F]{3}$/.test(d.ie.stop)&&(d.ie.stop=d.ie.stop.replace(/[#0-9a-fA-F]/g,s))):Shr.B.isSafari?a="background-image: -webkit-linear-gradient(${angle} ${colorStops}); ":Shr.B.isGecko?a="background-image:    -moz-linear-gradient(${angle} ${colorStops}); ":Shr.B.isOpera&&(a="background-image:      -o-linear-gradient(${angle} ${colorStops}); "),(a+"background-image:         linear-gradient(${stdAngle} ${colorStops})").substitute(d)},_browserPrefix:function(){return"-"+(Shr.B.isSafari?"webkit":Shr.B.isGecko?"moz":Shr.B.isIE?"ms":"o")+"-"},formatKeyframes:function(e,t){var n,o="@${0}keyframes ${1} {\n${2}\n}",i=r._browserPrefix(),s=[];return Shr.L.isArray(t)?(n=100/(t.length-1),Shr.L.forEach(t,function(e,r){s.push((r==t.length-1?"100":r*n)+"% {"+e+"}")})):Shr.L.forEach(t,function(e,t){/^[0-9]*\.?[0-9]*$/.test(t.toString())&&(t+="%"),s.push(t+" {"+e+"}")}),s=s.join("\n"),o.substitute([i,e,s])+"\n"+o.substitute(["",e,s])},formatAnimation:function(e,t){var n="${0}animation: ${1} ${2}";return n.substitute([r._browserPrefix(),e,t])+";\n"+n.substitute(["",e,t])},formatBackground:function(e){var t=Object.extend({},e),r=1.5<window.devicePixelRatio,n=(t.file||t.url).replace(/^url\((.*)\)$/,function(e,t){return t}).split("."),o="."+n.pop(),i=n.join(".");return t.x=t.x&&r&&t.retX||t.x,t.y=t.y&&r&&t.retY||t.y,t.url=r&&("file2x"in e||"url2x"in e)?e.file2x||e.url2x:i+(r?"@"+window.devicePixelRatio+"x":"")+o,-1==t.url.indexOf("//")&&(t.url=Shr.A.imageUrl(t.url)),t.width=r?"background-size: "+t.width+" auto;":"",t.position=void 0!==t.x||void 0!==t.y?"background-position: ${0} ${1};".substitute([t.x||"auto",t.y||"auto"]):"",t.repeat="repeat"in e?e.repeat.replace(/([^;])$/,function(e,t){return t+";"}):"background-repeat: no-repeat;","background-image: url(${url}); ${position} ${width} ${repeat}".substitute(t)},formatTransform:function(e){var t="${0}transform: ${1}",n=[];return Shr.L.forEach(e,function(e,t){n.push(t+"("+e+")")}),n=n.join(" "),t.substitute([r._browserPrefix(),n])+";\n"+t.substitute(["",n])},formatBoxSizing:function(e,t){var n="${0}box-sizing: ${1} ${2}";return t=t?"!important":"",n.substitute([r._browserPrefix(),e,t])+";\n"+n.substitute(["",e,t])},lighter:function(e,t){return Shr.Theme._lighter(Shr.Theme._toColor(e),t)},darker:function(e,t){return Shr.Theme._darker(Shr.Theme._toColor(e),t)},rgbToHsl:function(e,t,n){if(1==arguments.length)return arguments.callee.apply(r,Shr.Theme._toColor(e));e/=255,t/=255,n/=255;var o,i,s=Math.max(e,t,n),a=Math.min(e,t,n),l=(s+a)/2;if(s==a)o=i=0;else{var c=s-a;switch(i=.5<l?c/(2-s-a):c/(s+a),s){case e:o=(t-n)/c+(t<n?6:0);break;case t:o=(n-e)/c+2;break;case n:o=(e-t)/c+4}o/=6}return[o,i,l]},hslToRgb:function(e,t,r){var n,o,i;if(0==t)n=o=i=r;else{var s=function(e,t,r){return r<0&&(r+=1),1<r&&(r-=1),r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e},a=r<.5?r*(1+t):r+t-r*t,l=2*r-a;n=s(l,a,e+1/3),o=s(l,a,e),i=s(l,a,e-1/3)}return[255*n,255*o,255*i]},rgbToHsv:function(e,t,n){if(1==arguments.length)return arguments.callee.apply(r,Shr.Theme._toColor(e));e/=255,t/=255,n/=255;var o,i,s=Math.max(e,t,n),a=Math.min(e,t,n),l=s,c=s-a;if(i=0==s?0:c/s,s==a)o=0;else{switch(s){case e:o=(t-n)/c+(t<n?6:0);break;case t:o=(n-e)/c+2;break;case n:o=(e-t)/c+4}o/=6}return[o,i,l]},hsvToRgb:function(e,t,r){var n,o,i,s=Math.floor(6*e),a=6*e-s,l=r*(1-t),c=r*(1-a*t),d=r*(1-(1-a)*t);switch(s%6){case 0:n=r,o=d,i=l;break;case 1:n=c,o=r,i=l;break;case 2:n=l,o=r,i=d;break;case 3:n=l,o=c,i=r;break;case 4:n=d,o=l,i=r;break;case 5:n=r,o=l,i=c}return[255*n,255*o,255*i]},toWebColor:function(e){return Shr.Theme._toHex(Shr.Theme._toColor(e))},toRGBArray:function(e){return Shr.Theme._toColor(e)},add:function(){var e;return 0==arguments.length?e="0":(e=[].shift.call(arguments),Shr.L.forEach(arguments,function(t){var r=parseFloat(e),n=parseFloat(t),o=(e||"").toString().replace(r,""),i=(t||"").toString().replace(n,"");if(e=r+n+o,o!=i)return!1})),e},subtract:function(){var e;return 0==arguments.length?e="0":(e=[].shift.call(arguments),Shr.L.forEach(arguments,function(t){var r=parseFloat(e),n=parseFloat(t),o=(e||"").toString().replace(r,""),i=(t||"").toString().replace(n,"");if(e=r-n+o,o!=i)return!1})),e},multiply:function(e,t){var r=parseFloat(e),n=parseFloat(t),o=(e||"").toString().replace(r,""),i=(t||"").toString().replace(n,"");return r*n+(o||i)},parameters:{minTouchSize:"44px",mobileBarButtonHeight:"30px",colors:{sfly:"#f05323",oldSfly:"#f90",link:"#66c",bar:{gradientLight:"#fff",gradientDark:"#e9e4d8"},button:{gradientLight:"#e6e2d9",gradientDark:"#d7d3c8",selected:{gradientLight:"#edeae2",gradientDark:"#aca9a4"}}},fontSize:{},fonts:{avenir35Light:"'Avenir LT W01 35 Light', Verdana, Arial, sans-serif",avenir55Roman:"'Avenir LT W01 55 Roman', Verdana, Arial, sans-serif",avenir95Black:"'Avenir LT W01 95 Black', Verdana, Arial, sans-serif",avenir85Heavy:"'Avenir LT W01 85 Heavy', Verdana, Arial, sans-serif",avenir65Medium:"'Avenir LT W01 65 Medium', Verdana, Arial, sans-serif"}}},Shr.FontSize={xl:"font-size:150%;",l:"font-size:110%;",s:"font-size:90%;",xs:"font-size:77%;"},Shr.HtmlImg={onRender:function(){var e="<img src='";this.checkmark=e+Shr.ImgSrc.checkmark+"' style='width: 14px; height: 13px;' />",this.progress=e+Shr.ImgSrc.progress+"' align=absMiddle />"}},Shr.Theme=n={mgmtThemes:{},_themes:[],base:o.themesBase,defaultBorder:"c0-0",id:"Base",add:function(e){var t=n._themes;t[t.length]=e,n._merge(e,"images",e.id+"/"),e.init&&e.init(),n.colorCount||n.setColors("546fb5"),n.id=e.id},_merge:function(e,t,r){var o,i=e[t];if(i){r=r||"";var s=n[t];for(o in i)s[o]=r+i[o]}},render:function(e,t){for(var r,o=n._themes,i=0,s=o.length;i<s;i++)(r=o[i])[t]&&r[t](e)},url:function(e){return("url("+n.base+e+") ").toLowerCase()},setMgmtTheme:function(e){var t=n.mgmtThemes;t&&t[e]&&(n.mgmtTheme=t[e])},setColors:function(){for(var e=n.colorCount=arguments.length,t=0;t<e;t++){var r="c"+t;n[r]||(n[r]={});var o=n[r],i=n._fromHex(arguments[t]);o.base=arguments[t],o.isDark=!1,o.darker=n._toHex(i),0==t&&(n.c.link=n._darker(i,.15)),o.darkest=n._darker(i,.5),o.dark=n._lighter(i,.5),o.normal=n._lighter(i,.75),o.light=n._lighter(i,.81),o.lighter=n._lighter(i,.86),o.lightest=n._lighter(i,.92),o.palette=n._palette(o.lighter)}},setColorsDark:function(){for(var e=n.colorCount=arguments.length,t=0;t<e;t++){var r="c"+t;n[r]||(n[r]={});var o=n[r],i=n._fromHex(arguments[t]);o.base=arguments[t],o.isDark=!0,0==t&&(n.c.link=n._lighter(i,.15)),o.darkest=n._lighter(i,.7),o.darker=n._lighter(i,.6),o.dark=n._lighter(i,.5),o.normal=n._darker(i,.2),o.light=n._darker(i,.6),o.lighter=n._darker(i,.75),o.lightest=n._darker(i,.9),o.palette=n._palette(o.lighter)}},setPalette:function(){for(var e=n.colorCount=arguments.length,t=0;t<e;t++){var r="c"+t;n[r]||(n[r]={}),n[r].palette=n._palette(arguments[t])}},_palette:function(e,t){var r,o=[],i=Shr.Style.rgbToHsl(e),s=i[0],a=i[1],l=0,c=Shr.L.isNullOrUndefined(n.paletteDark)?0:n.paletteDark;for(void 0===t&&(t=16),r=((Shr.L.isNullOrUndefined(n.paletteLight)?1:n.paletteLight)-c)/t;l<=t;)l++,i=Shr.Style.hslToRgb(s,a,t<l?1:c),o.push(Shr.Style.toWebColor([Math.round(i[0]),Math.round(i[1]),Math.round(i[2])])),c+=r;return o.base=e,o},_lighter:function(e,t){for(var r=[],o=0;o<3;o++)r[o]=Math.round(e[o]*(1-t)+255*t);return n._toHex(r)},_darker:function(e,t){for(var r=[],o=0;o<3;o++)r[o]=Math.round(e[o]*(1-t));return n._toHex(r)},_fromHex:function(e){return[parseInt(e.substring(0,2),16),parseInt(e.substring(2,4),16),parseInt(e.substring(4,6),16)]},_toHex:function(e){var t=n._numberToHex;return"#"+t(e[0])+t(e[1])+t(e[2])},_numberToHex:function(e){var t=e.toString(16);return 1==t.length?"0"+t:2<t.length?"ff":t},_toColor:function(e){return Shr.L.isArray(e)?e:(e=e.replace(/^\#/,""),n._fromHex(e))},borders:[],images:{},c:{darkest:"#000",darker:"#111",dark:"#222",normal:"#333",light:"#666",lighter:"#999",lightest:"#b2b2b2",link:"#000080",time:"#a81817"},c0:{}}},function(e,t){var r,n,o,i,s,a,l,c,d,h,u,p,m,g,f,_;Shr.HtmlFactory={img:function(e,t){return"<img"+Shr.Html.formatAttributes(e)+Shr.Html.formatStyle(t)+" />"},optionalA:function(e,t,r){return t||(t=r||e||""),e?"<a"+Shr.Html.attribute("href",e)+">"+t+"</a>":t}},Shr.Att={target:" target='_blank'",optional:function(e,t,r){return t?Shr.Html.attribute(e,t,r):""},value:function(e){return Shr.Html.attribute("value",e)},src:function(e){return e?Shr.Html.attribute("src",e):null}},Shr.Html=(r=Shr.A,n=Shr.L,o={about:function(e){return e?Shr.StringEx.joinOptional(" ",e.tagName,e.id):null},removeCdnNum:function(e){var t=e.split(".");return t[0]=t[0].replace(/cdn\d+/,"cdn"),t.join(".")},removeProtocol:function(e){if(n.isNullOrUndefined(e))return e;if(""==e)return e;var t=e.indexOf("://");return t<0?e:e.substr(t+1)},http:function(e){return"http:"+o.removeProtocol(e)},https:function(e){return"https:"+o.removeProtocol(e)},optionalA:function(e,t){return""==e&&(e=r.mySites),e==location.href?t:"<a"+o.attribute("href",e)+">"+t+"</a>"},formatQuery:function(e){var t,r,n,o="";if(e)for(t in e)n=(r=e[t])?encodeURIComponent(r):0==r?r:"",o?o+="&"+t+"="+n:o="?"+t+"="+n;return o},optionalAttribute:function(e,t,r){return t?o.attribute(e,t,r):""},jsonAttribute:function(e,t){return t=t.replace(/\&/g,"&amp;").replace(/'/g,"&#39;").replace(/"/g,"&quot;"),Shr.Html.attribute(e,t,!0)},attribute:function(e,t,r){return r||(t&&n.isString(t)?t=o.escapeAttributeValue(t):null==t&&(t=""))," "+e+"='"+t+"'"},renderTag:function(e,t,r,n){e(o.formatTag(t,r,n))},formatTag:function(e,t,r){return"<${0} ${1}>${2}</${0}>".substitute([e,o.formatAttributes(t),r])},_defaultTextClassName:"default-text",_defaultTextFocus:function(e){e&&Dom.hasClass(e,o._defaultTextClassName)&&(Dom.removeClass(e,o._defaultTextClassName),e.value="")},_defaultTextBlur:function(e){e&&""==e.value&&(e.value=e.getAttribute("defaulttext"),Dom.addClass(e,o._defaultTextClassName))},hasDefaultValue:function(e){return e&&Dom.hasClass(e,o._defaultTextClassName)},_addDefaultTextBehavior:function(e){"defaulttext"in(e=e||{})&&(e.autocomplete="off",e.onfocus=e.onfocus||"",e.onblur=e.onblur||"",e.onfocus+="Shr.Html._defaultTextFocus(this);"+e.onfocus,e.onblur="Shr.Html._defaultTextBlur(this);"+e.onblur,e.className=e.className||" ","class"in e&&(e.className+=e.class,delete e.class),e.value||(e.value=e.defaulttext,e.className+=" "+o._defaultTextClassName+" "))},renderTag2:function(e,t,r){e("<",t),o.renderAttributes(e,r),e(" />")},formatInput:function(e,t){var r=e.type?e.type:"input",n="textarea"==r,i=o.renderTag,s=new Shr.StringBuilder;return/^(password|email|checkbox|color|date|datetime|datetime-local|file|hidden|image|month|number|radio|range|reset|search|submit|tel|text|time|url|week)$/i.test(r)?r="input":(o._addDefaultTextBehavior(e),n&&e.value&&(t=e.value,delete e.value)),e.className=e.className||" ",e.type&&(e.className+=" input-"+e.type),n||(i=o.renderTag2),i(s.write,r,e,t),s.toString()},formatSelect:function(e,t,r,n){var i=new Shr.StringBuilder;for(var s in i.write("<select",o.attribute("name",e),o.formatAttributes(n),">"),r){var a=r[s],l=s==t||"blank"==s&&(null==t||""===t);"blank"==s&&(s=""),i.write("<option",o.attribute("value",s),l?" selected":"",">",a,"</option>")}return i.write("</select>"),i.toString()},formatSelect2:function(e,t,r,n){var i=r,s=new Shr.StringBuilder;return i&&((n=n||{}).name=e,s.write("<select ",Shr.Html.formatAttributes(n)," >",o.formatOptions(r,t),"</select>")),s.toString()},formatSelectWithLabel:function(e,t){var r=new Shr.StringBuilder,n=Object.extend({label:""},e),i=Object.extend({},t),s=[".shrSelect {display: inline-block; width: auto; margin: 0 auto; white-space: nowrap;}",".shrSelect LABEL {margin-right: 5px;}",""];return arguments.callee._styleRendered||(Shr.StyleManager.renderStyle({renderStyle:function(e){e(s.join("\n"))}}),arguments.callee._styleRendered=!0),i.className=(i.className||"").split(" ").concat(["shrSelect"]).join(" "),r.write("<div ${atts}>","<label>${opts.label}</label>",o.formatSelect2(n.name,n.value,n.choices,{onchange:n.onchange}),"</div>"),r.toString().substitute({opts:n,atts:Shr.Html.formatAttributes(i)})},formatOptions:function(e,t){var r,o=[],i=!1,s=0,a="margin: 2px 3px; border-top: 1px solid #333; "+(Shr.B.isIE?"margin: 0; white-space: nowrap;":""),l=function(){i&&o.push("</optGroup>"),i=!1};if(n.forEach(e,function(e,n){var c;e&&(e.optGroup?(l(),o=o.concat(["<optgroup ",Shr.Html.attribute("label",e.label),">"]),i=!0):e.separator?(l(),o.push({toString:function(){return"<optgroup label='${0}' style='${1}'></optgroup>".substitute([r,a])}})):void 0!==e.className||void 0!==e.disabled?(c=n==t||"blank"===n&&(null==t||""===t),"blank"==n&&(n=""),o=o.concat(["<option class='",e.className,"'",Shr.Html.attribute("value",n),c?" selected":"",e.disabled?" disabled":"",">",e.text,"</option>"]),e.text.length>s&&(s=e.text.length)):(c=n==t||"blank"===n&&(null==t||""===t),"blank"==n&&(n=""),o=o.concat(["<option",Shr.Html.attribute("value",n),c?" selected":"",">",e,"</option>"]),e.length>s&&(s=e.length)))}),l(),r="",Shr.B.isIE||Shr.B.isSafari){r=new Array(s);for(var c=0;c<s;c++)r[c]=45;r=String.fromCharCode.apply(String,r)}return o.join("")},formatCheckbox:function(e,t,r){var i;if(n.isFunction(r)||(r=(i=new Shr.StringBuilder).write),e.id||(e.id=Dom.getUniqueId()),r("<div class='input-checkbox-choice'>","<input class='input-checkbox ",e.className?e.className:"","' type='checkbox' ${0} ${1} />".substitute([o.formatAttributes(e),t.checked?" checked":""]),"<label class='input-checkbox-label' for='${0}'>${1}</label>".substitute([e.id,t.label||""]),"<span class='input-checkbox-height'>&nbsp;</span>",t.suffix?"<span class='input-checkbox-label'>${0}</span>".substitute([t.suffix]):"","</div>"),i)return i.toString()},formatRadio:function(e,t,r,n,i){var s=new Shr.StringBuilder,a=s.write;for(var l in r){var c=r[l];"blank"==l&&(l=""),c&&a("<label class='input-radio-label'",o.formatAttributes(i),">"),o.inputRadio(a,e,l,t,n),c&&a(c,"</label>")}return s.toString()},inputRadio:function(e,t,r,n,i){var s;return e||(e=(s=new Shr.StringBuilder).write),e("<input type='radio' name='",t,"'",o.attribute("value",r),r==n?" checked":"",o.formatAttributes(i)," />"),s?s.toString():""},renderAttributes:function(e,t){var r,i;if(t)for(r in t)(i=t[r])&&("className"==r&&(r="class"),"style"==r?e(o.formatStyle(i)):(n.isString(i)&&(i=o.escapeAttributeValue(i)),e(" ",r,"='",i,"'")))},formatAttributes:function(e){var t,r,i,s="";if(e)for(t in e)(r=e[t])&&("className"==t&&(t="class",n.isArray(r)&&(r=r.join(" "))),"style"==t?s+=o.formatStyle(r):(n.isString(r)?r=o.escapeAttributeValue(r):n.isFunction(r)&&(i=t.replace(/^on/,"").toLowerCase(),r=Shr.EB.on(i,r),"click"==i&&(r+="return false")),s+=" "+t+"='"+r+"'"));return s},attributesToObject:function(e){var t,r={},n=e.split(" "),i=n.length;for(t=0;t<i;t++){var s=n[t].split("=");s[1]&&("class"==s[0]&&(s[0]="className"),"style"==s[0]?r[s[0]]=o.stylesToObject(s[1]):r[s[0]]=o.unescapeAttributeValue(s[1].replace(/^\'/,"").replace(/\'$/,"")))}return r},formatStyle:function(e){var t,r,n="";if(e){for(t in e)(r=e[t])&&(n+=t+":"+r+";");n=" style='"+o.escapeAttributeValue(n)+"'"}return n},stylesToObject:function(e){var t,r={},n=e.replace(/^\'/,"").replace(/\'$/,"").split(";"),i=n.length;for(t=0;t<i;t++){var s=n[t].split(":");s[1]&&(r[s[0]]=o.unescapeAttributeValue(s[1]))}return r},targetA:function(e,t,n){var i=this.formatAttributes(n);return e?"<a"+o.attribute("href",e)+(e.startsWith("http")||e.startsWith("//")?" target='"+r.targetWindowName+"'":"")+i+">"+t+"</a>":t},hidden:function(e,t,r){e("<input type=hidden",o.attribute("name",t),o.attribute("value",r)," />")},a:function(e,t,r){return t||(t=e),"<a"+o.attribute("href",e)+this.formatAttributes(r)+">"+t+"</a>"},div:function(e,t){return e?"<div"+this.formatAttributes(t)+">"+e+"</div>":""},escape:function(e){return e&&(e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;")),e},escapeAttributeValue:function(e){return e&&(e=e.replace(/'/g,"&#39;").replace(/"/g,"&quot;")),e},unescapeAttributeValue:function(e){return e&&(e=e.replace(/\&quot;/g,'"').replace(/\&\#39;/g,"'")),e},formatMapLink:function(e,t,r,n,o,i,s,a){var l="",c=Shr.StringEx.joinOptional(",",e,t,Shr.StringEx.joinOptional(" ",r,n),o);return 0<c.length&&(i&&0<i.length&&(c+=" ("+i+")"),c=Shr.StringEx.htmlDecode(c),l="<a href='//maps.google.com/?q="+Shr.Html.escapeAttributeValue(encodeURIComponent(c))+"'"+Shr.Att.target+" title='"+(s||"View map")+"'>"+(a||"<span class='font-sys'>[Map]</span>")+"</a>"),l},renderNoMargin:function(e,t){t&&t.startsWith("<p>")?(e("<div class='p-nomargin'>"),e(t),e("</div>")):e(t)},renderLayoutSummaryText:function(e,t,r){var n=t.section.zone.width,i=r||{300:200,380:225,490:300,488:310,680:440,980:695}[n]||200,s=t.text||"";s&&(s=o.stripTags(t.text)),s.length>i?e(s=o.truncateText(s,i),"<a href='",Shr.PageNode.formatHref(t),"'","style='margin-left:10px;'",">more</a>"):e(s)},stripTags:function(e){return e?e=(e=e.replace(/<([^>'"]*|"[^"]*"|'[^']*')*>/g,"")).replace(/ +/g," "):""},newLineToBr:function(e){return e?e.replace(/\r\n/g,"<br/>").replace(/\n/g,"<br/>").replace(/\r/g,"<br/>"):""},brsToLineBreaks:function(e){return e.replace(/<br\s*\/?>/gi,"\r\n").replace(/<p\s*\/?>/gi,"\r\n")},truncateText:function(e,t,r){if(e&&e.length>t){var n=e.lastIndexOf(" ",t);t=n<=0?t:n,e=e.substring(0,t)+(r||"&hellip;")}return e},truncateTextUnEscaped:function(e,t){var r=document.createElement("div"),n=e;return r.innerHTML=n,n=r.innerHTML,o.truncateText(n,t)},formatSummaryText:function(e,t,r){t=t||200;var n="";return e.text&&(n=o.stripTags(e.text)).length>t&&(n=n.substring(0,t)+" <a href='"+(r||Shr.PageNode.formatHref(e))+"'>&hellip;more</a>"),n},formatRenderedContent:function(e,t,r){var n=new Shr.StringBuilder;return("string"==typeof t?e[t]:t).apply(e,[n.write].concat(r||[])),n.toString()},translateEntities:function(e){var t=document.createElement("TEXTAREA");return t.innerHTML=e.replace(/</g,"&lt;").replace(/>/g,"&gt;"),t.value},formatInlineBlock:function(e,t){return(t=t||{}).className=t.className?t.className+" ib":"ib","<span ${0}><div class='ib-2 ${2}'>${1}</div></span>".substitute([o.formatAttributes(t),e,t.className2])},formatCroppedImage:function(e,t,r,n,i){var s=e;if(!s||!s.shutterflyId)return i||"";var a=r||o.photoWidth,l=n||o.photoHeight,c=new Shr.ImageSizer(a,l,{clip:!1,noTip:!0}),d=new Shr.StringBuilder,h=d.write;if(s&&s.shutterflyId){var u=Shr.Sfly.formatCroppedImgSrc(s,a,l,s.leftOffset,s.bottomOffset,s.rightOffset,s.topOffset);c.render(h,{src:u},{})}return t?t.substitute([d.toString()]):d.toString()},formatOnClick:function(e,t,r){var o='return Shr.Html._onClick(event,this,"'+(t||"")+'","'+e+'"';return n.forEach(Array.prototype.slice.call(arguments,2),function(e){o+=',"'+e.toString()+'"'}),o+=")"},_onClick:function(e,t,r,n,o){try{var i=window;r&&(i=Object.get(r,i)),(o=Array.prototype.slice.call(arguments,0)).splice(2,2),(Object.get(n,i)||Object.get(n,i.prototype)).apply(i,o)}catch(e){}return!1},_fn:{},_fnId:-1,formatHandler:function(e,t){return o._fnId++,o._fn["f"+o._fnId]=e,"Shr.Html._fn.f"+o._fnId+(t?"":"()")}}),Shr.EB=function(){var e=Shr.Lang,t={},r=1,n=1,o=[],i=e.isNullOrUndefined,s={click:1,dblclick:1,datechange:1,load:0,error:0,mouseout:0,mouseover:0,change:0,blur:0,focus:1},a={load:{},click:{}};function l(e){return a[e]||(a[e]={})}function c(e){var r="on"+e,n=t[r];if(!n){var o=s[e];n=function(t,r,n,i){var s=function(e,t,r,n,o){var i,s,a=l(e),c=0<=r&&a[r],d=c&&c.fn;if(d){0<n&&(i=c.args[n]);try{Shr.EB.isOnClick="click"==e,s=d(t,i,e,o)}catch(e){}finally{Shr.EB.isOnClick=!1}}return s}(e,r,n,i,Shr.Event.getEvent(t));return o?("A"==r.tagName&&Shr.Event.stop(t),s):void 0},t[r]=n}}function d(t,i,s){if(!e.isFunction(i))throw new Error("Callback is not a valid function.");var a=function(e,t){var n=0,i=Shr.Array.findByProperty(o,"fn",t);i?n=i.hash:(n=++r,o.push({fn:t,hash:n}));var s=l(e);return s[n]||(s[n]={fn:t,args:{}}),n}(t,i),d=-1;return e.isUndefined(s)||(d=function(t,r,o){var i=-1;if(e.isUndefined(o))return i;var s=l(t)[r];return s&&(i=++n,s.args[i]=o),i}(t,a,s)),c(t),"Shr.EB.on"+t+"(event, this, "+a+", "+d+");"}function h(e,t,r){return" on"+e+'="'+d(e,t,r)+'" '}function u(e,t,r){var n,o,s=e;if(!i(t)){var a=t._state||"off",l=t.callerArgs||{},c=t.classNames||[];if(0!=c.length&&(i(t.targetElement)||null!=(s=Dom.get(t.targetElement)))){o=c[0],n=c[1],a="on"==a?(Dom.removeClass(s,n),o&&Shr.Dom.addClass(s,o),"off"):(o&&Shr.Dom.removeClass(s,o),Shr.Dom.addClass(s,n),"on"),t._state=a;try{t.callback&&t.callback(l,a)}catch(e){}}}}function p(t){if(!e.isObject(t))throw new Error("argument to formatToggleOnClick is not an Object");if(!i(t.classNames))throw new Error("args does not contain the property 'classNames'");if(!e.isArray(t.classNames)||0==t.classNames.length)throw new Error("args.classNames must be an array with atleast one element.");if(!i(t.targetElement)&&!e.isString(t.targetElement)&&!e.isObject(t.targetElement))throw new Error("args.targetElement must be either an id or a DomElement.");if(!i(t.callback)&&!e.isFunction(t.callback))throw new Error("args.callback must be a function");return!0}return t.formatOnLoad=function(e,t){return h("load",e,t)},t.formatOnClick=function(e,t){return h("click",e,t)},t.formatOnError=function(e,t){return h("error",e,t)},t.formatOn=function(e,t,r){return h(e,t,r)},t.on=function(e,t,r){return d(e,t,r)},t.formatToggleOnClick=function(e){var t={};return p(e),t.callerArgs=e,t._state="off",h("click",u,t)},t.toggleOnClick=function(e){var t={};return p(e),t.callerArgs=e,t._state="off",d("click",u,t)},t.dumpStats=function(){return Console.write("registered handlers "+r),o},t}(),Shr.ClassToggle=function(e,t,r){this._e=e,this._className=t,this._cb=r},Shr.ClassToggle.prototype={getElement:function(){return this._e},getClassName:function(){return this._className},getState:function(){return Shr.ClassToggle._getState(this._e,this._className)},_getState:function(e,t){return!!Dom.hasClass(e,t)},formatHandler:function(e){return Shr.EB.on("click",Shr.ClassToggle._toggle,this._makeArgs(e))},toggle:function(e){return Shr.ClassToggle._toggle(null,this._makeArgs(e))},_makeArgs:function(e){return{_e:this._e,_className:this._className,_cb:this._cb,_state:e,_toggle:this}}},Shr.ClassToggle._toggle=function(e,t){var r=Shr.ClassToggle._getState(t._e,t._className),n=void 0===t._state?!r:t._state;return(n?Dom.addClass:Dom.removeClass)(t._e,t._className),r!=n&&Shr.L.tryToCall(t._cb,n,t._toggle),n},Shr.ClassToggle._getState=function(e,t){return!!Dom.hasClass(e,t)},Shr.ClassToggle.toggle=function(e,t,r){return Shr.ClassToggle._toggle(null,{_e:e,_className:t,_state:r})},Shr.ClassToggle._selected="shrSelected",Shr.ClassToggle.select=function(e){var t=Shr.ClassToggle;e=Shr.Dom.get(e),t.toggle(Shr.Dom.getChildByClass(e&&e.parentNode,t._selected),t._selected,!1),t.toggle(e,t._selected,!0)},Shr.CommandBar=i={_standardParts:["<td class=cb-body><div class='cb-menu'></div></td>","<td class='cb-split'></td>","<td class=cb-body s:menu='Shr.Menus.User'><div class='cb-menu'></div></td>"],renderButton:function(e,t,r){e("<table cellpadding=0 s:handler=m class=cb-button",Shr.Html.formatAttributes(t),">","<tr>","<td class=cb-left>&nbsp;</td>");for(var n=2;n<arguments.length;n++){var o=arguments[n];if(o.constructor==Number)if(o<0)e("<td class=cb-body><div class='cb-icon' style='background-position: ",o,"px 0px;'></div></td>");else{var s=i._standardParts[o];s&&e(s)}else e("<td class=cb-body>",o,"</td>")}e("<td class=cb-right>&nbsp;</td>","</tr>","</table>")},renderButtonTd:function(e,t,r){e("<td>"),i.renderButton.apply(this,arguments),e("</td>")},renderAdd:function(e,t,r){(r=r||{}).style=r.style||{},r.style.width="47px",r.style.height="17px",i.renderImg(e,3,t,r)},renderImg:function(e,t,r,n){var o=-20*t+"px";(n=n||{})[Shr.Atts.positionX]=o,n[Shr.Atts.handler]="i",n.onclick=r,n.style=n.style||{},n.style["background-position"]=o+" 0",e("<img src='",Shr.ImgSrc.blank+"' class='cb-img noselect' unselectable='on' dragType='none'",Shr.Html.formatAttributes(n)," />")}},Shr.Splitter=s={type:{DEFAULT:0,HORIZONTAL:0},L10N:{},format:function(e,t){var r=new Shr.StringBuilder,n=Object.merge({p1:"width",p2:"marginLeft"},e||{}),o={id:t&&t.id||Shr.Dom.getUniqueId(),e1:n.e1,p1:n.p1||"width",e2:n.e2,p2:n.p2||"marginLeft"},i=n.template||"<div id='${splitter.id}' class='${className} ${atts.className}' dragtype='Shr.Splitter._dragHandler' ${formattedAtts} >${opts.content}</div>",a={atts:t,opts:e,splitter:o,className:"shrSplitter dragHandle sizeContext ",formattedAtts:Shr.Html.formatAttributes(Object.merge({},t||{},{className:void 0,id:void 0}))};return Shr.StyleManager.renderStyle(s),s._splitters[o.id]=o,r.write(i.substitute(a)),r.toString()},renderStyle:function(e){e([".shrSplitter {position: absolute; top: 0; bottom: 0; left: -4px; width: 7px; cursor: w-resize !important;}",""].join("\n"))},_splitters:{},_dragHandler:{_lastDx:0,onStartDrag:function(e,t){this._lastDx=0},onDrag:function(e,t,r,n){var o,i,a=r-this._lastDx,l=Shr.DragDrop.dragElement,c=l&&s._splitters[l.id];l&&c&&a&&(a=c.p1.match(/margin/)?-a:a,c.e1=c.e1||l.parentNode.previousSibling||l.parentNode.nextSibling,c.e2=c.e2||l.parentNode,o=parseInt(Shr.Dom.getComputedStyle(c.e1,c.p1)),i=parseInt(Shr.Dom.getComputedStyle(c.e2,c.p2)),("width"==c.p1&&o<-a||"width"==c.p2&&i<-a)&&(a="width"==c.p1?-o:-i),o+=a,i+=a,Shr.Dom.setStyle(c.e1,c.p1,o+"px"),Shr.Dom.setStyle(c.e2,c.p2,i+"px"),this._lastDx=r)},onDrop:function(){}},_end:null},Shr.TabStrip=function(e,t){var r=this;r._w=e,t=t||{},r._timer=null,r._mouseoverDelay=t.mouseoverDelay||300,r._collapseOnMouseout=t.collapseOnMouseout,r._tabCount=0,r._totalTabs=t.count||0,r._panelCount=0,r._enableMouseover=t&&t.enableMouseover,r.tabStyle=t.tabStyle,r.selectedIndex=t&&t.selectedIndex||0,r.selectedIndexChanged=new Shr.EventHandler,r.tabClicked=new Shr.EventHandler,r._removeClass=Dom.removeClass,r._addClass=Dom.addClass,r._index=Shr.TabStrip._controls.length,Shr.TabStrip._controls.push(r),t&&(t.tabStrips||(t.tabStrips=[]),t.tabStrips.push(this))},a=Shr.L,l=Shr.Dialog,c="<div class='${tabStyle}'><div class='tabStrip' onmouseout='${mouseout}'><ul class='tabList'>",d="</div></div></div>",Object.extend(Shr.TabStrip.prototype,{getIndex:function(){return this._index},_renderStart:function(){var e={};this._collapseOnMouseout&&(e.mouseout="Shr.TabStrip.reset(${0});".substitute([this._index])),this.tabStyle&&(e.tabStyle=this.tabStyle),this._w(c.substitute(e))},_renderTabsEnd:function(){var e="";0<this._tabCount&&this._renderTabEnd(),this.panelHeight&&(e+="clear: left; height: "+this.panelHeight+"px; overflow: auto;'"),this.noBottom&&(e+="border-bottom: 0;"),this._w("</ul><div class=tabLine>&nbsp;</div><div class='tabPanels resize-height' style='${style};' onmouseover='${mouseover}'>".substitute({style:e,mouseover:this._enableMouseover?"Shr.TabStrip._controls["+this._index+"]._clearTimeout();":""}))},renderEnd:function(){0<this._panelCount&&this._renderPanelEnd(),this._w(d)},renderTabs:function(e,t){var r=Object.extend({},t),n=c,o=d;delete r.className,c="<div class='tabStrip ${0}' ${1}>".substitute([t&&t.className||"",Shr.Html.formatAttributes(r)])+"<ul class=tabList>",d="</div></div>",-1!=Shr.Array.indexOf((t&&t.className||"").split(" "),"shrVertical")&&Shr.StyleManager.renderStyle(Shr.TabStrip.prototype),a.forEach(e,a.hitch(this,function(t,r){var n=new Shr.StringBuilder,o=[];a.isFunction(t.render)?t.render(n.write,r):a.isFunction(e.renderTab)&&e.renderTab(n.write,r),e.className&&o.push(e.className),t.className&&o.push(t.className),this.renderTab(n.toString(),r,{css:o.join(" ")})})),a.forEach(e,a.hitch(this,function(t,r){this.renderPanel("",t.className);var n=new Shr.StringBuilder;a.isFunction(t.renderPanel)?t.renderPanel(n.write,r):a.isFunction(e.renderPanel)&&e.renderPanel(n.write,r),this._w(n.toString())})),this.renderEnd(),c=n,d=o},renderTab:function(e,t,r){r=r||{};var n=this,o={},i=n._totalTabs?n._totalTabs:20,s=n._tabCount==n.selectedIndex;Object.extend(o,r),Object.extend(o,{index:n._index,count:n._tabCount,liCss:0==n._tabCount?"tabLiFirst":"",active:s?"Selected":"",zIndex:s?i:i-n._tabCount,id:t,text:e}),n._enableMouseover&&(o.mouseover="Shr.TabStrip.mouse(${index}, ${count}, 1);".substitute(o),o.mouseout="Shr.TabStrip.mouse(${index}, ${count}, 0);".substitute(o)),0==n._tabCount?n._renderStart():n._renderTabEnd(),n._w("<li class='tabLi${active} ${liCss}'><a id='tab_${index}_${count}' class='tab${active} ${css}' href='' tabIndex='-1' onmouseout='${mouseout}' onmouseover='${mouseover}' onclick='Shr.TabStrip.show(${index}, ${count}); return false;' style='z-index: ${zIndex}' hidefocus='-1'><span class='tabOuter ${tabCss}'><span id='${id}' class='font-sys tabInner'>${text}".substitute(o)),n._tabCount++},disableStyle:function(e){var t="tab_"+this._index+"_"+e,r=Dom.get(t);this._addClass(r,"tabDisabled")},enableStyle:function(e){var t=Dom.get("tab_"+this._index+"_"+e);this._removeClass(t,"tabDisabled")},_renderTabEnd:function(){this._w("</span></span></a></li>")},renderPanel:function(e,t){var r=this._panelCount;0==r?this._renderTabsEnd():this._renderPanelEnd(),this._w("<div id='panel_${index}_${count}' class='tabPanel${active} ${className}'>${text}".substitute({index:this._index,count:r,active:r==this.selectedIndex?"Selected":"",text:e||"",className:t})),this._panelCount++},_renderPanelEnd:function(){this._w("</div>")},_setTabState:function(e,t,r){if(e){t="tab"+(t||"");var n=Dom.getParentByTag(e,"LI"),o=t+"Selected",i=t+"Li",s=i+"Selected";switch(this._removeClass(e,t),this._removeClass(e,o),this._removeClass(n,i),this._removeClass(n,s),r){case"active":this._addClass(e,o),this._addClass(n,s);break;default:this._addClass(e,t),this._addClass(n,i)}}},onLoad:function(e){var t=this._index,r=this.selectedIndex,n=Dom.get("panel_"+t+"_"+r);n&&e&&Shr.TextEditor&&Shr.TextEditor.ensureInitialized&&Shr.TextEditor.ensureInitialized(n)},cancelTabClicked:function(e){return!1},setSelectedIndex:function(e){var t=this._index,r=this.selectedIndex,n=l.context,o=n?n.dialog:{},i=/TextEditor/g.test(o.uses);if(!this.cancelTabClicked(e)){if(r!=e){var s=Dom.get("tab_"+t+"_"+r);s&&(this._setTabState(s),s.style.zIndex=19-r,s=Dom.get("panel_"+t+"_"+r)),this._setTabState(s,"Panel"),this.selectedIndex=e,(s=Dom.get("tab_"+t+"_"+e))&&(this._setTabState(s,"","active"),s.style.zIndex=20),s=Dom.get("panel_"+t+"_"+e),this._setTabState(s,"Panel","active"),s&&i&&Shr.TextEditor&&Shr.TextEditor.ensureInitialized&&Shr.TextEditor.ensureInitialized(s),this.selectedIndexChanged.raise(e)}this.tabClicked.raise(e,r)}},_setTimeout:function(e){this._timer=window.setTimeout(e,this._mouseoverDelay)},_clearTimeout:function(){window.clearTimeout(this._timer)},renderStyle:function(e){e([".tabStrip.shrVertical {white-space: nowrap; position: relative;}",".shrVertical .tabList, .shrVertical .tabPanels {display: inline-block;}",".shrVertical .tabPanels {width: 800px; vertical-align: top; border: 1px solid #666; position: absolute; top: 0; bottom: 0;}",".shrVertical .tabList .tabLi, .shrVertical .tabList .tabLiSelected {float: none; text-align: right;}",".shrVertical .tabList A, .shrVertical .tabList .tabOuter, .shrVertical .tabList .tabInner {background: none;}",".shrVertical .tabLine {display: none;}",".shrVertical .tabList LI {height: auto;}",".shrVertical .tabList LI A, .shrVertical .tabList .tabInner, .shrVertical .tabList .tabOuter {float: none; padding: 0;}",".shrVertical .tabList LI {margin: 6px 7px 11px 0;}",".shrVertical .tabList LI A {border: 1px solid #666; padding: 5px; padding-left: 10px;}",".shrVertical .tabList LI A {border-top-left-radius: 5px; border-bottom-left-radius: 5px;}",".shrVertical .tabList .tabLiSelected {position: relative; top: -2px; margin-bottom: -2px;}",".shrVertical .tabList .tabLiSelected A {border-right-color: #fff;}",".shrVertical .tabList .tabInner {line-height: normal;}",""].join("\n"))}}),Object.extend(Shr.TabStrip,{_controls:[],show:function(e,t){Shr.TabStrip._controls[e].setSelectedIndex(t)},reset:function(e){var t=Shr.TabStrip._controls[e];t._clearTimeout(),t._setTimeout(function(){Shr.TabStrip.show(e,-1)})},mouse:function(e,t,r){var n=Shr.TabStrip._controls[e];n._clearTimeout(),r?n._setTimeout(function(){Shr.TabStrip.show(e,t),Dom.showNativeControls(!1)}):Dom.showNativeControls(!0)}}),Shr.SflyButton=(h=Shr.B,u={_initialized:!1,renderStyle:function(e){h.isIE6?e(".ie6 .shr-btn-orange {background-color: #FF9900; }",".ie6 .shr-btn-orange-active {background-color: #FFAD32; }",".ie6 .shr-btn-purple {background-color: #9a9acf; }",".ie6 .shr-btn-purple-active {background-color: #a7a7d6; }",".ie6 .shr-btn-disabled {background-color: #ffca95 !important;}",".ie6 .shr-btn-ie6 {margin-top: 2px; font-size: 12px; font-weight: bold; color: #fff; border: none; cursor: pointer; font-family: arial,helvetica,sans-serif; width: auto;}"):e(".shr-btn, .shr-btn .first-child {background-image: url(",Shr.ImgSrc.sflyBtn,"); background-repeat: no-repeat;}",".shr-btn {display: -moz-inline-box; display: inline-block; cursor: pointer;}",".shr-btn .first-child {display: block; margin-left: 13px; }",".shr-btn .button {background-color: transparent; border: none; display: block; font-size: 11px; line-height: 11px; font-family: arial;","font-weight: bold; color: #fff; margin: 0; padding: 1px 15px 6px 15px; margin-left: -13px; height: 23px; text-decoration: none;}","a:hover .shr-btn, a:link .shr-btn {text-decoration: none;}",".gecko .shr-btn .button {padding-bottom: 4px; }",".ie7 .shr-btn .button {padding: 1px 7px 5px 7px; }",".ie8 .shr-btn .button {padding-bottom: 3px; }",".ie9 .shr-btn .button {position: relative; top: 2px;}",".safari .shr-btn .button {padding-bottom: 3px; }"),e(".shr-btn-orange {background-position: 0 -50px; }",".shr-btn-orange .first-child {background-position: right -75px; }",".shr-btn-orange-active {background-position: 0 -25px;}",".shr-btn-orange-active .first-child {background-position: right 0;}",".shr-btn-purple {background-position: 0 -150px; }",".shr-btn-purple .first-child {background-position: right -175px; }",".shr-btn-purple-active {background-position: 0 -125px;}",".shr-btn-purple-active .first-child {background-position: right -100px;}",".shr-btn-tertiary .button {color: #000;}",".shr-btn-tertiary {background-position: 0 -350px; }",".shr-btn-tertiary .first-child {background-position: right -375px; }",".shr-btn-tertiary-active {background-position: 0 -325px;}",".shr-btn-tertiary-active .first-child {background-position: right -300px;}",".shr-btn-disabled {background-position: 0 -250px;}",".shr-btn-disabled .first-child {background-position: right -275px;}",".shrBtnLink {line-height: 23px; margin-left: 10px;}")},_onOverOut:function(e,t){if(e){var r="shr-btn-"+e.getAttribute("xcolor")+"-active";t?Dom.addClass(e,r):Dom.removeClass(e,r)}return!1},format:function(e,t){t=t||{},u._initialized||(Shr.StyleManager.renderStyle(u),u._initialized=!0);var r=t.color||"orange",n=["shr-btn "+(t.className||""),"first-child",t.id||"",t.type||"button","button",e||"","Shr.SflyButton._onOverOut(this, true)","Shr.SflyButton._onOverOut(this, false)",t.onclick||"",r,t.style||"","shr-btn-"+r+"-active"];return h.isIE6?"<button name='${2}' id='${2}' class='inputButton ${0} shr-btn-ie6 shr-btn-${9} shr-btn-label' xcolor='${9}' type='${3}' onmouseover='${6}' onmouseout='${7}' onclick='${8}' style='${10}'>${5}</button>".substitute(n):"<span id='${2}' onmouseover='${6}' onmouseout='${7}' class='${0} shr-btn-${9}' xcolor='${9}' style='${10}'><span class='${1}'><button name='${2}' type='${3}' onclick='${8}' class='${4} shr-btn-label'>${5}</button></span></span>".substitute(n)},disable:function(e,t){e&&(t?Dom.removeClass:Dom.addClass)(e,"shr-btn-disabled"),(e=h.isIE6?e:e.getElementsByTagName("BUTTON")[0])&&(e.disabled=!t)},enable:function(e){u.disable(e,!0)},setLabel:function(e,t){var r=Dom.getChildByClass(Dom.get(e),"shr-btn-label");r&&(r.innerHTML=t)},setColor:function(e,t){if(t){var r,n=Dom.get(e);n&&(r=n.getAttribute("xcolor"))!=t&&(Dom.removeClass(n,"shr-btn-"+r),n.setAttribute("xcolor",t),Dom.addClass(n,"shr-btn-"+t))}}}),Shr.Button=((f={_className:"sflyButton",L10N:{},format:function(e,t){var r=Object.extend({},t,{href:void 0}),n=t&&t.href||"",o=(r.className||"").split(" ");return o.push(f._className),r.className=o.join(" "),Shr.StyleManager.renderStyle(f),Shr.Html.a(n,e,r)},_styleParameters:(p=Object.extend({},Shr.Style.parameters,{colors:{primary:{start:"#f05323",stop:"#cb3f16",textShadow:"#ba2911",color:"#fff",hover:{bg:Shr.Style.parameters.colors.sfly},disabled:{start:"#fcd193",stop:"#eea282",textShadow:"#dd9588"}},secondary:{start:"#69c",stop:"#5681ab",textShadow:"#369",hover:{bg:"#69c"},disabled:{start:"#b2cce5",stop:"#bccddd",textShadow:"#369"}},tertiary:{start:"#fff",stop:"#e0dbd7",border:"#a5a09d",color:Shr.Style.parameters.colors.sfly,textShadow:"#fff",hover:{bg:"#efe9e5"},disabled:{start:"#fff",stop:"#f0edeb",border:"#d2d0ce",color:"#eea282"}},quaternary:{color:"#5681ab",disabled:{color:"#b3b3e6"}}},primary:{fontSize:"13px",lineHeight:Shr.Style.parameters.mobileBarButtonHeight,borderRadius:"5px",padding:{v:"0",h:"10px"},desktop:{lineHeight:"23px",borderRadius:"3px"}},tertiary:{borderWidth:"1px"}}),m=function(e){var t={};return Shr.L.forEach(["start","stop","textShadow","color"],function(r){var n;r in e&&(t[r]=(n=e[r],Shr.Style.toWebColor(Shr.Style.lighter(n,.4))))}),t},g=function(e){var t={};return t.start=e.stop,t.stop=e.start,t},Object.merge(p,{primary:{gradient:Shr.Style.formatLinearGradient(p.colors.primary.start,p.colors.primary.stop),disabledGradient:Shr.Style.formatLinearGradient(p.colors.primary.disabled.start,p.colors.primary.disabled.stop)},secondary:{gradient:Shr.Style.formatLinearGradient(p.colors.secondary.start,p.colors.secondary.stop),disabledGradient:Shr.Style.formatLinearGradient(p.colors.secondary.disabled.start,p.colors.secondary.disabled.stop)},tertiary:{gradient:Shr.Style.formatLinearGradient(p.colors.tertiary.start,p.colors.tertiary.stop),disabledGradient:Shr.Style.formatLinearGradient(p.colors.tertiary.disabled.start,p.colors.tertiary.disabled.stop),lineHeight:Shr.Style.subtract(p.primary.lineHeight,p.tertiary.borderWidth,p.tertiary.borderWidth),padding:{v:p.primary.padding.v,h:Shr.Style.subtract(p.primary.padding.h,p.tertiary.borderWidth)}},colors:{primary:{hover:{bg:p.colors.primary.stop},disabled:m(p.colors.primary),active:g(p.colors.primary)},secondary:{hover:{bg:p.colors.secondary.stop},disabled:m(p.colors.secondary),active:g(p.colors.secondary)},tertiary:{hover:{bg:p.colors.tertiary.stop},disabled:m(p.colors.tertiary),active:g(p.colors.tertiary)},quaternary:{disabled:m(p.colors.quaternary)}}}),Object.merge(p,{gradients:{active:{primary:Shr.Style.formatLinearGradient(p.colors.primary.active.start,p.colors.primary.active.stop),secondary:Shr.Style.formatLinearGradient(p.colors.secondary.active.start,p.colors.secondary.active.stop),tertiary:Shr.Style.formatLinearGradient(p.colors.tertiary.active.start,p.colors.tertiary.active.stop)}}}),p),renderStyle:function(e){var t=[".sflyButton, .sflyButton:link, .sflyButton:visited {font-size: ${primary.fontSize};}",".sflyButton, .sflyButton:link, .sflyButton:visited {color: ${colors.primary.color}; text-shadow: 0 -1px 0 ${colors.primary.textShadow}; text-decoration: none;}",".sflyButton, .sflyButton:link, .sflyButton:visited {display: inline-block; padding: ${primary.padding.v} ${primary.padding.h}; line-height: ${primary.lineHeight}; border-radius: ${primary.borderRadius};}",".sflyButton, .sflyButton:link, .sflyButton:visited {background-color: ${colors.primary.stop};}",".sflyButton {box-shadow: 1px 1px 4px 0 #ccc;}",".sflyButton-secondary, .sflyButton-secondary:link, .sflyButton-secondary:visited {text-shadow: 0 -1px 0 ${colors.secondary.textShadow};}",".sflyButton-secondary, .sflyButton-secondary:link, .sflyButton-secondary:visited {background-color: ${colors.secondary.stop};}",".sflyButton-tertiary, .sflyButton-tertiary:link, .sflyButton-tertiary:visited, .sflyButton-quaternary, .sflyButton-quaternary:link, .sflyButton-quaternary:visited {color: ${colors.tertiary.color}; text-shadow: 0 1px 0 ${colors.tertiary.textShadow};}",".sflyButton-tertiary, .sflyButton-tertiary:link, .sflyButton-tertiary:visited, .sflyButton-quaternary, .sflyButton-quaternary:link, .sflyButton-quaternary:visited {border: ${tertiary.borderWidth} solid ${colors.tertiary.border};}",".sflyButton-tertiary, .sflyButton-tertiary:link, .sflyButton-tertiary:visited, .sflyButton-quaternary, .sflyButton-quaternary:link, .sflyButton-quaternary:visited {padding: ${tertiary.padding.v} ${tertiary.padding.h}; line-height: ${tertiary.lineHeight};}",".sflyButton-tertiary, .sflyButton-tertiary:link, .sflyButton-tertiary:visited, .sflyButton-quaternary, .sflyButton-quaternary:link, .sflyButton-quaternary:visited {background-color: ${colors.tertiary.stop};}",".sflyButton-quaternary, .sflyButton-quaternary:link, .sflyButton-quaternary:visited {color: ${colors.quaternary.color}}",".sflyButton {${primary.gradient};}",".sflyButton-secondary {${secondary.gradient};}",".sflyButton-tertiary, .sflyButton-quaternary {${tertiary.gradient};}",".sflyButton:hover {background: ${colors.primary.hover.bg};}",".sflyButton-secondary:hover {background: ${colors.secondary.hover.bg};}",".sflyButton-tertiary:hover, .sflyButton-quaternary:hover {background: ${colors.tertiary.hover.bg};}",".sflyButton:active {${gradients.active.primary};}",".sflyButton-secondary:active {${gradients.active.secondary};}",".sflyButton-tertiary:active, .sflyButton-quaternary:active {${gradients.active.tertiary};}",".sflyDisabled {cursor: default;}",".sflyDisabled.sflyButton {${primary.disabledGradient}; text-shadow: 0 -1px 0 ${colors.primary.disabled.textShadow};}",".sflyDisabled.sflyButton-secondary {${secondary.disabledGradient}; text-shadow: 0 -1px 0 ${colors.secondary.disabled.textShadow};}",".sflyDisabled.sflyButton-tertiary, .sflyDisabled.sflyButton-quaternary {${tertiary.disabledGradient};}",".sflyDisabled.sflyButton-tertiary, .sflyDisabled.sflyButton-quaternary {color: ${colors.tertiary.disabled.color}; border-color: ${colors.tertiary.border}; text-shadow: 0 1px 0 ${colors.tertiary.textShadow};}",".sflyDisabled.sflyButton-quaternary {color: ${colors.quaternary.disabled.color};}",""];Shr.B.isIE&&(t.push(".sflyButton:hover, .sflyButton:active {filter: progid:DXImageTransform.Microsoft.gradient(enabled='false'); -ms-filter: \"progid:DXImageTransform.Microsoft.gradient(enabled='false')\";}"),t.push(".sflyButton, .sflyButton:link, .sflyButton:visited, .sflyButton:hover, .sflyButton:active {border-radius: 0 \0/;}")),Shr.B.isTouch||t.push(".sflyButton, .sflyButton:link, .sflyButton:visited {line-height: ${primary.desktop.lineHeight}; border-radius: ${primary.desktop.borderRadius};}"),e(t.join("\n").substitute(f._styleParameters))}}).styleParameters=f._styleParameters,f),Shr.Arrow=_={_className:"shrArrow",_defaultSize:10,format:function(e,t){var r=Object.extend({},t),n=(r.className||"").split(" "),o=(e||{}).dir||"e",i=void 0===(e||{}).w?_._defaultSize:e.w,s=void 0===(e||{}).h?_._defaultSize:e.h,a="n"==o?0:("s"==o?s:s/2)+"px",l="s"==o?0:("n"==o?s:s/2)+"px",c="e"==o?0:("w"==o?i:i/2)+"px",d="w"==o?0:("e"==o?i:i/2)+"px";return n.push(_._className),n.push(_._className+o.toUpperCase()),r.className=n.join(" "),r.style=r.style||{},r.style["border-width"]="${0} ${1} ${2} ${3}".substitute([a,c,l,d]),Shr.StyleManager.renderStyle(_),Shr.Html.formatTag(e.tagName||"div",r)},renderStyle:function(e){e([".shrArrow {display: inline-block; width: 0; height: 0; border-style: solid; border-color: ${0};}".substitute([Shr.Theme.c.lighter]),".shrArrowE, .shrArrowW, .shrArrowS, .shrArrowNE, .shrArrowNW {border-bottom-color: transparent !important;}",".shrArrowE, .shrArrowW, .shrArrowN, .shrArrowSE, .shrArrowSW {border-top-color: transparent !important;}",".shrArrowN, .shrArrowS, .shrArrowNE, .shrArrowSE {border-left-color: transparent !important;}",".shrArrowN, .shrArrowS, .shrArrowNW, .shrArrowSW {border-right-color: transparent !important;}",""].join("\n"))}}},function(e,t){!function(){var e=Shr.DURL,t=Shr.IURL,r=Shr.CURL,n=Shr.URL;Shr.RURL,Shr.Dialogs={AddComment:e("addcomment.js"),AddGroup:e("addgroup.js"),AddPictures:e("addpictures.js"),AddSection:e("addsection.js"),AddTags:e("addtags.js"),ArrangeItems:e("arrangeitems.js"),BatchTagNotificationDialog:e("batchtagnotificationdialog.js"),BatchTagAddMembersDialog:e("batchtagaddmembersdialog.js"),UpdateAlbum:e("updatealbum.js"),SelectItems:e("selectitems.js"),Console:e("console.js"),Copy:e("copy.js"),CreatePage:e("createpage.js"),DeletePage:e("deletepage.js"),DeletePageDialog:e("deletepage.js"),EMailDetails:e("emaildetails.js"),ErrorReport:e("errorreport.js"),Feedback:e("feedback.js"),ImportContacts:e("importcontacts.js"),JoinGroup:e("joingroup.js"),MixesLearnMore:e("mixeslearnmore.js"),Message:e("message.js"),MixesPreview:e("mixespreview.js"),MixesUpsell:e("mixesupsell.js"),DeleteSection:e("deletesection.js"),Password:e("password.js"),Report:e("report.js"),SelectMembers:e("selectmembers.js"),Send:e("send.js"),SendConfirmation:e("sendconfirmation.js"),SignIn:e("signin.js"),SignUp:e("signup.js"),SendNoForumMessage:e("sendnoforummessage.js"),ShareOut:e("shareout.js"),SiteRequest:e("siterequest.js"),ShowComments:e("showcomments.js"),ShowItemDetail:e("showitemdetail.js"),UpdateComment:e("updatecomment.js"),UpdateGroup:e("updategroup.js"),UpdateImage:e("updateimage.js"),UpdatePicture:e("updatepicture.js"),UpdateMember:e("updatemember.js"),UpdateNotifications:e("updatenotifications.js"),UpdatePage:e("updatepage.js"),UpdatePageLayout:e("updatepagelayout.js"),UpdatePageOrder:e("updatepageorder.js"),UpdatePagePermissions:e("updatepagepermissions.js"),UpdateProfile:e("updateprofile.js"),UpdateSection:e("updatesection.js"),UpdateSite:e("updatesite.js"),UpdateSitePermissions:e("updatesitepermissions.js"),UpdateTags:e("updatetags.js"),UpdateTheme:e("updatetheme.js"),EditTheme:e("edittheme.js"),ViewProfile:e("viewprofile.js"),SelectionBin:e("selectionbin.js"),SelectionBin2:e("selectionbin2.js"),UniversalPicker:e("universalpicker.js"),_end:null},Object.extend(Shr,{AutoComplete:r("autocomplete.js"),Calendar:r("calendar.js"),Dialog2:r("dialog2.js"),EmailAutoComplete:r("emailautocomplete.js"),FileUploader:r("fileuploader.js"),GeoCodeControl:r("geocodecontrol.js"),Hammer:r("hammer.js"),ImageCropper:r("imagecropper.js"),PictureCropper:r("picturecropper.js"),RosterBatchAdd:r("rosterbatchadd.js"),SiteCatalyst:r("sitecatalyst.js"),TaggingHelper:r("tagginghelper.js"),TextEditor:r("texteditor.js"),PictureUtils:r("pictureutils.js"),AddressCollection:r("addresscollection.js"),MixesHelper:r("mixeshelper.js"),VideosHelper:r("../m/videos/videoshelper.js"),RSH:r("rsh.js"),UniversalPickerTestUI:e("universalpickertestui.js"),MyComputerDS:r("uppdatasources/mycomputer/mycomputerds.js"),sitesDS:r("uppdatasources/sites/sitesds.js"),ThisLifeDS:r("uppdatasources/thislife/thislifeds.js"),facebookDS:r("uppdatasources/fb/facebookdsv2.js"),alacarteDS:r("uppdatasources/alacarte/alacarteds.js"),flickrDS:r("uppdatasources/flickr/flickrds.js"),stockphotosDS:r("uppdatasources/stockphotos/stockphotosds.js"),googleDS:r("uppdatasources/google/googleds.js"),googleSignIn:r("uppdatasources/google/googlesignin.html"),ScoreBootstrapJS:window.location.protocol+"//"+Shr.AS.www+"/score/bootstrap.js",smartAppBanner:r("SmartAppBanner.js"),React:r("upp/utils/react.js"),_end:null}),"easyXDM"in window||(window.easyXDM=r(/^.dev/.test(Shr.AS.env)?"easyxdm.debug.js":"easyxdm.min.js"));var o={Controls:n("c/common/controls.js"),ToolTip:n("c/common/tooltip.js"),Menu:n("c/common/menu.js"),DataManager:n("c/common/data.js"),Animation:n("c/common/effects.js"),Advertisement:n("c/common/advertisement.js"),Html:n("c/common/html.js"),Site:n("c/common/site.js"),User:n("c/common/user.js"),Page:n("c/common/page.js"),ContentFolder:n("c/common/contentfolder.js"),ContentItem:n("c/common/contentitem.js"),Zone:n("c/common/zone.js"),Section:n("c/common/section.js"),Module:n("c/common/module.js"),DragDrop:n("c/common/drag.js"),C:n("c/common/commands.js"),PageLayouts:n("c/common/pagelayout.js")};Shr.L.forEach(o,function(e,t){Shr[t]||(Shr[t]=e)}),Shr.Components={jQueryUI:r("jQueryUI.js"),UpdateFrame:r("updateframe.js"),UpdateFrameHTML:"/shr/html/updateframe.html",jVideoPlayer:r("jvideoplayer.js"),htmlSlideShowJs:r("htmlslideshow.js"),_end:null},Shr.ImgSrc={attachment:t("attachment.gif"),blank:t("universalpicker/blank.gif"),blank2:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",checkmark:t("checkmark.gif"),edit:t("EditInformation.gif"),lock:t("lock.jpg"),onlinenow:t("onlinenow.gif"),pushpin:t("pushpin.gif"),progress:t("progress.gif"),reply:t("reply.gif"),restart:t("restart.gif"),topicAdd:t("topic_add.png"),vcard:t("vcard.gif"),warning:t("warning.gif"),avatar:t("avatar.gif"),playBlue:t("play_blue.png"),playOrange:t("play_orange.png"),jPlayerLargeIcon:t("VideoPlayer/jPlayerLargeIcon.png"),jPlayerLargeHoverIcon:t("VideoPlayer/jPlayerLargeHoverIcon.png"),jPlayerSmallIcon:t("VideoPlayer/jPlayerSmallIcon.png"),jPlayerSmallHoverIcon:t("VideoPlayer/jPlayerSmallHoverIcon.png"),whiteloader:t("whiteLoader.gif"),whiteloader2:t("whiteLoader2.gif"),sflyBtn:t("buttons/btn-sfly.png"),people:t("universalpicker/album_friends_p.jpg"),people2x:t("universalpicker/album_friends_p@2x.jpg"),shareSitesIcon:t("ShareSitesIcon.png")},Shr.FlashSrc={universalPicker:n("flash/universalpicker.swf"),imagePlayer:n("flash/imageplayer.swf")},Shr.StaticSrc={style:n("t/default/theme.css"),baseTheme:n("t/base/theme.css"),videoPlayerTheme:n("t/base/videoplayer.css"),htmlSlideShowCss:n("t/base/htmlslideshow.css"),smartAppBanner:n("t/base/SmartAppBanner.css")},Shr.Static2Src={editorEmptyFrame:Shr.A.static2Base+"html/editoremptyframe.htm?v=28",instagramResponse:"${scheme}//${host}/${path}?target=".substitute({scheme:"https:",host:"cdn.staticsfly.com",path:"shr/html/instagramconnect.html"}),rshHistoryFrame:Shr.A.static2Base+"html/historyframe.html?v=26",slideshowPopup:Shr.A.static2Base+"html/slideshow.html"},Shr.ServerCommands={fileUploader:Shr.A.appCmd+"fileuploader.swf?v=209",redirect:Shr.A.appCmd+"redirect",updateFrame:Shr.A.frameCmd+"updateframe"+("gecko"==Shr.UB.name?"1":"")+"?site="+Shr.A.windowId+"&donotOwnSession=true&v="+function(){var e=Shr.Components.UpdateFrame,t=e.indexOf("?v=");if(0<t)return e.substr(t+3);if(e.endsWith(".js")){var r=e.split("/"),n=r[r.length-1];return n.substr(0,n.length-3)}return 62}()},Shr.Dom.versionsLoaded()}()},function(e,t){var r,n,o,i,s,a,l,c,d,h,u,p,m,g,f,_,S,b,y,P,v,w,x,U;g=Shr.C,f=Shr.AR,Shr.P,_=Shr.S,S=Shr.B,b=Shr.A,y=Shr.N,Shr.U,P=Shr.L,v=Shr.Event,w=Shr.StyleManager,x=Shr.Dialog,U=window.Trace,Object.extend(x,{_formIdSuffix:"-form",_nextId:1,_init2:function(){v.addEventListener(window,"resize",x._onWindowResize),S.isIos||v.addEventListener(window,"scroll",x._onWindowScroll),Shr.StyleManager.renderStyle(x)},currentHeight:document.documentElement.clientHeight,currentWidth:document.documentElement.clientWidth,_onWindowResize:function(){if(x.sizeBackground(),x.currentHeight!=document.documentElement.clientHeight||x.currentWidth!=document.documentElement.clientWidth){var e=x.context&&x.context.did&&x.context.did;if(e){var t=x.getContext(e);t&&t.dialog&&t.dialog.reposition&&t.dialog.reposition()}}x.currentHeight=document.documentElement.clientHeight,x.currentWidth=document.documentElement.clientWidth},_onWindowScroll:function(){var e,t,r,n,o,i,s=x.dialogs,a=0,l=s&&s.length;if(l)for(;a<l;a++)(t=(e=s[a])&&Dom.get("dlg-"+e.did+"-frame"))&&(r=t.offsetHeight,n=Shr.DocumentEx.getClientHeight(),o=Shr.DocumentEx.getScrollTop(),i="0px",r<n&&(i=(n-r)/2+o+"px"),Shr.Animation&&Shr.AnimationType?Shr.Animation.tween(t,{top:i},.4,Shr.AnimationType.easeInCubic,null):Shr.Dom.setStyle(t,{top:i}),Shr.Dialog.sizeBackground())},_getNewDlg:function(e){return x.getDlgProperty("newDlg",e,x.newDlg)},getNewDlgTitle:function(e){return x.getDlgProperty("newDlgTitle",e,x.newDlgTitle)},_getNewDlgButtons:function(e){return x.getDlgProperty("newDlgButtons",e,x.newDlgButtons)},_getWhiteBackground:function(e){return x.getDlgProperty("whiteBackground",e,x.whiteBackground)},_getWidthResizable:function(e){return!x.getDlgProperty("noResizeWidth",e,x.getDlgProperty("noResize",e))},_getHeightResizable:function(e){return!x.getDlgProperty("noResizeHeight",e,x.getDlgProperty("noResize",e))},_formatCloseBox:function(e,t){var r=new Shr.StringBuilder;return Shr.CommandBar.renderImg(r.write,2,"Shr.Dialog.close("+e+","+Shr.Dialog.reason.close+")",{className:t,alt:"Close",style:{height:"17px",width:"18px",margin:"0"}}),(t?"<div class='${1}'>${0}</div>":"${0}").substitute([r.toString(),t])},_onOrientationChange:function(e){var t=[];Shr.B.isIos&&Shr.B.isIos<6&&(Shr.L.forEach(Shr.Dom.getChildrenByClass(document.body,"shrMobile"),function(e){"fixed"==Shr.Dom.getComputedStyle(e,"position")&&(t.push({shrMobile:e,style:{position:e.style.position,right:e.style.right,bottom:e.style.bottom,width:e.style.width,height:e.style.height}}),Shr.Dom.setStyle(e,{position:"absolute",right:"auto",bottom:"auto",width:e.offsetWidth+"px",height:e.offsetHeight+"px"}))}),t.length&&window.setTimeout(function(){Shr.L.forEach(t,function(e){Shr.Dom.setStyle(e.shrMobile,e.style)})},0))},_renderHeader:function(e,t,r){var n=x,o=t.did||0,i=n._getNewDlg(t),s=n._getWidthResizable(t)?"Resize":"",a=n.getDlgProperty("noChrome",t,!1),l=n._getWhiteBackground(t),c=n.getDlgProperty("noBgImages",t,!1),d=[t&&t.dialog&&t.dialog.className||"",t&&t.dlgClassName||"",i||l||c?"newDlg":"",a?"dlgNC":"",l||c?"dlgWB":"",c?"dlgWB2":""].join(" ");if(e("<div class='dlg-frame' id='dlg-",o,"-frame' style='z-index:",n.zIndex+2*n.dialogs.length,";' dragType='Move' sizeContext>"),r)return n._onOrientationChange.added||(Shr.Event.addEventListener(window,"orientationchange",n._onOrientationChange),n._onOrientationChange.added=!0),d=["shrMobile",t&&t.dialog&&t.dialog.className].join(" "),void e("<div class='${0}'>".substitute([d]));e("<div id='dlg-",o,"-fuCtrlDiv' style='position:absolute; display: none; z-index: 5000; width:1px; height:1px;'></div>","<table class='${0}' cellpadding=0 style='table-layout:fixed; width:100%;'>".substitute([d]),"<col class='dlg-lColOuter' width=3px />","<col class='dlg-lColInner' width=8px />","<col /><col />","<col class='dlg-rColInner' width=8px />","<col class='dlg-rColOuter' width=3px />","<tr class='dlg-header dragHandle'>","<td colspan=2 class='dlg-topleft' width=100%>&nbsp;</td>","<td class='dlg-top'>","<img class='dlg-image' id='dlg-",o,"-image' align=absMiddle style='display:none' />","<span class='dlg-title' id='dlg-",o,"-title'>Shutterfly</span>","</td>","<td class='dlg-top right' style='width: 33px;'>",n.getDlgProperty("noCloseBox",t,!1)?"&nbsp;":n._formatCloseBox(o),"</td>","<td colspan=2 class='dlg-topright'>&nbsp;</td>","</tr>","<tr>","<td class='dlg-left dragHandle' dragType='${0}' sizeType='w' style='cursor: ${1};'></td>".substitute([s,s?"w-resize":"default"]),"<td class='dlg-center' colspan=${0} />".substitute([t&&t.dialog&&t.dialog.colspan||4]),"<div class='dlg-bodyborder'>","<div class='dlg-body'>","<input id='dlg-",o,"-tabstart' class='dlg-tabstart' onfocus='Shr.Dialog._tabStartFocus(",o,");' onblur='Shr.Dialog._tabStartBlur(",o,");' tabindex='0' style='height:0;width:0;border:none;padding:0;' />")},_renderFooter:function(e,t,r){var n=x,o=t.did,i=n._getNewDlg(t),s=n.getDlgProperty("noChrome",t,!1),a=n.getDlgProperty("noBgImages",t,!1),l=n._getWidthResizable(t)?"Resize":"",c=n._getHeightResizable(t)?"Resize":"",d=c?"s":"",h=d+(l?"w":""),u=d+(l?"e":"");r?e("</div>"):e("<input id='dlg-",o,"-tabend' class='dlg-tabend' onfocus='Shr.Dialog._tabEndFocus(",o,");' onblur='Shr.Dialog._tabEndBlur(",o,");' tabindex='0' style='height:0;width:0;border:none;padding:0;' />","</div>","</div>","</td>","<td class='dlg-right dragHandle' dragType='${0}' sizeType='e' style='cursor: ${1};'></td>".substitute([l,l?"e-resize":"default"]),"</tr>","<tr class='dlg-footer'>","<td colspan=2 class='dlg-bottomleft dragHandle' dragType='${0}' sizeType='${1}' style='cursor: ${2};'>&nbsp;</td>".substitute([h?"Resize":"",h,h?h+"-resize":"default"]),"<td colspan=2 class='dlg-bottom dragHandle' dragType='${0}' sizeType='s' style='cursor: ${1};'>&nbsp;</td>".substitute([c,c?"s-resize":"default"]),"<td colspan=2 class='dlg-bottomright dragHandle' dragType='${0}' sizeType='${1}' style='cursor: ${2};'>".substitute([u?"Resize":"",u,u?u+"-resize":"default"]),i&&u?"<img class='dlg-sizer' src='${0}' />".substitute([Shr.ImgSrc.blank]):"&nbsp;","</td>","</tr>","</table>",s&&!n.getDlgProperty("noCloseBox",t,!1)?n._formatCloseBox(o,"dlgNCCB"):"",a?n._formatResizeHandles({n:c?"n":"",nw:(d?"n":"")+(l?"w":""),w:l?"w":"",sw:d+(l?"w":""),s:d,se:d+(l?"e":""),e:l?"e":"",ne:(d?"n":"")+(l?"e":"")}):"","</div>")},_formatResizeHandles:function(e){var t="";return Shr.B.isTouch||Shr.B.isIE&&!(9<=Shr.B.ieVersion)?(e.s||e.e)&&(t=Shr.Html.formatTag("div",{className:"dragHandle",dragtype:"Resize",sizetype:e.s+e.e})):Shr.L.forEach(["n","nw","w","sw","s","se","e","ne"],function(r){e[r]&&(t+=Shr.Html.formatTag("div",{className:"dragHandle",dragtype:"Resize",sizetype:e[r]}))}),Shr.Html.formatTag("DIV",{className:"dragHandles dragHandle"},t)},getContext:function(e){var t=x,r=[];Shr.Array.append(r,t.dialogs),Shr.Array.append(r,t.inlineDialogs);for(var n=0;n<r.length;n++){var o=r[n];if(o.did==e)return o}return null},swapContexts:function(e,t){var r=x;Shr.Array.remove(r.inlineDialogs,e),Shr.Array.add(r.inlineDialogs,t),r.context=t},_removeContext:function(e){for(var t=x.dialogs,r=0;r<t.length;r++)if(t[r]==e)return void Shr.Array.removeAt(t,r)},getForm:function(e){var t,r;return t="number"==typeof e?e:e.did,(r=Dom.get("dlg-"+t+x._formIdSuffix))&&"FORM"!=r.tagName&&(r=Shr.Dom.getParentByTag(r,"FORM")),r},show3:function(e){var t=x,r=(e=Object.extend({},e)).dialog;e.did=t._nextId,t._nextId++,Shr.Array.add(t.dialogs,e),w.renderStyle(r),setTimeout("Shr.Dialog._show4("+e.did+")",0)},_renderFormAndContent:function(e,t,r,n){if(r){var o=r.isInline?"":"return Shr.Dialog._onKeyUp(event);",i=x,s=r.did,a={fid:"dlg-"+s+"-target",formId:"dlg-"+s+i._formIdSuffix,did:s,cssName:r.cssName?"class='"+r.cssName+"'":""},l="<div id='dlgTitle-${did}' class=dlgTitle></div>";i._getNewDlg(r)||(l=Shr.Html.formatTag("div",{className:["newDlg",x.getDlgProperty("noBgImages",r,!1)?"dragHandle":""].join(" ")},l));var c="<form id='${formId}' name='${formId}' method='POST' target='${fid}' onsubmit='return Shr.Dialog._onSubmit(${did});'><div id='dlg-${did}-formbody' onkeydown='"+o+"' ${cssName}>"+(i.getNewDlgTitle(r)?l:""),d="</div><input name='av' type='hidden' /><input name='h' type='hidden' /><input name='t' type='hidden' /><input name='h2' type='hidden' /><iframe id='${fid}' name='${fid}' src='' style='width:0px;height:1px;border:0;'></iframe></form>",h="<${tagName} id='${formId}' ><div id='dlg-${did}-formbody' onkeydown='"+o+"' ${cssName}>"+(i.getNewDlgTitle(r)?l:"");a.tagName=x.getDlgProperty("altTagName",r),a.tagName&&(c=h,d="</${tagName}>"),e(c.substitute(a)),t&&t.renderContent&&t.renderContent(e,r),e(d.substitute(a))}},_updateFormElement:function(e,t,r){e.method=t.formMethod||"POST";var n=t.getFormAction?t.getFormAction(r):t.formAction;n?n.startsWith("http://")||n.startsWith("https://")||n.startsWith("//")?e.action=n:t.noPin?e.action=b.appCmd+n:e.action=b.cmd+n+"?site="+_.id+"&":e.action="",e.target=x.getDlgProperty("formTarget",r,"dlg-"+r.did+"-target"),e.encoding=t.formEncType||"application/x-www-form-urlencoded",e.enctype=e.encoding,e.elements.av.value=t.formVersion?t.formVersion.toString():"0"},_usesTextEditor:function(e){return!(!e||!e.uses)&&/texteditor/i.test(e.uses)},_initTextEditor:function(e,t){t&&x._usesTextEditor(e)&&Shr.TextEditor&&Shr.TextEditor.ensureInitialized&&Shr.TextEditor.ensureInitialized(t)},renderInline2:function(e,t){var r=x,n=(t=Object.extend({},t)).dialog;t.did=r._nextId,t.isInline=!0,r._nextId++,r.context=t,Shr.Array.add(r.inlineDialogs,t),w.renderStyle(n);var o=Dom.get;try{if(n&&!n.hide){t.renderError=!1,t.renderRedirect=null,t.renderRedirectContext=null;var i=new Shr.StringBuilder,s=i.write,a=t.did||0;if(r._renderFormAndContent(s,n,t),t.renderError)return;if(t.renderRedirect)return void r.show(t.renderRedirect,t.renderRedirectContext);var l=Dom.create("DIV",null,{id:"dlg-"+a+"-container",class:"dlg-inline"},i.toString()),c=o(t.container);Dom.set(c,"");var d=t.inlineWidth||n.inlineWidth||(n.getWidth?n.getWidth(t):n.width);P.isNumber(d)&&(l.style.width=d+"px"),c.appendChild(l);var h=r.getForm(a);r._updateFormElement(h,n,t),r._initTextEditor(n,c),n.onLoad&&n.onLoad(h,t)}t&&t.onLoadComplete&&t.onLoadComplete(t)}catch(e){alert("Error displaying Dialog inline.  "+U.formatException(e)),Console.write("Error displaying Dialog inline.  "+U.formatException(e)),e.stack&&Console.write(e.stack)}},_show4:function(e){var t,r=x,n=r.context=r.getContext(e)||{},o=n.dialog,i=r._usesTextEditor(o),s=Dom.get,a=(n.onload&&n.onload.args&&n.onload.args.noLogging||o.noLogging,r.getDlgProperty("mobileFirst",n,!1)&&(Shr.B.isTouch||!Shr.WindowEx.hasWidth(r.getDlgProperty("mobileWidth",n,r.handheldWidth))));try{if(o&&!o.hide){Dom.showNativeControls(!1),P.isString(Shr.Menu)||Shr.Menu.forceHideMenu(),n.renderError=!1,n.renderRedirect=null,n.renderRedirectContext=null;var l=new Shr.StringBuilder,c=l.write;if(r._renderHeader(c,n,a),r._renderFormAndContent(c,o,n,a),r._renderFooter(c,n,a),n.renderError)return void r.close(e);if(n.renderRedirect)return r.close(e),void r.show(n.renderRedirect,n.renderRedirectContext);var d=Dom.create("DIV",null,{id:"dlg-"+e+"-container"},l.toString()),h=s("dlg-container");h.appendChild(d);var u=r.getForm(e),p=s("dlg-"+e+"-frame"),m=o.getWidth?o.getWidth(n):o.width||300;"number"==typeof m&&(m+="px"),p.style.width=m;var g=s("dlg-"+e+"-image");if(g){var f=o.getImage?o.getImage(n):o.image;g.style.display=f?(Shr.ImageEx.setSrc(g,b.staticBase+f),""):"none"}var _=o.getTitle?o.getTitle(n):o.title||"Shutterfly";r.updateTitle(e,_,n),r._updateFormElement(u,o,n),Shr.Dom.setLocation(p,0,0),t=p.style.visibility||"",p.style.visibility="hidden",Dom.show(p),Dom.centerInBounds(p,r.getDlgProperty("bounds",n,r.bounds));var S=n.tabStrips;if(S&&0<S.length)for(var y=0;y<S.length;y++)S[y].onLoad(i);else r._initTextEditor(o,h);n.noFocus||Dom.setFormInputFocus(u)||(r._settingFocus=!0,Dom.tryFocus("dlg-"+n.did+"-tabstart")),o.onLoad&&o.onLoad(u,n),n&&n.onLoadComplete&&n.onLoadComplete(n),p.style.visibility=t}}catch(t){var v="Error displaying Dialog.  "+U.formatException(t);Console.write(v),t.stack&&Console.write(t.stack),alert(v),r.close(e)}var w=Dom.get("dlg-background");w&&(w.style.cursor=""),w&&(w.style.zIndex=Math.max(r.zIndex+1,parseInt(w.style.zIndex)||0))},updateTitle:function(e,t,r){x.getNewDlgTitle(r)?(Dom.set("dlg-"+e+"-title",""),Dom.set("dlgTitle-"+e,t)):Dom.set("dlg-"+e+"-title",t)},submitForm:function(e){var t=x;t._onSubmit(e)&&t.continueSubmit(e)},_onSubmit:function(e){var t=x,r=!0;if(t._ignoreSubmit)return r;var n=t.getContext(e)||{},o=t.getForm(e),i=n.dialog||{};if(Dom.disableButton(o.go),Dom.disableButton(o.goAndNext),i.disableButtons&&i.disableButtons(o,n),i.onValidate){var s=new Shr.ValidationContext(o);i.onValidate(s,o.elements,n);var a=s.errors.join("<br/>"),l=s.messages.join("<br/>");a?(P.forEach(s.errorsHash,function(e,t){Dom.addClass(o,"dlgErr-"+t)}),l&&(a+="<br/>"+l),i.renderValidationError?i.renderValidationError({vc:s,fe:o.elements,errs:a,msgs:l,d:i,c:n}):g.alert(s.header+a+s.footer,i.getTitle?i.getTitle(n):i.title||"Shutterfly",s.field),r=!1):l?r=t.confirm(l+"<br/><br/>Do you wish to continue?"):P.forEach(s.fieldsHash,function(e,t){Dom.removeClass(o,"dlgErr-"+t)})}return r||(Dom.enableButton(o.go),Dom.enableButton(o.goAndNext),i.enableButtons&&i.enableButtons(o,n)),r&&i.onSubmit&&(r=i.onSubmit(o,n)),o.t.value=f.t,o.h.value=f.h,o.h2.value=f.h2,r},continueSubmit:function(e){var t=x,r=(e?t.getContext(e):t.context)||{},n=t.getForm(r);n.t.value=f.t,n.h.value=f.h,n.h2.value=f.h2,t._ignoreSubmit=!0;try{n.submit()}catch(e){U.error("Error submitting form.  ",e)}t._ignoreSubmit=!1},addNext:function(e){var t=x.getContext(e);t&&(t.addNext=!0)},onFrameResponse:function(e){var t=x,r=t.context||{},n=t.getForm(r),o=r.dialog||{},i=!0,s=!1,a={};if(e&&(e.error?(e.error.message=e.error.message||e.error.clientMessage,o.onError?o.onError(e.error,r):g.alert(e.error.message),i=!1):((a=e.result||{}).message&&g.alert(a.message),a.noClose&&(i=!1),r.addNext&&(s=!(i=r.addNext=!1)),o.onResponse&&(i=0!=o.onResponse(a,r)),r.callback&&r.callback(r.callbackArgs))),a.next&&(t.show(a.next),i=!1),i?o.reload||r.reload?y.reload():t.close(r.did,t.reason.ok):n&&(Dom.enableButton(n.go),Dom.enableButton(n.goAndNext),o.enableButtons&&o.enableButtons(n,r)),o&&s){var l=new Shr.StringBuilder;o.renderContent&&o.renderContent(l.write,r),Dom.set("dlg-"+r.did+"-formbody",l.toString());var c=Dom.get("dlg-"+r.did+"-frame");c&&Shr.TextEditor&&Shr.TextEditor.ensureInitialized&&Shr.TextEditor.ensureInitialized(c),Dom.setFormInputFocus(n)||(t._settingFocus=!0,Dom.tryFocus("dlg-"+r.did+"-tabstart")),o.onLoad&&o.onLoad(n,r)}},_clearSettingFocus:function(){x._settingFocus=!1},_tabStartFocus:function(e){var t=x;t._settingFocus?t._settingFocus=!1:(t._settingFocus=!0,Dom.tryFocus("dlg-"+e+"-tabend"))},_tabStartBlur:function(e){setTimeout(x._clearSettingFocus,100)},_tabEndFocus:function(e){var t=x;t._settingFocus?t._settingFocus=!1:(t._settingFocus=!0,Dom.tryFocus("dlg-"+e+"-tabstart"))},_tabEndBlur:function(e){setTimeout(x._clearSettingFocus,100)},reason:{cancel:0,ok:1,close:-2,swap:-1},close:function(e,t){var r,n=x,o=n.getContext(e)||{},i=o.dialog||{};if(o.result=t||n.reason.cancel,(!i.onClose||i.onClose(o,t))&&(!o.onClose||((r=o.onCloseArgs||{}).result=t,o.onClose(r)))){o.reloadOnClose&&y.reload(),n._settingFocus=!0,Dom.tryFocus("dlg-"+o.did+"-tabstart"),n._removeContext(o),window.setTimeout(function(){Dom.removeNode("dlg-"+o.did+"-container")},0);var s=Dom.get("dlg-background"),a=n.dialogs.length,l=Shr.Array.getLength(n.inlineDialogs);if(o.isInline)n.context=n.inlineDialogs[l-1];else if(a<=0)Dom.hide(s),Dom.showNativeControls(!0),n.context=null,l&&(n.context=n.inlineDialogs[l-1]);else{s.style.zIndex=n.zIndex+2*a,n.context=n.dialogs[a-1];var c=Dom.get("dlg-"+n.context.did+"-container");c&&Dom.showNativeControls(!0,c)}if(t!=n.reason.swap&&o.closeCallback&&((r=o.closeCallbackArgs||{}).result=o.result,o.closeCallback(r,o)),i.contentDirtyArgs){var d=i.contentDirtyArgs(r,o);d&&Shr.Page.onContentDirty.raise(d)}}},_onKeyUp:function(e){var t=x,r=t.context||{},n=!0;return 27==v.getEvent(e).keyCode&&(t.close(r.did,t.reason.close),v.stop(e),n=!1),n},renderStyle:function(e){var t=[".dlg-header {height: 27px; white-space: nowrap;}",".dlg-topleft, .dlg-topright, .dlg-bottomleft, .dlg-bottomright {width: 11px; background: ${0}}".substitute([Shr.Theme.url("base/dlg/sfly-corner.png")]),".ie6 .dlg-topleft, .ie6 .dlg-topright {background: url(dlg/sfly-corner.gif);}".substitute([Shr.Theme.url("base/dlg/sfly-corner.gif")]),".dlg-top, .dlg-bottom {background: ${0} repeat-x;}".substitute([Shr.Theme.url("base/dlg/sfly-vert.png")]),".ie6 .dlg-top {background: ${0};}".substitute([Shr.Theme.url("base/dlg/sfly-corner.gif")]),".dlg-topright {background-position: -20px 0px;}",".dlg-center {background-color: #fff; color: #333; overflow:hidden;}",".dlg-left, .dlg-right {background: ${0} repeat-y; width: 3px; cursor: w-resize;}".substitute([Shr.Theme.url("base/dlg/sfly-horiz.png")]),".dlg-right {background-position: -28px 0px; width: 3px; cursor: e-resize;}",".dlg-footer {font-size:1px; height: 3px; cursor: s-resize;}",".dlg-bottomleft {background-position: 0 -36px; cursor: sw-resize;}",".dlg-bottom {background-position: 0 -36px; cursor: s-resize;}",".dlg-bottomright {background-position: -20px -36px; cursor: se-resize;}",".dlg-content-border {border: 1px solid #e2e2e2;}",".dlg-content-border-bottom {border-bottom: 1px solid #e2e2e2;}",".dlg-image {margin: 0 4px 2px 0; width: 16px; height: 16px;}",".dlg-title {color: #fff; font-weight:bold;}",".dlg-sfly {color: #f90;}","H2.dlg-sfly {font-size: 16px; font-weight: bold;}",".ie6 H2.dlg-sfly {position: relative; top: 0;}","H3.dlg-sfly {font-size: 13px; font-weight: bold;}",".dlg-step1, .dlg-step2 {width: 16px; height: 16px; vertical-align: middle; margin-right: 5px;}",".dlg-step1 {background-image: ${0};}".substitute([Shr.Theme.url("base/dlg/img_1a.gif")]),".dlg-step2 {background-image: ${0};}".substitute([Shr.Theme.url("base/dlg/img_1a.gif")]),"#dlg-background {display: none; position: absolute; z-index: 101; top: 0; left: 0; width: 100%; height: 100%; background: #fff; opacity: .5;}",".dlg-frame {display:none; position:absolute; z-index:102;}",".dlg-bodyborder {width:100%;}","#dlg-container .dlg-content {margin: 9px; background-color: #fff; }","#dlg-container .dlg-content a:link, #dlg-container .dlg-content a:visited, #dlg-container .dlg-buttons a:link, #dlg-container .dlg-buttons a:visited {color: #6666cc;}",".dlg-buttons {padding: 9px; text-align:right; white-space: nowrap; border-top: 1px solid #D2D2D2;}",".btn-import {cursor: pointer; margin-top: 0px; margin-left:10px; background: url(${0}) no-repeat 0 -18px; width:108px; height: 18px; vertical-align: middle;}".substitute([Shr.A.imageUrl("btn-send-dialog.png")]),".dlg-columns {display:inline-block; background: ${0}; width: 106px; height: 74px; cursor: pointer;}".substitute([Shr.Theme.url("base/dlg/columns.gif")]),"#dlg-container TABLE {border-collapse: collapse; border-spacing: 0;}",".newDlg .dlg-tabstart, .newDlg .dlg-tabend {display: block;}",".newDlg .dlg-lColOuter {width: 2px !important;}",".newDlg .dlg-lColInner {width: 8px !important;}",".newDlg .dlg-rColInner {width: 5px !important;}",".newDlg .dlg-rColOuter {width: 9px !important;}",".newDlg .dlg-header {height: 23px;}",".newDlg .dlg-top {background: transparent ${0} repeat-x left -14px;}".substitute([Shr.Theme.url("base/dlg/newDlgVSlice.png")]),".newDlg .dlg-title {margin-left: -4px; color: #669;}",".ie7 .newDlg .dlg-title, .ie6 .newDlg .dlg-title, .ie9 .newDlg .dlg-title {margin-left: 0;}",".newDlg .dlg-topleft {background: transparent ${0} no-repeat left top;}".substitute([Shr.Theme.url("base/dlg/newDlg.png")]),".newDlg .dlg-topright {background: transparent ${0} no-repeat right top;}".substitute([Shr.Theme.url("base/dlg/newDlg.png")]),".newDlg .dlg-top .cb-img {background-image: ${0}; background-position: center center !important; position: relative; top: 2px; right: 2px;}".substitute([Shr.Theme.url("base/dlg/newDlg.png")]),".gecko .newDlg .dlg-top .cb-img {height: 18px !important;}",".newDlg .dlg-left {background: #7777b3 ${0} no-repeat 1px -37px;}".substitute([Shr.Theme.url("base/dlg/newDlgVSlice.png")]),".newDlg .dlg-right {background: transparent ${0} repeat-y right top;}".substitute([Shr.Theme.url("base/dlg/newDlgHSliceR.png")]),".newDlg .dlg-center {background: #fff ${0} repeat-x left -37px;}".substitute([Shr.Theme.url("base/dlg/newDlgVSlice.png")]),".newDlg .dlg-footer {height: 14px;}",".newDlg .dlg-bottom {background: transparent ${0} repeat-x left top;}".substitute([Shr.Theme.url("base/dlg/newDlgVSlice.png")]),".newDlg .dlg-bottomleft {background-image: ${0}; background-position: left bottom;}".substitute([Shr.Theme.url("base/dlg/newDlg.png")]),".newDlg .dlg-bottomright {position: relative; background-image: ${0}; background-position: right bottom; background-repeat: no-repeat;}".substitute([Shr.Theme.url("base/dlg/newDlg.png")]),".newDlg .dlg-bodyborder {margin: 0 6px 33px 4px; border: 1px solid #fff; width: auto;}",".newDlg .dlg-body {border: 1px solid #7777b3; background: #fff; position: relative;}",".newDlg .dlg-buttons {position: absolute; top: 100%; right: 5px; border: 0; width: 97%;}",".newDlg .dlg-buttons .shr-btn .button {font-size: 12px;}",".newDlg .tabList {margin-left: 10px;}",".newDlg .tabList LI {position: relative; top: 1px;}",".newDlg .tabList LI A {margin-right: -1px;}",".newDlg .tabInner {line-height: 25px;}",".newDlg .tabLine {border-color: #bab9cb;}",".newDlg .tab         {background-image: ${0};}".substitute([Shr.Theme.url("base/dlg/newDlgTabLeft.png")]),".newDlg .tabSelected {background-image: ${0};}".substitute([Shr.Theme.url("base/dlg/newDlgSelectedTabLeft.png")]),".newDlg .tab         .tabOuter {background-image: ${0};}".substitute([Shr.Theme.url("base/dlg/newDlgTabRight.png")]),".newDlg .tabSelected .tabOuter {background-image: ${0};}".substitute([Shr.Theme.url("base/dlg/newDlgSelectedTabRight.png")]),".newDlg .tab         .tabInner {background-image: ${0};}".substitute([Shr.Theme.url("base/dlg/newDlgTabMiddle.png")]),".newDlg .tabSelected .tabInner {background-image: ${0};}".substitute([Shr.Theme.url("base/dlg/newDlgSelectedTabMiddle.png")]),".dlg-sizer {float: left; margin: -19px 0 0 -11px; width: 11px; height: 11px; background: transparent ${0} no-repeat left center;}".substitute([Shr.Theme.url("base/dlg/newDlg.png")]),".newDlg .dlgTitle {margin: 15px 0 15px 10px; color: #ff9900; font-family: arial, helvetica, sans-serif; font-size: 18px;}","#dlg-container .newDlg .dlg-content {margin: 0 9px 9px 10px;}",".dlgNC .dlg-lColOuter, .dlgNC .dlg-lColInner, .dlgNC .dlg-rColOuter, .dlgNC .dlg-rColInner {width: 0px !important;}",".dlgNC .dlg-header, .dlgNC .dlg-footer {display: none;}",".dlgNC .dlg-right, .dlgNC .dlg-left {width: 0;}",".dlgNC FORM IFRAME {height: 0 !important;}",".dlgNC .dlg-center {background-image: none;}",".dlgNC .dlg-body {border-style: none;}",".dlgNC .dlg-bodyborder {border-style: none; margin: 0;}",".dlgNCCB {position: absolute; right: -15px; top: -12px; background: transparent ${0} no-repeat center center;}".substitute([Shr.Theme.url("base/dlg/dlgNCClose.png")]),".dlgNCCB .cb-img {width: 27px !important; height: 28px !important; background-image: none !important;}",".dlgWB .dlg-header, .dlgWB .dlg-footer {height: 29px;}",".dlgWB .dlg-lColOuter {width: 21px !important;}",".dlgWB .dlg-rColOuter {width: 24px !important;}",".dlgWB .dlg-left {background: transparent ${0} repeat-y left top;}".substitute([Shr.Theme.url("base/dlg/dlgWBHSliceL.png")]),".dlgWB .dlg-title {visibility: hidden;}",".dlgWB .dlg-top, .dlgWB .dlg-bottom {background-image: ${0};}".substitute([Shr.Theme.url("base/dlg/dlgWBVSlice.png")]),".dlgWB .dlg-top {background-position: left top;}",".dlgWB .dlg-bottom {background-position: left bottom;}",".dlgWB .dlg-center {background-image: none;}",".dlgWB .dlg-topleft, .dlgWB .dlg-topright, .dlgWB .dlg-bottomleft, .dlgWB .dlg-bottomright, .dlgWB .dlg-top .cb-img {background-color: transparent; background-image: ${0};}".substitute([Shr.Theme.url("base/dlg/dlgWB.png")]),".dlgWB .dlg-right {background-image: ${0};}".substitute([Shr.Theme.url("base/dlg/dlgWBHSliceR.png")]),".dlgWB .dlg-body {border-style: none;}",".dlgWB .dlg-top .cb-img {top: 22px; right: -1px; z-index: 2;}",".dlgWB .dlg-sizer {margin-top: -21px; margin-left: -8px;}",".dlgWB .dlg-buttons { text-align: left; right: -5px;}",".dlgWB .dlg-content .dlg-buttons {right: 0;}",".dlgWB .dlg-bodyborder {margin: 0 6px 40px 8px;}",".shrMobile {position: fixed; background-color: #fff; top: 0 !important; bottom: 0 !important; left: 0 !important; right: 0 !important;}",""];Shr.B.isIE&&(t=t.concat(['#dlg-background {-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=50)"; filter: alpha(opacity=50);}',""])),t.splice(-1,0,".input-grid {border-spacing: 2px; border-collapse: separate;}",".ie .input-grid {border-spacing: 5px; border-collapse: separate;}",".input-row {vertical-align: top;}",".input-vspace {height: 10px;}",".input-l-text, .input-l-password, .input-l-select, .input-l-textarea, .input-l-rte, .input-l-radio, .input-l-checkbox, .input-l-file, .input-l-content, .input-l-email {text-align: right;}",".input-l-text, .input-l-email {padding-top: 5px;}",".ie .input-l-text, .ie .input-l-email {padding-top: 6px;}",".safari .input-l-text, .safari .input-l-email {padding-top: 6px;}",".input-l-password {padding-top: 5px;}",".ie .input-l-password {padding-top: 6px;}",".safari .input-l-password {padding-top: 6px;}",".input-l-select {padding-top: 4px;}",".safari .input-l-select {padding-top: 3px;}",".input-g-select {padding-top: 6px;}",".input-l-textarea {padding-top: 4px;}",".ie .input-l-textarea {padding-top: 5px;}",".input-l-rte {padding-top: 5px;}",".input-l-radio {}",".input-l-checkbox {}",".ie .input-l-checkbox {padding-top: 1px;}",".input-l-file {padding-top: 4px;}",".ie .input-l-file {padding-top: 6px;}",".input-l-content {padding-top: 2px;}",".input-v-text, .input-v-password, .input-v-select, .input-v-textarea, .input-v-rte, .input-v-radio, .input-v-checkbox, .input-v-file, .input-v-content {padding-bottom: 4px;}",".input-v-content {padding-top: 2px;}",".input-radio {margin: 0 3px 0 5px; vertical-align: middle;}",".ie .input-radio {margin: 0;}",".input-radio-label {vertical-align: middle;}","label.input-radio-label {white-space: normal;}",".input-radio-height {line-height: 20px; vertical-align: middle;}",".input-l-radio label {vertical-align: middle;}",".input-v-radio {padding-top: 2px;}",".input-checkbox {margin: 0 6px 0 5px; vertical-align: middle;}",".ie .input-checkbox {margin: 0 4px 0 0;}",".input-checkbox-label {vertical-align: middle;}","label.input-checkbox-label {white-space: normal;}",".input-checkbox-height {line-height: 20px; vertical-align: middle;}",".input-l-checkbox label {vertical-align: middle;}",".input-content {padding-left: 4px;}",".input-help {padding-top: 3px; color: #888;}",".input-v-content .input-help, .input-v-checkbox .input-help, .input-v-radio .input-help {padding-left: 4px;}",".input-text-top {padding: 0 0 2px 4px;}",".input-text-left {padding-left: 4px; vertical-align: 1px;}",".ie .input-text-left {vertical-align: 4px;}",".input-text-right {vertical-align: 1px;}",".ie .input-text-right {vertical-align: 4px;}",".outdent .input-radio-choice, .outdent .input-checkbox-choice, .outdent DIV.input-help {padding-left: 21px;}",".outdent .input-radio-choice INPUT, .outdent .input-checkbox-choice INPUT {margin-left: -16px;}",".ie .outdent .input-radio-choice INPUT, .ie .outdent .input-checkbox-choice INPUT {margin-left: -21px;}",""),(!Shr.B.isIE||8<Shr.B.ieVersion)&&(t.splice(-1,0,".dlgWB2 .dlg-sizer {margin-top: -14px; margin-left: -7px;}","TABLE.dlgWB2 {border: 10px solid #fff; border-radius: 10px; border-collapse: separate !important; box-shadow: 0 0 25px #333;}",".dlgWB2 .dlg-left, .dlgWB2 .dlg-top, .dlgWB2 .dlg-bottom, .dlgWB2 .dlg-right, .dlgWB2 .dlg-topleft, .dlgWB2 .dlg-topright, .dlgWB2 .dlg-bottomleft, .dlgWB2 .dlg-bottomright, .dlgWB2 .dlg-top .cb-img {background: #fff;}",".dlgWB2 .dlg-lColOuter {width: 5px !important;}",".dlgWB2 .dlg-rColOuter {width: 5px !important;}",".dlgWB2 .dragHandle .dlgTitle {line-height: 2.5em; text-align: left; padding: 0; margin: 0; color: ${0};}".substitute([Shr.Style.parameters.colors.sfly]),".dlgWB2 > COLGROUP, .dlgWB2 .dlg-header, .dlgWB2 .dlg-footer, .dlgWB2 .dlg-left, .dlgWB2 .dlg-right {display: none;}",".dlg-frame .dragHandles {height: 20px; margin-bottom: -20px;}",".dlg-frame .dragHandles > .dragHandle {position: absolute; top: 0; bottom: 0; left: 0; right:0;}",'.dlg-frame .dragHandles > .dragHandle[sizetype="n"] {cursor: n-resize; height: 5px; left: 5px; right: 5px; bottom: auto;}','.dlg-frame .dragHandles > .dragHandle[sizetype="nw"] {cursor: nw-resize; width: 5px; height: 5px; right: auto; bottom: auto;}','.dlg-frame .dragHandles > .dragHandle[sizetype="ne"] {cursor: ne-resize; width: 5px; height: 5px; left: auto; bottom: auto;}','.dlg-frame .dragHandles > .dragHandle[sizetype="w"] {cursor: w-resize; width: 5px; right: auto; top: 5px; bottom: 5px;}','.dlg-frame .dragHandles > .dragHandle[sizetype="e"] {cursor: e-resize; width: 5px; right: -5px; left: auto; top: 5px; bottom: 15px;}','.dlg-frame .dragHandles > .dragHandle[sizetype="sw"] {cursor: sw-resize; width: 5px; height: 5px; right: auto; top: auto;}','.dlg-frame .dragHandles > .dragHandle[sizetype="s"] {cursor: s-resize; height: 5px; left: 5px; right: 15px; top: auto;}','.dlg-frame .dragHandles > .dragHandle[sizetype="se"] {cursor: se-resize; width: 15px; height: 15px; left: auto; top: auto;}',""),Shr.B.isIE&&t.splice(-1,0,".dlgWB2 .dlg-topleft {border-radius: 10px 0 0 0;}",".dlgWB2 .dlg-topright {border-radius: 0 10px 0 0;}",".dlgWB2 .dlg-bottomleft {border-radius: 0 0 0 10px;}",".dlgWB2 .dlg-bottomright {border-radius: 0 0 10px 0;}","")),e(t.join("\n"))}}),x._init2(),Shr.Dialog2=(r=Shr.Dialog,n=Shr.L.getMaxDate().getFullYear(),o={_L10N:{errRecurInterval:"Please enter a number, between ${min} and ${max} ${unit}, for the repeats ${unit2} frequency.",errRecurByDay:"Please select at least one day of the week for the event to repeat on.",errUntil:"Repeat until date must be after the end date.",errMaxDate:"The ${0}'s year must be less than "+n},renderDeleteSection:function(e){var t="";return e&&(!e.s.permissions.del||e.s.isItemPage||e.s.isFolderPage||e.module.noDeleteSection||e.s.deleted||e.module.noDeleteSection||(t="<input class=inputButton style='float:left;width:100px;'  type=button value='Delete Section' onclick='Shr.Dialog.close("+e.context+");Shr.Section.deleteSection("+e.s.nodeId+");return false;' />")),t},renderButtons:function(e,t,r,n,i){var s={label:r||"OK"};n&&(s.atts={tabindex:n}),o.renderCustomButtons(e,t,[s],null,i)},renderAddButtons:function(e,t,r){var n=[{label:"Add"}];r&&n.push({label:"Add & Next",name:"goAndNext",atts:{onclick:"Shr.Dialog.addNext('"+t.did+"');"}}),o.renderCustomButtons(e,t,n)},renderEditButtons:function(e,t,r){o.renderCustomButtons(e,t,[{label:"Save"}],null,r)},renderCustomButtons:function(e,t,n,o,i){var s=null;if(!n)return"";e||(e=(s=new Shr.StringBuilder).write),o=o||{};var a,l,c=0,d=n[Shr.Array.getLength(n)-1],h=d&&d.atts&&d.atts.tabindex||0,u=o.onCancel||"Shr.Dialog.close("+t.did+");",p=n.length,m=r._getNewDlgButtons(t),g=Shr.Dialog2.renderDeleteSection(i);for(e("<div class='dlg-buttons'>"),e(g),c=0;c<p;c++)l=(a=n[c]).atts||{},"html"in a?e(a.html):m?e(Shr.SflyButton.format(a.label||"Save",Object.extend(l,{name:a.name||"go",type:a.type||"submit"}))):e("<input name='",a.name||"go","'  class='inputButton ",l.class||"","' type='",a.type||"submit","' ",Shr.Html.attribute("value",a.label||"Save")," ",Shr.Html.formatAttributes(l)," />&nbsp;");return o.noCancel||e(m?Shr.SflyButton.format(o.closeLabel||"Cancel",{color:"purple",onclick:u,tabindex:h?"tabindex='${0}'".substitute([h]):""}):"<input class='inputButton' type='button' value='${0}' onclick='${1}' ${2}/>".substitute([o.closeLabel||"Cancel",u,h?"tabindex='${0}'".substitute([h]):""])),e("<br style='clear: both;' />","</div>"),s?s.toString():""},renderBorderTab:function(e,t,r,n){var i;i=t&&t.sectionBorder?t.sectionBorder:r&&r.bid?r.bid:n&&n.sectionBorder?n.sectionBorder:"";var s=o._renderBorderOption;e("<div class=dlg-content>","<p class='helpLabel'>"),e(t?"This screen allows you to specify the default border style to use for Sections in this site.":r?"This screen allows you to specify the border style to use for the Section.":"This screen allows you to specify the border style that is used for Sections on this page."),e("</p><table><tr>"),s(e,i,"","<span class='font-sys'>Default from "+(t?"Theme":r?"Page":"Site")+"</span>"),s(e,i,"n","<span class='font-sys'>No border</span>"),e("</tr>");for(var a=0,l=Shr.Theme.borders,c=0;c<l.length;c++)0==a&&e("<tr>"),s(e,i,l[c]),3==++a&&(e("</tr>"),a=0);a<3&&e("</tr>"),e("</table></div>")},_renderBorderOption:function(e,t,r,n){e("<td style='padding-left:20px;'>"),Shr.Html.inputRadio(e,"border",r,t),e("</td><td width='140px'>"),n?e(n):Shr.Section.render(e,{title:"Title",border:r,module:Shr.Modules.HtmlModule,layout:Shr.Modules.HtmlModule,text:"Content"}),e("</td>")},renderLayoutTab:function(e,t){e("<div class='dlg-content pageLayout'>","<p class='bold'>Select the number and size of the columns that will appear on the page.</p>","<p class='subTitle'>You can click-and-drag to re-arrange sections on your page.</p>","<table class='selectLayout'>","<tr class=input-row><td class=input-l-radio><label>Layout:</label></td><td>");var r=this._renderLayoutOption;e("<table class='innerTable'><tr>"),r(e,t,"w",0,0),r(e,t,"nw",-120,0),r(e,t,"wn",-240,0),e("</tr><tr>"),r(e,t,"ww",0,-80),r(e,t,"nwn",-120,-160),e("</tr></table>"),e("</td></tr>"),e("</table></div>")},_renderLayoutOption:function(e,t,r,n,o){e("<td>"),Shr.Html.inputRadio(e,"layout",r,t,{className:"alignTop",id:r}),e("<label class='hState' for='"+r+"'><span class='dlg-columns' style='background-position: "+n+"px "+o+"px'></span></label></td>")},renderSectionSharingTab:function(e,t){e("<div class=dlg-content>"),e("<div style='margin: 15px 0px 15px 9px;'>","<b>What can can each role do on this section?</b>","<span class='font-sys' style='margin-left:10px;'>","(<a href='' onclick='Shr.C.message({id:\"WhatsThisRoles\"});return false;'>what's this?</a>)</span>","</div>"),new Shr.PermissionsPanel(4,t.acl).render(e),e("</div>")},recurringItemValues:{},_recurFreq:"",_recurOccurrence:{1:"first",2:"second",3:"third",4:"fourth","-1":"last"},eventRecurTypes:{WEEKLY:"Weekly",MONTHLY:"Monthly",YEARLY:"Yearly"},_getDaysInMonth:function(e){for(var t={},r=Date.daysInMonth[e],n=1;n<=r;n++)t[n]=n;return t},_monthNames:Shr.Array.toLiteral(Date.monthNames),_getRecurUntilValue:function(e,t,r){if(e.recurUntil&&!r)return Date.fromAbsDateTimeString(e.recurUntil);var n=new Date(Date.fromAbsDateTimeString(e.start));return{WEEKLY:new Date(n).addMonths(3),MONTHLY:new Date(n).addYears(1),YEARLY:new Date(n).addYears(10)}[t]||null},initializeDefaultRecurrenceSettings:function(e){var t=o._getDefaultValues(e);Object.extend(o.recurringItemValues,t),o._recurFreq=o.recurringItemValues.recurFreq},_onRecurChange:function(e){var t=r.context,n=(r.getForm(t),Dom.get(t.did+".recurOptions"));o._recurFreq=e.value;var i=o._getRecurUntilValue(o.recurringItemValues,o._recurFreq,!0);i&&(o.recurringItemValues.recurUntil=i.toAbsDateTimeString()),Dom.set(n,o.formatRecurOptions(t))},onAfterStartDateChange:function(e){var t=r.context,n=r.getForm(t),i=Dom.get(t.did+".recurOptions"),s=Date.fromAbsDateTimeString(o.recurringItemValues.start),a="WEEKLY"==o._recurFreq,l=0,c=!1;a&&(o.recurringItemValues.recurByDay="",P.forEach(n.recurByDay,function(e,t){e&&e.checked&&(l++,e.value!=Date.tinyDayNames[s.getDay()]&&(c=!0),o.recurringItemValues.recurByDay+=(o.recurringItemValues.recurByDay?",":"")+e.value)})),o.recurringItemValues.start=e.toAbsDateTimeString(),a&&(1<l||c)||(o.recurringItemValues.recurByDay=Date.tinyDayNames[e.getDay()]),o.recurringItemValues.recurByDate=e.getDate(),o.recurringItemValues.recurByMonth=e.getMonth(),o.recurringItemValues.recurByMonthDay=e.getDate();var d=o._getRecurUntilValue(o.recurringItemValues,o._recurFreq,!0);d&&(o.recurringItemValues.recurUntil=d.toAbsDateTimeString()),Dom.set(i,o.formatRecurOptions(t))},_onRecurTypeClick:function(e){if(e){var t=Dom.get("byDateRow"),r=Dom.get("byDayRow"),n=Dom.getChildrenByClass(r,"recur"),o=Dom.getChildrenByClass(t,"recur"),i=[];Shr.Array.append(i,n),Shr.Array.append(i,o),P.forEach(i,function(e){e.disabled=!1});var s="true"==e.value?o:n;P.forEach(s,function(e){e.disabled=!0})}},_getDefaultValues:function(e){return e.start=e.start||new Date,e.end=e.end||new Date(e.start),{start:e.start.roundToNextHalfHour().toAbsDateTimeString(),end:e.end.addHours(1).roundToNextHalfHour().toAbsDateTimeString(),recurFreq:"WEEKLY",recurInterval:1,recurUntil:null,recurOccurrence:0,recurByDay:Date.tinyDayNames[e.start.getDay()],recurByDate:e.start.getDate(),recurByMonth:e.start.getMonth(),recurByMonthDay:e.start.getDate()}},formatRecurOptions:function(e){var t,r=o.recurringItemValues,n=new Shr.StringBuilder,i={},s=r.recurByDay.split(",");for(t=0;t<7;t++){var a=Date.dayNames[t],l=Date.tinyDayNames[t],c=-1<Shr.Array.indexOf(s,l);i[l]=a,n.write(Shr.Html.formatCheckbox({name:"recurByDay",value:l},{checked:c,label:a+"s"}))}n.write("<br style='clear: left;' />");var d={weeklyOptions:n.toString(),type:o._recurFreq.toLowerCase(),interval:Shr.Html.formatInput({name:"recurInterval",value:r.recurInterval,class:"recur",style:{width:"30px"}}),occurrence:Shr.Html.formatSelect("recurOccurrence",r.recurOccurrence,o._recurOccurrence,{class:"recur",disabled:!0}),optRecurDate:Shr.Html.inputRadio(null,"isByOccurrence",!1,!1,{onclick:"Shr.Dialog2._onRecurTypeClick(this)"}),optRecurDay:Shr.Html.inputRadio(null,"isByOccurrence",!0,!1,{onclick:"Shr.Dialog2._onRecurTypeClick(this)"}),monthlyDateChoices:o._getDaysInMonth(0),freq:Shr.Html.formatSelect("recurFreq",o._recurFreq,o.eventRecurTypes,{class:"recur",onchange:"Shr.Dialog2._onRecurChange(this);"})};switch(n.clear(),Shr.DateInput.renderDateInput(n.write,{name:"recurUntil"},o._getRecurUntilValue(r,o._recurFreq)),d.until=n.toString(),n.clear(),n.write("${freq}"),o._recurFreq){case"WEEKLY":n.write("<span class='${type}'> every ${interval} week(s) until ${until} on</span>","<div class='${type}-row weekly-checkboxes'>${weeklyOptions}</div>");break;case"MONTHLY":d.byDay=Shr.Html.formatSelect("recurByDay",s[0],i,{class:"recur",disabled:!0}),n.write("<span class='${type}'> every ${interval} month(s) until ${until} on</span>","<div class='${type}-row' id='byDayRow'>${optRecurDay} the ${occurrence} ${byDay} of the month</div>","<div class='${type}-row' id='byDateRow'>${optRecurDate} day ",Shr.Html.formatSelect("recurByMonthDay",r.recurByMonthDay,d.monthlyDateChoices,{class:"recur",disabled:!1})," of the month","</div>");break;case"YEARLY":d.byDay=Shr.Html.formatSelect("recurByDay",s[0],i,{class:"recur",disabled:!0}),d.byMonth=Shr.Html.formatSelect("recurByMonth",r.recurByMonth,o._monthNames,{class:"recur",disabled:!0}),n.write("<span class='${type}'> every ${interval} year(s) until ${until}</span>","<div class='${type}-row' id='byDateRow'>","${optRecurDate} every ",Shr.Html.formatSelect("recurByMonth",r.recurByMonth,o._monthNames,{class:"recur",disabled:!1,onchange:'Shr.Dialog2._setDaysInMonth(this, "recurByMonthDay", "recurByMonthDay")'}),"&nbsp;<span id='recurOnDate'>",Shr.Html.formatSelect("recurByMonthDay",r.recurByMonthDay,o._getDaysInMonth(r.recurByMonth),{class:"recur",disabled:!1,value:r.recurByMonthDay}),"</span>","</div>","<div class='${type}-row' id='byDayRow'>${optRecurDay} on the ${occurrence} ${byDay} of ${byMonth}</div>")}return n.toString().substitute(d)},validateRecurrence:function(e,t,r){var i=[],s=!1,a="weeks",l="weekly",c=52,d=n,h=t.recurUntil?Date.fromAbsDateTimeString(t.recurUntil.value):null;if(h&&h.getFullYear()>d&&e.addError(o._L10N.errMaxDate.substitute(["until field"])),o._recurFreq&&"WEEKLY"==o._recurFreq&&t.recurByDay&&(s=!1,P.forEach(t.recurByDay,function(e,t){e.checked&&(s=!0,i.push(t))}),s||e.addError(o._L10N.errRecurByDay)),t.recurInterval&&t.recurInterval.value){switch(o._recurFreq){case"YEARLY":a="years",l="yearly",c=10;break;case"MONTHLY":a="months",l="monthly",c=12}e.validateRange("recurInterval",t.recurInterval.value,1,c,o._L10N.errRecurInterval.substitute({unit:a,unit2:l,max:"${max}",min:"${min}"}))}}}),Shr.ValidationContext=function(e){this.form=e,this.fe=e.elements,this.errors=[],this.errorsHash={},this.fieldsHash={},this.messages=[],this.header="",this.footer="",this.field=null},Object.extend(Shr.ValidationContext.prototype,{addError:function(e,t){this.errors.push(e),t&&(this.addFieldName(t),this._setField(t.name),this.errorsHash[t.name]=e)},addMessage:function(e){this.messages.push(e)},hasErrors:function(){return 0<Shr.Array.getLength(this.errors)},addFieldName:function(e){this.fieldsHash[e.name]=e},getFieldObject:function(e,t){var r,n;return n=(r=Shr.L.isString(e)?this.form[t]:e)?{name:r.name||r.id,value:r.value}:{name:t,value:e},this.addFieldName(n),n},validateRequired:function(e,t,r){var n=this.getFieldObject(t,e),o=!0,i=n.value;return r=r||"You must specify a value for ${name}.",i&&(i=i.trim()),i||(this.addError(r.substitute({name:e}),n),this._setField(e),o=!1),o},validateRange:function(e,t,r,n,o){var i=this.getFieldObject(t,e),s=!0,a=i.value;return o=o||"The ${name} must be a number between ${min} and ${max}",/\d/.test(a)&&r<=a&&a<=n||(this.addError(o.substitute({name:e,min:r,max:n}),i),this._setField(e),s=!1),s},validateLength:function(e,t,r,n,o){var i=this.getFieldObject(t,e),s=!0,a=i.value;a=a||"";var l=null;return r&&a.length>r&&(l={largerSmaller:"larger",minMax:"maximum",limit:r.toN0()}),n&&a.length<n&&(l={largerSmaller:"smaller",minMax:"minimum",limit:n.toN0()}),l&&(Object.extend(l,{name:e,value:a.length.toN0(),min:n,max:r}),this.addError((o||"The ${name} size (${value}) is ${largerSmaller} than the ${minMax} size (${limit}).").substitute(l),i),this._setField(e),s=!1),s},validateRegEx:function(e,t,r){var n=this.getFieldObject(t,name),o=!0,i=n.value,s=this.regex[e]||e;return(i=i||"").match(s.exp)||(this.addError(s.msg.substitute(r),n),o=!1),o},regex:{},_setField:function(e){this.field=this.field||(Shr.L.isString(e)?this.form&&this.form[e]:e)}}),Shr.Validate={url:function(e){if(e){var t=e.value;if(t&&t.indexOf(":")<0){var r=window.location.protocol+"//";t.indexOf(".")<0&&!t.startsWith("http://")?e.value=r+"www."+t+".com/":e.value=r+t}}}},Shr.InputWriter=function(e){this._writer=e},i=Shr.Dialog,Object.extend(Shr.InputWriter,{setSelect:function(e,t,r){if(e){e=Dom.get(e);var n=new Shr.StringBuilder,o=new Shr.InputWriter(n.write);(r=r||{}).format=1,o.renderSelect(null,t,r),Dom.set(e.parentNode,n.toString())}},_onTestMapClick:function(e,t){var r=i.context||{},n=i.getForm(r)[t];n&&0<n.value.length?Shr.N.openWindow("//maps.google.com/?q="+n.value):g.alert("You must first enter an address.")}}),Object.extend(Shr.InputWriter.prototype,{renderStart:function(e,t){var r=this._writer,n="",o="";t&&(o=t.id?"id='"+(t.id||"")+"'":"",n=t.className||""),e&&r("<div class='dlg-content'>"),r("<table ",o," class='input-grid ",n,"'>")},renderEnd:function(e){var t=this._writer;t("</table>"),e&&t("</div>")},_renderStart:function(e,t,r){if(r.wide)this._renderWideStart(e,t,r);else if(1!=r.format){var n=this._writer,o=r.colSpan?" colspan="+(r.colSpan+1):"",i="";t&&(i="<label>${0}${1}</label>".substitute([t,r.hideColon?"":":"])),(!r.multiCol||r.multiCol&&r.firstCol)&&n("<tr ",r.trId?"id='"+r.trId+"'":""," class='input-row ",r.trClass||"",r.name?" "+r.name:"","'>"),n("<td class='input-l-",e,"'>",i,"</td>","<td class='input-v-",e,r.outdent?" outdent":"","'",r.last?" style='padding-bottom: 0'":"",o,">",r.prefix)}},_renderWideStart:function(e,t,r){1!=r.format&&(t&&(t+=":"),(0,this._writer)("<tr ",r.trId?"id='"+r.trId+"'":""," class='input-row ",r.trClass||"","'>","<td colspan='2'>","<div class='input-w-",e,"'><label>",t,"</label></div>","<div class='input-w-",e,"'",r.last?" style='padding-bottom: 0'":"",">"))},_renderEnd:function(e){if(e.wide)this._renderWideEnd(e);else if(1!=e.format){var t=this._writer;e.suffix&&t(e.suffix),e.help&&t("<div class='input-help'>",e.help,"</div>"),t("</td>"),(!e.multiCol||e.multiCol&&e.lastCol)&&t("</tr>")}},_renderWideEnd:function(e){if(1!=e.format){var t=this._writer;e.suffix&&t(e.suffix),e.help&&t("<div class='input-help'>",e.help,"</div>"),t("</div></td></tr>")}},renderSpacer:function(e){(0,this._writer)("<tr class='input-spacer'><td colspan='2' style='font-size:",e=Shr.L.isNumber(e)?e:"","px;'>&nbsp;</td></tr>")},renderFieldsetStart:function(e,t){(0,this._writer)("<fieldset class='fieldset'><legend>",e,"</legend>"),this.renderStart(t,{})},renderFieldsetEnd:function(e){var t=this._writer;this.renderEnd(e),t("</fieldset>")},renderRow:function(e,t,r){var n=this._writer;r=r||{},t?n("<tr "+Shr.Html.formatAttributes(r)+"><td>",e,"</td><td>",t,"</td></tr>"):n("<tr "+Shr.Html.formatAttributes(r)+"><td colspan=2>",e,"</td></tr>")},renderWideRow:function(e,t){(0,this._writer)("<tr><td colspan='",t=t||2,"'>",e,"</td></tr>")},renderText:function(e,t,r){var n=this._writer;t=t||{},(r=r||{}).name=t.name;var o=t.className||"";o+=-1==o.indexOf("input-text")?" input-text":"",t.className=o,this._renderStartEnd(t.type||"text",e,r,function(){n(Shr.Html.formatInput(t)),r.inputSuffix&&n("&nbsp;<span style='position: absolute; margin-top: -1px;' class='input-l-text'>",r.inputSuffix,"</span>"),r.showMapLink&&n(" <a href='' class='showLink input-l-text' onclick='Shr.InputWriter._onTestMapClick(this, \""+t.name+"\"); return false;' title='Opens a map for the specified address.'>Map</a>")})},renderContent:function(e,t,r){var n,o=this._writer;n=(r=r||{}).type||"content",this._renderStartEnd(n,e,r,function(){o("<div class='input-",n,"'>",t,"</div>")})},renderFile:function(e,t,r){var n=this._writer;r=r||{},(t=t||{}).className="input-file",t.type="file",this._renderStartEnd("file",e,r,Shr.Html.renderTag2,[n,"input",t])},renderSelect:function(e,t,r){var n=this._writer;r=r||{};var o=(t=t||{}).className||"";o+=-1==o.indexOf("input-select")?" input-select":"",t.className=o,this._renderStartEnd("select",e,r,function(){var e=r.choices,o=r.value,i=!1;if(e){n("<div><select ",Shr.Html.formatAttributes(t),">");var s=0;for(var a in e){var l=e[a];if(l&&l.optGroup)i&&n("</optgroup>"),n("<optgroup",Shr.Html.attribute("label",l.label),">"),i=!0;else if(l&&l.separator){var c="margin: 2px 3px; border-top: 1px solid #333;",d="";if(Shr.B.isIE||Shr.B.isSafari){c+="margin: 0; white-space: nowrap;",d=new Array(s);for(var h=0;h<s;h++)d[h]=45;d=String.fromCharCode.apply(String,d)}n("<optgroup label='${0}' style='${1}'></optgroup>".substitute([d,c]))}else{var u=a==o||"blank"==a&&!o;"blank"==a&&(a=""),n("<option",Shr.Html.attribute("value",a),u?" selected":"",">",l,"</option>"),l&&l.length>s&&(s=l.length)}}i&&n("</optgroup>"),n("</select> ",r.suffix?r.suffix:"","</div>")}r.suffix&&delete r.suffix})},renderRadio:function(e,t,r){var n=this._writer;e&&(e+=":"),r=r||{},(t=t||{}).className="input-radio";n("<tr class='input-row'>","<td class='input-l-radio'><div class='input-radio-choice'><span class='input-radio-height'>&nbsp;</span><label>",e,"</label></div></td>","<td class='input-v-radio ${0}'>".substitute([r.outdent?"outdent":""]));var o=r.choices;if(o)for(var i in o){var s,a=o[i];s=a&&a.label?(e=a.label,a.help):(e=a,null),n("<div class='input-radio-choice'><input class='input-radio' type='radio' id='${id}' ${value} ${atts} ${checked} /><label for='${id}' class='input-radio-label'>${label}</label>${help}<span class='input-radio-height'>&nbsp;</span></div>".substitute({id:Dom.getUniqueId(),value:Shr.Html.attribute("value",i),atts:Shr.Html.formatAttributes(t),checked:r.value==i?" checked":"",label:e,help:s?"<span class='input-help'> - ${0}</span>".substitute([s]):""}))}this._renderEnd(r)},renderCheckbox:function(e,t,r){var n=this._writer;r=r||{},(t=t||{}).className="input-checkbox";var o={};Object.extend(o,r),r.suffix&&delete r.suffix,this._renderStartEnd("checkbox",e,r,Shr.Html.formatCheckbox,[t,o,n])},renderTextEditor:function(e,t,r,n,o,i,s,a,l){(e=e||{}).label=e.label||"",this.renderSpacer(),this._renderStartEnd("rte",e.label,e,Shr.TextEditor.render,[this._writer,t,r,n,o,i,s,a,l])},renderTextArea:function(e,t,r){this._writer,r=r||{},(t=t||{}).className=r.wide?"input-widetextarea":"input-textarea",t.type="textarea",this._renderStartEnd(t.type,e,r,this._renderInput,[t,r.value])},renderWideTextArea:function(e,t,r){(r=r||{}).wide=!0,this.renderTextArea(e,t,r)},renderDateTime:function(e,t,r){(r=r||{}).label=r.label||"",this._renderStartEnd("text",r.label,r,Shr.DateInput.render,[this._writer,e,t,r])},renderStartEndDateTime:function(e){(e=e||{}).label=e.label||"",this._renderStartEnd("text",e.label,e,Shr.DateInput.renderStartEndDateTimeInput,[this._writer,e])},_renderStartEnd:function(e,t,r,n,o){var i=(r=r||{}).wide?this._renderWideStart:this._renderStart,s=r.wide?this._renderWideEnd:this._renderEnd;i.apply(this,[e,t,r]),n.apply(this,o||[]),s.apply(this,[r])},_renderInput:function(e,t){this._writer(Shr.Html.formatInput(e,t))},renderAutoComplete:function(e,t,r,n,o){(n=n||{}).label=n.label||"";var i=o?new o:new Shr.AutoComplete,s=this;return s._renderStartEnd("text",n.label,n,function(){i.render(s._writer,e,t,r,n)}),i},renderHidden:function(e,t,r){this._writer("<input name=",e," type=hidden",Shr.Html.attribute("value",t),r?Shr.Html.attribute("disabled",r):""," />")},setDefaultChoice:function(e,t,r){e[0]=e[t]+" ("+(r||"Default")+")"}}),Shr.AddPictureControl=(s=Shr.C,Shr.P,a=Shr.S,Shr.B,l=Shr.A,Shr.N,Shr.U,c=Shr.Dialog,d={_onChangePictureClick:function(e){var t=d._getContext(e),r={parentId:-1,beforeId:-1,destType:"profile",onAdd:function(t,r,n){c.close(this.did),d._updatePicture(n,e)},onUpload:function(t){t.siteId=a.id;var r=s.exec("users/getidfromupload",t);if(c.close(this.did),r.error)return!1;var n=r.result[0];return n&&(d._dirty=!0,d._editableImage=n.shutterflyId,d._updatePicture({shutterflyId:d._editableImage,nodeType:"shutterflyAItem"},e)),!0},showShareSitesTab:!0};(!Shr.B.isIE||9<=Shr.B.ieVersion)&&(r={useUPP:!0,singleSelect:!0,onOk:function(t,r,n){d._updatePicture(Object.extend(n[0],{nodeType:"shutterflyAItem",shutterflyId:r[0]}),e)},logData2:t.logData2}),s.addPictures(r)},_onClearPictureClick:function(e){var t=c.context,r=(c.getForm(t),d._getContext(e)),n=Dom.get(r.photoContainer);n&&(Dom.set(n,d._emptyImage.substitute(r)),Dom.hide(r.clearImageId)),r.cbOnClear&&r.cbOnClear(r)},_getContext:function(e){return d._instances[e]},_updatePicture:function(e,t){var r=e,n=d._getContext(t);s.updatePicture({cropWidth:n.cropWidth,cropHeight:n.cropHeight,imageEditorWidth:n.imageEditorWidth,imageEditorHeight:n.imageEditorHeight,wellPicture:r,wellInfo:{w:350,h:250,imgSizer:null},cbSave:function(t){var r=t.dialog,o={};Object.extend(o,t.cropInfo),o.shutterflyId=t.wellPicture.shutterflyId,o.cropWidth=t.cropWidth,o.cropHeight=t.cropHeight,o.nodeType=e.nodeType;var i=r.getPreviewElement();c.close(t.did);var s=Dom.get(n.photoContainer);if(s&&i){Dom.set(s,"");var a=i.firstChild;s.appendChild(i);var l=n.photoWidth/n.cropWidth;a&&(a.style.width=a.offsetWidth*l+"px",a.style.height=a.offsetHeight*l+"px",a.style.left=a.offsetLeft*l+"px",a.style.top=a.offsetTop*l+"px"),Dom.setStyle(n.clearImageId,"display",""),n.cbOnSave(o,n)}},cbChange:function(e){c.close(this.did),d._onChangePictureClick(t)},cbOnPictureLoad:function(e,t){return Math.round(r.width/r.height*100)!=Math.round(e/t*100)&&(r.width=e,r.height=t),Shr.Sfly.getBestFitBounds(r,n.cropWidth,n.cropHeight)},useGetThumbnailUrl:!Shr.B.isIE||9<=Shr.B.ieVersion})},_formatCroppedImage:function(e,t,r,n){var o=r,i=n,s=new Shr.ImageSizer(o,i,{clip:!1,noTip:!0}),a=new Shr.StringBuilder,l=a.write;if(e&&e.shutterflyId){var c=Shr.Sfly.formatCroppedImgSrc(e,o,i,e.leftOffset,e.bottomOffset,e.rightOffset,e.topOffset);s.render(l,{src:c},{})}return t?t.substitute([a.toString()]):a.toString()},_instances:[],_instanceIndex:0,_styleInitialized:!1,renderStyle:function(e){e(".addpicture-photo-cont {padding:3px; border: 1px solid #ccc; background: #fff; margin-left: 5px;}",".addpicture-photo-cont .imageCropperHole {display: block; width: 47px; height: 47px;}",".addpicture-photo-actions {position: relative; margin-left: 10px;}",".addpicture-photo-actions .photo-clear, .addpicture-photo-actions .photo-change { display: block; margin-top: 5px;}",".addpicture-photo-actions-horiz { margin-top: -15px; }",".addpicture-photo-actions-horiz .photo-clear, .addpicture-photo-actions-horiz .photo-change { display: inline-block; margin-right: 10px; }")},_addImageLink:"<a id='${addImageId}' href='' onclick='Shr.AddPictureControl._onChangePictureClick(${index}); return false;'>${addLabel}</a>",_clearImageLink:"<a id='${clearImageId}' href='' onclick='Shr.AddPictureControl._onClearPictureClick(${index}); return false;' style='display:${clearDisplay};'>${clearLabel}</a>",_emptyImage:"<a id='${addImageId}' href='' onclick='Shr.AddPictureControl._onChangePictureClick(${index}); return false;'><img class='roster-empty-image' src='"+l.imageUrl("icon_add_photo.png")+"' /></a>",_init:function(){d._styleInitialized||(Shr.StyleManager.renderStyle(d),d._styleInitialized=!0)},createControl:function(e,t){var r,n;return d._init(),r={photoFieldName:"photo",addImageId:"addPicture.addImage",clearImageId:"addPicture.clearImage",photoContainer:"addPicture.photoContainer",clearLabel:"Clear",addLabel:"Change picture",index:d._instanceIndex,cropWidth:80,cropHeight:80,imageEditorWidth:350,imageEditorHeight:300,photoWidth:47,photoHeight:47},t&&Object.extend(r,t),n=e[r.photoFieldName],r.clearDisplay=n&&n.shutterflyId?"":"none",d._instances[d._instanceIndex]=r,d._instanceIndex++,r},formatAddPhoto:function(e,t){var r=new Shr.StringBuilder,n=d.createControl(e,t),o=e[n.photoFieldName],i=t.photoContainerHtml?t.photoContainerHtml:o&&o.shutterflyId?d._formatCroppedImage(o,"",n.photoWidth,n.photoHeight):d._emptyImage.substitute(n),s=t.displayHorizontal?"addpicture-photo-actions-horiz":"addpicture-photo-actions";return r.write("<div style='width:",n.photoWidth||"","px; height:",n.photoHeight||"","px;' class='addpicture-photo-cont'>","<span id='",t.photoContainer,"'>",i,"</span>","</div>","<div class='font-sys ",s,"' style='",t.displayHorizontal?"margin-left: "+(n.photoWidth+20)+"px":"","'>","<span class='photo-clear'>",d._clearImageLink.substitute(n),"</span>","<span class='photo-change'>",d._addImageLink.substitute(n),"</span>","</div>"),r.toString()},renderHiddenInputs:function(e,t){e.renderHidden("shutterflyId",t),e.renderHidden("destWidth",0),e.renderHidden("destHeight",0),e.renderHidden("leftOffset",0),e.renderHidden("bottomOffset",0),e.renderHidden("rightOffset",0),e.renderHidden("topOffset",0)},setFormValues:function(e){var t=c.getForm(c.context);t&&(t.shutterflyId&&(t.shutterflyId.value=Shr.Sfly.getPictureId(e,!0)),t.destWidth.value=e.cropWidth,t.destHeight.value=e.cropHeight,t.leftOffset.value=e.leftOffset,t.bottomOffset.value=e.bottomOffset,t.rightOffset.value=e.rightOffset,t.topOffset.value=e.topOffset)}}),Shr.Find=(h=Shr.AR,u=Shr.A,Shr.N,p=Shr.Dialog,m={resultsHtml:"<div class=find-outputs><div class=find-outputs-2><div class=find-count id=find-count></div><div class='find-results resize-height' id=find-results></div></div>",find:function(){try{var e,t,r,n,o;e=(t=p.context.dialog).getFindArgs(),Object.propsEqual(e,t.findArgs)||(t.findArgs=e,t.hasArgs()?(r=u.createCmdXhr(t.command),n=this,o=!0,e.t=h.t,e.h=h.h,e.h2=h.h2,r.beginSend(e,function(){n._findDone(r),o=!1}),o&&this._showProgressStart()):this.showMessage(t.getEmptyMessage()))}catch(e){this.showException(e),this._showProgressEnd()}},_showProgressStart:function(){var e=p.context||{},t=p.getForm(e);Dom.disableButton(t.find),m.showMessage(Shr.HtmlImg.progress+" Searching for &quot;"+e.dialog.findArgs.text+"&quot;...")},_showProgressEnd:function(){var e=p.context||{},t=p.getForm(e);Dom.enableButton(t.find)},_findDone:function(e){try{var t=e.getCommandResponse(),r=p.context.dialog,n=t.error;if(n)this.showError((n.code?"Server Error #"+n.code+"<br/>":"")+n.message);else if(r.findResult=t.result,r.findResult&&0<r.findResult.total)r.showResults();else{var o=r.getNoneMessage?r.getNoneMessage():"No matches for '"+r.findArgs.text+"'.";this.showMessage(o)}}catch(e){this.showException(e)}this._showProgressEnd()},hideCount:function(){var e=p.context||{},t=p.getForm(e),r=Dom.getChildByClass(t,"find-count");r&&(r.style.visibility="hidden")},showCount:function(e,t,r,n,o){var i=p.context||{},s=p.getForm(i);n||(n="Shr.Find.nextPage"),o||(o="Shr.Find.prevPage");var a=new Shr.StringBuilder;a.write("<table width=100%>","<tr><td width=1px>"),1<e&&a.write("<img class=button src='",u.imageUrl("navback.gif"),"' onclick='"+o+"();' width=16 height=16 alt='Previous Page'/>"),a.write("</td><td align=center class='font-sys'>",this.formatCount(e,t,r),"</td><td width=1px>"),(t<r||-1==r)&&a.write("<img class=button src='",u.imageUrl("navforward.gif"),"' onclick='"+n+"();' width=16 height=16 alt='Next Page'/>"),a.write("</td></tr></table>");var l=Dom.getChildByClass(s,"find-count");l&&(l.innerHTML=a.toString(),l.style.visibility="visible")},showMessage:function(e){var t=p.context||{},r=p.getForm(t);this.hideCount();var n=Dom.getChildByClass(r,"find-results");Dom.set(n,"<div class='find-message font-sys'>"+e+"</div>")},showError:function(e,t){var r=p.context||{},n=p.getForm(r);t=t||"Error during search.",this.hideCount();var o=Dom.getChildByClass(n,"find-results");Dom.set(o,"<table><tr valign=top><td><img src='"+Shr.ImgSrc.warning+"' /></td><td>"+t+"<br/>"+e+"</td></tr></table>")},showException:function(e){this.showError(U.formatException(e))},showResults:function(e){var t=p.context||{},r=p.getForm(t),n=Dom.getChildByClass(r,"find-results");Dom.set(n,e)},formatCount:function(e,t,r){var n="";return e&&t&&r&&((1<e||t<r||-1==r)&&(n+=e.toN0()+" - "+t.toN0()+" of "),n+=-1==r?t.toN0()+"+":r.toCount(p.context.dialog.itemName)),n},prevPage:function(){var e=p.context.dialog;e.onPrevPage&&e.onPrevPage(),this.find()},nextPage:function(){var e=p.context.dialog;e.onNextPage&&e.onNextPage(),this.find()},renderGroup:function(e,t,r,n){var o;if(!r)return 0;n&&(m.items=[]);var i=0,s=r.groups,a=r.items,l=s&&0<s.length,c=a&&0<a.length;if(!l&&!c)return 0;if(n||(e("<div style='cursor:pointer;' onclick='Shr.Find.onFolderClick(this);'>"),Shr.CommandBar.renderImg(e,6,null,{style:{width:"19px",height:"14px",margin:"2px 0 -2px 0"}}),e(" <a href='' onclick='return false;'>",r.title,"</a></div>"),e("<div style='margin-left: 20px; display:none;'>")),0<l)for(o=0;o<s.length;o++)i+=m.renderGroup(e,t,s[o]);if(c)for(o=0;o<a.length;o++){var d=a[o],h=m.items.length;m.items[h]=d,t.renderItem(e,d,h),i++}return n||e("</div>"),i},onFolderClick:function(e){var t=e.nextSibling;Dom.toggleHidden(t)?(e.firstChild.style.backgroundPosition="-140px 0",e.firstChild.setAttribute(Shr.Atts.positionX,"-140px")):(e.firstChild.style.backgroundPosition="-120px 0",e.firstChild.setAttribute(Shr.Atts.positionX,"-120px"))}}),Shr.PermissionsPanel=function(e,t){var r=this;r._panelId=Dom.getUniqueId(),r._kind=e,r._acl=t,r._aclList=t&&t.aclList,r._count=r._aclList&&r._aclList.length||0,r.onRender=null,r.onRenderArgs=null;var n=Shr.Permissions,o=Shr.PermissionRoles;if(r._permissionLevels=[0,n.reader,n.commenter,n.author,n.editor,n.owner],r._permissionOption=[],1==e&&t){for(var i=0,s=n.nullValue,a=s;i<r._count;i++){var l=r._aclList[i];if(l.role==o.members){a=l.basePermission;break}}var c=r._aclList[r._count-1].role+1;for(c<1&&(c=1),i=0;i<5;i++)r._aclList.push({role:c+i,title:"Custom Role "+(i+1),basePermission:a,permission:s,hidden:!0})}Shr.PermissionsPanel._panels[r._panelId]=r},Object.extend(Shr.PermissionsPanel.prototype,{render:function(e){var t=this._panelId;e("<div class=dlg-content id='",t,"'>"),this._render(e),e("</div>"),e("<input type=hidden id='",t,"_count' name='acl_count' value='",this._count,"' />","<input type=hidden name='acl_changed' id='",t,"_changed' value='0' />")},_refresh:function(){var e=this._panelId,t=Dom.get(e);if(t){var r=new Shr.StringBuilder;this._render(r.write),Dom.set(t,r.toString())}},_render:function(e){var t,r,n=this,o=0,i=n._panelId,s=n._aclList,a=n._acl,l=n._kind,c=Shr.Permissions.nullValue,d=c,h=(Shr.PermissionsPanel,s&&s.length),u=c;if(e("<table cellpadding=3px class='p-panel'>","<tr class='p-panel-row-head'>","<td class='p-panel-first'><span title='Roles determine what users can do on this site.'>Role</span></td>","<td class='p-panel-second'></td>","<td><span title='Permits people to view and browse the site.'>View</span></td>","<td><span title='Permits people to add comments to the site.'>Comment</span></td>","<td><span title='Permits people to add content to the site (e.g. pictures, photo books, journal entries..)'>Contribute</span></td>","<td><span title='Permits people to edit all content on the site.'>Edit</span></td>","<td><span title='Permits people to change the site style, layout and settings.'>Customize</span></td>","</tr>"),s)for(;o<h;o++)t=s[o],0==o&&t.role==Shr.PermissionRoles.visitors&&(a.disableVisitorPermission?(e("<tr class=input-row><td class='input-g-select nowrap p-panel-first'>Visitors</td><td class='p-panel-second'></td><td colspan=5 style='text-align: center;'>Only members can access the site.</td></tr>"),t.hidden=!0):n.visitorPermission=u=t.permission==c?t.basePermission:t.permission),e("<tr class=input-row id='",i,"_",o,"_row'",t.hidden?" style='display:none;'":"","'>"),1==l&&0<t.role?e("<td nowrap class='p-panel-first'><input style='width:120px;' name='acl_",o,"_title' id='",i,"_",o,"_title' value='",t.title,"' onchange='Shr.PermissionsPanel._onTitleChanged(\"",i,'",',o,")' />"):e("<td class='input-g-select nowrap p-panel-first'>",t.title),e("</td><td class='p-panel-second'>can"),n._renderRow(e,o,t,d,u),t.permission!=c&&t.role<0&&(d=t.permission),e("</td></tr>");1==l&&(r=0<u?"Note: Anyone who knows the site address can view this site. <br />Sign-in is not required.":"Note: Visitors cannot view this site. Members must sign-in and be authenticated.",e("<tr>","<td style='text-align: left; border: none;' colspan=2>",Shr.Style.cmd('Shr.PermissionsPanel._onAddRole("'+i+'")',"Add a new role","ti-icon-new ti-add"),"</td>","<td style='text-align: left; border: none;color: #FF6600; padding-top:5px;' colspan='5' class='font-sys'>",r,"</td>","</tr>")),e("</table>"),3!=l&&4!=l||e("<div style='margin:5px 0;'>Note: ",3==l?"Pages":"Sections"," are defaulted to the permissions for the ",3==l?"site":"page",". However, you can override them with permissions specific to this ",3==l?"page":"section",".","</div>"),3==l&&e("</div>"),Shr.L.isFunction(n.onRender)&&n.onRender.apply(n,n.onRenderArgs)},_renderRow:function(e,t,r,n,o){var i,s,a,l,c,d=0,h=1,u=0,p=this._panelId,m=Shr.Permissions,g=m.nullValue,f=r.role==Shr.PermissionRoles.visitors,_=n==g?r.basePermission:n,S=r.permission;for(this._permissionOption[t]=[],S!=g&&S<o&&(r.permission=S=o),S==_&&(S=g);d<this._permissionLevels.length;d++)(l=i=this._permissionLevels[d])==_&&(l=g),S==(this._permissionOption[t][d]=l)&&(e("<input type='hidden' name='",c="acl_"+t+"_permission","' id='",c,"' value='",l,"' />"),u=i);for(e("<input type=hidden name='acl_",t,"_","role' value='",r.role,"' />","</td>"),s=a=!1,i=null;h<this._permissionLevels.length;h++){if(i=this._permissionLevels[h],f&&i==m.editor){e("<td></td><td></td>");break}a=(s=i<=o&&!f)||0!=u&&i<=u,this._renderCell(e,t,h,p,a,s)}return S},_renderCell:function(e,t,r,n,o,i){e("<td class='",o?"selected":"","'>","<img src='",Shr.ImgSrc.blank,"' class='",i?"p-panel-checkmark":"p-panel-checkbox",o?" checked":"","' ",i?"":" onclick='Shr.PermissionsPanel._onPermissionChanged(this, \""+n+'",'+t+","+r+","+!!o+")'"," />","</td>")}}),Object.extend(Shr.PermissionsPanel,{_panels:{},_onTitleChanged:function(e,t){var r,n=Shr.PermissionsPanel._panels[e];(r=Dom.get(e+"_"+t+"_title"))&&(n._aclList[t].title=r.value,Dom.setValue(e+"_changed",1))},_onPermissionChanged:function(e,t,r,n,o){var i,s=Shr.PermissionsPanel._panels[t],a=s._aclList[r],l=s._permissionOption[r];i=o?l[n-1]:l[n],a.permission=parseInt(i,10),s._refresh(),Dom.setValue(t+"_changed",1)},_onAddRole:function(e){var t=Shr.PermissionsPanel._panels[e];if(t){var r=t._count;t._count++;var n=Dom.get(e+"_count");n&&(n.value=t._count,t._aclList[r].hidden=!1,n=Dom.get(e+"_"+r+"_row"),Dom.show(n))}}}),Shr.GroupSite={membershipTypeChoices:{0:"Closed <span class=helpLabel> - Members must be invited</span>",1:"Restricted <span class=helpLabel> - Members may be invited or may request to join</span>",2:"Open <span class=helpLabel> - Anyone can join</span>"},inviteTypeChoices:{"-1":"Members <span class=helpLabel> - Any member can add new members</span>","-4":"Owners <span class=helpLabel> - Only owners of the site can add new members</span>"},emailFromChoices:{"-1":"Members <span class=helpLabel> - Any member can email the site members</span>","-4":"Owners <span class=helpLabel> - Only owners of the site can email site members</span>"},saveChoices:{"-2":"Everyone","-1":"All members","-4":"Owners","-9":"No one"},shareOutChoices:{"-2":"Everyone","-1":"All members","-10":"Owners and Contributor","-4":"Owners","-9":"No one"}}},function(e,t){var r,n,o,i,s,a,l,c,d;Shr.Dialogs.SignIn=(r=Shr.C,n=Shr.P,o=Shr.S,Shr.B,i=Shr.A,Shr.U,s=Shr.Dialog,a={title:"Sign in",width:400,inlineWidth:940,analyticsName:"SignIn",formAction:i.wwwSSL+"nonVisualSignin/start.sfly",renderStyle:function(e){e(".signin-error {padding-bottom: 10px;}",".siErrHeader {padding-bottom: 10px;}",".siErrFooter {padding-bottom: 10px;}",".siHeaderCtx {padding-bottom: 22px;}",".siRememberMe {margin-left: -5px; margin-bottom: 10px;}",".ie .siRememberMe {margin-left: -2px; }",".siErrors {background: url(",i.imageUrl("universalpicker/alert-sm.png"),") no-repeat left top; padding: 0 0 0 26px; margin-left: 9px;}",".siErrorsHead {color: #333; font-weight: bold; }",".siErrors .errorList LI {color: #CC0000; margin: 5px 0;}",".siErrors .errorList {padding: 7px 0 0px 0px; margin-left: 15px;}",".dlg-inline .siErrors {margin-left: 0px;}",".dlgErr-userName .userName .input-l-text LABEL, ",".dlgErr-password .password .input-l-password LABEL {color: #CC0000;;}",".dlg-inline .signin-error {width: 400px;}",".signin-error {margin-left: 10px;}","#loginForm .input-row label {padding-right: 5px;}","#signin-form a.showLink:link, #signin-form a.showLink:visited, #loginForm a.showLink:link, #signin-form a.showLink:visited {text-decoration: none;}","#signin-form a.showLink:hover, #loginForm a.showLink:hover {text-decoration: underline;}","#loginForm .input-l-password label, #loginForm .input-l-text label {font-weight: bold;}",".wait-wheel {background-color: #fff; padding-right: 10px;}","#signin-form .dlg-content {position: relative; zoom: 1;}",".signin-instructions {float: left; margin: 0 0 30px 100px; width: 350px;}",".signin-instructions-steps {padding: 0 0 0 0; margin-left: 15px;}",".instructions-bold {font-weight: bold;}",".signin-instructions-title {color: #ffa900; display: block; font-size: 15px; margin: 0 0 15px; font-weight: bold;}",".signin-instructions .signin-cms-outer {border: solid 1px #ccccae; display: inline-block;}",".signin-instructions .signin-cms-inner {background-color: #f9f9f2; color: #666; margin: 5px; padding: 15px;}",".signin-instructions-step {padding-top: 5px;}",".signin-instructions-prefix {padding-bottom: 10px; display: inline-block;}","#signInButtons {margin: 30px 0 15px -6px;}",".signin-join-link {padding: 10px 0 0;}",".signin-forgot-password {margin-left: -4px; font-size: 11px;}",".signin-join-link {}");var t=s.context;t&&t.wellOvrrdSignIn&&e(".input-grid{float:left;}")},getWidth:function(e){return e&&e.isInline?900:a.width},renderContent:function(e,t){var r=new Shr.StringBuilder,s=t.cid||i.cids.header,a=t.email||Shr.Sfly.getEmail();t.context&&(t.context=t.context.replace(/sign up/,"sign in"));var l=t.context||"add comments, order prints and create photo products",c="Sign in to "+(t.ovrrdContext||l)+".";if(t.isInline){var h=t.siTitle||"Sign in to Shutterfly to see this site";t.renderInlineTitle?t.renderInlineTitle(e):e("<div id='si-title' class='section-title' style='padding-bottom: 15px;'>"+h+"</div>"),c=t.wellOvrrdSignIn?"":"<div class='siHeaderCtx'>${0}</div>".substitute([t.siContext||t.context]),n.analyticsName="signinpage"}e("<div id='signin-progress' style='display:${0}; text-align: center; margin: 30px;'>${1} Signing in...</div><div id='signin-form' style='display:${2};'><div class='dlg-content siHeader'>${3}</div>".substitute([t.submit?"":"none",Shr.HtmlImg.progress,t.submit?"none":"",c]),"<div class='siErrors' style='display: none;' id='signin-error'></div>");var u=new Shr.InputWriter(e);u.renderStart(!0),t.tableHeaderRow&&u.renderContent(null,t.tableHeaderRow),u.renderText(t.wrapLabel?"":"Email",{name:"userName",style:{width:"250px"},autocomplete:"off",value:a,type:"email"},t.wrapLabel?{prefix:"<div class='wrap-label'>Email:</div>"}:{}),u.renderCheckbox(null,{name:"rememberUserName",checked:!0,tabIndex:-1},{label:"Remember my email address",prefix:"<div class='siRememberMe'>",suffix:"</div>"}),u.renderText(t.wrapLabel?"":"Password",{name:"password",style:{width:"250px"},type:"password"},t.wrapLabel?{prefix:"<div class='wrap-label'>Password:</div>"}:{}),r.write("<div class='signin-forgot-password'>",Shr.Html.formatTag("a",{className:"showLink",onclick:"return Shr.Dialogs.SignIn._forgotPassword(this)",target:t.forgotPasswordTarget},"Forgot password?"),"</div>"),r.write("<div id='signInButtons'>","<img id='signInWaitWheel' class='wait-wheel' style='display: none;' alt='Please wait' src='",i.imageUrl("universalpicker/waitwheel_94x25.gif"),"'/>"),t.renderButtons?t.renderButtons(r.write,!0):r.write(Shr.SflyButton.format("Sign in",{type:"submit",id:"go"})),r.write("</div>"),u.renderContent(null,r.toString()),r.clear(),r.write("<div class='signin-join-link'>",(t.signupText||"Not a member?")+" <a href='' class='showLink' onclick='Shr.Dialogs.SignIn._signUp(${0});return false;'>Sign up</a>".substitute([t.did]),"</div>"),t.isInline?(t.wellOvrrdSignIn?(u.renderEnd(!1),d(e,t)):u.renderEnd(!0),t.hideFooter||e("<div style='margin-top: 30px;' class='signin-footer-cont'>","<div class='section-bevel-dark' style='border-style:solid; font-size: 0px;'>","<div class='section-bevel-light'>&nbsp;</div>","</div>","</div>"),e(r.toString())):(u.renderWideRow(r.toString()),u.renderEnd(!0)),e("</div>"),t.noCid||(u.renderHidden("cid",s),u.renderHidden("scid",o.collectionKey)),t.args?Shr.L.forEach(t.args,function(e,t){u.renderHidden(t,e)}):u.renderHidden("re",i.appCmd+"dialogresult")},onLoad:function(e,t){if(t.submit)return e.userName.value=t.userNameEl.value,e.password.value=t.passwordEl.value,e.rememberUserName.value=t.rememberUserName,void e.submit();e.userName.value?Dom.setInputFocus(e.password):Dom.setInputFocus(e.userName)},onValidate:function(e,t,r){e.header=l,e.footer=c,e.validateRequired("Email",t.userName,"Enter a valid email address."),e.validateRequired("Password",t.password,"Enter your password.")},setError:function(e){var t=Dom.get("signin-error");Dom.hide(t),e&&(Dom.set(t,l+e+c),Dom.show(t))},renderValidationError:function(e){var t=Dom.get("signin-error"),r=e.vc,n=e.d,o=r.errors.join("</li><li>");Dom.set(t,r.header+o+r.footer,n.getTitle?n.getTitle(e.c):n.title||"Shutterfly",r.field),Dom.show(t)},_showProgress:function(e){var t=Dom.get("signInWaitWheel");t&&(e?(Dom.show(t),Dom.hide(t.nextSibling)):(Dom.show("signin-form"),Dom.hide("signin-progress"),Dom.hide(t),Dom.show(t.nextSibling)))},onSubmit:function(e,t){return a._showProgress(!0),!0},onResponse:function(e,t){var r=s.getForm(t),n=!1,o=e.result;if(a.setError(),1==o){var i=Shr.WindowEx.analytics;i&&(i.events="event2");var l=t.onload||{};l.requireSignIn=!0,Shr.WindowState.set("onload",l,e.visitorId),t&&t.signInCallback?t.signInCallback(t.signInCallbackArgs):Shr.N.reload(),n=!1}else-1==o?(a._showProgress(!1),Dom.setInputFocus(r.password),a.setError("Sorry, the information you have given does not match our records. Please try again.")):(a._showProgress(!1),a.setError("An error occured while attempting to sign in.  Please try again."),a._showProgress());return n},onClose:function(e){return 1!=e.result&&e.onCancel&&e.onCancel(e),!0},_forgotPassword:function(e){var t=Dom.getParentByTag(e,"FORM");return!!t&&(e.href=r.forgotPassword(t.userName.value,!0),!0)},_signUp:function(e){var t=s.getContext(e);t&&t.isInline?s.renderInline("SignUp",t):(s.close(e,-1),r.signUp(t)),t&&t.onSwitch&&t.onSwitch(!0)}},l="<h6 class='suErrorsHead'>Please correct the following errors, then resubmit the form:</h6><ul class='errorList'><li>",c="</li></ul><div clss='suErrorsFooter'></div>",d=function(e,t){e(t.wellOvrrdSignIn)},a)},function(e,t){var r,n,o,i,s,a,l,c,d,h,u,p;Shr.Dialogs.SignUp=(r=Shr.C,n=Shr.P,o=Shr.S,Shr.B,i=Shr.A,s=Shr.N,Shr.L,a=Shr.U,l=Shr.FBC,c=Shr.Dialog,"signupfbconnect","signupfbsignedin",d={title:"Sign up",width:670,analyticsName:"SignUp",formAction:"https://"+i.www.substring(0<=i.www.indexOf("https:")?8:7)+"nonVisualSignup/start.sfly",_showCMS:!0,_showFBSignin:!1,_showFBContent:!1,renderStyle:function(e){e("",".dlg-inline .suErrors {margin-left: 0px;}",".suErrors {background: url(",i.imageUrl("alert-sm.png"),") no-repeat left top; padding: 0 0 0 26px; margin-left: 9px;}",".suErrorsHead {color: #333; font-weight: bold; }",".suErrors .errorList LI {color: #CC0000; margin: 5px 0;}",".suErrors .errorList {padding: 7px 0 0px 0px; margin-left: 15px;}",".dlgErr-firstName .firstName LABEL",", .dlgErr-firstName .firstName LABEL",", .dlgErr-lastName .lastName LABEL",", .dlgErr-lastName .lastName LABEL",", .dlgErr-userName .userName LABEL",", .dlgErr-userName .userName LABEL",", .dlgErr-password .password LABEL",", .dlgErr-password .password LABEL","{color: #CC0000;}",".dlg-inline .signup-table {}",".wrap-label {margin-bottom: 3px; margin-top: 11px; font-weight: bold; font-size: 11px;}",".signup-form {padding: 10px 0 0 0;}",".dlg-inline .signup-form {padding: 0;}",".signup-form a.showLink:link, .signup-form a.showLink:visited {text-decoration: none;}",".signup-form a.showLink:hover {text-decoration: underline;}",".signup-table {position: relative;}",".signup-table .input-l-password, .signup-table .input-l-text {padding: 0; border-spacing: 0; margin: 0;}",".wait-wheel {background-color: #fff; padding-right: 10px;}",".signup-right {position: absolute; top: 32px; left: 260px; margin-right: 10px;}",".signup-instructions-title {color: #ffa900; display: block; font-size: 15px; margin: 0 0 15px; font-weight: bold;}",".signup-right .signup-cms-outer {border: solid 1px #ccccae; display: inline-block;}",".signup-right .signup-cms-inner {background-color: #f9f9f2; color: #666; margin: 5px; padding: 15px;}",".signup-right .signup-fb-outer {border: solid 1px #c2c2c2; display: inline-block; background-color: #fff;}",".signup-right .signup-fb-inner {background-color: #f1f6ff; color: #636766; margin: 0px; padding: 10px;}",".signup-cms, .signup-fb {font-size: 11px;}",".signup-fb {font-size: 11px; margin: -10px 25px 15px 15px; padding: 10px; border: solid 1px #c2c2c2; background-color: #f0f5ff;}",".signup-cms-inline {font-size: 13px;}",".signup-cms p {font-size: 13px; margin: 0; margin-bottom: 15px;}",".signup-cms-inline p {font-size: 15px; margin: 0; margin-bottom: 15px;}",".signup-right .email-me {margin-left: -6px; font-size: 11px; line-height: 16px; margin-top: 15px;}",".signup-checkboxes .email-me {margin-top: 14px; }",".signup-checkboxes {font-size: 11px; margin-left: -5px;}",".ie .signup-checkboxes {margin-left: -2px;}",".signup-signin {font-size: 11px;}",".fb-signin {float: right; margin-right: 15px;}",".dlg-inline .signup-signin {float: none; margin: 0;}",".signup-instructions-steps {padding: 0; margin-left: 15px;}",".signup-instructions-step {padding-top: 5px;}",".signup-instructions-prefix {padding-bottom: 10px; display: inline-block;}",".signup-form .dlgShowInline .input-l-password, .signup-form .dlgShowInline .input-l-text {padding-top: 5px; }",".signup-form .dlgShowInline .input-v-text, .signup-form .dlgShowInline .input-v-email {padding-bottom: 16px;}",".signup-form .dlgShowInline .wrap-label {display: none;}",".signup-form .dlgShowWrap .inline-label {display: none;}")},getWidth:function(e){return e&&e.isInline?900:d.width},_getPartnerComplete:function(e){if(!e.error){var t=e.result,r=c.context,n=c.getForm(r);n.pid.value=t.partnerId||"",n.psid.value=t.partnerSubId||""}},_getPartner:function(){r.beginExec("sites/getsignuppartners",{siteId:o.id},d._getPartnerComplete)},renderContent:function(e,t){var r,s,l,c=new Shr.StringBuilder,h=new Shr.InputWriter(e);t.isInline&&(n.analyticsName="signuppage"),a.fbDisabled||(t.showFBSignin&&!a.fbid?(d._showFBSignin=!0,d.analyticsName="signupfbconnect"):a.fbid&&(d.analyticsName="signupfbsignedin",d._showFBContent=!0));var u=i.cids[o.category],m=i.pids[o.category];l=t.cid?t.cid:u||(Shr.Sfly.cid?Shr.Sfly.cid:i.cids.header),t.pid?(r=t.pid,s=t.psid):o.our3?(r="OUR3",s="SHR"):m?(r=m,s="SHR"):Shr.Sfly.pid&&(r=Shr.Sfly.pid,s=Shr.Sfly.psid);var g=t.email||(t.noEmail?"":Shr.Sfly.getEmail()),f=t.firstName||"",_=t.lastName||"";t.context&&(t.context=t.context.replace(/sign in/,"sign up")),d._onload=t.onload||{};var S="<b>Join Shutterfly to ${0}</b>".substitute([t.context||"enjoy exclusive benefits"]);d._showFBContent&&Shr.User&&Shr.User.formatImage&&(S="<div style='position: absolute; margin: 8px 0 0 55px;'><b>Welcome ${1}!</b><div style='margin-top: 10px;'>Create your free Shutterfly account.</div></div>${0}".substitute([Shr.User.formatImage(a,{linked:!1,size:48}),Shr.User.formatLink(a,{linked:!1,firstnameonly:!0})]));var b="<div class='email-me'>"+(t.newTerms?Shr.Html.formatTag("input",{name:"receivePromos",type:"hidden",value:"on"}):Shr.Html.formatCheckbox({name:"receivePromos",checked:!0},{label:t.emailMe||"Yes, please send me offers and info on new products and services."}))+"</div>",y="<div class='signup-signin ${0}'>"+(void 0!==t.signinText?t.signinText:"Already a Shutterfly member?")+" <a href='' class='showLink' onclick='Shr.Dialogs.SignUp._signIn(${1});return false;'>Sign in</a></div>";t.isInline&&!t.hideHeader&&(e("<div id='su-title' class='section-title' style='padding-bottom: 15px;'>"+(t.suTitle||"Join Shutterfly to see this site")+"</div>"),c.write("<div>${0}</div>".substitute([t.suContext||t.context]),"<div style='margin: 15px 0 5px;' class='signup-header-bevel'>","<div class='section-bevel-dark' style='border-style:solid; font-size: 0px;'>","<div class='section-bevel-light'>&nbsp;</div>","</div>","</div>"),S=c.toString(),c.clear());var P=d.getWidth(t)-290,v="signup-cms"+(t.isInline?"-inline":"");e("<div id='",t.did,".signup-progress' style='display:none; text-align: center; margin: 30px;'>",Shr.HtmlImg.progress," Signing up...","</div>","<div id='",t.did,".signup-form' class='signup-form'>"),t.hideHeader||e("<div class='dlg-content signup-header'>",d._showFBSignin&&!t.isInline?y.substitute(["fb-signin",t.did]):"",S,"</div>"),e("<div class='suErrors' style='display: none;' id='signup-error'></div>","<div class='signup-table ",t.showInline?"dlgShowInline":"dlgShowWrap","'>"),t.wellOvrrdSignUp?p(e,t):t.hideCms||e("<div id='",t.did,".signup-right' class='signup-right' style='display: none; width: ",P,"px;'>","<span class='signup-cms-outer'>","<div class='signup-cms-inner'>","<div id='",t.did,".signup-cms' class='",v,"'></div>",b,"</div>","</span>","</div>"),h.renderStart(!0),h.renderText("<span class='inline-label'>First name</span>",{name:"firstName",value:f,style:{width:"200px"},maxLength:16},{prefix:"<div class='wrap-label'>First name:</div>",hideColon:!t.showInline&&!t.showColon}),h.renderText("<span class='inline-label'>Last name</span>",{name:"lastName",value:_,style:{width:"200px"},maxLength:16},{prefix:"<div class='wrap-label'>Last name:</div>",hideColon:!t.showInline&&!t.showColon}),h.renderText("<span class='inline-label'>Email</span>",{name:"userName",value:g,style:{width:"200px"},type:"email"},{prefix:"<div class='wrap-label'>Email address:</div>",hideColon:!t.showInline&&!t.showColon}),h.renderText("<span class='inline-label'>Confirm Email</span>",{name:"userName2",value:"",style:{width:"200px"},type:"email"},{prefix:"<div class='wrap-label'>Confirm Email address:</div>",hideColon:!t.showInline&&!t.showColon}),h.renderText("<span class='inline-label'>Password</span>",{name:"password",style:{width:"200px"},type:"password",defaulttext:"(4 - 10 characters)"},{prefix:"<div class='wrap-label'>Password:</div>",suffix:"<br/><div class=input-help>(4 - 10 characters)</div>",hideColon:!t.showInline&&!t.showColon}),h.renderText("<span class='inline-label'>Re-enter password</span>",{id:"password2",style:{width:"200px"},type:"password"},{prefix:"<div class='wrap-label'>Re-enter password:</div>",hideColon:!t.showInline&&!t.showColon}),c.write("<div style='margin-top: 11px; ${0}' class='signup-checkboxes'>".substitute([t.newTerms?"font-size: 13px;":""]),"<div>",t.newTerms?Shr.Html.formatTag("input",{name:"terms",type:"hidden",value:"on"})+Shr.Html.formatTag("div",{},"By clicking Sign up, you agree to Shutterfly's<br/>"+Shr.Html.formatTag("a",{href:"",onclick:function(){return window.openPopup("http://shutterfly-inc.com/terms.html"),!1},style:{color:"#369",cursor:"pointer"}},"Terms of Use")+" and "+Shr.Html.formatTag("a",{href:"",onclick:function(){return window.openPopup("http://shutterfly-inc.com/privacy.html"),!1},style:{color:"#369",cursor:"pointer"}},"Privacy Policy")+"."):Shr.Html.formatCheckbox({name:"terms"},{label:"Yes, I accept the Shutterfly <a href='' onclick='window.openPopup(\""+i.www+"help/pop/terms.jsp?index=no\");return false;'>terms and conditions</a>."}),t.hideCms?b:"","</div>","</div>"),h.renderContent("",c.toString(),{type:"text"}),c.clear(),c.write("<div style='margin: 10px 0;' class='signup-btn-join'>","<img id='",t.did,".waitWheel' class='wait-wheel' style='display: none;' alt='Please wait' src='",i.imageUrl("waitwheel_94x25.gif"),"'/>"),t.renderButtons?t.renderButtons(c.write):c.write(Shr.SflyButton.format("Join now",{type:"submit",id:"go"})),c.write("</div>"),!t.isInline&&d._showFBSignin||c.write(y.substitute(["",t.did])),h.renderContent("",c.toString(),{type:"text"}),c.clear(),e("</div>"),r&&h.renderHidden("pid",r),s&&h.renderHidden("psid",s),h.renderEnd(!0),e("<div id='",t.did,".signup-fb'></div>"),t.noCid||(h.renderHidden("cid",l),h.renderHidden("scid",o.collectionKey)),t.args?Shr.L.forEach(t.args,function(e,t){h.renderHidden(t,e)}):h.renderHidden("re",i.appCmd+"dialogresult"),o.bsa&&(h.renderHidden("pid",o.pid),h.renderHidden("psid",o.psid)),e("</div>")},onLoad:function(e,t){Dom.setInputFocus(e.firstName),d._showCMS&&!t.hideCms&&(d._getHardcodedCmsValues(),d._showFBContent&&setTimeout(function(){l.getUserInfo(d._onFBUserInfoComplete),l.refreshElement(e)},0)),d._showFBSignin&&setTimeout(d._setFBSignin,0)},_onFBUserInfoComplete:function(e){if(e){var t=c.getForm(c.context);e.first_name&&t.firstName&&!t.firstName.value&&(t.firstName.value=e.first_name),e.last_name&&t.lastName&&!t.lastName.value&&(t.lastName.value=e.last_name)}},_onFBLogin:function(){var e=c.context||{};if(c.close(e.did),console.log("****************** FB DONE *************"),a.fbid){var t=d._onload||{};t.requireSignIn=!1,Shr.WindowState.set("onload",t),i.Log({ModuleName:"user",EventName:"link",uid:a.id,visitorId:a.visitorId,collectionId:o.collectionKey,applicationId:l.appId,externalId:a.fbid})}s.reload()},_setFBSignin:function(){var e=c.context,t=Dom.get(e.did+".signup-fb");t&&(Dom.set(t,"<div class='signup-fb'>Or you can sign in with your Facebook account to leave a comment.<span style='margin-left: 10px;'><fb:login-button autologoutlink='false' onlogin='Shr.Dialogs.SignUp._onFBLogin()' v='2' size='medium' length='long'></fb:login-button></span></div>"),l.refreshElement(t))},_onGetCmsComplete:function(e){d._cmsValues=e,d._cmsValues._loaded=!0;var t=c.context,r=Dom.get(t.did+".signup-cms");r&&(Dom.set(r,d._cmsValues.prospect_signup||""),Dom.show(t.did+".signup-right"))},_cmsValues:{_pageIdentifier:"site_signup",_loaded:!1,prospect_signup:"&nbsp;"},_getHardcodedCmsValues:function(){d._cmsValues=Object.extend(d._cmsValues,{prospect_signup:'<p style="color: rgb(255, 169, 0);"><b>Benefits of a Free Shutterfly Membership</b></p>\n<div style="margin-left: -22px;"><ul style="line-height: 20px;">\n<li>Share your pictures and videos with friends and family</li>\n<li>Create your own free website</li>\n<li>Securely store your images for a lifetime-at no cost</li>\n<li>50 free 4x6 prints</li>\n</ul></div>\n\n\n'}),d._onGetCmsComplete(d._cmsValues)},onValidate:function(e,t,r){e.header=h,e.footer=u,e.validateRequired("First name",t.firstName,"Enter a first name for this account."),e.validateRequired("Last name",t.lastName,"Enter a last name for this account."),d._validateEmail(t.userName.value)||e.addError("Enter a valid email address.",t.userName),t.userName.value!=t.userName2.value&&e.addError("The email you entered doesn't match. Please try again.",t.userName2),e.validateLength("Password",t.password,10,6,"Enter a password from ${min} to ${max} characters long with no spaces."),t.password.value!=t.password2.value&&e.addError("The two passwords you entered did not match. Please re-enter your password.",t.password),t.terms.checked||r.newTerms||e.addError("Please review and accept the Terms and Conditions.",t.terms),e.errors&&r.resizeOnError&&(Dom.get(r.resizeOnError).style.height=r.errorHeight)},renderValidationError:function(e){var t=Dom.get(e&&e.div)||Dom.get("signup-error"),r=e&&e.vc||{header:"",footer:""},n=r&&r.errors.join("</li><li>");Dom.set(t,r.header+n+r.footer),Dom.show(t)},_validateEmail:function(e){return Shr.Sfly.validateEmail(e)},_showProgress:function(e){var t=c.context,r=Dom.get(t.did+".waitWheel");r&&(e?(Dom.show(r),Dom.hide(r.nextSibling)):(Dom.hide(r),Dom.show(r.nextSibling),Dom.show(t.did+".signup-form"),Dom.hide(t.did+".signup-progress")))},_signIn:function(e){var t=c.getContext(e);t&&t.isInline?c.renderInline("SignIn",t):(c.close(e,-1),r.signIn(t)),t&&t.onSwitch&&t.onSwitch(!1)},onSubmit:function(e,t){return Shr.Dialogs.SignUp._showProgress(!0),!0},onClose:function(e){return 1!=e.result&&e.onCancel&&e.onCancel(e),!0},onResponse:function(e,t){var r=!1,n=e.result;if(1==n){var o=Shr.WindowEx.analytics;if(o){o.events="event3";try{o.t()}catch(e){}}var i=t.onload||{};i.requireSignIn=!0,Shr.WindowState.set("onload",i,e.visitorId),t&&t.signInCallback?t.signInCallback(t.signInCallbackArgs):s.reload(),r=!0}else-1==n?window.setTimeout(function(){alert("This email address already exists in our system - please use another.")},0):-2==n?window.setTimeout(function(){alert("One of more field values were not specified.  All fields are required.")},0):-3==n?(s.reload(),r=!0):window.setTimeout(function(){alert("An error occured while attempting to sign up.  Please try again.")},0);return r||Shr.Dialogs.SignUp._showProgress(!1),r}},h="<h6 class='suErrorsHead'>Please correct the following errors, then resubmit the form:</h6><ul class='errorList'><li>",u="</li></ul><div clss='suErrorsFooter'></div>",p=function(e,t){e(t.wellOvrrdSignUp)},d)}]);